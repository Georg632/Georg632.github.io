import{a as lo,f as zt,g as de,h as Rt,k as ho}from"./chunk-2HOMP6LZ.js";import{a as po,b as co,c as wo,d as vo,e as go,f as lt,g as uo,h as ko,i as xo,k as Nt}from"./chunk-3NJLW2KD.js";import{$a as it,A as Ee,Aa as Vt,B as xt,Ba as St,Bb as H,C as et,Ca as B,Cb as st,D as ot,Da as g,Ea as k,F as G,Fa as E,G as rt,Hb as Ye,I as y,Ib as Ot,J as a,Ja as Ne,Jb as Qe,Ka as X,Kb as Je,L as mt,La as R,M as S,Ma as x,N as D,Na as C,Oa as I,Pa as V,Q as U,T as ne,Ta as Ze,U as w,Ua as ae,Va as Dt,Wa as nt,Xa as Lt,Xb as he,Y as Oe,Ya as c,Z as L,Za as O,Zb as to,_ as ie,_a as Mt,_b as eo,a as Te,aa as Bt,ab as It,ac as oo,bb as Tt,bc as ro,cb as Pt,d as N,db as Ue,dc as h,ea as m,eb as Ge,ec as z,fa as jt,fb as qe,fc as no,ga as ze,gb as We,gc as at,h as tt,ha as Ht,hb as _,hc as io,i as Z,ib as Ke,ic as so,j as Pe,ja as bt,k as oe,kb as Ft,la as M,lb as Et,lc as ao,na as d,nb as b,oa as se,ob as l,pa as F,pb as v,q as gt,qa as At,qb as T,s as ut,sb as $e,t as Ct,tb as P,u as re,ub as s,v as Fe,vb as le,w as kt,wa as A,wb as Xe,xa as q,xb as Y,ya as W,za as Re}from"./chunk-MVQCNL4J.js";import{a as j,b as vt}from"./chunk-BUCGFPOZ.js";var Bn=new y("Ng Glyph Config");var jn=new y("NgGlyphsToken");function Yo(o){return o==null?"":/^\d+$/.test(o)?`${o}px`:o}var Qo=new y("Ng Icon Pre Processor"),Jo=new y("Ng Icon Post Processor");function tr(){return a(Qo,{optional:!0})??(o=>o)}function er(){return a(Jo,{optional:!0})??(()=>{})}var or=new y("Ng Icon Logger"),pe=class{log(n){console.log(n)}warn(n){console.warn(n)}error(n){console.error(n)}};function rr(){return a(or,{optional:!0})??new pe}var nr=new y("Ng Icon Config");function ir(){return a(nr,{optional:!0})??{}}var sr=new y("Ng Icon Loader Token");var ar=new y("Ng Icon Cache Token");function lr(){return a(sr,{optional:!0})}function hr(){return a(ar,{optional:!0})}function K(o){return[{provide:ce,useFactory:(n=a(ce,{optional:!0,skipSelf:!0}))=>j(j({},n?.reduce((e,t)=>j(j({},e),t),{})),o),multi:!0}]}var ce=new y("Icons Token");function dr(){return a(ce,{optional:!0})??[]}function pr(o){return typeof o=="string"?Promise.resolve(o):Pe(o)?o.toPromise():o}function cr(o){return o.replace(/([^a-zA-Z0-9])+(.)?/g,(n,e,t)=>t?t.toUpperCase():"").replace(/[^a-zA-Z\d]/g,"").replace(/^([A-Z])/,n=>n.toLowerCase())}var wr=0,ht=(()=>{let n=class n{constructor(){this.config=ir(),this.icons=dr(),this.loader=lr(),this.cache=hr(),this.preProcessor=tr(),this.postProcessor=er(),this.injector=a(U),this.renderer=a(Ht),this.platform=a(Bt),this.elementRef=a(L),this.uniqueId=wr++,this.logger=rr(),this.name=s(),this.svg=s(),this.size=s(this.config.size,{transform:Yo}),this.strokeWidth=s(this.config.strokeWidth),this.color=s(this.config.color),v(()=>this.updateIcon()),a(new $e("aria-hidden"),{optional:!0})||this.elementRef.nativeElement.setAttribute("aria-hidden","true")}ngOnDestroy(){this.svgElement=void 0}async updateIcon(){let t=this.name(),r=this.svg();if(r!==void 0){this.setSvg(r);return}if(t===void 0)return;let i=cr(t);for(let p of[...this.icons].reverse())if(p[i]){this.setSvg(p[i]);return}if(this.loader){let p=await this.requestIconFromLoader(t);if(p!==null){this.setSvg(p);return}}this.logger.warn(`No icon named ${t} was found. You may need to import it using the withIcons function.`)}setSvg(t){if(Je(this.platform)){this.elementRef.nativeElement.innerHTML=t,this.elementRef.nativeElement.setAttribute("data-ng-icon-ssr","");return}if(this.elementRef.nativeElement.hasAttribute("data-ng-icon-ssr")&&(this.elementRef.nativeElement.removeAttribute("data-ng-icon-ssr"),this.svgElement=this.elementRef.nativeElement.querySelector("svg")??void 0,this.elementRef.nativeElement.innerHTML===t)||(this.svgElement&&this.renderer.removeChild(this.elementRef.nativeElement,this.svgElement),t===""))return;let r=this.renderer.createElement("template");t=this.replaceIds(t),this.renderer.setProperty(r,"innerHTML",this.preProcessor(t)),this.svgElement=r.content.firstElementChild,this.postProcessor(this.svgElement),this.renderer.appendChild(this.elementRef.nativeElement,this.svgElement)}replaceIds(t){if(!t.includes("ID_PLACEHOLDER_"))return t;let r=/ID_PLACEHOLDER_(\d+)/g,i=new Map,p=new Set(t.match(r));if(p===null)return t;for(let f of p){let J=f.replace("ID_PLACEHOLDER_",""),pt=`ng-icon-${this.uniqueId}-${i.size}`;i.set(J,pt),t=t.replace(new RegExp(f,"g"),pt)}return t}requestIconFromLoader(t){return new Promise(r=>{mt(this.injector,async()=>{if(this.cache){let f=this.cache.get(t);if(typeof f=="string"){r(f);return}if(f instanceof Promise){let J=await f;r(J);return}}let i=pr(this.loader(t));this.cache?.set(t,i);let p=await i;this.cache?.set(t,p),r(p)})})}};n.\u0275fac=function(r){return new(r||n)},n.\u0275cmp=M({type:n,selectors:[["ng-icon"]],hostAttrs:["role","img"],hostVars:6,hostBindings:function(r,i){r&2&&nt("--ng-icon__stroke-width",i.strokeWidth())("--ng-icon__size",i.size())("--ng-icon__color",i.color())},inputs:{name:[1,"name"],svg:[1,"svg"],size:[1,"size"],strokeWidth:[1,"strokeWidth"],color:[1,"color"]},decls:0,vars:0,template:function(r,i){},styles:["[_nghost-%COMP%]{display:inline-block;width:var(--ng-icon__size, 1em);height:var(--ng-icon__size, 1em);line-height:initial;vertical-align:initial;overflow:hidden}[_nghost-%COMP%]     svg{width:inherit;height:inherit;vertical-align:inherit}@layer ng-icon{[_nghost-%COMP%]{color:var(--ng-icon__color, currentColor)}}"],changeDetection:0});let o=n;return o})();var Mo='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" style="stroke-width:var(--ng-icon__stroke-width, 2)"><path d="m6 9 6 6 6-6"></path></svg>';var _o='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" style="stroke-width:var(--ng-icon__stroke-width, 2)"><circle cx="12" cy="12" r="10"></circle><path d="m15 9-6 6"></path><path d="m9 9 6 6"></path></svg>';var yo='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" style="stroke-width:var(--ng-icon__stroke-width, 2)"><path d="M12 2v4"></path><path d="m16.2 7.8 2.9-2.9"></path><path d="M18 12h4"></path><path d="m16.2 16.2 2.9 2.9"></path><path d="M12 18v4"></path><path d="m4.9 19.1 2.9-2.9"></path><path d="M2 12h4"></path><path d="m4.9 4.9 2.9 2.9"></path></svg>';var fo='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" style="stroke-width:var(--ng-icon__stroke-width, 2)"><circle cx="11" cy="11" r="8"></circle><path d="m21 21-4.3-4.3"></path></svg>';var Co='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" style="stroke-width:var(--ng-icon__stroke-width, 2)"><path d="m15 11-1 9"></path><path d="m19 11-4-7"></path><path d="M2 11h20"></path><path d="m3.5 11 1.6 7.4a2 2 0 0 0 2 1.6h9.8a2 2 0 0 0 2-1.6l1.7-7.4"></path><path d="M4.5 15.5h15"></path><path d="m5 11 4-7"></path><path d="m9 11 1 9"></path></svg>';var Bo='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" style="stroke-width:var(--ng-icon__stroke-width, 2)"><path d="M3 6h18"></path><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path></svg>';var vr={size:"base"},gr=new y("HlmIconConfig");function jo(){return a(gr,{optional:!0})??vr}var we=(()=>{class o{_config=jo();size=s(this._config.size);_computedSize=l(()=>{let e=this.size();switch(e){case"xs":return"12px";case"sm":return"16px";case"base":return"24px";case"lg":return"32px";case"xl":return"48px";default:return e}});static \u0275fac=function(t){return new(t||o)};static \u0275dir=d({type:o,selectors:[["ng-icon","hlmIcon",""],["ng-icon","hlm",""]],hostVars:2,hostBindings:function(t,r){t&2&&nt("--ng-icon__size",r._computedSize())},inputs:{size:[1,"size"]}})}return o})();var Ho=(()=>{class o{static _uniqueId=0;id=s(`brn-toggle-${++o._uniqueId}`);value=s();disabled=s(!1,{transform:H});state=Y("off");type=s("button");ariaLabel=s(null,{alias:"aria-label"});_isOn=l(()=>this.state()==="on");toggle(){this.disabled()||this.state.set(this._isOn()?"off":"on")}static \u0275fac=function(t){return new(t||o)};static \u0275dir=d({type:o,selectors:[["button","brnToggle",""]],hostVars:7,hostBindings:function(t,r){t&1&&x("click",function(){return r.toggle()}),t&2&&(R("id",r.id())("type",r.type()),A("disabled",r.disabled()?!0:null)("data-disabled",r.disabled()?!0:null)("data-state",r.state())("aria-pressed",r._isOn())("aria-label",r.ariaLabel()||null))},inputs:{id:[1,"id"],value:[1,"value"],disabled:[1,"disabled"],state:[1,"state"],type:[1,"type"],ariaLabel:[1,"aria-label","ariaLabel"]},outputs:{state:"stateChange"}})}return o})();var xr=z('hover:bg-muted hover:text-muted-foreground focus-visible:border-ring data-[state=on]:bg-accent data-[state=on]:text-accent-foreground focus-visible:ring-ring/50 inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium whitespace-nowrap transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:pointer-events-none disabled:opacity-50 [&_ng-icon]:pointer-events-none [&_ng-icon]:shrink-0 [&_ng-icon:not([class*="text-"])]:text-base',{variants:{variant:{default:"bg-transparent",outline:"border-input hover:bg-accent hover:text-accent-foreground border bg-transparent shadow-xs"},size:{default:"h-9 min-w-9 px-2",sm:"h-8 min-w-8 px-1.5",lg:"h-10 min-w-10 px-2.5"}},defaultVariants:{variant:"default",size:"default"}}),ve=(()=>{class o{variant=s("default");size=s("default");userClass=s("",{alias:"class"});_computedClass=l(()=>h(xr({variant:this.variant(),size:this.size()}),this.userClass()));static \u0275fac=function(t){return new(t||o)};static \u0275dir=d({type:o,selectors:[["button","hlmToggle",""]],hostAttrs:["data-slot","toggle"],hostVars:2,hostBindings:function(t,r){t&2&&c(r._computedClass())},inputs:{variant:[1,"variant"],size:[1,"size"],userClass:[1,"class","userClass"]},features:[F([{directive:Ho,inputs:["id","id","value","value","disabled","disabled","state","state","aria-label","aria-label","type","type"],outputs:["stateChange","stateChange"]}])]})}return o})();var bo=(()=>{class o{variant=s("default");size=s("default");disabled=s(!1);state=Y("off");isAnimating=w(!1);animationDirection=w("");constructor(){v(()=>{let e=this.state();this.animationDirection()===""&&e==="off"||(e==="on"?this.animationDirection.set("fill"):this.animationDirection.set("empty"),this.isAnimating.set(!0),setTimeout(()=>{this.isAnimating.set(!1)},800))})}animationClass=l(()=>{if(!this.isAnimating())return"";let e=this.animationDirection();return e==="fill"?"animate-bounce-shake":e==="empty"?"animate-empty":""});buttonClass=l(()=>{let e=this.state(),t=this.animationClass(),r="";return e==="on"?r="bg-green-100 hover:bg-green-200 dark:bg-green-900/30 dark:hover:bg-green-900/50 border-green-300 dark:border-green-700":r="bg-muted/50 hover:bg-muted dark:bg-muted/20 dark:hover:bg-muted/40 border-muted-foreground/20",`${t} ${r}`});iconClass=l(()=>{let e=this.state(),t=this.isAnimating();if(e==="on"){let r="text-green-600 dark:text-green-400";return t&&this.animationDirection()==="fill"?`${r} animate-fill`:r}return"text-muted-foreground/60"});static \u0275fac=function(t){return new(t||o)};static \u0275cmp=M({type:o,selectors:[["gh-shopping-basket-toggle"]],inputs:{variant:[1,"variant"],size:[1,"size"],disabled:[1,"disabled"],state:[1,"state"]},outputs:{state:"stateChange"},features:[_([K({lucideShoppingBasket:Co})])],decls:2,vars:9,consts:[["hlmToggle","",1,"relative","overflow-hidden","transition-all","duration-300",3,"stateChange","variant","size","disabled","state"],["hlm","",1,"transition-all","duration-500",3,"name"]],template:function(t,r){t&1&&(g(0,"button",0),Pt("stateChange",function(p){return Tt(r.state,p)||(r.state=p),p}),E(1,"ng-icon",1),k()),t&2&&(c(r.buttonClass()),B("variant",r.variant())("size",r.size())("disabled",r.disabled()),It("state",r.state),m(),c(r.iconClass()),B("name","lucideShoppingBasket"))},dependencies:[ve,we,ht],styles:["@keyframes _ngcontent-%COMP%_bounce-shake{0%,to{transform:translateY(0) rotate(0) scale(1)}10%{transform:translateY(-8px) rotate(-5deg) scale(1.1)}20%{transform:translateY(-8px) rotate(5deg) scale(1.1)}30%{transform:translateY(-8px) rotate(-5deg) scale(1.1)}40%{transform:translateY(0) rotate(0) scale(1)}50%{transform:scale(.95)}60%{transform:scale(1.05)}70%{transform:scale(.98)}80%{transform:scale(1.02)}90%{transform:scale(1)}}@keyframes _ngcontent-%COMP%_fill-basket{0%{opacity:1}50%{opacity:.6;filter:brightness(1.5)}to{opacity:1}}@keyframes _ngcontent-%COMP%_empty-basket{0%{transform:scale(1);opacity:1}30%{transform:scale(.8) rotate(-10deg);opacity:.7}60%{transform:scale(1.1) rotate(10deg);opacity:.8}to{transform:scale(1) rotate(0);opacity:1}}.animate-bounce-shake[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_bounce-shake .8s ease-in-out}.animate-fill[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fill-basket .5s ease-in-out}.animate-empty[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_empty-basket .6s ease-in-out}[_nghost-%COMP%]{display:inline-block}"],changeDetection:0})}return o})();var Zt=(()=>{class o{supabase=a(ao);itemsSignal=w([]);items=this.itemsSignal;count=l(()=>this.itemsSignal().length);userId=w(null);constructor(){this.supabase.supabase.auth.getSession().then(({data:e})=>{let t=e?.session?.user??null;t&&(this.userId.set(t.id),this.loadItemsForUser(t.id))}).catch(()=>{}),this.supabase.supabase.auth.onAuthStateChange((e,t)=>{let r=t?.user?.id??null;this.userId.set(r),r?this.loadItemsForUser(r):this.itemsSignal.set([])}),v(()=>{let e=this.userId();e&&this.loadItemsForUser(e)})}loadItemsForUser(e){tt(this.supabase.supabase.from("shopping_list_item").select("*").eq("creator_id",e).order("created_at",{ascending:!1})).pipe(ut(()=>Z({data:[],error:null}))).subscribe(t=>{t?.error||this.itemsSignal.set(t?.data??[])})}addItem(e,t){return tt(this.supabase.supabase.auth.getUser()).pipe(xt(r=>{let i=r?.data?.user?.id??r?.data?.id??null;return i?tt(this.supabase.supabase.from("shopping_list_item").insert({product_name:e,additional_info:t,creator_id:i,active:!0,active_changed:new Date().toISOString()}).select().single()):Z({error:new Error("Not authenticated")})}),ut(r=>Z({error:r})),ot(r=>{if(r?.error)throw r.error;let i=r?.data;i&&this.itemsSignal.update(p=>[i,...p])}),xt(r=>{if(r?.error)throw r.error;return Z(r.data)}))}updateItem(e,t){return tt(this.supabase.supabase.from("shopping_list_item").update(t).eq("id",e).select().single()).pipe(ut(r=>Z({error:r})),ot(r=>{if(r?.error)throw r.error;let i=r?.data;i&&this.itemsSignal.update(p=>p.map(f=>f.id===e?i:f))}),xt(r=>{if(r?.error)throw r.error;return Z(r.data)}))}deleteItem(e){return tt(this.supabase.supabase.from("shopping_list_item").delete().eq("id",e)).pipe(ut(t=>Z({error:t})),ot(t=>{if(t?.error)throw t.error;this.itemsSignal.update(r=>r.filter(i=>i.id!==e))}),xt(t=>{if(t?.error)throw t.error;return Z(void 0)}))}toggleItem(e,t){return this.updateItem(e,{active:t,active_changed:new Date().toISOString()})}static \u0275fac=function(t){return new(t||o)};static \u0275prov=rt({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var Mr=200,Ut=class{_letterKeyStream=new N;_items=[];_selectedItemIndex=-1;_pressedLetters=[];_skipPredicateFn;_selectedItem=new N;selectedItem=this._selectedItem;constructor(n,e){let t=typeof e?.debounceInterval=="number"?e.debounceInterval:Mr;e?.skipPredicate&&(this._skipPredicateFn=e.skipPredicate),this.setItems(n),this._setupKeyHandler(t)}destroy(){this._pressedLetters=[],this._letterKeyStream.complete(),this._selectedItem.complete()}setCurrentSelectedItemIndex(n){this._selectedItemIndex=n}setItems(n){this._items=n}handleKey(n){let e=n.keyCode;n.key&&n.key.length===1?this._letterKeyStream.next(n.key.toLocaleUpperCase()):(e>=65&&e<=90||e>=48&&e<=57)&&this._letterKeyStream.next(String.fromCharCode(e))}isTyping(){return this._pressedLetters.length>0}reset(){this._pressedLetters=[]}_setupKeyHandler(n){this._letterKeyStream.pipe(ot(e=>this._pressedLetters.push(e)),Ct(n),gt(()=>this._pressedLetters.length>0),oe(()=>this._pressedLetters.join("").toLocaleUpperCase())).subscribe(e=>{for(let t=1;t<this._items.length+1;t++){let r=(this._selectedItemIndex+t)%this._items.length,i=this._items[r];if(!this._skipPredicateFn?.(i)&&i.getLabel?.().toLocaleUpperCase().trim().indexOf(e)===0){this._selectedItem.next(i);break}}this._pressedLetters=[]})}};var Gt=class{_items;_activeItemIndex=w(-1);_activeItem=w(null);_wrap=!1;_typeaheadSubscription=Te.EMPTY;_itemChangesSubscription;_vertical=!0;_horizontal;_allowedModifierKeys=[];_homeAndEnd=!1;_pageUpAndDown={enabled:!1,delta:10};_effectRef;_typeahead;_skipPredicateFn=n=>n.disabled;constructor(n,e){this._items=n,n instanceof ie?this._itemChangesSubscription=n.changes.subscribe(t=>this._itemsChanged(t.toArray())):ne(n)&&(this._effectRef=v(()=>this._itemsChanged(n()),{injector:e}))}tabOut=new N;change=new N;skipPredicate(n){return this._skipPredicateFn=n,this}withWrap(n=!0){return this._wrap=n,this}withVerticalOrientation(n=!0){return this._vertical=n,this}withHorizontalOrientation(n){return this._horizontal=n,this}withAllowedModifierKeys(n){return this._allowedModifierKeys=n,this}withTypeAhead(n=200){this._typeaheadSubscription.unsubscribe();let e=this._getItemsArray();return this._typeahead=new Ut(e,{debounceInterval:typeof n=="number"?n:void 0,skipPredicate:t=>this._skipPredicateFn(t)}),this._typeaheadSubscription=this._typeahead.selectedItem.subscribe(t=>{this.setActiveItem(t)}),this}cancelTypeahead(){return this._typeahead?.reset(),this}withHomeAndEnd(n=!0){return this._homeAndEnd=n,this}withPageUpDown(n=!0,e=10){return this._pageUpAndDown={enabled:n,delta:e},this}setActiveItem(n){let e=this._activeItem();this.updateActiveItem(n),this._activeItem()!==e&&this.change.next(this._activeItemIndex())}onKeydown(n){let e=n.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(i=>!n[i]||this._allowedModifierKeys.indexOf(i)>-1);switch(e){case 9:this.tabOut.next();return;case 40:if(this._vertical&&r){this.setNextItemActive();break}else return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}else return;case 39:if(this._horizontal&&r){this._horizontal==="rtl"?this.setPreviousItemActive():this.setNextItemActive();break}else return;case 37:if(this._horizontal&&r){this._horizontal==="rtl"?this.setNextItemActive():this.setPreviousItemActive();break}else return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}else return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}else return;case 33:if(this._pageUpAndDown.enabled&&r){let i=this._activeItemIndex()-this._pageUpAndDown.delta;this._setActiveItemByIndex(i>0?i:0,1);break}else return;case 34:if(this._pageUpAndDown.enabled&&r){let i=this._activeItemIndex()+this._pageUpAndDown.delta,p=this._getItemsArray().length;this._setActiveItemByIndex(i<p?i:p-1,-1);break}else return;default:(r||lo(n,"shiftKey"))&&this._typeahead?.handleKey(n);return}this._typeahead?.reset(),n.preventDefault()}get activeItemIndex(){return this._activeItemIndex()}get activeItem(){return this._activeItem()}isTyping(){return!!this._typeahead&&this._typeahead.isTyping()}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._getItemsArray().length-1,-1)}setNextItemActive(){this._activeItemIndex()<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex()<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(n){let e=this._getItemsArray(),t=typeof n=="number"?n:e.indexOf(n),r=e[t];this._activeItem.set(r??null),this._activeItemIndex.set(t),this._typeahead?.setCurrentSelectedItemIndex(t)}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._effectRef?.destroy(),this._typeahead?.destroy(),this.tabOut.complete(),this.change.complete()}_setActiveItemByDelta(n){this._wrap?this._setActiveInWrapMode(n):this._setActiveInDefaultMode(n)}_setActiveInWrapMode(n){let e=this._getItemsArray();for(let t=1;t<=e.length;t++){let r=(this._activeItemIndex()+n*t+e.length)%e.length,i=e[r];if(!this._skipPredicateFn(i)){this.setActiveItem(r);return}}}_setActiveInDefaultMode(n){this._setActiveItemByIndex(this._activeItemIndex()+n,n)}_setActiveItemByIndex(n,e){let t=this._getItemsArray();if(t[n]){for(;this._skipPredicateFn(t[n]);)if(n+=e,!t[n])return;this.setActiveItem(n)}}_getItemsArray(){return ne(this._items)?this._items():this._items instanceof ie?this._items.toArray():this._items}_itemsChanged(n){this._typeahead?.setItems(n);let e=this._activeItem();if(e){let t=n.indexOf(e);t>-1&&t!==this._activeItemIndex()&&(this._activeItemIndex.set(t),this._typeahead?.setCurrentSelectedItemIndex(t))}}};var _t=class extends Gt{setActiveItem(n){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(n),this.activeItem&&this.activeItem.setActiveStyles()}};function qt(o){let n=new y(o);return[(i={})=>a(n,i),i=>({provide:n,useValue:i}),i=>({provide:n,useExisting:G(i)}),n]}var[gi,ui,_r,ki]=qt("@spartan-ng SET_CLASS_TO_CUSTOM_ELEMENT_TOKEN");function Ao(o,n){let t=to(o).pipe(Ct(n),Fe());return eo(t,{initialValue:o()})}var[xi,mi,Mi,_i]=qt("@spartan-ng EXPOSES_SIDE_TOKEN"),[Vo,yi,Wt,fi]=qt("@spartan-ng EXPOSES_STATE_TOKEN"),[Ci,Bi,ji,Hi]=qt("@spartan-ng SET_TABLE_CLASSES_TOKEN");var yr=["*"],ge={attachPositions:[],autoFocus:"first-tabbable",closeDelay:100,closeOnBackdropClick:!0,closeOnOutsidePointerEvents:!1,disableClose:!1,hasBackdrop:!0,positionStrategy:null,restoreFocus:!0,role:"dialog",scrollStrategy:null},So=new y("brn-dialog-default-options",{providedIn:"root",factory:()=>ge});function Do(o){return{provide:So,useValue:j(j({},ge),o)}}function fr(){return a(So,{optional:!0})??ge}var Kt=(o,n="")=>{if(typeof o=="string"){let e=o.trim().split(" ");return e.length===0?[n]:e}return o??[]},yt=class{_cdkDialogRef;_open;state;dialogId;_options;_closing$=new N;closing$=this._closing$.asObservable();closed$;_previousTimeout;get open(){return this.state()==="open"}constructor(n,e,t,r,i){this._cdkDialogRef=n,this._open=e,this.state=t,this.dialogId=r,this._options=i,this.closed$=this._cdkDialogRef.closed.pipe(re(1))}close(n,e=this._options?.closeDelay??0){!this.open||this._options?.disableClose||(this._closing$.next(),this._open.set(!1),this._previousTimeout&&clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._cdkDialogRef.close(n)},e))}setPanelClass(n){this._cdkDialogRef.config.panelClass=Kt(n)}setOverlayClass(n){this._cdkDialogRef.config.backdropClass=Kt(n)}setAriaDescribedBy(n){this._cdkDialogRef.config.ariaDescribedBy=n}setAriaLabelledBy(n){this._cdkDialogRef.config.ariaLabelledBy=n}setAriaLabel(n){this._cdkDialogRef.config.ariaLabel=n}},Cr=0;var Br=(()=>{class o{_overlayCloseDispatcher=a(de);_cdkDialog=a(ho);_rendererFactory=a(ze);_renderer=this._rendererFactory.createRenderer(null,null);_positionBuilder=a(Rt);_sso=a(zt);_injector=a(U);open(e,t,r,i){if(i?.id&&this._cdkDialog.getDialogById(i.id))throw new Error(`Dialog with ID: ${i.id} already exists`);let p=i?.positionStrategy??(i?.attachTo&&i?.attachPositions&&i?.attachPositions?.length>0?this._positionBuilder?.flexibleConnectedTo(i.attachTo).withPositions(i.attachPositions??[]):this._positionBuilder.global().centerHorizontally().centerVertically()),f,J,pt=vt(j({},r),{close:(wt=void 0)=>f.close(wt,i?.closeDelay)}),ct=new N,De=w(!0),te=l(()=>De()?"open":"closed"),ft=++Cr,$=this._cdkDialog.open(e,{id:i?.id??`brn-dialog-${ft}`,role:i?.role,viewContainerRef:t,templateContext:()=>({$implicit:pt}),data:pt,hasBackdrop:i?.hasBackdrop,panelClass:Kt(i?.panelClass),backdropClass:Kt(i?.backdropClass,"bg-transparent"),positionStrategy:p,scrollStrategy:i?.scrollStrategy??this._sso?.block(),restoreFocus:i?.restoreFocus,disableClose:!0,autoFocus:i?.autoFocus??"first-tabbable",ariaDescribedBy:i?.ariaDescribedBy??`brn-dialog-description-${ft}`,ariaLabelledBy:i?.ariaLabelledBy??`brn-dialog-title-${ft}`,ariaLabel:i?.ariaLabel,ariaModal:i?.ariaModal,providers:wt=>{f=new yt(wt,De,te,ft,i),mt(this._injector,()=>{J=v(()=>{Le&&this._renderer.setAttribute(Le,"data-state",te()),Ie&&this._renderer.setAttribute(Ie,"data-state",te())})});let ee=[{provide:yt,useValue:f}];return i?.providers&&(typeof i.providers=="function"&&ee.push(...i.providers()),Array.isArray(i.providers)&&ee.push(...i.providers)),ee}}),Le=$.overlayRef.overlayElement,Ie=$.overlayRef.backdropElement;return i?.closeOnOutsidePointerEvents&&$.outsidePointerEvents.pipe(et(ct)).subscribe(()=>{this._overlayCloseDispatcher._attachedOverlays.at(-1)===$.overlayRef&&f.close(void 0,i?.closeDelay)}),i?.closeOnBackdropClick&&$.backdropClick.pipe(et(ct)).subscribe(()=>{f.close(void 0,i?.closeDelay)}),i?.disableClose||$.keydownEvents.pipe(gt(wt=>wt.key==="Escape"),et(ct)).subscribe(()=>{f.close(void 0,i?.closeDelay)}),$.closed.pipe(et(ct)).subscribe(()=>{J?.destroy(),ct.next()}),f}static \u0275fac=function(t){return new(t||o)};static \u0275prov=rt({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})(),dt=(()=>{class o{_dialogService=a(Br);_vcr=a(bt);positionBuilder=a(Rt);ssos=a(zt);_injector=a(U);_defaultOptions=fr();_context={};stateComputed=l(()=>this._dialogRef()?.state()??"closed");_contentTemplate;_dialogRef=w(void 0);_dialogStateEffectRef;_backdropClass=w(null);_panelClass=w(null);closed=P();stateChanged=P();state=s(null);role=s(this._defaultOptions.role);hasBackdrop=s(this._defaultOptions.hasBackdrop,{transform:H});positionStrategy=s(this._defaultOptions.positionStrategy);mutablePositionStrategy=T(()=>this.positionStrategy());scrollStrategy=s(this._defaultOptions.scrollStrategy);_options=l(()=>{let e=this.scrollStrategy(),t;return e==="close"?t=this.ssos.close():e==="reposition"?t=this.ssos.reposition():t=e,{role:this.role(),hasBackdrop:this.hasBackdrop(),positionStrategy:this.mutablePositionStrategy(),scrollStrategy:t,restoreFocus:this.restoreFocus(),closeOnOutsidePointerEvents:this.mutableCloseOnOutsidePointerEvents(),closeOnBackdropClick:this.closeOnBackdropClick(),attachTo:this.mutableAttachTo(),attachPositions:this.mutableAttachPositions(),autoFocus:this.autoFocus(),closeDelay:this.closeDelay(),disableClose:this.disableClose(),backdropClass:this._backdropClass()??"",panelClass:this._panelClass()??"",ariaDescribedBy:this._mutableAriaDescribedBy(),ariaLabelledBy:this._mutableAriaLabelledBy(),ariaLabel:this._mutableAriaLabel(),ariaModal:this._mutableAriaModal()}});constructor(){v(()=>{let e=this.state();e==="open"&&b(()=>this.open()),e==="closed"&&b(()=>this.close())})}restoreFocus=s(this._defaultOptions.restoreFocus);closeOnOutsidePointerEvents=s(this._defaultOptions.closeOnOutsidePointerEvents,{transform:H});mutableCloseOnOutsidePointerEvents=T(()=>this.closeOnOutsidePointerEvents());closeOnBackdropClick=s(this._defaultOptions.closeOnBackdropClick,{transform:H});attachTo=s(null);mutableAttachTo=T(()=>this.attachTo());attachPositions=s(this._defaultOptions.attachPositions);mutableAttachPositions=T(()=>this.attachPositions());autoFocus=s(this._defaultOptions.autoFocus);closeDelay=s(this._defaultOptions.closeDelay,{transform:st});disableClose=s(this._defaultOptions.disableClose,{transform:H});ariaDescribedBy=s(null,{alias:"aria-describedby"});_mutableAriaDescribedBy=T(()=>this.ariaDescribedBy());ariaLabelledBy=s(null,{alias:"aria-labelledby"});_mutableAriaLabelledBy=T(()=>this.ariaLabelledBy());ariaLabel=s(null,{alias:"aria-label"});_mutableAriaLabel=T(()=>this.ariaLabel());ariaModal=s(!0,{alias:"aria-modal",transform:H});_mutableAriaModal=T(()=>this.ariaModal());open(){if(!this._contentTemplate||this._dialogRef())return;this._dialogStateEffectRef?.destroy();let e=this._dialogService.open(this._contentTemplate,this._vcr,this._context,this._options());this._dialogRef.set(e),mt(this._injector,()=>{this._dialogStateEffectRef=v(()=>{let t=e.state();b(()=>this.stateChanged.emit(t))})}),e.closed$.pipe(re(1)).subscribe(t=>{this._dialogRef.set(void 0),this.closed.emit(t)})}close(e,t){this._dialogRef()?.close(e,t??this._options().closeDelay)}registerTemplate(e){this._contentTemplate=e}setOverlayClass(e){this._backdropClass.set(e),this._dialogRef()?.setOverlayClass(e)}setPanelClass(e){this._panelClass.set(e??""),this._dialogRef()?.setPanelClass(e)}setContext(e){this._context=j(j({},this._context),e)}setAriaDescribedBy(e){this._mutableAriaDescribedBy.set(e),this._dialogRef()?.setAriaDescribedBy(e)}setAriaLabelledBy(e){this._mutableAriaLabelledBy.set(e),this._dialogRef()?.setAriaLabelledBy(e)}setAriaLabel(e){this._mutableAriaLabel.set(e),this._dialogRef()?.setAriaLabel(e)}setAriaModal(e){this._mutableAriaModal.set(e)}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=M({type:o,selectors:[["brn-dialog"]],inputs:{state:[1,"state"],role:[1,"role"],hasBackdrop:[1,"hasBackdrop"],positionStrategy:[1,"positionStrategy"],scrollStrategy:[1,"scrollStrategy"],restoreFocus:[1,"restoreFocus"],closeOnOutsidePointerEvents:[1,"closeOnOutsidePointerEvents"],closeOnBackdropClick:[1,"closeOnBackdropClick"],attachTo:[1,"attachTo"],attachPositions:[1,"attachPositions"],autoFocus:[1,"autoFocus"],closeDelay:[1,"closeDelay"],disableClose:[1,"disableClose"],ariaDescribedBy:[1,"aria-describedby","ariaDescribedBy"],ariaLabelledBy:[1,"aria-labelledby","ariaLabelledBy"],ariaLabel:[1,"aria-label","ariaLabel"],ariaModal:[1,"aria-modal","ariaModal"]},outputs:{closed:"closed",stateChanged:"stateChanged"},exportAs:["brnDialog"],ngContentSelectors:yr,decls:1,vars:0,template:function(t,r){t&1&&(I(),V(0))},encapsulation:2,changeDetection:0})}return o})();var Lo=(()=>{class o{_brnDialog=a(dt,{optional:!0});_brnDialogRef=a(yt,{optional:!0});_template=a(jt);state=l(()=>this._brnDialog?.stateComputed()??this._brnDialogRef?.state()??"closed");className=s(void 0,{alias:"class"});context=s(void 0);constructor(){this._brnDialog&&(this._brnDialog.registerTemplate(this._template),v(()=>{let e=this.context();!this._brnDialog||!e||b(()=>this._brnDialog?.setContext(e))}),v(()=>{if(!this._brnDialog)return;let e=this.className();b(()=>this._brnDialog?.setPanelClass(e))}))}static \u0275fac=function(t){return new(t||o)};static \u0275dir=d({type:o,selectors:[["","brnDialogContent",""]],inputs:{className:[1,"class","className"],context:[1,"context"]},features:[_([Wt(()=>o)])]})}return o})();var jr=["*"],Hr={hasBackdrop:!1,scrollStrategy:"reposition"},$t=(()=>{class o extends dt{align=s("center");sideOffset=s(0,{transform:st});offsetX=s(0,{transform:st});_positionStrategy;constructor(){super(),this.setAriaDescribedBy(""),this.setAriaLabelledBy(""),v(()=>{let e=this.align();b(()=>{this.mutableAttachPositions.set([{originX:e,originY:"bottom",overlayX:e,overlayY:"top"},{originX:e,originY:"top",overlayX:e,overlayY:"bottom"}])}),b(()=>{this.applySideOffset(this.sideOffset())})}),v(()=>{let e=this.sideOffset();b(()=>{this.applySideOffset(e)})}),v(()=>{let e=this.offsetX();b(()=>{this.applyOffsetX(e)})}),v(()=>{let e=this.mutableAttachTo(),t=this.mutableAttachPositions();!e||!t||t.length===0||b(()=>{this._positionStrategy?this._positionStrategy.setOrigin(e):this._positionStrategy=this.positionBuilder.flexibleConnectedTo(e).withPush(!1),this._positionStrategy.withPositions(t),this.mutablePositionStrategy.set(this._positionStrategy)})})}applySideOffset(e){this.mutableAttachPositions.update(t=>t.map(r=>vt(j({},r),{offsetY:r.originY==="top"?-e:e})))}applyOffsetX(e){this.mutableAttachPositions.update(t=>t.map(r=>vt(j({},r),{offsetX:e})))}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=M({type:o,selectors:[["brn-popover"]],inputs:{align:[1,"align"],sideOffset:[1,"sideOffset"],offsetX:[1,"offsetX"]},exportAs:["brnPopover"],features:[_([{provide:dt,useExisting:G(()=>o)},Do(Hr)]),se],ngContentSelectors:jr,decls:1,vars:0,template:function(t,r){t&1&&(I(),V(0))},encapsulation:2,changeDetection:0})}return o})();var Io=(()=>{class o extends Lo{static \u0275fac=(()=>{let e;return function(r){return(e||(e=Oe(o)))(r||o)}})();static \u0275dir=d({type:o,selectors:[["","brnPopoverContent",""]],features:[_([Wt(()=>o)]),se]})}return o})();var ue=new y("BrnAutocompleteItemToken");function Ar(o){return{provide:ue,useExisting:o}}var To=new y("BrnAutocompleteToken");function Vr(o){return{provide:To,useExisting:o}}function ke(){return a(To)}var Xt=(()=>{class o{static _id=0;_injector=a(U);id=s(`brn-autocomplete-${++o._id}`);valueChange=P();selectionCleared=P();_brnPopover=a($t,{optional:!0});_focus=w("first");items=Xe(ue,{descendants:!0});keyManager=new _t(this.items,this._injector);isExpanded=l(()=>this._brnPopover?.stateComputed()==="open");constructor(){this.keyManager.withVerticalOrientation().withHomeAndEnd().withWrap().skipPredicate(e=>e.disabled),v(()=>{let e=this.items(),t=this._focus();b(()=>{if(!e.length)return;let r=this.keyManager.activeItem;(!r||!e.includes(r))&&(t==="first"?this.keyManager.setFirstItemActive():this.keyManager.setLastItemActive())})}),this.keyManager.change.pipe(he()).subscribe(()=>{let e=this.keyManager.activeItem?.value();e&&this.valueChange.emit(e)})}selectActiveItem(){this._brnPopover?.stateComputed()==="open"&&this.keyManager.activeItem?.selected.emit()}open(e="first"){this._brnPopover?.open(),this._focus.set(e)}close(){this._brnPopover?.close()}toggle(){this.isExpanded()?this.close():this.open()}static \u0275fac=function(t){return new(t||o)};static \u0275dir=d({type:o,selectors:[["","brnAutocomplete",""]],contentQueries:function(t,r,i){t&1&&Ze(i,r.items,ue,5),t&2&&Dt()},hostVars:1,hostBindings:function(t,r){t&1&&x("keydown.enter",function(){return r.selectActiveItem()}),t&2&&R("id",r.id())},inputs:{id:[1,"id"]},outputs:{valueChange:"valueChange",selectionCleared:"selectionCleared"},features:[_([Vr(o)])]})}return o})(),Po=(()=>{class o{_templateRef=a(jt);_viewContainerRef=a(bt);_autocomplete=ke();_visible=l(()=>this._autocomplete.items().length>0);constructor(){v(()=>{this._visible()?this._viewContainerRef.clear():this._viewContainerRef.createEmbeddedView(this._templateRef)})}static \u0275fac=function(t){return new(t||o)};static \u0275dir=d({type:o,selectors:[["","brnAutocompleteEmpty",""]]})}return o})(),Fo=(()=>{class o{static _id=0;id=s(`brn-autocomplete-group-${++o._id}`);static \u0275fac=function(t){return new(t||o)};static \u0275dir=d({type:o,selectors:[["","brnAutocompleteGroup",""]],hostAttrs:["role","group"],hostVars:1,hostBindings:function(t,r){t&2&&R("id",r.id())},inputs:{id:[1,"id"]}})}return o})(),Eo=(()=>{class o{static _id=0;_platform=a(Bt);_elementRef=a(L);_autocomplete=ke();id=s(`brn-autocomplete-item-${++o._id}`);value=s.required();_disabled=s(!1,{alias:"disabled",transform:H});get disabled(){return this._disabled()}_active=w(!1);selected=P();getLabel(){return this._elementRef.nativeElement.textContent?.trim()??""}setActiveStyles(){this._active.set(!0),Qe(this._platform)&&this._elementRef.nativeElement.scrollIntoView({block:"nearest"})}setInactiveStyles(){this._active.set(!1)}onClick(){this._autocomplete.keyManager.setActiveItem(this),this.selected.emit()}activate(){this._disabled()||this._autocomplete.keyManager.setActiveItem(this)}static \u0275fac=function(t){return new(t||o)};static \u0275dir=d({type:o,selectors:[["button","brnAutocompleteItem",""]],hostAttrs:["type","button","role","option","tabIndex","-1"],hostVars:6,hostBindings:function(t,r){t&1&&x("click",function(){return r.onClick()})("mouseenter",function(){return r.activate()}),t&2&&(R("id",r.id()),A("disabled",r._disabled()?!0:null)("data-disabled",r._disabled()?"":null)("data-value",r.value())("aria-selected",r._active())("data-selected",r._active()?"":null))},inputs:{id:[1,"id"],value:[1,"value"],_disabled:[1,"disabled","_disabled"]},outputs:{selected:"selected"},features:[_([Ar(o)])]})}return o})(),Oo=(()=>{class o{static _id=0;id=s(`brn-autocomplete-list-${++o._id}`);static \u0275fac=function(t){return new(t||o)};static \u0275dir=d({type:o,selectors:[["","brnAutocompleteList",""]],hostAttrs:["role","listbox"],hostVars:1,hostBindings:function(t,r){t&2&&R("id",r.id())},inputs:{id:[1,"id"]}})}return o})(),zo=(()=>{class o{_autocomplete=ke();_isExpanded=this._autocomplete.isExpanded;_activeDescendant=w(void 0);constructor(){this._autocomplete.keyManager.change.pipe(Ee(this._autocomplete.keyManager.activeItemIndex),he()).subscribe(()=>{this._activeDescendant.set(this._autocomplete.keyManager.activeItem?.id())})}onKeyDown(e){e.key==="Enter"&&e.preventDefault(),this._isExpanded()||(e.key==="ArrowDown"&&this._autocomplete.open("first"),e.key==="ArrowUp"&&this._autocomplete.open("last"),e.key==="Escape"&&this._autocomplete.selectionCleared.emit()),this._autocomplete.keyManager.onKeydown(e)}static \u0275fac=function(t){return new(t||o)};static \u0275dir=d({type:o,selectors:[["input","brnAutocompleteSearchInput",""]],hostAttrs:["role","combobox","aria-autocomplete","list"],hostVars:2,hostBindings:function(t,r){t&1&&x("keydown",function(p){return r.onKeyDown(p)}),t&2&&A("aria-activedescendant",r._activeDescendant())("aria-expanded",r._isExpanded())}})}return o})();var xe=(()=>{class o{_stateProvider=Vo({host:!0});state=this._stateProvider.state??w("closed");_renderer=a(Ht);_element=a(L);constructor(){v(()=>{this._renderer.setAttribute(this._element.nativeElement,"data-state",this.state())})}userClass=s("",{alias:"class"});_computedClass=l(()=>h("border-border bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative w-72 rounded-md border p-4 shadow-md outline-none",this.userClass()));static \u0275fac=function(t){return new(t||o)};static \u0275dir=d({type:o,selectors:[["","hlmPopoverContent",""],["","brnPopoverContent","","hlm",""]],hostVars:2,hostBindings:function(t,r){t&2&&c(r._computedClass())},inputs:{userClass:[1,"class","userClass"]}})}return o})();var me=(()=>{class o{userClass=s("",{alias:"class"});_computedClass=l(()=>h("py-6 text-center text-sm",this.userClass()));static \u0275fac=function(t){return new(t||o)};static \u0275dir=d({type:o,selectors:[["","hlmAutocompleteEmpty",""]],hostVars:2,hostBindings:function(t,r){t&2&&c(r._computedClass())},inputs:{userClass:[1,"class","userClass"]}})}return o})();var Dr=["*"],Me=(()=>{class o{userClass=s("",{alias:"class"});_computedClass=l(()=>h("text-foreground block overflow-hidden p-1",this.userClass()));static \u0275fac=function(t){return new(t||o)};static \u0275cmp=M({type:o,selectors:[["hlm-autocomplete-group"]],hostVars:2,hostBindings:function(t,r){t&2&&c(r._computedClass())},inputs:{userClass:[1,"class","userClass"]},features:[F([{directive:Fo,inputs:["id","id"]}])],ngContentSelectors:Dr,decls:1,vars:0,template:function(t,r){t&1&&(I(),V(0))},encapsulation:2,changeDetection:0})}return o})();var Lr=["hlm-autocomplete-item",""],Ir=["*"],_e=(()=>{class o{userClass=s("",{alias:"class"});_computedClass=l(()=>h("data-[selected]:bg-accent data-[selected=true]:text-accent-foreground [&>ng-icon]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-start text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[hidden]:hidden [&>ng-icon]:pointer-events-none [&>ng-icon]:shrink-0 [&>ng-icon]:text-base",this.userClass()));static \u0275fac=function(t){return new(t||o)};static \u0275cmp=M({type:o,selectors:[["button","hlm-autocomplete-item",""]],hostVars:2,hostBindings:function(t,r){t&2&&c(r._computedClass())},inputs:{userClass:[1,"class","userClass"]},features:[F([{directive:Eo,inputs:["value","value","disabled","disabled","id","id"],outputs:["selected","selected"]}])],attrs:Lr,ngContentSelectors:Ir,decls:1,vars:0,template:function(t,r){t&1&&(I(),V(0))},encapsulation:2,changeDetection:0})}return o})();var Tr=["*"],ye=(()=>{class o{userClass=s("",{alias:"class"});_computedClass=l(()=>h("block max-h-60 overflow-x-hidden overflow-y-auto",this.userClass()));static \u0275fac=function(t){return new(t||o)};static \u0275cmp=M({type:o,selectors:[["hlm-autocomplete-list"]],hostVars:2,hostBindings:function(t,r){t&2&&c(r._computedClass())},inputs:{userClass:[1,"class","userClass"]},features:[F([{directive:Oo,inputs:["id","id"]}])],ngContentSelectors:Tr,decls:1,vars:0,template:function(t,r){t&1&&(I(),V(0))},encapsulation:2,changeDetection:0})}return o})();var fe=(()=>{class o{userClass=s("",{alias:"class"});_computedClass=l(()=>h("group/input-group border-input dark:bg-input/30 relative flex w-full items-center rounded-md border shadow-xs transition-[color,box-shadow] outline-none","h-9 min-w-0 has-[>textarea]:h-auto","has-[>[data-align=inline-start]]:[&>input]:pl-2","has-[>[data-align=inline-end]]:[&>input]:pr-2","has-[>[data-align=block-start]]:h-auto has-[>[data-align=block-start]]:flex-col has-[>[data-align=block-start]]:[&>input]:pb-3","has-[>[data-align=block-end]]:h-auto has-[>[data-align=block-end]]:flex-col has-[>[data-align=block-end]]:[&>input]:pt-3","has-[[data-slot=input-group-control]:focus-visible]:border-ring has-[[data-slot=input-group-control]:focus-visible]:ring-ring/50 has-[[data-slot=input-group-control]:focus-visible]:ring-[3px]","has-[>.ng-invalid.ng-touched]:ring-destructive/20 has-[>.ng-invalid.ng-touched]:border-destructive dark:has-[>.ng-invalid.ng-touched]:ring-destructive/40",this.userClass()));static \u0275fac=function(t){return new(t||o)};static \u0275dir=d({type:o,selectors:[["","hlmInputGroup",""],["hlm-input-group"]],hostAttrs:["data-slot","input-group","role","group"],hostVars:2,hostBindings:function(t,r){t&2&&c(r._computedClass())},inputs:{userClass:[1,"class","userClass"]}})}return o})();var Pr=z("text-muted-foreground flex h-auto cursor-text items-center justify-center gap-2 py-1.5 text-sm font-medium select-none group-data-[disabled=true]/input-group:opacity-50 [&>kbd]:rounded-[calc(var(--radius)-5px)] [&>ng-icon:not([class*='text-'])]:text-base",{variants:{align:{"inline-start":"order-first pl-3 has-[>button]:ml-[-0.45rem] has-[>kbd]:ml-[-0.35rem]","inline-end":"order-last pr-3 has-[>button]:mr-[-0.45rem] has-[>kbd]:mr-[-0.35rem]","block-start":"order-first w-full justify-start px-3 pt-3 group-has-[>input]/input-group:pt-2.5 [.border-b]:pb-3","block-end":"order-last w-full justify-start px-3 pb-3 group-has-[>input]/input-group:pb-2.5 [.border-t]:pt-3"}},defaultVariants:{align:"inline-start"}}),Ce=(()=>{class o{align=s("inline-start");userClass=s("",{alias:"class"});_computedClass=l(()=>h(Pr({align:this.align()}),this.userClass()));static \u0275fac=function(t){return new(t||o)};static \u0275dir=d({type:o,selectors:[["hlm-input-group-addon"],["","hlmInputGroupAddon",""]],hostAttrs:["role","group","data-slot","input-group-addon"],hostVars:3,hostBindings:function(t,r){t&2&&(A("data-align",r.align()),c(r._computedClass()))},inputs:{align:[1,"align"],userClass:[1,"class","userClass"]}})}return o})();var Er=z("flex items-center gap-2 text-sm shadow-none",{variants:{size:{xs:"h-6 gap-1 rounded-[calc(var(--radius)-5px)] px-2 has-[>ng-icon]:px-2 [&>ng-icon:not([class*='text-'])]:text-sm",sm:"h-8 gap-1.5 rounded-md px-2.5 has-[>ng-icon]:px-2.5","icon-xs":"size-6 rounded-[calc(var(--radius)-5px)] p-0 has-[>ng-icon]:p-0","icon-sm":"size-8 p-0 has-[>ng-icon]:p-0"}},defaultVariants:{size:"xs"}}),Be=(()=>{class o{_hlmButton=a(at);size=s("xs");userClass=s("",{alias:"class"});_computedClass=l(()=>h(Er({size:this.size()}),this.userClass()));constructor(){v(()=>{this._hlmButton.setClass(this._computedClass())})}static \u0275fac=function(t){return new(t||o)};static \u0275dir=d({type:o,selectors:[["button","hlmInputGroupButton",""]],hostVars:1,hostBindings:function(t,r){t&2&&A("data-size",r.size())},inputs:{size:[1,"size"],userClass:[1,"class","userClass"]},features:[_([no({variant:"ghost"})]),F([{directive:at,inputs:["variant","variant"]}])]})}return o})();var Ro=(()=>{class o{ngControl=null;errorState=w(!1);static \u0275fac=function(t){return new(t||o)};static \u0275dir=d({type:o})}return o})();var No=(()=>{class o{isInvalid(e,t){return!!(e&&e.invalid&&(e.touched||t instanceof lt&&t.submitted))}static \u0275fac=function(t){return new(t||o)};static \u0275prov=rt({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})(),Qt=class{_defaultMatcher;ngControl;_parentFormGroup;_parentForm;errorState=w(!1);matcher=null;constructor(n,e,t,r){this._defaultMatcher=n,this.ngControl=e,this._parentFormGroup=t,this._parentForm=r}updateErrorState(){let n=this.errorState(),e=this._parentFormGroup||this._parentForm,t=this.matcher||this._defaultMatcher,r=this.ngControl?this.ngControl.control:null,i=t?.isInvalid(r,e)??!1;i!==n&&this.errorState.set(i)}};var Or=z("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input focus-visible:border-ring focus-visible:ring-ring/50 flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium focus-visible:ring-[3px] disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",{variants:{error:{auto:"[&.ng-invalid.ng-touched]:border-destructive [&.ng-invalid.ng-touched]:ring-destructive/20 dark:[&.ng-invalid.ng-touched]:ring-destructive/40",true:"border-destructive focus-visible:border-destructive focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40"}},defaultVariants:{error:"auto"}}),Q=(()=>{class o{_injector=a(U);_additionalClasses=w("");_errorStateTracker;_defaultErrorStateMatcher=a(No);_parentForm=a(lt,{optional:!0});_parentFormGroup=a(xo,{optional:!0});userClass=s("",{alias:"class"});_computedClass=l(()=>h(Or({error:this._state().error}),this.userClass(),this._additionalClasses()));error=s("auto");_state=T(()=>({error:this.error()}));ngControl=this._injector.get(wo,null);errorState=l(()=>this._errorStateTracker.errorState());constructor(){this._errorStateTracker=new Qt(this._defaultErrorStateMatcher,this.ngControl,this._parentFormGroup,this._parentForm),v(()=>{let e=this._errorStateTracker.errorState();b(()=>{if(this.ngControl){let t=e&&this.ngControl.invalid&&(this.ngControl.touched||this.ngControl.dirty);this._errorStateTracker.errorState.set(!!t),this.setError(t?!0:"auto")}})})}ngDoCheck(){this._errorStateTracker.updateErrorState()}setError(e){this._state.set({error:e})}setClass(e){this._additionalClasses.set(e)}static \u0275fac=function(t){return new(t||o)};static \u0275dir=d({type:o,selectors:[["","hlmInput",""]],hostVars:2,hostBindings:function(t,r){t&2&&c(r._computedClass())},inputs:{userClass:[1,"class","userClass"],error:[1,"error"]},features:[_([{provide:Ro,useExisting:G(()=>o)}])]})}return o})();var je=(()=>{class o{_hlmInput=a(Q);userClass=s("",{alias:"class"});_computedClass=l(()=>h("flex-1 rounded-none border-0 bg-transparent shadow-none focus-visible:ring-0 dark:bg-transparent",this.userClass()));constructor(){v(()=>{this._hlmInput.setClass(this._computedClass())})}static \u0275fac=function(t){return new(t||o)};static \u0275dir=d({type:o,selectors:[["input","hlmInputGroupInput",""]],hostAttrs:["data-slot","input-group-control"],hostVars:2,hostBindings:function(t,r){t&2&&c(r._computedClass())},inputs:{userClass:[1,"class","userClass"]},features:[F([Q])]})}return o})();var C0=z("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 dark:bg-input/30 flex [field-sizing:content] min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",{variants:{error:{auto:"[&.ng-invalid.ng-touched]:border-destructive [&.ng-invalid.ng-touched]:ring-destructive/20 dark:[&.ng-invalid.ng-touched]:ring-destructive/40",true:"border-destructive focus-visible:border-destructive focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40"}},defaultVariants:{error:"auto"}});var He=(()=>{class o{_host=a(L,{host:!0});_brnDialog=a(dt,{optional:!0});disabledTrigger=s(!1,{transform:H});constructor(){this._brnDialog&&this._brnDialog.mutableAttachTo.set(this._host.nativeElement)}open(){this.disabledTrigger()||this._brnDialog?.open()}static \u0275fac=function(t){return new(t||o)};static \u0275dir=d({type:o,selectors:[["","hlmAutocompleteTrigger",""]],hostBindings:function(t,r){t&1&&x("click",function(){return r.open()})},inputs:{disabledTrigger:[1,"disabledTrigger"]}})}return o})();function Go(){return{transformValueToSearch:o=>typeof o=="string"?o:String(o),transformOptionToString:o=>typeof o=="string"?o:String(o),transformOptionToValue:void 0,requireSelection:!1,showClearBtn:!1,debounceTime:150}}var qo=new y("HlmAutocompleteConfig");function Wo(o){return{provide:qo,useValue:j(j({},Go()),o)}}function Ko(){return a(qo,{optional:!0})??Go()}var Nr=["input"],Zr=[[["","loading",""]],[["","empty",""]]],Ur=["[loading]","[empty]"],Gr=o=>({$implicit:o});function qr(o,n){if(o&1){let e=X();g(0,"button",13),x("click",function(){S(e);let r=C();return D(r._selectionCleared())}),E(1,"ng-icon",14),k()}if(o&2){let e=C();B("disabled",e._disabled())}}function Wr(o,n){o&1&&Ne(0)}function Kr(o,n){if(o&1&&At(0,Wr,1,0,"ng-container",19),o&2){let e=C().$implicit;B("ngTemplateOutlet",n)("ngTemplateOutletContext",Ke(2,Gr,e))}}function $r(o,n){if(o&1&&O(0),o&2){let e=C().$implicit,t=C(2);it(" ",t.transformOptionToString()(e)," ")}}function Xr(o,n){if(o&1){let e=X();g(0,"button",18),x("selected",function(){let r=S(e).$implicit,i=C(2);return D(i._optionSelected(r))}),q(1,Kr,1,4,"ng-container")(2,$r,1,1),k()}if(o&2){let e,t=n.$implicit,r=C(2),i=qe(0);c(r._computedAutocompleteItemClass()),B("value",i?i(t):t),m(),W((e=r.optionTemplate())?1:2,e)}}function Yr(o,n){if(o&1&&O(0),o&2){let e=C(4);Mt(e.loadingText())}}function Qr(o,n){o&1&&V(0,0,null,Yr,1,1)}function Jr(o,n){if(o&1&&O(0),o&2){let e=C(4);Mt(e.emptyText())}}function tn(o,n){o&1&&V(0,1,null,Jr,1,1)}function en(o,n){if(o&1&&(g(0,"div",20),q(1,Qr,2,0)(2,tn,2,0),k()),o&2){let e=C(2);c(e._computedAutocompleteEmptyClass()),m(),W(e.loading()?1:2)}}function on(o,n){if(o&1&&(g(0,"div",15)(1,"hlm-autocomplete-list")(2,"hlm-autocomplete-group"),Vt(3,Xr,3,4,"button",16,Re),k()(),At(5,en,3,3,"div",17),k()),o&2){let e=C();nt("width",e._elementRef.nativeElement.offsetWidth,"px"),m(),c(e._computedAutocompleteListClass()),Lt("hidden",e.filteredOptions().length===0),m(2),St(e.filteredOptions())}}var rn={provide:po,useExisting:G(()=>Jt),multi:!0},Jt=(()=>{class o{static _id=0;_config=Ko();_brnAutocomplete=le.required(Xt);_inputRef=le.required("input",{read:L});_elementRef=a(L);userClass=s("",{alias:"class"});_computedClass=l(()=>h("block w-full",this.userClass()));autocompleteSearchClass=s("");_computedAutocompleteSearchClass=l(()=>h("",this.autocompleteSearchClass()));autocompleteInputClass=s("");_computedAutocompleteInputClass=l(()=>h("",this.autocompleteInputClass()));autocompleteListClass=s("");_computedAutocompleteListClass=l(()=>h("",this.autocompleteListClass()));autocompleteItemClass=s("");_computedAutocompleteItemClass=l(()=>h("",this.autocompleteItemClass()));autocompleteEmptyClass=s("");_computedAutocompleteEmptyClass=l(()=>h("",this.autocompleteEmptyClass()));filteredOptions=s([]);value=Y();debounceTime=s(this._config.debounceTime);search=Y("");_search=Ao(this.search,this.debounceTime());transformValueToSearch=s(this._config.transformValueToSearch);requireSelection=s(this._config.requireSelection,{transform:H});transformOptionToString=s(this._config.transformOptionToString);transformOptionToValue=s(this._config.transformOptionToValue);displayWith=s(void 0);_displaySearchValue=l(()=>{let e=this.displayWith();return e||this.transformValueToSearch()});optionTemplate=s();loading=s(!1,{transform:H});showClearBtn=s(this._config.showClearBtn,{transform:H});searchPlaceholderText=s("Select an option");loadingText=s("Loading options...");emptyText=s("No options found");ariaLabelToggleButton=s("Toggle options");inputId=s(`hlm-autocomplete-input-${++o._id}`);disabled=s(!1,{transform:H});_disabled=T(()=>this.disabled());valueChange=P();searchChange=P();_onChange;_onTouched;constructor(){v(()=>{let e=this._search();this.searchChange.emit(e)})}_searchChanged(e){let t=e.target.value;this.search.set(t??""),!this._brnAutocomplete().isExpanded()&&t.length>0&&this._brnAutocomplete().open()}_toggleOptions(){(this._search()||this.filteredOptions().length>0)&&this._brnAutocomplete().toggle(),this._inputRef().nativeElement.focus()}_selectionCleared(){this.value.set(void 0),this._onChange?.(null),this.valueChange.emit(null),this.search.set("")}_optionSelected(e){let t=this.transformOptionToValue(),r=t?t(e):e;this.value.set(r),this._onChange?.(r),this.valueChange.emit(r);let i=this._displaySearchValue()(r);this.search.set(i??""),this._brnAutocomplete().close()}writeValue(e){this.value.set(e||void 0);let t=e?this._displaySearchValue()(e):"";this.search.set(t)}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this._disabled.set(e)}_closed(){if(this.requireSelection()){let e=this.value(),t=e?this._displaySearchValue()(e):"";this.search.set(t??"")}}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=M({type:o,selectors:[["hlm-autocomplete"]],viewQuery:function(t,r){t&1&&(ae(r._brnAutocomplete,Xt,5),ae(r._inputRef,Nr,5,L)),t&2&&Dt(2)},hostVars:2,hostBindings:function(t,r){t&2&&c(r._computedClass())},inputs:{userClass:[1,"class","userClass"],autocompleteSearchClass:[1,"autocompleteSearchClass"],autocompleteInputClass:[1,"autocompleteInputClass"],autocompleteListClass:[1,"autocompleteListClass"],autocompleteItemClass:[1,"autocompleteItemClass"],autocompleteEmptyClass:[1,"autocompleteEmptyClass"],filteredOptions:[1,"filteredOptions"],value:[1,"value"],debounceTime:[1,"debounceTime"],search:[1,"search"],transformValueToSearch:[1,"transformValueToSearch"],requireSelection:[1,"requireSelection"],transformOptionToString:[1,"transformOptionToString"],transformOptionToValue:[1,"transformOptionToValue"],displayWith:[1,"displayWith"],optionTemplate:[1,"optionTemplate"],loading:[1,"loading"],showClearBtn:[1,"showClearBtn"],searchPlaceholderText:[1,"searchPlaceholderText"],loadingText:[1,"loadingText"],emptyText:[1,"emptyText"],ariaLabelToggleButton:[1,"ariaLabelToggleButton"],inputId:[1,"inputId"],disabled:[1,"disabled"]},outputs:{value:"valueChange",search:"searchChange",valueChange:"valueChange",searchChange:"searchChange"},features:[_([rn,K({lucideSearch:fo,lucideChevronDown:Mo,lucideCircleX:_o})])],ngContentSelectors:Ur,decls:14,vars:14,consts:[["popover",""],["input",""],["align","start","autoFocus","first-heading","sideOffset","5","closeDelay","100",3,"closed","closeOnOutsidePointerEvents"],["brnAutocomplete","",3,"selectionCleared"],["hlmInputGroup","","hlmAutocompleteTrigger","",3,"disabledTrigger"],["brnAutocompleteSearchInput","","hlmInputGroupInput","","type","text","autocomplete","off",3,"input","id","placeholder","disabled","value"],["hlmInputGroupAddon",""],["name","lucideSearch"],["hlmInputGroupAddon","","align","inline-end"],["hlmInputGroupButton","","type","button","tabindex","-1","aria-label","clear","size","icon-xs",3,"disabled"],["hlmInputGroupButton","","type","button","tabindex","-1","size","icon-xs",3,"click","disabled"],["name","lucideChevronDown"],["hlmPopoverContent","","class","p-0",3,"width",4,"brnPopoverContent"],["hlmInputGroupButton","","type","button","tabindex","-1","aria-label","clear","size","icon-xs",3,"click","disabled"],["name","lucideCircleX"],["hlmPopoverContent","",1,"p-0"],["hlm-autocomplete-item","",3,"class","value"],["hlmAutocompleteEmpty","",3,"class",4,"brnAutocompleteEmpty"],["hlm-autocomplete-item","",3,"selected","value"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["hlmAutocompleteEmpty",""]],template:function(t,r){if(t&1){let i=X();I(Zr),Ue(0),g(1,"brn-popover",2,0),x("closed",function(){return S(i),D(r._closed())}),g(3,"div",3),x("selectionCleared",function(){return S(i),D(r._selectionCleared())}),g(4,"div",4)(5,"input",5,1),x("input",function(f){return S(i),D(r._searchChanged(f))}),k(),g(7,"div",6),E(8,"ng-icon",7),k(),g(9,"div",8),q(10,qr,2,1,"button",9),g(11,"button",10),x("click",function(){return S(i),D(r._toggleOptions())}),E(12,"ng-icon",11),k()()(),At(13,on,6,6,"div",12),k()()}t&2&&(Ge(r.transformOptionToValue()),m(),B("closeOnOutsidePointerEvents",!0),m(3),c(r._computedAutocompleteSearchClass()),B("disabledTrigger",!r._search()||r._disabled()),m(),c(r._computedAutocompleteInputClass()),B("id",r.inputId())("placeholder",r.searchPlaceholderText())("disabled",r._disabled())("value",r.search()),m(5),W(r.showClearBtn()&&r.value()!==void 0?10:-1),m(),B("disabled",r._disabled()),A("aria-label",r.ariaLabelToggleButton()))},dependencies:[Ye,Xt,Po,me,Me,_e,ye,He,$t,Io,xe,ht,fe,Ce,Be,je,zo],encapsulation:2,changeDetection:0})}return o})();var be=(()=>{class o{icon=s("lucideLoader");ariaLabel=s("Loading",{alias:"aria-label"});userClass=s("",{alias:"class"});_computedClass=l(()=>h("text-base motion-safe:animate-spin",this.userClass()));static \u0275fac=function(t){return new(t||o)};static \u0275cmp=M({type:o,selectors:[["hlm-spinner"]],hostAttrs:["role","status",1,"inline-flex"],hostVars:1,hostBindings:function(t,r){t&2&&A("aria-label",r.ariaLabel())},inputs:{icon:[1,"icon"],ariaLabel:[1,"aria-label","ariaLabel"],userClass:[1,"class","userClass"]},features:[_([K({lucideLoader:yo})])],decls:1,vars:3,consts:[[3,"name"]],template:function(t,r){t&1&&E(0,"ng-icon",0),t&2&&(c(r._computedClass()),B("name",r.icon()))},dependencies:[ht],encapsulation:2,changeDetection:0})}return o})();var an=z("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",{variants:{},defaultVariants:{}}),Ae=(()=>{class o{userClass=s("",{alias:"class"});_computedClass=l(()=>h(an(),this.userClass()));static \u0275fac=function(t){return new(t||o)};static \u0275dir=d({type:o,selectors:[["","hlmCard",""]],hostVars:2,hostBindings:function(t,r){t&2&&c(r._computedClass())},inputs:{userClass:[1,"class","userClass"]}})}return o})();var Ve=(()=>{class o{userClass=s("",{alias:"class"});_computedClass=l(()=>h("px-2",this.userClass()));static \u0275fac=function(t){return new(t||o)};static \u0275dir=d({type:o,selectors:[["","hlmCardContent",""]],hostVars:2,hostBindings:function(t,r){t&2&&c(r._computedClass())},inputs:{userClass:[1,"class","userClass"]}})}return o})();var Se=(()=>{class o{userClass=s("",{alias:"class"});_computedClass=l(()=>h("leading-none font-semibold",this.userClass()));static \u0275fac=function(t){return new(t||o)};static \u0275dir=d({type:o,selectors:[["","hlmCardTitle",""]],hostVars:2,hostBindings:function(t,r){t&2&&c(r._computedClass())},inputs:{userClass:[1,"class","userClass"]}})}return o})();function dn(o,n){if(o&1){let e=X();g(0,"input",7),x("ngModelChange",function(r){S(e);let i=C();return D(i.editingName.set(r))})("blur",function(){S(e);let r=C();return D(r.saveInline())})("keydown.enter",function(r){S(e);let i=C();return r.preventDefault(),D(i.saveInline())})("keydown.escape",function(){S(e);let r=C();return D(r.cancelEdit())}),k()}if(o&2){let e=C();B("id",We("edit-",e.item().id))("ngModel",e.editingName())}}function pn(o,n){if(o&1){let e=X();g(0,"div",5)(1,"h3",8),x("click",function(){S(e);let r=C();return D(r.startEdit())}),O(2),k()()}if(o&2){let e=C();m(2),it(" ",e.item().product_name," ")}}var $o=(()=>{class o{service=a(Zt);item=s.required();itemUpdated=P();itemDeleted=P();busyCount=w(0);busy=l(()=>this.busyCount()>0);editingName=w(null);isEditing=l(()=>this.editingName()!==null);toggleItem(){let e=this.item();this.busyCount.update(t=>t+1),this.service.toggleItem(e.id,!e.active).pipe(kt(()=>this.busyCount.update(t=>t-1))).subscribe({next:()=>this.itemUpdated.emit(),error:t=>console.error("Toggle error:",t)})}onBasketToggle(e){let t=this.item(),r=e==="on";t.active!==r&&(this.busyCount.update(i=>i+1),this.service.toggleItem(t.id,r).pipe(kt(()=>this.busyCount.update(i=>i-1))).subscribe({next:()=>this.itemUpdated.emit(),error:i=>console.error("Toggle error:",i)}))}deleteItem(){if(!confirm("Are you sure you want to delete this item?"))return;let e=this.item();this.busyCount.update(t=>t+1),this.service.deleteItem(e.id).pipe(kt(()=>this.busyCount.update(t=>t-1))).subscribe({next:()=>this.itemDeleted.emit(),error:t=>console.error("Delete error:",t)})}startEdit(){this.editingName.set(this.item().product_name??""),setTimeout(()=>{let e=document.getElementById("edit-"+this.item().id);e?.focus(),e?.select()},0)}saveInline(){let e=(this.editingName()||"").trim(),t=this.item();if(e===(t.product_name??"").trim()){this.cancelEdit();return}this.busyCount.update(r=>r+1),this.service.updateItem(t.id,{product_name:e}).pipe(kt(()=>{this.busyCount.update(r=>r-1),this.cancelEdit()})).subscribe({next:()=>this.itemUpdated.emit(),error:r=>console.error("Update error:",r)})}cancelEdit(){this.editingName.set(null)}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=M({type:o,selectors:[["lib-shopping-list-item-card"]],inputs:{item:[1,"item"]},outputs:{itemUpdated:"itemUpdated",itemDeleted:"itemDeleted"},features:[_([K({lucideTrash:Bo})])],decls:7,vars:4,consts:[["hlmCard","",1,"group","p-2","sm:p-3","relative"],["hlmCardContent",""],[1,"flex","items-center","gap-3","w-full"],[1,"flex-1","min-w-0"],["hlmInput","",1,"w-full",3,"id","ngModel"],[1,"h-8","flex","items-center"],["size","sm","variant","outline",1,"ml-auto",3,"stateChange","state"],["hlmInput","",1,"w-full",3,"ngModelChange","blur","keydown.enter","keydown.escape","id","ngModel"],["hlmCardTitle","",1,"truncate","cursor-pointer","hover:text-primary",3,"click"]],template:function(t,r){t&1&&(g(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),q(4,dn,1,3,"input",4)(5,pn,3,1,"div",5),k(),g(6,"gh-shopping-basket-toggle",6),x("stateChange",function(p){return r.onBasketToggle(p)}),k()()()()),t&2&&(Lt("opacity-60",!r.item().active),m(4),W(r.isEditing()?4:5),m(2),B("state",r.item().active?"on":"off"))},dependencies:[Ot,Nt,co,vo,uo,Ae,Se,Ve,Q,bo],encapsulation:2,changeDetection:0})}return o})();var cn=(o,n)=>n.id;function wn(o,n){o&1&&(g(0,"div",11),E(1,"hlm-spinner",19),k())}function vn(o,n){if(o&1&&E(0,"lib-shopping-list-item-card",18),o&2){let e=n.$implicit;B("item",e)}}var Xo=(()=>{class o{service=a(Zt);supabaseAuthService=a(so);newItemName=w("");items=this.service.items;addingItem=w(!1);loading=l(()=>this.addingItem());sortedItems=l(()=>(this.items()??[]).slice().sort((t,r)=>{if(t.active===r.active){let i=t.active_changed?new Date(t.active_changed).getTime():0;return(r.active_changed?new Date(r.active_changed).getTime():0)-i}return t.active?-1:1}));filteredOptions=l(()=>(this.items()??[]).filter(t=>t.product_name.toLowerCase().includes(this.newItemName().toLowerCase())));handleSearch(e){let t=this.items().find(r=>r.product_name===e);!t||t.active||(this.service.toggleItem(t.id,!0).subscribe(),this.clearAutocomplete())}clearAutocomplete(){this.newItemName.set("")}focusAddInput(){try{document.getElementById("add-input")?.focus()}catch{}}addItem(){let e=this.newItemName();e&&(this.addingItem.set(!0),this.service.addItem(e,void 0).subscribe({next:()=>{this.clearAutocomplete(),this.addingItem.set(!1)},error:t=>{console.error("Add item error:",t),this.addingItem.set(!1)}}))}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=M({type:o,selectors:[["lib-sl-dashboard"]],features:[_([Wo({transformOptionToString:e=>e.product_name,transformOptionToValue:e=>e.product_name})])],decls:30,vars:12,consts:[[1,"min-h-screen"],["hlmCard","",1,"w-full","rounded-none","mb-4"],[1,"container","mx-auto","px-4","py-3","flex","items-center","justify-between"],[1,"flex","items-center","gap-3"],[1,"p-2","bg-primary/10","rounded-lg"],[1,"material-icons-outlined","text-primary","text-lg"],[1,"text-lg","font-semibold"],[1,"flex","items-center","gap-2"],["hlmBtn","","variant","outline","size","sm",1,"gap-2",3,"click"],[1,"material-icons-outlined"],[1,"container","mx-auto","p-4","relative"],[1,"absolute","inset-0","bg-background/50","backdrop-blur-sm","flex","justify-center","items-center","z-10","rounded-lg"],[1,"flex","flex-col","gap-2"],[1,"flex","sm:flex-row","gap-2","items-stretch","sm:items-center","flex-1",3,"ngSubmit"],[3,"searchChange","valueChange","keydown.enter","searchPlaceholderText","filteredOptions","search"],["hlmBtn","","size","icon","variant","default","type","submit"],[1,"flex-1","py-2"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","xl:grid-cols-4","gap-4"],[3,"item"],["size","large"]],template:function(t,r){t&1&&(g(0,"div",0)(1,"header",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"span",5),O(6,"shopping_cart"),k()(),g(7,"h1",6),O(8),Ft(9,"transloco"),k()(),g(10,"div",7),E(11,"gh-language-switcher"),g(12,"button",8),x("click",function(){return r.supabaseAuthService.logout()}),g(13,"span",9),O(14,"logout"),k(),O(15),Ft(16,"transloco"),k()()()(),g(17,"main",10),q(18,wn,2,0,"div",11),g(19,"div",12)(20,"form",13),x("ngSubmit",function(){return r.addItem()}),g(21,"hlm-autocomplete",14),Ft(22,"transloco"),Pt("searchChange",function(p){return Tt(r.newItemName,p)||(r.newItemName=p),p}),x("valueChange",function(p){return r.handleSearch(p)})("keydown.enter",function(){return r.addItem()}),k(),g(23,"button",15)(24,"span",9),O(25,"add"),k()()(),g(26,"section",16)(27,"div",17),Vt(28,vn,1,1,"lib-shopping-list-item-card",18,cn),k()()()()()),t&2&&(m(8),Mt(Et(9,6,"shoppingList.title")),m(7),it(" ",Et(16,8,"shoppingList.signOut")," "),m(3),W(r.loading()?18:-1),m(3),B("searchPlaceholderText",Et(22,10,"shoppingList.searchPlaceholder"))("filteredOptions",r.filteredOptions()),It("search",r.newItemName),m(7),St(r.sortedItems()))},dependencies:[Ot,Nt,ko,go,lt,at,be,Jt,$o,ro,io,oo],encapsulation:2,changeDetection:0})}return o})();var ul=[{path:"dashboard",component:Xo},{path:"**",redirectTo:"dashboard"}];export{bo as ShoppingBasketToggleComponent,Zt as ShoppingListService,ul as shoppingListRoutes};
