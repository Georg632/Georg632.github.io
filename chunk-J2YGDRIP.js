import{a as ri,c as ai,d as li,h as ci}from"./chunk-HOSV43XW.js";import{$ as Dt,$a as Z,$c as $t,Ab as xe,Ac as Ae,Ba as ne,Bb as we,Bd as si,C as b,Ca as se,Cc as qt,Da as re,Db as m,E as _t,Ea as wt,Eb as Q,Ed as ke,F as N,Fa as It,Fb as kt,Ga as Mt,Gb as ee,H as bt,Ha as St,Hb as Pt,Ia as B,Ib as Ie,J as l,K as vt,Ka as Lt,Kb as Me,L as Ct,Lb as Nt,Mb as Et,N as yt,Na as M,Nb as Se,O as x,Oa as S,Ob as Vt,Q as h,R as qe,Ra as $,Rc as Wt,S as A,Sa as r,T as oe,Ta as D,Tb as pe,Ua as At,Ub as U,Va as De,Vb as te,Wa as G,X as L,Xa as n,Y as F,Ya as me,Z as O,_a as Te,aa as le,ac as Ft,b as Y,ba as ce,bc as Ot,c as k,ca as y,cb as V,da as a,db as We,dd as Qt,e as ht,ea as c,ed as Ut,fa as w,fb as Bt,fd as Xt,gb as ue,gd as X,h as K,hb as Ht,i as ft,id as Be,ja as Tt,jd as Yt,k as P,ka as R,l as je,la as W,ld as Kt,m as he,ma as u,md as Zt,na as p,nd as ae,o as _e,oa as E,oc as Rt,od as Jt,p as be,pa as H,pc as Le,pd as ei,q as ve,qa as Ce,qd as ti,ra as de,rd as ii,s as fe,sa as J,sd as oi,u as d,ua as xt,uc as zt,v,va as ye,vb as $e,vc as jt,w as C,wa as g,wc as Gt,wd as ie,xa as I,ya as z,yd as ni,z as Ge,za as j,zd as He}from"./chunk-XS6CB654.js";import{a as q,b as ge,c as pt,d as gt}from"./chunk-M4OEJGNZ.js";var di=(()=>{class o{static _uniqueId=0;id=n(`brn-toggle-${++o._uniqueId}`);value=n();disabled=n(!1,{transform:V});state=Z("off");type=n("button");ariaLabel=n(null,{alias:"aria-label"});_isOn=r(()=>this.state()==="on");toggle(){this.disabled()||this.state.set(this._isOn()?"off":"on")}static \u0275fac=function(t){return new(t||o)};static \u0275dir=h({type:o,selectors:[["button","brnToggle",""]],hostVars:7,hostBindings:function(t,i){t&1&&u("click",function(){return i.toggle()}),t&2&&(W("id",i.id())("type",i.type()),L("disabled",i.disabled()?!0:null)("data-disabled",i.disabled()?!0:null)("data-state",i.state())("aria-pressed",i._isOn())("aria-label",i.ariaLabel()||null))},inputs:{id:[1,"id"],value:[1,"value"],disabled:[1,"disabled"],state:[1,"state"],type:[1,"type"],ariaLabel:[1,"aria-label","ariaLabel"]},outputs:{state:"stateChange"}})}return o})();var Pi=Q('hover:bg-muted hover:text-muted-foreground focus-visible:border-ring data-[state=on]:bg-accent data-[state=on]:text-accent-foreground focus-visible:ring-ring/50 inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium whitespace-nowrap transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:pointer-events-none disabled:opacity-50 [&_ng-icon]:pointer-events-none [&_ng-icon]:shrink-0 [&_ng-icon:not([class*="text-"])]:text-base',{variants:{variant:{default:"bg-transparent",outline:"border-input hover:bg-accent hover:text-accent-foreground border bg-transparent shadow-xs"},size:{default:"h-9 min-w-9 px-2",sm:"h-8 min-w-8 px-1.5",lg:"h-10 min-w-10 px-2.5"}},defaultVariants:{variant:"default",size:"default"}}),Qe=(()=>{class o{variant=n("default");size=n("default");userClass=n("",{alias:"class"});_computedClass=r(()=>m(Pi({variant:this.variant(),size:this.size()}),this.userClass()));static \u0275fac=function(t){return new(t||o)};static \u0275dir=h({type:o,selectors:[["button","hlmToggle",""]],hostAttrs:["data-slot","toggle"],hostVars:2,hostBindings:function(t,i){t&2&&g(i._computedClass())},inputs:{variant:[1,"variant"],size:[1,"size"],userClass:[1,"class","userClass"]},features:[A([{directive:di,inputs:["id","id","value","value","disabled","disabled","state","state","aria-label","aria-label","type","type"],outputs:["stateChange","stateChange"]}])]})}return o})();var ui=(()=>{class o{variant=n("default");size=n("default");disabled=n(!1);state=Z("off");isAnimating=b(!1);animationDirection=b("");constructor(){D(()=>{let e=this.state();this.animationDirection()===""&&e==="off"||(e==="on"?this.animationDirection.set("fill"):this.animationDirection.set("empty"),this.isAnimating.set(!0),setTimeout(()=>{this.isAnimating.set(!1)},800))})}animationClass=r(()=>{if(!this.isAnimating())return"";let e=this.animationDirection();return e==="fill"?"animate-bounce-shake":e==="empty"?"animate-empty":""});buttonClass=r(()=>{let e=this.state(),t=this.animationClass(),i="";return e==="on"?i="bg-green-100 hover:bg-green-200 dark:bg-green-900/30 dark:hover:bg-green-900/50 border-green-300 dark:border-green-700":i="bg-muted/50 hover:bg-muted dark:bg-muted/20 dark:hover:bg-muted/40 border-muted-foreground/20",`${t} ${i}`});iconClass=r(()=>{let e=this.state(),t=this.isAnimating();if(e==="on"){let i="text-green-600 dark:text-green-400";return t&&this.animationDirection()==="fill"?`${i} animate-fill`:i}return"text-muted-foreground/60"});static \u0275fac=function(t){return new(t||o)};static \u0275cmp=x({type:o,selectors:[["gh-shopping-basket-toggle"]],inputs:{variant:[1,"variant"],size:[1,"size"],disabled:[1,"disabled"],state:[1,"state"]},outputs:{state:"stateChange"},features:[B([U({lucideShoppingBasket:jt})])],decls:2,vars:9,consts:[["hlmToggle","",1,"relative","overflow-hidden","transition-all","duration-300",3,"stateChange","variant","size","disabled","state"],["hlm","",1,"transition-all","duration-500",3,"name"]],template:function(t,i){t&1&&(a(0,"button",0),re("stateChange",function(_){return se(i.state,_)||(i.state=_),_}),w(1,"ng-icon",1),c()),t&2&&(g(i.buttonClass()),y("variant",i.variant())("size",i.size())("disabled",i.disabled()),ne("state",i.state),l(),g(i.iconClass()),y("name","lucideShoppingBasket"))},dependencies:[Qe,ae,te],styles:["@keyframes _ngcontent-%COMP%_bounce-shake{0%,to{transform:translateY(0) rotate(0) scale(1)}10%{transform:translateY(-8px) rotate(-5deg) scale(1.1)}20%{transform:translateY(-8px) rotate(5deg) scale(1.1)}30%{transform:translateY(-8px) rotate(-5deg) scale(1.1)}40%{transform:translateY(0) rotate(0) scale(1)}50%{transform:scale(.95)}60%{transform:scale(1.05)}70%{transform:scale(.98)}80%{transform:scale(1.02)}90%{transform:scale(1)}}@keyframes _ngcontent-%COMP%_fill-basket{0%{opacity:1}50%{opacity:.6;filter:brightness(1.5)}to{opacity:1}}@keyframes _ngcontent-%COMP%_empty-basket{0%{transform:scale(1);opacity:1}30%{transform:scale(.8) rotate(-10deg);opacity:.7}60%{transform:scale(1.1) rotate(10deg);opacity:.8}to{transform:scale(1) rotate(0);opacity:1}}.animate-bounce-shake[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_bounce-shake .8s ease-in-out}.animate-fill[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fill-basket .5s ease-in-out}.animate-empty[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_empty-basket .6s ease-in-out}[_nghost-%COMP%]{display:inline-block}"],changeDetection:0})}return o})();var Pe=(()=>{class o{supabase=d(ke);currentListId=b(null);loadingCount=b(0);loading=r(()=>this.loadingCount()>0);items=De({params:()=>({listId:this.currentListId()}),loader:async({params:e})=>{if(!e.listId)return[];let{data:t,error:i}=await this.supabase.supabase.from("shopping_list_item").select("*").eq("list_id",e.listId).order("created_at",{ascending:!1});if(i)throw i;return t??[]}});count=r(()=>this.items.value()?.length??0);setCurrentList(e){this.currentListId.set(e)}addItem(e,t){let i=this.currentListId();return i?(this.loadingCount.update(s=>s+1),Y(this.supabase.supabase.from("shopping_list_item").insert({product_name:e,additional_info:t,list_id:i,active:!0,active_changed:new Date().toISOString()}).select().single()).pipe(K(s=>k({error:s})),P(()=>this.loadingCount.update(s=>s-1)),_e(s=>{if(s?.error)throw s.error;this.items.reload()}),he(s=>{if(s?.error)throw s.error;return k(s.data)}))):k({error:new Error("No list selected")})}updateItem(e,t){return this.loadingCount.update(i=>i+1),Y(this.supabase.supabase.from("shopping_list_item").update(t).eq("id",e).select().single()).pipe(K(i=>k({error:i})),P(()=>this.loadingCount.update(i=>i-1)),_e(i=>{if(i?.error)throw i.error;this.items.reload()}),he(i=>{if(i?.error)throw i.error;return k(i.data)}))}deleteItem(e){return this.loadingCount.update(t=>t+1),Y(this.supabase.supabase.from("shopping_list_item").delete().eq("id",e)).pipe(K(t=>k({error:t})),P(()=>this.loadingCount.update(t=>t-1)),_e(t=>{if(t?.error)throw t.error;this.items.reload()}),he(t=>{if(t?.error)throw t.error;return k(void 0)}))}toggleItem(e,t){return this.updateItem(e,{active:t,active_changed:new Date().toISOString()})}static \u0275fac=function(t){return new(t||o)};static \u0275prov=ve({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var Ei=["*"],Vi={hasBackdrop:!1,scrollStrategy:"reposition"},Ne=(()=>{class o extends X{align=n("center");sideOffset=n(0,{transform:We});offsetX=n(0,{transform:We});_positionStrategy;constructor(){super(),this.setAriaDescribedBy(""),this.setAriaLabelledBy(""),D(()=>{let e=this.align();$(()=>{this.mutableAttachPositions.set([{originX:e,originY:"bottom",overlayX:e,overlayY:"top"},{originX:e,originY:"top",overlayX:e,overlayY:"bottom"}])}),$(()=>{this.applySideOffset(this.sideOffset())})}),D(()=>{let e=this.sideOffset();$(()=>{this.applySideOffset(e)})}),D(()=>{let e=this.offsetX();$(()=>{this.applyOffsetX(e)})}),D(()=>{let e=this.mutableAttachTo(),t=this.mutableAttachPositions();!e||!t||t.length===0||$(()=>{this._positionStrategy?this._positionStrategy.setOrigin(e):this._positionStrategy=this.positionBuilder.flexibleConnectedTo(e).withPush(!1),this._positionStrategy.withPositions(t),this.mutablePositionStrategy.set(this._positionStrategy)})})}applySideOffset(e){this.mutableAttachPositions.update(t=>t.map(i=>ge(q({},i),{offsetY:i.originY==="top"?-e:e})))}applyOffsetX(e){this.mutableAttachPositions.update(t=>t.map(i=>ge(q({},i),{offsetX:e})))}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=x({type:o,selectors:[["brn-popover"]],inputs:{align:[1,"align"],sideOffset:[1,"sideOffset"],offsetX:[1,"offsetX"]},exportAs:["brnPopover"],features:[B([{provide:X,useExisting:be(()=>o)},Xt(Vi)]),qe],ngContentSelectors:Ei,decls:1,vars:0,template:function(t,i){t&1&&(E(),H(0))},encapsulation:2,changeDetection:0})}return o})();var pi=(()=>{class o extends Be{static \u0275fac=(()=>{let e;return function(i){return(e||(e=_t(o)))(i||o)}})();static \u0275dir=h({type:o,selectors:[["","brnPopoverContent",""]],features:[B([Ut(()=>o)]),qe]})}return o})();var Xe=new fe("BrnAutocompleteItemToken");function Oi(o){return{provide:Xe,useExisting:o}}var gi=new fe("BrnAutocompleteToken");function Ri(o){return{provide:gi,useExisting:o}}function Ye(){return d(gi)}var Ee=(()=>{class o{static _id=0;_injector=d(Ge);id=n(`brn-autocomplete-${++o._id}`);valueChange=G();selectionCleared=G();_brnPopover=d(Ne,{optional:!0});_focus=b("first");items=Te(Xe,{descendants:!0});keyManager=new ri(this.items,this._injector);isExpanded=r(()=>this._brnPopover?.stateComputed()==="open");constructor(){this.keyManager.withVerticalOrientation().withHomeAndEnd().withWrap().skipPredicate(e=>e.disabled),D(()=>{let e=this.items(),t=this._focus();$(()=>{if(!e.length)return;let i=this.keyManager.activeItem;(!i||!e.includes(i))&&(t==="first"?this.keyManager.setFirstItemActive():this.keyManager.setLastItemActive())})}),this.keyManager.change.pipe($e()).subscribe(()=>{let e=this.keyManager.activeItem?.value();e&&this.valueChange.emit(e)})}selectActiveItem(){this._brnPopover?.stateComputed()==="open"&&this.keyManager.activeItem?.selected.emit()}open(e="first"){this._brnPopover?.open(),this._focus.set(e)}close(){this._brnPopover?.close()}toggle(){this.isExpanded()?this.close():this.open()}static \u0275fac=function(t){return new(t||o)};static \u0275dir=h({type:o,selectors:[["","brnAutocomplete",""]],contentQueries:function(t,i,s){t&1&&Ce(s,i.items,Xe,5),t&2&&J()},hostVars:1,hostBindings:function(t,i){t&1&&u("keydown.enter",function(){return i.selectActiveItem()}),t&2&&W("id",i.id())},inputs:{id:[1,"id"]},outputs:{valueChange:"valueChange",selectionCleared:"selectionCleared"},features:[B([Ri(o)])]})}return o})(),hi=(()=>{class o{_templateRef=d(vt);_viewContainerRef=d(yt);_autocomplete=Ye();_visible=r(()=>this._autocomplete.items().length>0);constructor(){D(()=>{this._visible()?this._viewContainerRef.clear():this._viewContainerRef.createEmbeddedView(this._templateRef)})}static \u0275fac=function(t){return new(t||o)};static \u0275dir=h({type:o,selectors:[["","brnAutocompleteEmpty",""]]})}return o})(),fi=(()=>{class o{static _id=0;id=n(`brn-autocomplete-group-${++o._id}`);static \u0275fac=function(t){return new(t||o)};static \u0275dir=h({type:o,selectors:[["","brnAutocompleteGroup",""]],hostAttrs:["role","group"],hostVars:1,hostBindings:function(t,i){t&2&&W("id",i.id())},inputs:{id:[1,"id"]}})}return o})(),_i=(()=>{class o{static _id=0;_platform=d(bt);_elementRef=d(N);_autocomplete=Ye();id=n(`brn-autocomplete-item-${++o._id}`);value=n.required();_disabled=n(!1,{alias:"disabled",transform:V});get disabled(){return this._disabled()}_active=b(!1);selected=G();getLabel(){return this._elementRef.nativeElement.textContent?.trim()??""}setActiveStyles(){this._active.set(!0),Ht(this._platform)&&this._elementRef.nativeElement.scrollIntoView({block:"nearest"})}setInactiveStyles(){this._active.set(!1)}onClick(){this._autocomplete.keyManager.setActiveItem(this),this.selected.emit()}activate(){this._disabled()||this._autocomplete.keyManager.setActiveItem(this)}static \u0275fac=function(t){return new(t||o)};static \u0275dir=h({type:o,selectors:[["button","brnAutocompleteItem",""]],hostAttrs:["type","button","role","option","tabIndex","-1"],hostVars:6,hostBindings:function(t,i){t&1&&u("click",function(){return i.onClick()})("mouseenter",function(){return i.activate()}),t&2&&(W("id",i.id()),L("disabled",i._disabled()?!0:null)("data-disabled",i._disabled()?"":null)("data-value",i.value())("aria-selected",i._active())("data-selected",i._active()?"":null))},inputs:{id:[1,"id"],value:[1,"value"],_disabled:[1,"disabled","_disabled"]},outputs:{selected:"selected"},features:[B([Oi(o)])]})}return o})(),bi=(()=>{class o{static _id=0;id=n(`brn-autocomplete-list-${++o._id}`);static \u0275fac=function(t){return new(t||o)};static \u0275dir=h({type:o,selectors:[["","brnAutocompleteList",""]],hostAttrs:["role","listbox"],hostVars:1,hostBindings:function(t,i){t&2&&W("id",i.id())},inputs:{id:[1,"id"]}})}return o})(),vi=(()=>{class o{_autocomplete=Ye();_isExpanded=this._autocomplete.isExpanded;_activeDescendant=b(void 0);constructor(){this._autocomplete.keyManager.change.pipe(je(this._autocomplete.keyManager.activeItemIndex),$e()).subscribe(()=>{this._activeDescendant.set(this._autocomplete.keyManager.activeItem?.id())})}onKeyDown(e){e.key==="Enter"&&e.preventDefault(),this._isExpanded()||(e.key==="ArrowDown"&&this._autocomplete.open("first"),e.key==="ArrowUp"&&this._autocomplete.open("last"),e.key==="Escape"&&this._autocomplete.selectionCleared.emit()),this._autocomplete.keyManager.onKeydown(e)}static \u0275fac=function(t){return new(t||o)};static \u0275dir=h({type:o,selectors:[["input","brnAutocompleteSearchInput",""]],hostAttrs:["role","combobox","aria-autocomplete","list"],hostVars:2,hostBindings:function(t,i){t&1&&u("keydown",function(_){return i.onKeyDown(_)}),t&2&&L("aria-activedescendant",i._activeDescendant())("aria-expanded",i._isExpanded())}})}return o})();var Ke=(()=>{class o{_stateProvider=Qt({host:!0});state=this._stateProvider.state??b("closed");_renderer=d(Ct);_element=d(N);constructor(){D(()=>{this._renderer.setAttribute(this._element.nativeElement,"data-state",this.state())})}userClass=n("",{alias:"class"});_computedClass=r(()=>m("border-border bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative w-72 rounded-md border p-4 shadow-md outline-none",this.userClass()));static \u0275fac=function(t){return new(t||o)};static \u0275dir=h({type:o,selectors:[["","hlmPopoverContent",""],["","brnPopoverContent","","hlm",""]],hostVars:2,hostBindings:function(t,i){t&2&&g(i._computedClass())},inputs:{userClass:[1,"class","userClass"]}})}return o})();var Ze=(()=>{class o{userClass=n("",{alias:"class"});_computedClass=r(()=>m("py-6 text-center text-sm",this.userClass()));static \u0275fac=function(t){return new(t||o)};static \u0275dir=h({type:o,selectors:[["","hlmAutocompleteEmpty",""]],hostVars:2,hostBindings:function(t,i){t&2&&g(i._computedClass())},inputs:{userClass:[1,"class","userClass"]}})}return o})();var ji=["*"],Je=(()=>{class o{userClass=n("",{alias:"class"});_computedClass=r(()=>m("text-foreground block overflow-hidden p-1",this.userClass()));static \u0275fac=function(t){return new(t||o)};static \u0275cmp=x({type:o,selectors:[["hlm-autocomplete-group"]],hostVars:2,hostBindings:function(t,i){t&2&&g(i._computedClass())},inputs:{userClass:[1,"class","userClass"]},features:[A([{directive:fi,inputs:["id","id"]}])],ngContentSelectors:ji,decls:1,vars:0,template:function(t,i){t&1&&(E(),H(0))},encapsulation:2,changeDetection:0})}return o})();var Gi=["hlm-autocomplete-item",""],qi=["*"],et=(()=>{class o{userClass=n("",{alias:"class"});_computedClass=r(()=>m("data-[selected]:bg-accent data-[selected=true]:text-accent-foreground [&>ng-icon]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-start text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[hidden]:hidden [&>ng-icon]:pointer-events-none [&>ng-icon]:shrink-0 [&>ng-icon]:text-base",this.userClass()));static \u0275fac=function(t){return new(t||o)};static \u0275cmp=x({type:o,selectors:[["button","hlm-autocomplete-item",""]],hostVars:2,hostBindings:function(t,i){t&2&&g(i._computedClass())},inputs:{userClass:[1,"class","userClass"]},features:[A([{directive:_i,inputs:["value","value","disabled","disabled","id","id"],outputs:["selected","selected"]}])],attrs:Gi,ngContentSelectors:qi,decls:1,vars:0,template:function(t,i){t&1&&(E(),H(0))},encapsulation:2,changeDetection:0})}return o})();var Wi=["*"],tt=(()=>{class o{userClass=n("",{alias:"class"});_computedClass=r(()=>m("block max-h-60 overflow-x-hidden overflow-y-auto",this.userClass()));static \u0275fac=function(t){return new(t||o)};static \u0275cmp=x({type:o,selectors:[["hlm-autocomplete-list"]],hostVars:2,hostBindings:function(t,i){t&2&&g(i._computedClass())},inputs:{userClass:[1,"class","userClass"]},features:[A([{directive:bi,inputs:["id","id"]}])],ngContentSelectors:Wi,decls:1,vars:0,template:function(t,i){t&1&&(E(),H(0))},encapsulation:2,changeDetection:0})}return o})();var it=(()=>{class o{userClass=n("",{alias:"class"});_computedClass=r(()=>m("group/input-group border-input dark:bg-input/30 relative flex w-full items-center rounded-md border shadow-xs transition-[color,box-shadow] outline-none","h-9 min-w-0 has-[>textarea]:h-auto","has-[>[data-align=inline-start]]:[&>input]:pl-2","has-[>[data-align=inline-end]]:[&>input]:pr-2","has-[>[data-align=block-start]]:h-auto has-[>[data-align=block-start]]:flex-col has-[>[data-align=block-start]]:[&>input]:pb-3","has-[>[data-align=block-end]]:h-auto has-[>[data-align=block-end]]:flex-col has-[>[data-align=block-end]]:[&>input]:pt-3","has-[[data-slot=input-group-control]:focus-visible]:border-ring has-[[data-slot=input-group-control]:focus-visible]:ring-ring/50 has-[[data-slot=input-group-control]:focus-visible]:ring-[3px]","has-[>.ng-invalid.ng-touched]:ring-destructive/20 has-[>.ng-invalid.ng-touched]:border-destructive dark:has-[>.ng-invalid.ng-touched]:ring-destructive/40",this.userClass()));static \u0275fac=function(t){return new(t||o)};static \u0275dir=h({type:o,selectors:[["","hlmInputGroup",""],["hlm-input-group"]],hostAttrs:["data-slot","input-group","role","group"],hostVars:2,hostBindings:function(t,i){t&2&&g(i._computedClass())},inputs:{userClass:[1,"class","userClass"]}})}return o})();var $i=Q("text-muted-foreground flex h-auto cursor-text items-center justify-center gap-2 py-1.5 text-sm font-medium select-none group-data-[disabled=true]/input-group:opacity-50 [&>kbd]:rounded-[calc(var(--radius)-5px)] [&>ng-icon:not([class*='text-'])]:text-base",{variants:{align:{"inline-start":"order-first pl-3 has-[>button]:ml-[-0.45rem] has-[>kbd]:ml-[-0.35rem]","inline-end":"order-last pr-3 has-[>button]:mr-[-0.45rem] has-[>kbd]:mr-[-0.35rem]","block-start":"order-first w-full justify-start px-3 pt-3 group-has-[>input]/input-group:pt-2.5 [.border-b]:pb-3","block-end":"order-last w-full justify-start px-3 pb-3 group-has-[>input]/input-group:pb-2.5 [.border-t]:pt-3"}},defaultVariants:{align:"inline-start"}}),ot=(()=>{class o{align=n("inline-start");userClass=n("",{alias:"class"});_computedClass=r(()=>m($i({align:this.align()}),this.userClass()));static \u0275fac=function(t){return new(t||o)};static \u0275dir=h({type:o,selectors:[["hlm-input-group-addon"],["","hlmInputGroupAddon",""]],hostAttrs:["role","group","data-slot","input-group-addon"],hostVars:3,hostBindings:function(t,i){t&2&&(L("data-align",i.align()),g(i._computedClass()))},inputs:{align:[1,"align"],userClass:[1,"class","userClass"]}})}return o})();var Qi=Q("flex items-center gap-2 text-sm shadow-none",{variants:{size:{xs:"h-6 gap-1 rounded-[calc(var(--radius)-5px)] px-2 has-[>ng-icon]:px-2 [&>ng-icon:not([class*='text-'])]:text-sm",sm:"h-8 gap-1.5 rounded-md px-2.5 has-[>ng-icon]:px-2.5","icon-xs":"size-6 rounded-[calc(var(--radius)-5px)] p-0 has-[>ng-icon]:p-0","icon-sm":"size-8 p-0 has-[>ng-icon]:p-0"}},defaultVariants:{size:"xs"}}),nt=(()=>{class o{_hlmButton=d(ee);size=n("xs");userClass=n("",{alias:"class"});_computedClass=r(()=>m(Qi({size:this.size()}),this.userClass()));constructor(){D(()=>{this._hlmButton.setClass(this._computedClass())})}static \u0275fac=function(t){return new(t||o)};static \u0275dir=h({type:o,selectors:[["button","hlmInputGroupButton",""]],hostVars:1,hostBindings:function(t,i){t&2&&L("data-size",i.size())},inputs:{size:[1,"size"],userClass:[1,"class","userClass"]},features:[B([kt({variant:"ghost"})]),A([{directive:ee,inputs:["variant","variant"]}])]})}return o})();var st=(()=>{class o{_hlmInput=d(ie);userClass=n("",{alias:"class"});_computedClass=r(()=>m("flex-1 rounded-none border-0 bg-transparent shadow-none focus-visible:ring-0 dark:bg-transparent",this.userClass()));constructor(){D(()=>{this._hlmInput.setClass(this._computedClass())})}static \u0275fac=function(t){return new(t||o)};static \u0275dir=h({type:o,selectors:[["input","hlmInputGroupInput",""]],hostAttrs:["data-slot","input-group-control"],hostVars:2,hostBindings:function(t,i){t&2&&g(i._computedClass())},inputs:{userClass:[1,"class","userClass"]},features:[A([ie])]})}return o})();var Ss=Q("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 dark:bg-input/30 flex [field-sizing:content] min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",{variants:{error:{auto:"[&.ng-invalid.ng-touched]:border-destructive [&.ng-invalid.ng-touched]:ring-destructive/20 dark:[&.ng-invalid.ng-touched]:ring-destructive/40",true:"border-destructive focus-visible:border-destructive focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40"}},defaultVariants:{error:"auto"}});var rt=(()=>{class o{_host=d(N,{host:!0});_brnDialog=d(X,{optional:!0});disabledTrigger=n(!1,{transform:V});constructor(){this._brnDialog&&this._brnDialog.mutableAttachTo.set(this._host.nativeElement)}open(){this.disabledTrigger()||this._brnDialog?.open()}static \u0275fac=function(t){return new(t||o)};static \u0275dir=h({type:o,selectors:[["","hlmAutocompleteTrigger",""]],hostBindings:function(t,i){t&1&&u("click",function(){return i.open()})},inputs:{disabledTrigger:[1,"disabledTrigger"]}})}return o})();function Ti(){return{transformValueToSearch:o=>typeof o=="string"?o:String(o),transformOptionToString:o=>typeof o=="string"?o:String(o),transformOptionToValue:void 0,requireSelection:!1,showClearBtn:!1,debounceTime:150}}var xi=new fe("HlmAutocompleteConfig");function wi(o){return{provide:xi,useValue:q(q({},Ti()),o)}}function Ii(){return d(xi,{optional:!0})??Ti()}var Yi=["input"],Ki=[[["","loading",""]],[["","empty",""]]],Zi=["[loading]","[empty]"],Ji=o=>({$implicit:o});function eo(o,f){if(o&1){let e=R();a(0,"button",13),u("click",function(){v(e);let i=p();return C(i._selectionCleared())}),w(1,"ng-icon",14),c()}if(o&2){let e=p();y("disabled",e._disabled())}}function to(o,f){o&1&&Tt(0)}function io(o,f){if(o&1&&oe(0,to,1,0,"ng-container",19),o&2){let e=p().$implicit;y("ngTemplateOutlet",f)("ngTemplateOutletContext",Lt(2,Ji,e))}}function oo(o,f){if(o&1&&I(0),o&2){let e=p().$implicit,t=p(2);j(" ",t.transformOptionToString()(e)," ")}}function no(o,f){if(o&1){let e=R();a(0,"button",18),u("selected",function(){let i=v(e).$implicit,s=p(2);return C(s._optionSelected(i))}),F(1,io,1,4,"ng-container")(2,oo,1,1),c()}if(o&2){let e,t=f.$implicit,i=p(2),s=Mt(0);g(i._computedAutocompleteItemClass()),y("value",s?s(t):t),l(),O((e=i.optionTemplate())?1:2,e)}}function so(o,f){if(o&1&&I(0),o&2){let e=p(4);z(e.loadingText())}}function ro(o,f){o&1&&H(0,0,null,so,1,1)}function ao(o,f){if(o&1&&I(0),o&2){let e=p(4);z(e.emptyText())}}function lo(o,f){o&1&&H(0,1,null,ao,1,1)}function co(o,f){if(o&1&&(a(0,"div",20),F(1,ro,2,0)(2,lo,2,0),c()),o&2){let e=p(2);g(e._computedAutocompleteEmptyClass()),l(),O(e.loading()?1:2)}}function mo(o,f){if(o&1&&(a(0,"div",15)(1,"hlm-autocomplete-list")(2,"hlm-autocomplete-group"),le(3,no,3,4,"button",16,Dt),c()(),oe(5,co,3,3,"div",17),c()),o&2){let e=p();xt("width",e._elementRef.nativeElement.offsetWidth,"px"),l(),g(e._computedAutocompleteListClass()),ye("hidden",e.filteredOptions().length===0),l(2),ce(e.filteredOptions())}}var uo={provide:Pt,useExisting:be(()=>Fe),multi:!0},Fe=(()=>{class o{static _id=0;_config=Ii();_brnAutocomplete=me.required(Ee);_inputRef=me.required("input",{read:N});_elementRef=d(N);userClass=n("",{alias:"class"});_computedClass=r(()=>m("block w-full",this.userClass()));autocompleteSearchClass=n("");_computedAutocompleteSearchClass=r(()=>m("",this.autocompleteSearchClass()));autocompleteInputClass=n("");_computedAutocompleteInputClass=r(()=>m("",this.autocompleteInputClass()));autocompleteListClass=n("");_computedAutocompleteListClass=r(()=>m("",this.autocompleteListClass()));autocompleteItemClass=n("");_computedAutocompleteItemClass=r(()=>m("",this.autocompleteItemClass()));autocompleteEmptyClass=n("");_computedAutocompleteEmptyClass=r(()=>m("",this.autocompleteEmptyClass()));filteredOptions=n([]);value=Z();debounceTime=n(this._config.debounceTime);search=Z("");_search=$t(this.search,this.debounceTime());transformValueToSearch=n(this._config.transformValueToSearch);requireSelection=n(this._config.requireSelection,{transform:V});transformOptionToString=n(this._config.transformOptionToString);transformOptionToValue=n(this._config.transformOptionToValue);displayWith=n(void 0);_displaySearchValue=r(()=>{let e=this.displayWith();return e||this.transformValueToSearch()});optionTemplate=n();loading=n(!1,{transform:V});showClearBtn=n(this._config.showClearBtn,{transform:V});searchPlaceholderText=n("Select an option");loadingText=n("Loading options...");emptyText=n("No options found");ariaLabelToggleButton=n("Toggle options");inputId=n(`hlm-autocomplete-input-${++o._id}`);disabled=n(!1,{transform:V});_disabled=At(()=>this.disabled());valueChange=G();searchChange=G();_onChange;_onTouched;constructor(){D(()=>{let e=this._search();this.searchChange.emit(e)})}_searchChanged(e){let t=e.target.value;this.search.set(t??""),!this._brnAutocomplete().isExpanded()&&t.length>0&&this._brnAutocomplete().open()}_toggleOptions(){(this._search()||this.filteredOptions().length>0)&&this._brnAutocomplete().toggle(),this._inputRef().nativeElement.focus()}_selectionCleared(){this.value.set(void 0),this._onChange?.(null),this.valueChange.emit(null),this.search.set("")}_optionSelected(e){let t=this.transformOptionToValue(),i=t?t(e):e;this.value.set(i),this._onChange?.(i),this.valueChange.emit(i);let s=this._displaySearchValue()(i);this.search.set(s??""),this._brnAutocomplete().close()}writeValue(e){this.value.set(e||void 0);let t=e?this._displaySearchValue()(e):"";this.search.set(t)}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this._disabled.set(e)}_closed(){if(this.requireSelection()){let e=this.value(),t=e?this._displaySearchValue()(e):"";this.search.set(t??"")}}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=x({type:o,selectors:[["hlm-autocomplete"]],viewQuery:function(t,i){t&1&&(de(i._brnAutocomplete,Ee,5),de(i._inputRef,Yi,5,N)),t&2&&J(2)},hostVars:2,hostBindings:function(t,i){t&2&&g(i._computedClass())},inputs:{userClass:[1,"class","userClass"],autocompleteSearchClass:[1,"autocompleteSearchClass"],autocompleteInputClass:[1,"autocompleteInputClass"],autocompleteListClass:[1,"autocompleteListClass"],autocompleteItemClass:[1,"autocompleteItemClass"],autocompleteEmptyClass:[1,"autocompleteEmptyClass"],filteredOptions:[1,"filteredOptions"],value:[1,"value"],debounceTime:[1,"debounceTime"],search:[1,"search"],transformValueToSearch:[1,"transformValueToSearch"],requireSelection:[1,"requireSelection"],transformOptionToString:[1,"transformOptionToString"],transformOptionToValue:[1,"transformOptionToValue"],displayWith:[1,"displayWith"],optionTemplate:[1,"optionTemplate"],loading:[1,"loading"],showClearBtn:[1,"showClearBtn"],searchPlaceholderText:[1,"searchPlaceholderText"],loadingText:[1,"loadingText"],emptyText:[1,"emptyText"],ariaLabelToggleButton:[1,"ariaLabelToggleButton"],inputId:[1,"inputId"],disabled:[1,"disabled"]},outputs:{value:"valueChange",search:"searchChange",valueChange:"valueChange",searchChange:"searchChange"},features:[B([uo,U({lucideSearch:zt,lucideChevronDown:Ft,lucideCircleX:Ot})])],ngContentSelectors:Zi,decls:14,vars:14,consts:[["popover",""],["input",""],["align","start","autoFocus","first-heading","sideOffset","5","closeDelay","100",3,"closed","closeOnOutsidePointerEvents"],["brnAutocomplete","",3,"selectionCleared"],["hlmInputGroup","","hlmAutocompleteTrigger","",3,"disabledTrigger"],["brnAutocompleteSearchInput","","hlmInputGroupInput","","type","text","autocomplete","off",3,"input","id","placeholder","disabled","value"],["hlmInputGroupAddon",""],["name","lucideSearch"],["hlmInputGroupAddon","","align","inline-end"],["hlmInputGroupButton","","type","button","tabindex","-1","aria-label","clear","size","icon-xs",3,"disabled"],["hlmInputGroupButton","","type","button","tabindex","-1","size","icon-xs",3,"click","disabled"],["name","lucideChevronDown"],["hlmPopoverContent","","class","p-0",3,"width",4,"brnPopoverContent"],["hlmInputGroupButton","","type","button","tabindex","-1","aria-label","clear","size","icon-xs",3,"click","disabled"],["name","lucideCircleX"],["hlmPopoverContent","",1,"p-0"],["hlm-autocomplete-item","",3,"class","value"],["hlmAutocompleteEmpty","",3,"class",4,"brnAutocompleteEmpty"],["hlm-autocomplete-item","",3,"selected","value"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["hlmAutocompleteEmpty",""]],template:function(t,i){if(t&1){let s=R();E(Ki),wt(0),a(1,"brn-popover",2,0),u("closed",function(){return v(s),C(i._closed())}),a(3,"div",3),u("selectionCleared",function(){return v(s),C(i._selectionCleared())}),a(4,"div",4)(5,"input",5,1),u("input",function(mt){return v(s),C(i._searchChanged(mt))}),c(),a(7,"div",6),w(8,"ng-icon",7),c(),a(9,"div",8),F(10,eo,2,1,"button",9),a(11,"button",10),u("click",function(){return v(s),C(i._toggleOptions())}),w(12,"ng-icon",11),c()()(),oe(13,mo,6,6,"div",12),c()()}t&2&&(It(i.transformOptionToValue()),l(),y("closeOnOutsidePointerEvents",!0),l(3),g(i._computedAutocompleteSearchClass()),y("disabledTrigger",!i._search()||i._disabled()),l(),g(i._computedAutocompleteInputClass()),y("id",i.inputId())("placeholder",i.searchPlaceholderText())("disabled",i._disabled())("value",i.search()),l(5),O(i.showClearBtn()&&i.value()!==void 0?10:-1),l(),y("disabled",i._disabled()),L("aria-label",i.ariaLabelToggleButton()))},dependencies:[Bt,Ee,hi,Ze,Je,et,tt,rt,Ne,pi,Ke,te,it,ot,nt,st,vi],encapsulation:2,changeDetection:0})}return o})();function go(o,f){if(o&1){let e=R();a(0,"input",7),u("ngModelChange",function(i){v(e);let s=p();return C(s.editingName.set(i))})("blur",function(){v(e);let i=p();return C(i.saveInline())})("keydown.enter",function(i){v(e);let s=p();return i.preventDefault(),C(s.saveInline())})("keydown.escape",function(){v(e);let i=p();return C(i.cancelEdit())}),c()}if(o&2){let e=p();y("id",St("edit-",e.item().id))("ngModel",e.editingName())}}function ho(o,f){if(o&1){let e=R();a(0,"div",5)(1,"h3",8),u("click",function(){v(e);let i=p();return C(i.startEdit())}),I(2),c()()}if(o&2){let e=p();l(2),j(" ",e.item().product_name," ")}}var Si=(()=>{class o{service=d(Pe);item=n.required();itemUpdated=G();itemDeleted=G();busyCount=b(0);busy=r(()=>this.busyCount()>0);editingName=b(null);isEditing=r(()=>this.editingName()!==null);toggleItem(){let e=this.item();this.busyCount.update(t=>t+1),this.service.toggleItem(e.id,!e.active).pipe(P(()=>this.busyCount.update(t=>t-1))).subscribe({next:()=>this.itemUpdated.emit(),error:t=>console.error("Toggle error:",t)})}onBasketToggle(e){let t=this.item(),i=e==="on";t.active!==i&&(this.busyCount.update(s=>s+1),this.service.toggleItem(t.id,i).pipe(P(()=>this.busyCount.update(s=>s-1))).subscribe({next:()=>this.itemUpdated.emit(),error:s=>console.error("Toggle error:",s)}))}deleteItem(){if(!confirm("Are you sure you want to delete this item?"))return;let e=this.item();this.busyCount.update(t=>t+1),this.service.deleteItem(e.id).pipe(P(()=>this.busyCount.update(t=>t-1))).subscribe({next:()=>this.itemDeleted.emit(),error:t=>console.error("Delete error:",t)})}startEdit(){this.editingName.set(this.item().product_name??""),setTimeout(()=>{let e=document.getElementById("edit-"+this.item().id);e?.focus(),e?.select()},0)}saveInline(){let e=(this.editingName()||"").trim(),t=this.item();if(e===(t.product_name??"").trim()){this.cancelEdit();return}this.busyCount.update(i=>i+1),this.service.updateItem(t.id,{product_name:e}).pipe(P(()=>{this.busyCount.update(i=>i-1),this.cancelEdit()})).subscribe({next:()=>this.itemUpdated.emit(),error:i=>console.error("Update error:",i)})}cancelEdit(){this.editingName.set(null)}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=x({type:o,selectors:[["lib-shopping-list-item-card"]],inputs:{item:[1,"item"]},outputs:{itemUpdated:"itemUpdated",itemDeleted:"itemDeleted"},features:[B([U({lucideTrash:Ae})])],decls:7,vars:4,consts:[["hlmCard","",1,"group","p-2","sm:p-3","relative"],["hlmCardContent",""],[1,"flex","items-center","gap-3","w-full"],[1,"flex-1","min-w-0"],["hlmInput","",1,"w-full",3,"id","ngModel"],[1,"h-8","flex","items-center"],["size","sm","variant","outline",1,"ml-auto",3,"stateChange","state"],["hlmInput","",1,"w-full",3,"ngModelChange","blur","keydown.enter","keydown.escape","id","ngModel"],["hlmCardTitle","",1,"truncate","cursor-pointer","hover:text-primary",3,"click"]],template:function(t,i){t&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),F(4,go,1,3,"input",4)(5,ho,3,1,"div",5),c(),a(6,"gh-shopping-basket-toggle",6),u("stateChange",function(_){return i.onBasketToggle(_)}),c()()()()),t&2&&(ye("opacity-60",!i.item().active),l(4),O(i.isEditing()?4:5),l(2),y("state",i.item().active?"on":"off"))},dependencies:[ue,pe,Ie,Me,Se,ai,ci,li,ie,ui],encapsulation:2,changeDetection:0})}return o})();var Re=(()=>{class o{orientation=n("horizontal");$orientation=this.orientation;direction=n("ltr");$direction=this.direction;activeTab=Z(void 0,{alias:"brnTabs"});$activeTab=this.activeTab.asReadonly();activationMode=n("automatic");$activationMode=this.activationMode;tabActivated=G();_tabs=b({});$tabs=this._tabs.asReadonly();registerTrigger(e,t){this.updateEntry(e,{trigger:t})}registerContent(e,t){this.updateEntry(e,{content:t})}unregisterTrigger(e){this.updateEntry(e,{trigger:void 0}),this.activeTab()===e&&this.activeTab.set(void 0)}unregisterContent(e){this.updateEntry(e,{content:void 0})}updateEntry(e,t){this._tabs.update(i=>{let s=i[e]??{},_=q(q({},s),t);if(!_.trigger&&!_.content){let ut=i,{[e]:Po}=ut;return gt(ut,[pt(e)])}return ge(q({},i),{[e]:_})})}emitTabActivated(e){this.tabActivated.emit(e)}setActiveTab(e){this.activeTab.set(e)}static \u0275fac=function(t){return new(t||o)};static \u0275dir=h({type:o,selectors:[["","brnTabs",""]],hostVars:2,hostBindings:function(t,i){t&2&&L("data-orientation",i.orientation())("dir",i.direction())},inputs:{orientation:[1,"orientation"],direction:[1,"direction"],activeTab:[1,"brnTabs","activeTab"],activationMode:[1,"activationMode"]},outputs:{activeTab:"brnTabsChange",tabActivated:"tabActivated"},exportAs:["brnTabs"]})}return o})();var Oe=(()=>{class o{elementRef=d(N);_root=d(Re);_orientation=this._root.$orientation;triggerFor=n.required({alias:"brnTabsTrigger"});selected=r(()=>this._root.$activeTab()===this.triggerFor());_contentId=r(()=>`brn-tabs-content-${this.triggerFor()}`);_labelId=r(()=>`brn-tabs-label-${this.triggerFor()}`);_disabled=n(!1,{alias:"disabled",transform:V});get disabled(){return this._disabled()}constructor(){D(()=>{let e=this.triggerFor();$(()=>this._root.registerTrigger(e,this))})}focus(){this.elementRef.nativeElement.focus(),this._root.$activationMode()==="automatic"&&this.activate()}activate(){this.triggerFor()&&(this._root.setActiveTab(this.triggerFor()),this._root.emitTabActivated(this.triggerFor()))}get key(){return this.triggerFor()}ngOnDestroy(){this._root.unregisterTrigger(this.triggerFor())}static \u0275fac=function(t){return new(t||o)};static \u0275dir=h({type:o,selectors:[["button","brnTabsTrigger",""]],hostAttrs:["type","button","role","tab"],hostVars:9,hostBindings:function(t,i){t&1&&u("click",function(){return i.activate()}),t&2&&(W("id",i._labelId())("tabIndex",i._disabled()?-1:i.selected()?0:-1),L("aria-selected",i.selected())("aria-controls",i._contentId())("aria-disabled",i._disabled())("data-state",i.selected()?"active":"inactive")("data-orientation",i._orientation())("data-disabled",i._disabled()?"":void 0)("disabled",i._disabled()?"":void 0))},inputs:{triggerFor:[1,"brnTabsTrigger","triggerFor"],_disabled:[1,"disabled","_disabled"]},exportAs:["brnTabsTrigger"]})}return o})(),Li=(()=>{class o{_root=d(Re);_orientation=this._root.$orientation;_direction=this._root.$direction;_activeTab=this._root.$activeTab;_tabs=this._root.$tabs;_elementRef=d(N);_keyDownListener=ht(this._elementRef.nativeElement,"keydown");_keyManager;triggers=Te(Oe,{descendants:!0});ngAfterContentInit(){this._keyManager=new Kt(this.triggers()).withHorizontalOrientation(this._direction()).withHomeAndEnd().withPageUpDown().withWrap(),this._keyDownListener.pipe(ft(1)).subscribe(()=>{let e=this._activeTab(),t=this._tabs(),i=0;if(e){let s=t[e];s&&(i=this.triggers().indexOf(s.trigger))}this._keyManager?.setActiveItem(i)}),this._keyDownListener.subscribe(e=>{"key"in e&&(this._orientation()==="horizontal"&&(e.key==="ArrowUp"||e.key==="ArrowDown")||this._orientation()==="vertical"&&(e.key==="ArrowLeft"||e.key==="ArrowRight"))||this._keyManager?.onKeydown(e)})}static \u0275fac=function(t){return new(t||o)};static \u0275dir=h({type:o,selectors:[["","brnTabsList",""]],contentQueries:function(t,i,s){t&1&&Ce(s,i.triggers,Oe,5),t&2&&J()},hostAttrs:["role","tablist"],hostVars:2,hostBindings:function(t,i){t&2&&L("aria-orientation",i._orientation())("data-orientation",i._orientation())},exportAs:["brnTabsList"]})}return o})();var Ma=Wt({passive:!0});var fo=["*"],lt=(()=>{class o{tab=n.required();userClass=n("",{alias:"class"});_computedClass=r(()=>m("flex flex-col gap-2",this.userClass()));static \u0275fac=function(t){return new(t||o)};static \u0275cmp=x({type:o,selectors:[["hlm-tabs"]],hostVars:2,hostBindings:function(t,i){t&2&&g(i._computedClass())},inputs:{tab:[1,"tab"],userClass:[1,"class","userClass"]},features:[A([{directive:Re,inputs:["orientation","orientation","direction","direction","activationMode","activationMode","brnTabs","tab"],outputs:["tabActivated","tabActivated"]}])],ngContentSelectors:fo,decls:1,vars:0,template:function(t,i){t&1&&(E(),H(0))},encapsulation:2,changeDetection:0})}return o})();var _o=["*"],Ai=Q("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",{variants:{orientation:{horizontal:"h-10 space-x-1",vertical:"mt-2 h-fit flex-col space-y-1"}},defaultVariants:{orientation:"horizontal"}}),ct=(()=>{class o{orientation=n("horizontal");userClass=n("",{alias:"class"});_computedClass=r(()=>m(Ai({orientation:this.orientation()}),this.userClass()));static \u0275fac=function(t){return new(t||o)};static \u0275cmp=x({type:o,selectors:[["hlm-tabs-list"]],hostVars:2,hostBindings:function(t,i){t&2&&g(i._computedClass())},inputs:{orientation:[1,"orientation"],userClass:[1,"class","userClass"]},features:[A([Li])],ngContentSelectors:_o,decls:1,vars:0,template:function(t,i){t&1&&(E(),H(0))},encapsulation:2,changeDetection:0})}return o})();var dt=(()=>{class o{triggerFor=n.required({alias:"hlmTabsTrigger"});userClass=n("",{alias:"class"});_computedClass=r(()=>m("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_ng-icon]:pointer-events-none [&_ng-icon]:shrink-0 [&_ng-icon]:text-base",this.userClass()));static \u0275fac=function(t){return new(t||o)};static \u0275dir=h({type:o,selectors:[["","hlmTabsTrigger",""]],hostVars:2,hostBindings:function(t,i){t&2&&g(i._computedClass())},inputs:{triggerFor:[1,"hlmTabsTrigger","triggerFor"],userClass:[1,"class","userClass"]},features:[A([{directive:Oe,inputs:["brnTabsTrigger","hlmTabsTrigger","disabled","disabled"]}])]})}return o})();var ze=(()=>{class o{supabase=d(ke);userId=b(null);loadingCount=b(0);loading=r(()=>this.loadingCount()>0);lists=De({params:()=>({userId:this.userId()}),loader:async({params:e})=>{if(!e.userId)return[];let{data:t,error:i}=await this.supabase.supabase.from("shopping_list").select("*").eq("creator_id",e.userId).order("created_at",{ascending:!0});if(i)throw i;return t??[]}});selectedListId=b(null);selectedList=r(()=>{let e=this.selectedListId();return(this.lists.value()??[]).find(i=>i.id===e)??null});constructor(){this.supabase.supabase.auth.getSession().then(({data:e})=>{let t=e?.session?.user??null;t&&this.userId.set(t.id)}).catch(()=>{}),this.supabase.supabase.auth.onAuthStateChange((e,t)=>{let i=t?.user?.id??null;this.userId.set(i),i||this.selectedListId.set(null)}),D(()=>{let e=this.lists.value();!this.selectedListId()&&e&&e.length>0&&this.selectedListId.set(e[0].id)})}createList(e){this.loadingCount.update(t=>t+1),Y(this.supabase.supabase.auth.getUser()).pipe(K(t=>k({error:t})),P(()=>this.loadingCount.update(t=>t-1))).subscribe(t=>{if(t?.error)throw t.error;let i=t?.data?.user?.id;if(!i)throw new Error("Not authenticated");this.loadingCount.update(s=>s+1),Y(this.supabase.supabase.from("shopping_list").insert({name:e,creator_id:i}).select().single()).pipe(K(s=>k({error:s})),P(()=>this.loadingCount.update(s=>s-1))).subscribe(s=>{if(s?.error)throw s.error;this.lists.reload(),s?.data&&this.selectedListId.set(s.data.id)})})}updateList(e,t){this.loadingCount.update(i=>i+1),Y(this.supabase.supabase.from("shopping_list").update({name:t}).eq("id",e).select().single()).pipe(K(i=>k({error:i})),P(()=>this.loadingCount.update(i=>i-1))).subscribe(i=>{if(i?.error)throw i.error;this.lists.reload()})}deleteList(e){this.loadingCount.update(t=>t+1),Y(this.supabase.supabase.from("shopping_list").delete().eq("id",e)).pipe(K(t=>k({error:t})),P(()=>this.loadingCount.update(t=>t-1))).subscribe(t=>{if(t?.error)throw t.error;this.selectedListId()===e&&this.selectedListId.set(null),this.lists.reload()})}static \u0275fac=function(t){return new(t||o)};static \u0275prov=ve({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var yo=["editDialog"],Do=(o,f)=>f.id;function To(o,f){o&1&&w(0,"hlm-spinner",3)}function xo(o,f){if(o&1){let e=R();a(0,"div",6)(1,"button",12),u("click",function(){let i=v(e).$implicit,s=p();return C(s.onTabChange(i.id))}),I(2),a(3,"button",13),M(4,"transloco"),u("click",function(i){let s=v(e).$implicit,_=p();return C(_.openEditDialog(i,s))}),w(5,"ng-icon",14),c(),a(6,"button",13),M(7,"transloco"),u("click",function(i){let s=v(e).$implicit,_=p();return C(_.deleteList(i,s.id))}),w(8,"ng-icon",15),c()()()}if(o&2){let e=f.$implicit;l(),y("hlmTabsTrigger",e.id),l(),j(" ",e.name," "),l(),L("aria-label",S(4,4,"common.edit")),l(3),L("aria-label",S(7,6,"common.delete"))}}function wo(o,f){o&1&&(w(0,"hlm-spinner",3),I(1),M(2,"transloco")),o&2&&(l(),j(" ",S(2,1,"common.creating")," "))}function Io(o,f){o&1&&(I(0),M(1,"transloco")),o&2&&j(" ",S(1,1,"common.create")," ")}function Mo(o,f){if(o&1){let e=R();a(0,"hlm-dialog-content",16)(1,"hlm-dialog-header")(2,"h3",17),I(3),M(4,"transloco"),c(),a(5,"p",18),I(6),M(7,"transloco"),c()(),a(8,"div",19)(9,"div",20)(10,"label",21),I(11),M(12,"transloco"),c(),a(13,"input",22),M(14,"transloco"),re("ngModelChange",function(i){v(e);let s=p();return se(s.newListName,i)||(s.newListName=i),C(i)}),u("keydown.enter",function(){v(e);let i=p();return C(i.createList())}),c()()(),a(15,"hlm-dialog-footer")(16,"button",23),u("click",function(){v(e);let i=p();return C(i.closeDialog())}),I(17),M(18,"transloco"),c(),a(19,"button",24),u("click",function(){v(e);let i=p();return C(i.createList())}),F(20,wo,3,3)(21,Io,2,3),c()()()}if(o&2){let e=p();l(3),z(S(4,8,"shoppingList.createList")),l(3),z(S(7,10,"shoppingList.createListDescription")),l(5),z(S(12,12,"shoppingList.listName")),l(2),ne("ngModel",e.newListName),y("placeholder",S(14,14,"shoppingList.listNamePlaceholder")),l(4),j(" ",S(18,16,"common.cancel")," "),l(2),y("disabled",!e.newListName().trim()||e.creatingList()),l(),O(e.creatingList()?20:21)}}function So(o,f){o&1&&(w(0,"hlm-spinner",3),I(1),M(2,"transloco")),o&2&&(l(),j(" ",S(2,1,"common.updating")," "))}function Lo(o,f){o&1&&(I(0),M(1,"transloco")),o&2&&j(" ",S(1,1,"common.save")," ")}function Ao(o,f){if(o&1){let e=R();a(0,"hlm-dialog-content",16)(1,"hlm-dialog-header")(2,"h3",17),I(3),M(4,"transloco"),c(),a(5,"p",18),I(6),M(7,"transloco"),c()(),a(8,"div",19)(9,"div",20)(10,"label",25),I(11),M(12,"transloco"),c(),a(13,"input",26),M(14,"transloco"),re("ngModelChange",function(i){v(e);let s=p();return se(s.editListName,i)||(s.editListName=i),C(i)}),u("keydown.enter",function(){v(e);let i=p();return C(i.updateList())}),c()()(),a(15,"hlm-dialog-footer")(16,"button",23),u("click",function(){v(e);let i=p();return C(i.closeEditDialog())}),I(17),M(18,"transloco"),c(),a(19,"button",24),u("click",function(){v(e);let i=p();return C(i.updateList())}),F(20,So,3,3)(21,Lo,2,3),c()()()}if(o&2){let e=p();l(3),z(S(4,8,"shoppingList.editList")),l(3),z(S(7,10,"shoppingList.editListDescription")),l(5),z(S(12,12,"shoppingList.listName")),l(2),ne("ngModel",e.editListName),y("placeholder",S(14,14,"shoppingList.listNamePlaceholder")),l(4),j(" ",S(18,16,"common.cancel")," "),l(2),y("disabled",!e.editListName().trim()||e.updatingList()),l(),O(e.updatingList()?20:21)}}var Bi=(()=>{class o{listManager=d(ze);lists=r(()=>this.listManager.lists.value()??[]);selectedListId=this.listManager.selectedListId;loading=r(()=>this.listManager.lists.isLoading()||this.listManager.loading());createDialog=me.required(X);editDialog=me.required("editDialog");newListName=b("");creatingList=b(!1);editingList=b(null);editListName=b("");updatingList=b(!1);onTabChange(e){this.listManager.selectedListId.set(e)}openCreateDialog(){this.newListName.set(""),this.createDialog().open()}closeDialog(){this.createDialog().close(),this.newListName.set("")}createList(){let e=this.newListName().trim();if(e){this.creatingList.set(!0);try{this.listManager.createList(e),this.closeDialog()}finally{this.creatingList.set(!1)}}}openEditDialog(e,t){e.stopPropagation(),this.editingList.set(t),this.editListName.set(t.name),this.editDialog().open()}closeEditDialog(){this.editDialog().close(),this.editingList.set(null),this.editListName.set("")}updateList(){let e=this.editingList(),t=this.editListName().trim();if(!(!e||!t)){this.updatingList.set(!0);try{this.listManager.updateList(e.id,t),this.closeEditDialog()}finally{this.updatingList.set(!1)}}}deleteList(e,t){e.stopPropagation(),confirm("Are you sure you want to delete this list?")&&this.listManager.deleteList(t)}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=x({type:o,selectors:[["lib-shopping-list-tabs"]],viewQuery:function(t,i){t&1&&(de(i.createDialog,X,5),de(i.editDialog,yo,5)),t&2&&J(2)},features:[B([U({lucidePlus:Le,lucideX:qt,lucidePencil:Rt,lucideTrash:Ae})])],decls:17,vars:5,consts:[["createDialog",""],["editDialog",""],[1,"flex","items-center","gap-2","min-w-0"],["size","small"],[1,"flex-1","min-w-0","overflow-hidden",3,"tab"],[1,"w-full","border-b","overflow-x-auto","overflow-y-hidden","scrollbar-hide"],[1,"flex","items-center","gap-1","flex-shrink-0","group"],["hlmBtn","","size","icon","variant","ghost",1,"flex-shrink-0",3,"click"],["hlm","","name","lucidePlus","size","sm"],["closeDelay","100",3,"closed"],["hlm",""],["class","sm:max-w-[425px]",4,"brnDialogContent"],[1,"whitespace-nowrap",3,"click","hlmTabsTrigger"],["hlmBtn","","size","icon-xs","variant","ghost",3,"click"],["hlm","","size","xs","name","lucidePencil"],["hlm","","size","xs","name","lucideTrash"],[1,"sm:max-w-[425px]"],["hlmDialogTitle",""],["hlmDialogDescription",""],[1,"grid","gap-4","py-4"],[1,"grid","gap-2"],["hlmLabel","","for","listName"],["hlmInput","","id","listName",3,"ngModelChange","keydown.enter","ngModel","placeholder"],["hlmBtn","","variant","outline",3,"click"],["hlmBtn","",3,"click","disabled"],["hlmLabel","","for","editListName"],["hlmInput","","id","editListName",3,"ngModelChange","keydown.enter","ngModel","placeholder"]],template:function(t,i){if(t&1){let s=R();a(0,"div",2),F(1,To,1,0,"hlm-spinner",3),a(2,"hlm-tabs",4)(3,"hlm-tabs-list",5),le(4,xo,9,8,"div",6,Do),c()(),a(6,"button",7),M(7,"transloco"),u("click",function(){return v(s),C(i.openCreateDialog())}),w(8,"ng-icon",8),c()(),a(9,"brn-dialog",9,0),u("closed",function(){return v(s),C(i.closeDialog())}),w(11,"brn-dialog-overlay",10),oe(12,Mo,22,18,"hlm-dialog-content",11),c(),a(13,"brn-dialog",9,1),u("closed",function(){return v(s),C(i.closeEditDialog())}),w(15,"brn-dialog-overlay",10),oe(16,Ao,22,18,"hlm-dialog-content",11),c()}t&2&&(l(),O(i.loading()?1:-1),l(),y("tab",i.selectedListId()??""),l(2),ce(i.lists()),l(2),L("aria-label",S(7,3,"shoppingList.createList")))},dependencies:[ue,pe,Ie,Me,Se,lt,ct,dt,ee,ae,te,X,Yt,Be,Jt,ei,ti,ii,Zt,oi,ie,ni,He,we,xe],encapsulation:2,changeDetection:0})}return o})();var Bo=(o,f)=>f.id;function Ho(o,f){o&1&&(a(0,"div",11),w(1,"hlm-spinner",18),c())}function ko(o,f){if(o&1&&w(0,"lib-shopping-list-item-card",17),o&2){let e=f.$implicit;y("item",e)}}var Hi=(()=>{class o{service=d(Pe);listManager=d(ze);newItemName=b("");items=r(()=>this.service.items.value()??[]);loading=r(()=>this.service.items.isLoading()||this.service.loading());sortedItems=r(()=>(this.items()??[]).slice().sort((t,i)=>{if(t.active===i.active){let s=t.active_changed?new Date(t.active_changed).getTime():0;return(i.active_changed?new Date(i.active_changed).getTime():0)-s}return t.active?-1:1}));filteredOptions=r(()=>(this.items()??[]).filter(t=>!t.active&&t.product_name.toLowerCase().includes(this.newItemName().toLowerCase())));constructor(){D(()=>{let e=this.listManager.selectedListId();this.service.setCurrentList(e)})}handleSearch(e){let t=this.items().find(i=>i.product_name===e);!t||t.active||(this.service.toggleItem(t.id,!0).subscribe(),this.clearAutocomplete())}clearAutocomplete(){this.newItemName.set("")}focusAddInput(){try{document.getElementById("add-input")?.focus()}catch{}}addItem(){let e=this.newItemName();e&&this.service.addItem(e,void 0).subscribe({next:()=>{this.clearAutocomplete()},error:t=>{console.error("Add item error:",t)}})}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=x({type:o,selectors:[["lib-sl-dashboard"]],features:[B([U({lucideShoppingCart:Gt,lucidePlus:Le}),wi({transformOptionToString:e=>e.product_name,transformOptionToValue:e=>e.product_name})])],decls:24,vars:10,consts:[[1,"h-dvh","flex","flex-col","gap-4"],["hlmCard","",1,"w-full","rounded-none","flex-initial"],[1,"mx-auto","px-4","py-3","flex","items-center","justify-between"],[1,"flex","items-center","gap-3"],[1,"p-2","bg-primary/10","rounded-lg"],["hlm","","name","lucideShoppingCart","size","sm",1,"text-primary"],[1,"text-lg","font-semibold"],[1,"flex","items-center","gap-2"],[1,"px-4"],[1,"flex-1","flex","flex-col","gap-4","overflow-hidden","py-4"],[1,"flex","sm:flex-row","gap-2","items-stretch","sm:items-center","relative","px-4",3,"ngSubmit"],[1,"absolute","inset-0","bg-background/50","flex","justify-center","items-center","z-10","rounded-lg"],[3,"searchChange","valueChange","keydown.enter","searchPlaceholderText","filteredOptions","search","autocompleteEmptyClass"],["hlmBtn","","size","icon","variant","default","type","submit"],["hlm","","name","lucidePlus","size","sm"],[1,"flex-1","overflow-auto"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","xl:grid-cols-4","gap-4","px-4"],[3,"item"],["size","large"]],template:function(t,i){t&1&&(a(0,"div",0)(1,"header",1)(2,"div",2)(3,"div",3)(4,"div",4),w(5,"ng-icon",5),c(),a(6,"h1",6),I(7),M(8,"transloco"),c()(),a(9,"div",7),w(10,"gh-user-avatar"),c()()(),a(11,"div",8),w(12,"lib-shopping-list-tabs"),c(),a(13,"main",9)(14,"form",10),u("ngSubmit",function(){return i.addItem()}),F(15,Ho,2,0,"div",11),a(16,"hlm-autocomplete",12),M(17,"transloco"),re("searchChange",function(_){return se(i.newItemName,_)||(i.newItemName=_),_}),u("valueChange",function(_){return i.handleSearch(_)})("keydown.enter",function(){return i.addItem()}),c(),a(18,"button",13),w(19,"ng-icon",14),c()(),a(20,"section",15)(21,"div",16),le(22,ko,1,1,"lib-shopping-list-item-card",17,Bo),c()()()()),t&2&&(l(7),z(S(8,6,"shoppingList.title")),l(8),O(i.loading()?15:-1),l(),y("searchPlaceholderText",S(17,8,"shoppingList.searchPlaceholder"))("filteredOptions",i.filteredOptions()),ne("search",i.newItemName),y("autocompleteEmptyClass","hidden"),l(6),ce(i.sortedItems()))},dependencies:[ue,pe,Vt,Nt,Et,ee,ae,te,He,Fe,Si,Bi,we,si,xe],encapsulation:2,changeDetection:0})}return o})();var _c=[{path:"dashboard",component:Hi},{path:"**",redirectTo:"dashboard"}];export{ui as ShoppingBasketToggleComponent,Pe as ShoppingListService,_c as shoppingListRoutes};
