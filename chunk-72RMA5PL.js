import{b as ca,c as ir,d as pa,e as ha,i as fa,j as ma,k as ga,l as ya}from"./chunk-2HOMP6LZ.js";import{$a as ea,$b as oa,Aa as Qo,Ba as Zo,Ca as pe,Da as q,Ea as Z,Fa as he,G as _t,Gb as ii,H as qo,Ib as Pt,J as se,Ka as Ze,M as Ye,Ma as Ie,Mb as ra,N as Qe,Na as we,Nb as ia,O as Le,P as xt,Pb as na,Qb as sa,S as Vo,U as Ae,Ua as un,Va as Jo,Xb as We,Yb as hn,Z as $o,Za as it,Zb as st,_a as ri,ac as aa,bc as la,d as ln,da as tr,ea as oe,ia as Go,ib as rr,jb as ta,jc as ua,kb as dn,la as St,lb as cn,lc as da,ma as Wo,na as Ko,ob as nt,p as Ho,q as er,qa as Xo,rb as Ft,sa as Yo,ub as De,vb as pn,xa as $e,ya as Ge}from"./chunk-MVQCNL4J.js";import{a as m,b as O,c as wt,d as Y,e as Q}from"./chunk-BUCGFPOZ.js";var nr=Y((oy,va)=>{"use strict";va.exports=function(e){if(typeof e!="number"||Number.isNaN(e))throw new TypeError(`Expected a number, got ${typeof e}`);let t=e<0,i=Math.abs(e);if(t&&(i=-i),i===0)return"0 B";let n=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],s=Math.min(Math.floor(Math.log(i)/Math.log(1024)),n.length-1),o=Number(i/1024**s),a=n[s];return`${o>=10||o%1===0?Math.round(o):o.toFixed(1)} ${a}`}});var tl=Y((H0,el)=>{"use strict";function Ja(r,e){this.text=r=r||"",this.hasWild=~r.indexOf("*"),this.separator=e,this.parts=r.split(e)}Ja.prototype.match=function(r){var e=!0,t=this.parts,i,n=t.length,s;if(typeof r=="string"||r instanceof String)if(!this.hasWild&&this.text!=r)e=!1;else{for(s=(r||"").split(this.separator),i=0;e&&i<n;i++)t[i]!=="*"&&(i<s.length?e=t[i]===s[i]:e=!1);e=e&&s}else if(typeof r.splice=="function")for(e=[],i=r.length;i--;)this.match(r[i])&&(e[e.length]=r[i]);else if(typeof r=="object"){e={};for(var o in r)this.match(o)&&(e[o]=r[o])}return e};el.exports=function(r,e,t){var i=new Ja(r,t||/[\/\.]/);return typeof e<"u"?i.match(e):i}});var il=Y((q0,rl)=>{"use strict";var Cp=tl(),Tp=/[\/\+\.]/;rl.exports=function(r,e){function t(i){var n=Cp(i,r,Tp);return n&&n.length>=2}return e?t(e.split(";")[0]):t}});var gi=Y((J0,ll)=>{"use strict";function Ap(r){var e=typeof r;return r!=null&&(e=="object"||e=="function")}ll.exports=Ap});var dl=Y((ev,ul)=>{"use strict";var Op=typeof global=="object"&&global&&global.Object===Object&&global;ul.exports=Op});var zn=Y((tv,cl)=>{"use strict";var Ip=dl(),Dp=typeof self=="object"&&self&&self.Object===Object&&self,Rp=Ip||Dp||Function("return this")();cl.exports=Rp});var hl=Y((rv,pl)=>{"use strict";var Np=zn(),Bp=function(){return Np.Date.now()};pl.exports=Bp});var ml=Y((iv,fl)=>{"use strict";var Lp=/\s/;function Mp(r){for(var e=r.length;e--&&Lp.test(r.charAt(e)););return e}fl.exports=Mp});var yl=Y((nv,gl)=>{"use strict";var jp=ml(),zp=/^\s+/;function Hp(r){return r&&r.slice(0,jp(r)+1).replace(zp,"")}gl.exports=Hp});var Hn=Y((sv,vl)=>{"use strict";var qp=zn(),Vp=qp.Symbol;vl.exports=Vp});var xl=Y((ov,_l)=>{"use strict";var bl=Hn(),wl=Object.prototype,$p=wl.hasOwnProperty,Gp=wl.toString,xr=bl?bl.toStringTag:void 0;function Wp(r){var e=$p.call(r,xr),t=r[xr];try{r[xr]=void 0;var i=!0}catch{}var n=Gp.call(r);return i&&(e?r[xr]=t:delete r[xr]),n}_l.exports=Wp});var Fl=Y((av,Sl)=>{"use strict";var Kp=Object.prototype,Xp=Kp.toString;function Yp(r){return Xp.call(r)}Sl.exports=Yp});var Tl=Y((lv,Cl)=>{"use strict";var Pl=Hn(),Qp=xl(),Zp=Fl(),Jp="[object Null]",eh="[object Undefined]",El=Pl?Pl.toStringTag:void 0;function th(r){return r==null?r===void 0?eh:Jp:El&&El in Object(r)?Qp(r):Zp(r)}Cl.exports=th});var Ul=Y((uv,kl)=>{"use strict";function rh(r){return r!=null&&typeof r=="object"}kl.exports=rh});var Ol=Y((dv,Al)=>{"use strict";var ih=Tl(),nh=Ul(),sh="[object Symbol]";function oh(r){return typeof r=="symbol"||nh(r)&&ih(r)==sh}Al.exports=oh});var Nl=Y((cv,Rl)=>{"use strict";var ah=yl(),Il=gi(),lh=Ol(),Dl=NaN,uh=/^[-+]0x[0-9a-f]+$/i,dh=/^0b[01]+$/i,ch=/^0o[0-7]+$/i,ph=parseInt;function hh(r){if(typeof r=="number")return r;if(lh(r))return Dl;if(Il(r)){var e=typeof r.valueOf=="function"?r.valueOf():r;r=Il(e)?e+"":e}if(typeof r!="string")return r===0?r:+r;r=ah(r);var t=dh.test(r);return t||ch.test(r)?ph(r.slice(2),t?2:8):uh.test(r)?Dl:+r}Rl.exports=hh});var Vn=Y((pv,Ll)=>{"use strict";var fh=gi(),qn=hl(),Bl=Nl(),mh="Expected a function",gh=Math.max,yh=Math.min;function vh(r,e,t){var i,n,s,o,a,l,c=0,p=!1,d=!1,g=!0;if(typeof r!="function")throw new TypeError(mh);e=Bl(e)||0,fh(t)&&(p=!!t.leading,d="maxWait"in t,s=d?gh(Bl(t.maxWait)||0,e):s,g="trailing"in t?!!t.trailing:g);function v(R){var B=i,G=n;return i=n=void 0,c=R,o=r.apply(G,B),o}function x(R){return c=R,a=setTimeout(U,e),p?v(R):o}function A(R){var B=R-l,G=R-c,K=e-B;return d?yh(K,s-G):K}function C(R){var B=R-l,G=R-c;return l===void 0||B>=e||B<0||d&&G>=s}function U(){var R=qn();if(C(R))return F(R);a=setTimeout(U,A(R))}function F(R){return a=void 0,g&&i?v(R):(i=n=void 0,o)}function k(){a!==void 0&&clearTimeout(a),c=0,i=l=n=a=void 0}function N(){return a===void 0?o:F(qn())}function M(){var R=qn(),B=C(R);if(i=arguments,n=this,l=R,B){if(a===void 0)return x(l);if(d)return clearTimeout(a),a=setTimeout(U,e),v(l)}return a===void 0&&(a=setTimeout(U,e)),o}return M.cancel=k,M.flush=N,M}Ll.exports=vh});var jl=Y((hv,Ml)=>{"use strict";var bh=Vn(),wh=gi(),_h="Expected a function";function xh(r,e,t){var i=!0,n=!0;if(typeof r!="function")throw new TypeError(_h);return wh(t)&&(i="leading"in t?!!t.leading:i,n="trailing"in t?!!t.trailing:n),bh(r,e,{leading:i,maxWait:e,trailing:n})}Ml.exports=xh});var Hl=Y((fv,zl)=>{"use strict";zl.exports=function(){var e={},t=e._fns={};e.emit=function(o,a,l,c,p,d,g){var v=i(o);v.length&&n(o,v,[a,l,c,p,d,g])},e.on=function(o,a){t[o]||(t[o]=[]),t[o].push(a)},e.once=function(o,a){function l(){a.apply(this,arguments),e.off(o,l)}this.on(o,l)},e.off=function(o,a){var l=[];if(o&&a){var c=this._fns[o],p=0,d=c?c.length:0;for(p;p<d;p++)c[p]!==a&&l.push(c[p])}l.length?this._fns[o]=l:delete this._fns[o]};function i(s){var o=t[s]?t[s]:[],a=s.indexOf(":"),l=a===-1?[s]:[s.substring(0,a),s.substring(a+1)],c=Object.keys(t),p=0,d=c.length;for(p;p<d;p++){var g=c[p];if(g==="*"&&(o=o.concat(t[g])),l.length===2&&l[0]===g){o=o.concat(t[g]);break}}return o}function n(s,o,a){var l=0,c=o.length;for(l;l<c&&o[l];l++)o[l].event=s,o[l].apply(o[l],a)}return e}});var Wl=Y((Kn,Xn)=>{"use strict";(function(r,e){typeof Kn=="object"&&typeof Xn<"u"?Xn.exports=e():typeof define=="function"&&define.amd?define(e):(r=typeof globalThis<"u"?globalThis:r||self,r.Compressor=e())})(Kn,function(){"use strict";function r(_,b){var w=Object.keys(_);if(Object.getOwnPropertySymbols){var S=Object.getOwnPropertySymbols(_);b&&(S=S.filter(function(I){return Object.getOwnPropertyDescriptor(_,I).enumerable})),w.push.apply(w,S)}return w}function e(_){for(var b=1;b<arguments.length;b++){var w=arguments[b]!=null?arguments[b]:{};b%2?r(Object(w),!0).forEach(function(S){s(_,S,w[S])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(w)):r(Object(w)).forEach(function(S){Object.defineProperty(_,S,Object.getOwnPropertyDescriptor(w,S))})}return _}function t(_,b){if(!(_ instanceof b))throw new TypeError("Cannot call a class as a function")}function i(_,b){for(var w=0;w<b.length;w++){var S=b[w];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(_,l(S.key),S)}}function n(_,b,w){return b&&i(_.prototype,b),w&&i(_,w),Object.defineProperty(_,"prototype",{writable:!1}),_}function s(_,b,w){return b=l(b),b in _?Object.defineProperty(_,b,{value:w,enumerable:!0,configurable:!0,writable:!0}):_[b]=w,_}function o(){return o=Object.assign?Object.assign.bind():function(_){for(var b=1;b<arguments.length;b++){var w=arguments[b];for(var S in w)Object.prototype.hasOwnProperty.call(w,S)&&(_[S]=w[S])}return _},o.apply(this,arguments)}function a(_,b){if(typeof _!="object"||_===null)return _;var w=_[Symbol.toPrimitive];if(w!==void 0){var S=w.call(_,b||"default");if(typeof S!="object")return S;throw new TypeError("@@toPrimitive must return a primitive value.")}return(b==="string"?String:Number)(_)}function l(_){var b=a(_,"string");return typeof b=="symbol"?b:String(b)}var c={exports:{}};(function(_){typeof window>"u"||(function(b){var w=b.HTMLCanvasElement&&b.HTMLCanvasElement.prototype,S=b.Blob&&(function(){try{return!!new Blob}catch{return!1}})(),I=S&&b.Uint8Array&&(function(){try{return new Blob([new Uint8Array(100)]).size===100}catch{return!1}})(),D=b.BlobBuilder||b.WebKitBlobBuilder||b.MozBlobBuilder||b.MSBlobBuilder,W=/^data:((.*?)(;charset=.*?)?)(;base64)?,/,H=(S||D)&&b.atob&&b.ArrayBuffer&&b.Uint8Array&&function(j){var z,J,ee,Pe,ne,L,Ee,ce,yt;if(z=j.match(W),!z)throw new Error("invalid data URI");for(J=z[2]?z[1]:"text/plain"+(z[3]||";charset=US-ASCII"),ee=!!z[4],Pe=j.slice(z[0].length),ee?ne=atob(Pe):ne=decodeURIComponent(Pe),L=new ArrayBuffer(ne.length),Ee=new Uint8Array(L),ce=0;ce<ne.length;ce+=1)Ee[ce]=ne.charCodeAt(ce);return S?new Blob([I?Ee:L],{type:J}):(yt=new D,yt.append(L),yt.getBlob(J))};b.HTMLCanvasElement&&!w.toBlob&&(w.mozGetAsFile?w.toBlob=function(j,z,J){var ee=this;setTimeout(function(){J&&w.toDataURL&&H?j(H(ee.toDataURL(z,J))):j(ee.mozGetAsFile("blob",z))})}:w.toDataURL&&H&&(w.msToBlob?w.toBlob=function(j,z,J){var ee=this;setTimeout(function(){(z&&z!=="image/png"||J)&&w.toDataURL&&H?j(H(ee.toDataURL(z,J))):j(ee.msToBlob(z))})}:w.toBlob=function(j,z,J){var ee=this;setTimeout(function(){j(H(ee.toDataURL(z,J)))})})),_.exports?_.exports=H:b.dataURLtoBlob=H})(window)})(c);var p=c.exports,d=function(b){return typeof Blob>"u"?!1:b instanceof Blob||Object.prototype.toString.call(b)==="[object Blob]"},g={strict:!0,checkOrientation:!0,retainExif:!1,maxWidth:1/0,maxHeight:1/0,minWidth:0,minHeight:0,width:void 0,height:void 0,resize:"none",quality:.8,mimeType:"auto",convertTypes:["image/png"],convertSize:5e6,beforeDraw:null,drew:null,success:null,error:null},v=typeof window<"u"&&typeof window.document<"u",x=v?window:{},A=function(b){return b>0&&b<1/0},C=Array.prototype.slice;function U(_){return Array.from?Array.from(_):C.call(_)}var F=/^image\/.+$/;function k(_){return F.test(_)}function N(_){var b=k(_)?_.substr(6):"";return b==="jpeg"&&(b="jpg"),".".concat(b)}var M=String.fromCharCode;function R(_,b,w){var S="",I;for(w+=b,I=b;I<w;I+=1)S+=M(_.getUint8(I));return S}var B=x.btoa;function G(_,b){for(var w=[],S=8192,I=new Uint8Array(_);I.length>0;)w.push(M.apply(null,U(I.subarray(0,S)))),I=I.subarray(S);return"data:".concat(b,";base64,").concat(B(w.join("")))}function K(_){var b=new DataView(_),w;try{var S,I,D;if(b.getUint8(0)===255&&b.getUint8(1)===216)for(var W=b.byteLength,H=2;H+1<W;){if(b.getUint8(H)===255&&b.getUint8(H+1)===225){I=H;break}H+=1}if(I){var j=I+4,z=I+10;if(R(b,j,4)==="Exif"){var J=b.getUint16(z);if(S=J===18761,(S||J===19789)&&b.getUint16(z+2,S)===42){var ee=b.getUint32(z+4,S);ee>=8&&(D=z+ee)}}}if(D){var Pe=b.getUint16(D,S),ne,L;for(L=0;L<Pe;L+=1)if(ne=D+L*12+2,b.getUint16(ne,S)===274){ne+=8,w=b.getUint16(ne,S),b.setUint16(ne,1,S);break}}}catch{w=1}return w}function me(_){var b=0,w=1,S=1;switch(_){case 2:w=-1;break;case 3:b=-180;break;case 4:S=-1;break;case 5:b=90,S=-1;break;case 6:b=90;break;case 7:b=90,w=-1;break;case 8:b=-90;break}return{rotate:b,scaleX:w,scaleY:S}}var X=/\.\d*(?:0|9){12}\d*$/;function ue(_){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return X.test(_)?Math.round(_*b)/b:_}function de(_){var b=_.aspectRatio,w=_.height,S=_.width,I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"none",D=A(S),W=A(w);if(D&&W){var H=w*b;(I==="contain"||I==="none")&&H>S||I==="cover"&&H<S?w=S/b:S=w*b}else D?w=S/b:W&&(S=w*b);return{width:S,height:w}}function Oe(_){for(var b=U(new Uint8Array(_)),w=b.length,S=[],I=0;I+3<w;){var D=b[I],W=b[I+1];if(D===255&&W===218)break;if(D===255&&W===216)I+=2;else{var H=b[I+2]*256+b[I+3],j=I+H+2,z=b.slice(I,j);S.push(z),I=j}}return S.reduce(function(J,ee){return ee[0]===255&&ee[1]===225?J.concat(ee):J},[])}function Ue(_,b){var w=U(new Uint8Array(_));if(w[2]!==255||w[3]!==224)return _;var S=w[4]*256+w[5],I=[255,216].concat(b,w.slice(4+S));return new Uint8Array(I)}var y=x.ArrayBuffer,h=x.FileReader,f=x.URL||x.webkitURL,P=/\.\w+$/,T=x.Compressor,E=(function(){function _(b,w){t(this,_),this.file=b,this.exif=[],this.image=new Image,this.options=e(e({},g),w),this.aborted=!1,this.result=null,this.init()}return n(_,[{key:"init",value:function(){var w=this,S=this.file,I=this.options;if(!d(S)){this.fail(new Error("The first argument must be a File or Blob object."));return}var D=S.type;if(!k(D)){this.fail(new Error("The first argument must be an image File or Blob object."));return}if(!f||!h){this.fail(new Error("The current browser does not support image compression."));return}y||(I.checkOrientation=!1,I.retainExif=!1);var W=D==="image/jpeg",H=W&&I.checkOrientation,j=W&&I.retainExif;if(f&&!H&&!j)this.load({url:f.createObjectURL(S)});else{var z=new h;this.reader=z,z.onload=function(J){var ee=J.target,Pe=ee.result,ne={},L=1;H&&(L=K(Pe),L>1&&o(ne,me(L))),j&&(w.exif=Oe(Pe)),H||j?!f||L>1?ne.url=G(Pe,D):ne.url=f.createObjectURL(S):ne.url=Pe,w.load(ne)},z.onabort=function(){w.fail(new Error("Aborted to read the image with FileReader."))},z.onerror=function(){w.fail(new Error("Failed to read the image with FileReader."))},z.onloadend=function(){w.reader=null},H||j?z.readAsArrayBuffer(S):z.readAsDataURL(S)}}},{key:"load",value:function(w){var S=this,I=this.file,D=this.image;D.onload=function(){S.draw(e(e({},w),{},{naturalWidth:D.naturalWidth,naturalHeight:D.naturalHeight}))},D.onabort=function(){S.fail(new Error("Aborted to load the image."))},D.onerror=function(){S.fail(new Error("Failed to load the image."))},x.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(x.navigator.userAgent)&&(D.crossOrigin="anonymous"),D.alt=I.name,D.src=w.url}},{key:"draw",value:function(w){var S=this,I=w.naturalWidth,D=w.naturalHeight,W=w.rotate,H=W===void 0?0:W,j=w.scaleX,z=j===void 0?1:j,J=w.scaleY,ee=J===void 0?1:J,Pe=this.file,ne=this.image,L=this.options,Ee=document.createElement("canvas"),ce=Ee.getContext("2d"),yt=Math.abs(H)%180===90,rn=(L.resize==="contain"||L.resize==="cover")&&A(L.width)&&A(L.height),Kt=Math.max(L.maxWidth,0)||1/0,Xt=Math.max(L.maxHeight,0)||1/0,Yt=Math.max(L.minWidth,0)||0,Qt=Math.max(L.minHeight,0)||0,vt=I/D,ge=L.width,ye=L.height;if(yt){var Fo=[Xt,Kt];Kt=Fo[0],Xt=Fo[1];var Po=[Qt,Yt];Yt=Po[0],Qt=Po[1];var Eo=[ye,ge];ge=Eo[0],ye=Eo[1]}rn&&(vt=ge/ye);var Co=de({aspectRatio:vt,width:Kt,height:Xt},"contain");Kt=Co.width,Xt=Co.height;var To=de({aspectRatio:vt,width:Yt,height:Qt},"cover");if(Yt=To.width,Qt=To.height,rn){var ko=de({aspectRatio:vt,width:ge,height:ye},L.resize);ge=ko.width,ye=ko.height}else{var Uo=de({aspectRatio:vt,width:ge,height:ye}),Ao=Uo.width;ge=Ao===void 0?I:Ao;var Oo=Uo.height;ye=Oo===void 0?D:Oo}ge=Math.floor(ue(Math.min(Math.max(ge,Yt),Kt))),ye=Math.floor(ue(Math.min(Math.max(ye,Qt),Xt)));var Zc=-ge/2,Jc=-ye/2,ep=ge,tp=ye,nn=[];if(rn){var Io=0,Do=0,sn=I,on=D,Ro=de({aspectRatio:vt,width:I,height:D},{contain:"cover",cover:"contain"}[L.resize]);sn=Ro.width,on=Ro.height,Io=(I-sn)/2,Do=(D-on)/2,nn.push(Io,Do,sn,on)}if(nn.push(Zc,Jc,ep,tp),yt){var No=[ye,ge];ge=No[0],ye=No[1]}Ee.width=ge,Ee.height=ye,k(L.mimeType)||(L.mimeType=Pe.type);var Bo="transparent";Pe.size>L.convertSize&&L.convertTypes.indexOf(L.mimeType)>=0&&(L.mimeType="image/jpeg");var Lo=L.mimeType==="image/jpeg";if(Lo&&(Bo="#fff"),ce.fillStyle=Bo,ce.fillRect(0,0,ge,ye),L.beforeDraw&&L.beforeDraw.call(this,ce,Ee),!this.aborted&&(ce.save(),ce.translate(ge/2,ye/2),ce.rotate(H*Math.PI/180),ce.scale(z,ee),ce.drawImage.apply(ce,[ne].concat(nn)),ce.restore(),L.drew&&L.drew.call(this,ce,Ee),!this.aborted)){var Mo=function(Zt){if(!S.aborted){var jo=function(Jt){return S.done({naturalWidth:I,naturalHeight:D,result:Jt})};if(Zt&&Lo&&L.retainExif&&S.exif&&S.exif.length>0){var zo=function(Jt){return jo(p(G(Ue(Jt,S.exif),L.mimeType)))};if(Zt.arrayBuffer)Zt.arrayBuffer().then(zo).catch(function(){S.fail(new Error("Failed to read the compressed image with Blob.arrayBuffer()."))});else{var bt=new h;S.reader=bt,bt.onload=function(an){var Jt=an.target;zo(Jt.result)},bt.onabort=function(){S.fail(new Error("Aborted to read the compressed image with FileReader."))},bt.onerror=function(){S.fail(new Error("Failed to read the compressed image with FileReader."))},bt.onloadend=function(){S.reader=null},bt.readAsArrayBuffer(Zt)}}else jo(Zt)}};Ee.toBlob?Ee.toBlob(Mo,L.mimeType,L.quality):Mo(p(Ee.toDataURL(L.mimeType,L.quality)))}}},{key:"done",value:function(w){var S=w.naturalWidth,I=w.naturalHeight,D=w.result,W=this.file,H=this.image,j=this.options;if(f&&H.src.indexOf("blob:")===0&&f.revokeObjectURL(H.src),D)if(j.strict&&!j.retainExif&&D.size>W.size&&j.mimeType===W.type&&!(j.width>S||j.height>I||j.minWidth>S||j.minHeight>I||j.maxWidth<S||j.maxHeight<I))D=W;else{var z=new Date;D.lastModified=z.getTime(),D.lastModifiedDate=z,D.name=W.name,D.name&&D.type!==W.type&&(D.name=D.name.replace(P,N(D.type)))}else D=W;this.result=D,j.success&&j.success.call(this,D)}},{key:"fail",value:function(w){var S=this.options;if(S.error)S.error.call(this,w);else throw w}},{key:"abort",value:function(){this.aborted||(this.aborted=!0,this.reader?this.reader.abort():this.image.complete?this.fail(new Error("The compression process has been aborted.")):(this.image.onload=null,this.image.onabort()))}}],[{key:"noConflict",value:function(){return window.Compressor=T,_}},{key:"setDefaults",value:function(w){o(g,w)}}]),_})();return E})});var Fe=Y(($v,wi)=>{"use strict";(function(){"use strict";var r={}.hasOwnProperty;function e(){for(var n="",s=0;s<arguments.length;s++){var o=arguments[s];o&&(n=i(n,t(o)))}return n}function t(n){if(typeof n=="string"||typeof n=="number")return n;if(typeof n!="object")return"";if(Array.isArray(n))return e.apply(null,n);if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]"))return n.toString();var s="";for(var o in n)r.call(n,o)&&n[o]&&(s=i(s,o));return s}function i(n,s){return s?n?n+" "+s:n+s:n}typeof wi<"u"&&wi.exports?(e.default=e,wi.exports=e):typeof define=="function"&&typeof define.amd=="object"&&define.amd?define("classnames",[],function(){return e}):window.classNames=e})()});var lu=Y((kb,rs)=>{"use strict";var qh=Object.prototype.hasOwnProperty,_e="~";function Sr(){}Object.create&&(Sr.prototype=Object.create(null),new Sr().__proto__||(_e=!1));function Vh(r,e,t){this.fn=r,this.context=e,this.once=t||!1}function au(r,e,t,i,n){if(typeof t!="function")throw new TypeError("The listener must be a function");var s=new Vh(t,i||r,n),o=_e?_e+e:e;return r._events[o]?r._events[o].fn?r._events[o]=[r._events[o],s]:r._events[o].push(s):(r._events[o]=s,r._eventsCount++),r}function xi(r,e){--r._eventsCount===0?r._events=new Sr:delete r._events[e]}function be(){this._events=new Sr,this._eventsCount=0}be.prototype.eventNames=function(){var e=[],t,i;if(this._eventsCount===0)return e;for(i in t=this._events)qh.call(t,i)&&e.push(_e?i.slice(1):i);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(t)):e};be.prototype.listeners=function(e){var t=_e?_e+e:e,i=this._events[t];if(!i)return[];if(i.fn)return[i.fn];for(var n=0,s=i.length,o=new Array(s);n<s;n++)o[n]=i[n].fn;return o};be.prototype.listenerCount=function(e){var t=_e?_e+e:e,i=this._events[t];return i?i.fn?1:i.length:0};be.prototype.emit=function(e,t,i,n,s,o){var a=_e?_e+e:e;if(!this._events[a])return!1;var l=this._events[a],c=arguments.length,p,d;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),c){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,i),!0;case 4:return l.fn.call(l.context,t,i,n),!0;case 5:return l.fn.call(l.context,t,i,n,s),!0;case 6:return l.fn.call(l.context,t,i,n,s,o),!0}for(d=1,p=new Array(c-1);d<c;d++)p[d-1]=arguments[d];l.fn.apply(l.context,p)}else{var g=l.length,v;for(d=0;d<g;d++)switch(l[d].once&&this.removeListener(e,l[d].fn,void 0,!0),c){case 1:l[d].fn.call(l[d].context);break;case 2:l[d].fn.call(l[d].context,t);break;case 3:l[d].fn.call(l[d].context,t,i);break;case 4:l[d].fn.call(l[d].context,t,i,n);break;default:if(!p)for(v=1,p=new Array(c-1);v<c;v++)p[v-1]=arguments[v];l[d].fn.apply(l[d].context,p)}}return!0};be.prototype.on=function(e,t,i){return au(this,e,t,i,!1)};be.prototype.once=function(e,t,i){return au(this,e,t,i,!0)};be.prototype.removeListener=function(e,t,i,n){var s=_e?_e+e:e;if(!this._events[s])return this;if(!t)return xi(this,s),this;var o=this._events[s];if(o.fn)o.fn===t&&(!n||o.once)&&(!i||o.context===i)&&xi(this,s);else{for(var a=0,l=[],c=o.length;a<c;a++)(o[a].fn!==t||n&&!o[a].once||i&&o[a].context!==i)&&l.push(o[a]);l.length?this._events[s]=l.length===1?l[0]:l:xi(this,s)}return this};be.prototype.removeAllListeners=function(e){var t;return e?(t=_e?_e+e:e,this._events[t]&&xi(this,t)):(this._events=new Sr,this._eventsCount=0),this};be.prototype.off=be.prototype.removeListener;be.prototype.addListener=be.prototype.on;be.prefixed=_e;be.EventEmitter=be;typeof rs<"u"&&(rs.exports=be)});var Kd=Y((C2,Wd)=>{"use strict";Wd.exports=function(e,t){if(t=t.split(":")[0],e=+e,!e)return!1;switch(t){case"http":case"ws":return e!==80;case"https":case"wss":return e!==443;case"ftp":return e!==21;case"gopher":return e!==70;case"file":return!1}return e!==0}});var Qd=Y(Js=>{"use strict";var Am=Object.prototype.hasOwnProperty,Om;function Xd(r){try{return decodeURIComponent(r.replace(/\+/g," "))}catch{return null}}function Yd(r){try{return encodeURIComponent(r)}catch{return null}}function Im(r){for(var e=/([^=?#&]+)=?([^&]*)/g,t={},i;i=e.exec(r);){var n=Xd(i[1]),s=Xd(i[2]);n===null||s===null||n in t||(t[n]=s)}return t}function Dm(r,e){e=e||"";var t=[],i,n;typeof e!="string"&&(e="?");for(n in r)if(Am.call(r,n)){if(i=r[n],!i&&(i===null||i===Om||isNaN(i))&&(i=""),n=Yd(n),i=Yd(i),n===null||i===null)continue;t.push(n+"="+i)}return t.length?e+t.join("&"):""}Js.stringify=Dm;Js.parse=Im});var sc=Y((k2,nc)=>{"use strict";var Jd=Kd(),qi=Qd(),Rm=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,ec=/[\n\r\t]/g,Nm=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,tc=/:\d+$/,Bm=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,Lm=/^[a-zA-Z]:/;function to(r){return(r||"").toString().replace(Rm,"")}var eo=[["#","hash"],["?","query"],function(e,t){return qe(t.protocol)?e.replace(/\\/g,"/"):e},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],Zd={hash:1,query:1};function rc(r){var e;typeof window<"u"?e=window:typeof global<"u"?e=global:typeof self<"u"?e=self:e={};var t=e.location||{};r=r||t;var i={},n=typeof r,s;if(r.protocol==="blob:")i=new Ve(unescape(r.pathname),{});else if(n==="string"){i=new Ve(r,{});for(s in Zd)delete i[s]}else if(n==="object"){for(s in r)s in Zd||(i[s]=r[s]);i.slashes===void 0&&(i.slashes=Nm.test(r.href))}return i}function qe(r){return r==="file:"||r==="ftp:"||r==="http:"||r==="https:"||r==="ws:"||r==="wss:"}function ic(r,e){r=to(r),r=r.replace(ec,""),e=e||{};var t=Bm.exec(r),i=t[1]?t[1].toLowerCase():"",n=!!t[2],s=!!t[3],o=0,a;return n?s?(a=t[2]+t[3]+t[4],o=t[2].length+t[3].length):(a=t[2]+t[4],o=t[2].length):s?(a=t[3]+t[4],o=t[3].length):a=t[4],i==="file:"?o>=2&&(a=a.slice(2)):qe(i)?a=t[4]:i?n&&(a=a.slice(2)):o>=2&&qe(e.protocol)&&(a=t[4]),{protocol:i,slashes:n||qe(i),slashesCount:o,rest:a}}function Mm(r,e){if(r==="")return e;for(var t=(e||"/").split("/").slice(0,-1).concat(r.split("/")),i=t.length,n=t[i-1],s=!1,o=0;i--;)t[i]==="."?t.splice(i,1):t[i]===".."?(t.splice(i,1),o++):o&&(i===0&&(s=!0),t.splice(i,1),o--);return s&&t.unshift(""),(n==="."||n==="..")&&t.push(""),t.join("/")}function Ve(r,e,t){if(r=to(r),r=r.replace(ec,""),!(this instanceof Ve))return new Ve(r,e,t);var i,n,s,o,a,l,c=eo.slice(),p=typeof e,d=this,g=0;for(p!=="object"&&p!=="string"&&(t=e,e=null),t&&typeof t!="function"&&(t=qi.parse),e=rc(e),n=ic(r||"",e),i=!n.protocol&&!n.slashes,d.slashes=n.slashes||i&&e.slashes,d.protocol=n.protocol||e.protocol||"",r=n.rest,(n.protocol==="file:"&&(n.slashesCount!==2||Lm.test(r))||!n.slashes&&(n.protocol||n.slashesCount<2||!qe(d.protocol)))&&(c[3]=[/(.*)/,"pathname"]);g<c.length;g++){if(o=c[g],typeof o=="function"){r=o(r,d);continue}s=o[0],l=o[1],s!==s?d[l]=r:typeof s=="string"?(a=s==="@"?r.lastIndexOf(s):r.indexOf(s),~a&&(typeof o[2]=="number"?(d[l]=r.slice(0,a),r=r.slice(a+o[2])):(d[l]=r.slice(a),r=r.slice(0,a)))):(a=s.exec(r))&&(d[l]=a[1],r=r.slice(0,a.index)),d[l]=d[l]||i&&o[3]&&e[l]||"",o[4]&&(d[l]=d[l].toLowerCase())}t&&(d.query=t(d.query)),i&&e.slashes&&d.pathname.charAt(0)!=="/"&&(d.pathname!==""||e.pathname!=="")&&(d.pathname=Mm(d.pathname,e.pathname)),d.pathname.charAt(0)!=="/"&&qe(d.protocol)&&(d.pathname="/"+d.pathname),Jd(d.port,d.protocol)||(d.host=d.hostname,d.port=""),d.username=d.password="",d.auth&&(a=d.auth.indexOf(":"),~a?(d.username=d.auth.slice(0,a),d.username=encodeURIComponent(decodeURIComponent(d.username)),d.password=d.auth.slice(a+1),d.password=encodeURIComponent(decodeURIComponent(d.password))):d.username=encodeURIComponent(decodeURIComponent(d.auth)),d.auth=d.password?d.username+":"+d.password:d.username),d.origin=d.protocol!=="file:"&&qe(d.protocol)&&d.host?d.protocol+"//"+d.host:"null",d.href=d.toString()}function jm(r,e,t){var i=this;switch(r){case"query":typeof e=="string"&&e.length&&(e=(t||qi.parse)(e)),i[r]=e;break;case"port":i[r]=e,Jd(e,i.protocol)?e&&(i.host=i.hostname+":"+e):(i.host=i.hostname,i[r]="");break;case"hostname":i[r]=e,i.port&&(e+=":"+i.port),i.host=e;break;case"host":i[r]=e,tc.test(e)?(e=e.split(":"),i.port=e.pop(),i.hostname=e.join(":")):(i.hostname=e,i.port="");break;case"protocol":i.protocol=e.toLowerCase(),i.slashes=!t;break;case"pathname":case"hash":if(e){var n=r==="pathname"?"/":"#";i[r]=e.charAt(0)!==n?n+e:e}else i[r]=e;break;case"username":case"password":i[r]=encodeURIComponent(e);break;case"auth":var s=e.indexOf(":");~s?(i.username=e.slice(0,s),i.username=encodeURIComponent(decodeURIComponent(i.username)),i.password=e.slice(s+1),i.password=encodeURIComponent(decodeURIComponent(i.password))):i.username=encodeURIComponent(decodeURIComponent(e))}for(var o=0;o<eo.length;o++){var a=eo[o];a[4]&&(i[a[1]]=i[a[1]].toLowerCase())}return i.auth=i.password?i.username+":"+i.password:i.username,i.origin=i.protocol!=="file:"&&qe(i.protocol)&&i.host?i.protocol+"//"+i.host:"null",i.href=i.toString(),i}function zm(r){(!r||typeof r!="function")&&(r=qi.stringify);var e,t=this,i=t.host,n=t.protocol;n&&n.charAt(n.length-1)!==":"&&(n+=":");var s=n+(t.protocol&&t.slashes||qe(t.protocol)?"//":"");return t.username?(s+=t.username,t.password&&(s+=":"+t.password),s+="@"):t.password?(s+=":"+t.password,s+="@"):t.protocol!=="file:"&&qe(t.protocol)&&!i&&t.pathname!=="/"&&(s+="@"),(i[i.length-1]===":"||tc.test(t.hostname)&&!t.port)&&(i+=":"),s+=i+t.pathname,e=typeof t.query=="object"?r(t.query):t.query,e&&(s+=e.charAt(0)!=="?"?"?"+e:e),t.hash&&(s+=t.hash),s}Ve.prototype={set:jm,toString:zm};Ve.extractProtocol=ic;Ve.location=rc;Ve.trimLeft=to;Ve.qs=qi;nc.exports=Ve});var Gc=Y((bo,wo)=>{"use strict";(function(r,e){typeof define=="function"&&define.amd?define([],e):typeof bo<"u"?e():(e(),r.FileSaver={})})(bo,function(){"use strict";function r(a,l){return typeof l>"u"?l={autoBom:!1}:typeof l!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),l={autoBom:!l}),l.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}function e(a,l,c){var p=new XMLHttpRequest;p.open("GET",a),p.responseType="blob",p.onload=function(){o(p.response,l,c)},p.onerror=function(){console.error("could not download file")},p.send()}function t(a){var l=new XMLHttpRequest;l.open("HEAD",a,!1);try{l.send()}catch{}return 200<=l.status&&299>=l.status}function i(a){try{a.dispatchEvent(new MouseEvent("click"))}catch{var l=document.createEvent("MouseEvents");l.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),a.dispatchEvent(l)}}var n=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof global=="object"&&global.global===global?global:void 0,s=n.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),o=n.saveAs||(typeof window!="object"||window!==n?function(){}:"download"in HTMLAnchorElement.prototype&&!s?function(a,l,c){var p=n.URL||n.webkitURL,d=document.createElement("a");l=l||a.name||"download",d.download=l,d.rel="noopener",typeof a=="string"?(d.href=a,d.origin===location.origin?i(d):t(d.href)?e(a,l,c):i(d,d.target="_blank")):(d.href=p.createObjectURL(a),setTimeout(function(){p.revokeObjectURL(d.href)},4e4),setTimeout(function(){i(d)},0))}:"msSaveOrOpenBlob"in navigator?function(a,l,c){if(l=l||a.name||"download",typeof a!="string")navigator.msSaveOrOpenBlob(r(a,c),l);else if(t(a))e(a,l,c);else{var p=document.createElement("a");p.href=a,p.target="_blank",setTimeout(function(){i(p)})}}:function(a,l,c,p){if(p=p||open("","_blank"),p&&(p.document.title=p.document.body.innerText="downloading..."),typeof a=="string")return e(a,l,c);var d=a.type==="application/octet-stream",g=/constructor/i.test(n.HTMLElement)||n.safari,v=/CriOS\/[\d]+/.test(navigator.userAgent);if((v||d&&g||s)&&typeof FileReader<"u"){var x=new FileReader;x.onloadend=function(){var U=x.result;U=v?U:U.replace(/^data:[^;]*;/,"data:attachment/file;"),p?p.location.href=U:location=U,p=null},x.readAsDataURL(a)}else{var A=n.URL||n.webkitURL,C=A.createObjectURL(a);p?p.location=C:location.href=C,p=null,setTimeout(function(){A.revokeObjectURL(C)},4e4)}});n.saveAs=o.saveAs=o,typeof wo<"u"&&(wo.exports=o)})});var Yn=Q(nr(),1);function Et(r,e){return Object.hasOwn(r,e)}var rp=/^data:([^/]+\/[^,;]+(?:[^,]*?))(;base64)?,([\s\S]*)$/;function ip(r,e,t){let i=rp.exec(r),n=e.mimeType??i?.[1]??"plain/text",s;if(i?.[2]!=null){let o=atob(decodeURIComponent(i[3])),a=new Uint8Array(o.length);for(let l=0;l<o.length;l++)a[l]=o.charCodeAt(l);s=[a]}else i?.[3]!=null&&(s=[decodeURIComponent(i[3])]);return t?new File(s,e.name||"",{type:n}):new Blob(s,{type:n})}var fn=ip;function sr(r,e,t,i){return t===0||r===e?r:i===0?e:r+(e-r)*2**(-i/t)}var or=['a[href]:not([tabindex^="-"]):not([inert]):not([aria-hidden])','area[href]:not([tabindex^="-"]):not([inert]):not([aria-hidden])',"input:not([disabled]):not([inert]):not([aria-hidden])","select:not([disabled]):not([inert]):not([aria-hidden])","textarea:not([disabled]):not([inert]):not([aria-hidden])","button:not([disabled]):not([inert]):not([aria-hidden])",'iframe:not([tabindex^="-"]):not([inert]):not([aria-hidden])','object:not([tabindex^="-"]):not([inert]):not([aria-hidden])','embed:not([tabindex^="-"]):not([inert]):not([aria-hidden])','[contenteditable]:not([tabindex^="-"]):not([inert]):not([aria-hidden])','[tabindex]:not([tabindex^="-"]):not([inert]):not([aria-hidden])'];var mn=class extends Error{cause;isNetworkError;request;constructor(e,t=null){super("This looks like a network error, the endpoint might be blocked by an internet provider or a firewall."),this.cause=e,this.isNetworkError=!0,this.request=t}},gn=mn;function yn(r){let e=t=>"error"in t&&!!t.error;return r.filter(t=>!e(t))}function vn(r){return r.filter(e=>!e.progress?.uploadStarted||!e.isRestored)}function ar(r){return typeof r!="object"||r===null||!("nodeType"in r)?!1:r.nodeType===Node.ELEMENT_NODE}function np(r){if(typeof r=="string"){let e=document.querySelectorAll(r);return e.length===0?null:Array.from(e)}return typeof r=="object"&&ar(r)?[r]:null}var ni=np;function sp(r,e=document){return typeof r=="string"?e.querySelector(r):ar(r)?r:null}var bn=sp;function Re(r){let e=r.lastIndexOf(".");return e===-1||e===r.length-1?{name:r,extension:void 0}:{name:r.slice(0,e),extension:r.slice(e+1)}}var wn={__proto__:null,md:"text/markdown",markdown:"text/markdown",mp4:"video/mp4",mp3:"audio/mp3",svg:"image/svg+xml",jpg:"image/jpeg",png:"image/png",webp:"image/webp",gif:"image/gif",heic:"image/heic",heif:"image/heif",yaml:"text/yaml",yml:"text/yaml",csv:"text/csv",tsv:"text/tab-separated-values",tab:"text/tab-separated-values",avi:"video/x-msvideo",mks:"video/x-matroska",mkv:"video/x-matroska",mov:"video/quicktime",dicom:"application/dicom",doc:"application/msword",msg:"application/vnd.ms-outlook",docm:"application/vnd.ms-word.document.macroenabled.12",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",dot:"application/msword",dotm:"application/vnd.ms-word.template.macroenabled.12",dotx:"application/vnd.openxmlformats-officedocument.wordprocessingml.template",xla:"application/vnd.ms-excel",xlam:"application/vnd.ms-excel.addin.macroenabled.12",xlc:"application/vnd.ms-excel",xlf:"application/x-xliff+xml",xlm:"application/vnd.ms-excel",xls:"application/vnd.ms-excel",xlsb:"application/vnd.ms-excel.sheet.binary.macroenabled.12",xlsm:"application/vnd.ms-excel.sheet.macroenabled.12",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xlt:"application/vnd.ms-excel",xltm:"application/vnd.ms-excel.template.macroenabled.12",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template",xlw:"application/vnd.ms-excel",txt:"text/plain",text:"text/plain",conf:"text/plain",log:"text/plain",pdf:"application/pdf",zip:"application/zip","7z":"application/x-7z-compressed",rar:"application/x-rar-compressed",tar:"application/x-tar",gz:"application/gzip",dmg:"application/x-apple-diskimage"};function Ct(r){if(r.type)return r.type;let e=r.name?Re(r.name).extension?.toLowerCase():null;return e&&e in wn?wn[e]:"application/octet-stream"}function op(r){return r.charCodeAt(0).toString(32)}function ba(r){let e="";return r.replace(/[^A-Z0-9]/gi,t=>(e+=`-${op(t)}`,"/"))+e}function _n(r,e){let t=e||"uppy";return typeof r.name=="string"&&(t+=`-${ba(r.name.toLowerCase())}`),r.type!==void 0&&(t+=`-${r.type}`),r.meta&&typeof r.meta.relativePath=="string"&&(t+=`-${ba(r.meta.relativePath.toLowerCase())}`),r.data.size!==void 0&&(t+=`-${r.data.size}`),r.data.lastModified!==void 0&&(t+=`-${r.data.lastModified}`),t}function ap(r){return!r.isRemote||!r.remote?!1:new Set(["box","dropbox","drive","facebook","unsplash"]).has(r.remote.provider)}function lr(r,e){if(ap(r))return r.id;let t=Ct(r);return _n(O(m({},r),{type:t}),e)}function si(r,e){return r===!0?Object.keys(e):Array.isArray(r)?r:[]}var Ke=Array.from;function xn(r){let e=Ke(r.files);return Promise.resolve(e)}function oi(r,e,t,{onSuccess:i}){r.readEntries(n=>{let s=[...e,...n];n.length?queueMicrotask(()=>{oi(r,s,t,{onSuccess:i})}):i(s)},n=>{t(n),i(e)})}function wa(r,e){return r==null?r:{kind:r.isFile?"file":r.isDirectory?"directory":void 0,name:r.name,getFile(){return new Promise((t,i)=>r.file(t,i))},async*values(){let t=r.createReader();yield*await new Promise(n=>{oi(t,[],e,{onSuccess:s=>n(s.map(o=>wa(o,e)))})})},isSameEntry:void 0}}async function*_a(r,e,t=void 0){let i=()=>`${e}/${r.name}`;if(r.kind==="file"){let n=await r.getFile();n!=null?(n.relativePath=e?i():null,yield n):t!=null&&(yield t)}else if(r.kind==="directory")for await(let n of r.values())yield*_a(n,e?i():r.name);else t!=null&&(yield t)}async function*Sn(r,e){let t=await Promise.all(Array.from(r.items,async i=>{let n;return n??=wa(typeof i.getAsEntry=="function"?i.getAsEntry():i.webkitGetAsEntry(),e),{fileSystemHandle:n,lastResortFile:i.getAsFile()}}));for(let{lastResortFile:i,fileSystemHandle:n}of t)if(n!=null)try{yield*_a(n,"",i)}catch(s){i!=null?yield i:e(s)}else i!=null&&(yield i)}async function ai(r,e){let t=e?.logDropError??Function.prototype;try{let i=[];for await(let n of Sn(r,t))i.push(n);return i}catch{return xn(r)}}function lp(r){for(;r&&!r.dir;)r=r.parentNode;return r?.dir}var Fn=lp;function Pn(r){return r<10?`0${r}`:r.toString()}function ot(){let r=new Date,e=Pn(r.getHours()),t=Pn(r.getMinutes()),i=Pn(r.getSeconds());return`${e}:${t}:${i}`}function li(){if(typeof window>"u")return!1;let r=document.body;return!(r==null||window==null||!("draggable"in r)||!("ondragstart"in r)||!("ondrop"in r)||!("FormData"in window)||!("FileReader"in window))}function up(r){return r?r.readyState!==0&&r.readyState!==4||r.status===0:!1}var En=up;function ur(r){return r.startsWith("blob:")}function dr(r){return r?/^[^/]+\/(jpe?g|gif|png|svg|svg\+xml|bmp|webp|avif)$/.test(r):!1}function Cn(r){let e=Math.floor(r/3600)%24,t=Math.floor(r/60)%60,i=Math.floor(r%60);return{hours:e,minutes:t,seconds:i}}function ui(r){let e=Cn(r),t=e.hours===0?"":`${e.hours}h`,i=e.minutes===0?"":`${e.hours===0?e.minutes:` ${e.minutes.toString(10).padStart(2,"0")}`}m`,n=e.hours!==0?"":`${e.minutes===0?e.seconds:` ${e.seconds.toString(10).padStart(2,"0")}`}s`;return`${t}${i}${n}`}function dp(r){return new Error("Cancelled",{cause:r})}function xa(r){if(r!=null){let e=()=>this.abort(r.reason);r.addEventListener("abort",e,{once:!0});let t=()=>{r.removeEventListener("abort",e)};this.then?.(t,t)}return this}var at=class{#e=0;#t=[];#r=!1;#i;#n=1;#u;#o;limit;constructor(e){typeof e!="number"||e===0?this.limit=1/0:this.limit=e}#a(e){this.#e+=1;let t=!1,i;try{i=e()}catch(n){throw this.#e-=1,n}return{abort:n=>{t||(t=!0,this.#e-=1,i?.(n),this.#s())},done:()=>{t||(t=!0,this.#e-=1,this.#s())}}}#s(){queueMicrotask(()=>this.#h())}#h(){if(this.#r||this.#e>=this.limit||this.#t.length===0)return;let e=this.#t.shift();if(e==null)throw new Error("Invariant violation: next is null");let t=this.#a(e.fn);e.abort=t.abort,e.done=t.done}#l(e,t){let i={fn:e,priority:t?.priority||0,abort:()=>{this.#c(i)},done:()=>{throw new Error("Cannot mark a queued request as done: this indicates a bug")}},n=this.#t.findIndex(s=>i.priority>s.priority);return n===-1?this.#t.push(i):this.#t.splice(n,0,i),i}#c(e){let t=this.#t.indexOf(e);t!==-1&&this.#t.splice(t,1)}run(e,t){return!this.#r&&this.#e<this.limit?this.#a(e):this.#l(e,t)}wrapSyncFunction(e,t){return(...i)=>{let n=this.run(()=>(e(...i),queueMicrotask(()=>n.done()),()=>{}),t);return{abortOn:xa,abort(){n.abort()}}}}wrapPromiseFunction(e,t){return(...i)=>{let n,s=new Promise((o,a)=>{n=this.run(()=>{let l,c;try{c=Promise.resolve(e(...i))}catch(p){c=Promise.reject(p)}return c.then(p=>{l?a(l):(n.done(),o(p))},p=>{l?a(l):(n.done(),a(p))}),p=>{l=dp(p)}},t)});return s.abort=o=>{n.abort(o)},s.abortOn=xa,s}}resume(){this.#r=!1,clearTimeout(this.#i);for(let e=0;e<this.limit;e++)this.#s()}#d=()=>this.resume();pause(e=null){this.#r=!0,clearTimeout(this.#i),e!=null&&(this.#i=setTimeout(this.#d,e))}rateLimit(e){clearTimeout(this.#o),this.pause(e),this.limit>1&&Number.isFinite(this.limit)&&(this.#u=this.limit-1,this.limit=this.#n,this.#o=setTimeout(this.#p,e))}#p=()=>{if(this.#r){this.#o=setTimeout(this.#p,0);return}this.#n=this.limit,this.limit=Math.ceil((this.#u+this.#n)/2);for(let e=this.#n;e<=this.limit;e++)this.#s();this.#u-this.#n>3?this.#o=setTimeout(this.#p,2e3):this.#n=Math.floor(this.#n/2)};get isPaused(){return this.#r}},cp=Symbol("__queue");function di(r){return O(m({},r),{type:r.mimeType,extension:r.name?Re(r.name).extension:null})}function pp(r,e,t){let i=[];return r.forEach(n=>typeof n!="string"?i.push(n):e[Symbol.split](n).forEach((s,o,a)=>{s!==""&&i.push(s),o<a.length-1&&i.push(t)})),i}function Sa(r,e){let t=/\$/g,i="$$$$",n=[r];if(e==null)return n;for(let s of Object.keys(e))if(s!=="_"){let o=e[s];typeof o=="string"&&(o=t[Symbol.replace](o,i)),n=pp(n,new RegExp(`%\\{${s}\\}`,"g"),o)}return n}var hp=r=>{throw new Error(`missing string: ${r}`)},lt=class{locale;constructor(e,{onMissingKey:t=hp}={}){this.locale={strings:{},pluralize(i){return i===1?0:1}},Array.isArray(e)?e.forEach(this.#t,this):this.#t(e),this.#e=t}#e;#t(e){if(!e?.strings)return;let t=this.locale;Object.assign(this.locale,{strings:m(m({},t.strings),e.strings),pluralize:e.pluralize||t.pluralize})}translate(e,t){return this.translateArray(e,t).join("")}translateArray(e,t){let i=this.locale.strings[e];if(i==null&&(this.#e(e),i=e),typeof i=="object"){if(t&&typeof t.smart_count<"u"){let s=this.locale.pluralize(t.smart_count);return Sa(i[s],t)}throw new Error("Attempted to use a string with plural forms, but no value was given for %{smart_count}")}if(typeof i!="string")throw new Error("string was not a string");return Sa(i,t)}};function cr(r,e){if(e===0)return"";if(r.length<=e)return r;if(e<=4)return`${r.slice(0,e-1)}\u2026`;let t=e-3,i=Math.ceil(t/2),n=Math.floor(t/2);return r.slice(0,i)+"..."+r.slice(-n)}var fr,$,Ta,fp,ut,Fa,ka,Ua,Aa,An,Tn,kn,mp,hr={},Oa=[],gp=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,mr=Array.isArray;function Me(r,e){for(var t in e)r[t]=e[t];return r}function On(r){r&&r.parentNode&&r.parentNode.removeChild(r)}function gr(r,e,t){var i,n,s,o={};for(s in e)s=="key"?i=e[s]:s=="ref"?n=e[s]:o[s]=e[s];if(arguments.length>2&&(o.children=arguments.length>3?fr.call(arguments,2):t),typeof r=="function"&&r.defaultProps!=null)for(s in r.defaultProps)o[s]===void 0&&(o[s]=r.defaultProps[s]);return pr(r,o,i,n,null)}function pr(r,e,t,i,n){var s={type:r,props:e,key:t,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:n??++Ta,__i:-1,__u:0};return n==null&&$.vnode!=null&&$.vnode(s),s}function Ia(){return{current:null}}function ae(r){return r.children}function ve(r,e){this.props=r,this.context=e}function Tt(r,e){if(e==null)return r.__?Tt(r.__,r.__i+1):null;for(var t;e<r.__k.length;e++)if((t=r.__k[e])!=null&&t.__e!=null)return t.__e;return typeof r.type=="function"?Tt(r):null}function Da(r){var e,t;if((r=r.__)!=null&&r.__c!=null){for(r.__e=r.__c.base=null,e=0;e<r.__k.length;e++)if((t=r.__k[e])!=null&&t.__e!=null){r.__e=r.__c.base=t.__e;break}return Da(r)}}function Pa(r){(!r.__d&&(r.__d=!0)&&ut.push(r)&&!pi.__r++||Fa!=$.debounceRendering)&&((Fa=$.debounceRendering)||ka)(pi)}function pi(){for(var r,e,t,i,n,s,o,a=1;ut.length;)ut.length>a&&ut.sort(Ua),r=ut.shift(),a=ut.length,r.__d&&(t=void 0,i=void 0,n=(i=(e=r).__v).__e,s=[],o=[],e.__P&&((t=Me({},i)).__v=i.__v+1,$.vnode&&$.vnode(t),In(e.__P,t,i,e.__n,e.__P.namespaceURI,32&i.__u?[n]:null,s,n??Tt(i),!!(32&i.__u),o),t.__v=i.__v,t.__.__k[t.__i]=t,Ba(s,t,o),i.__e=i.__=null,t.__e!=n&&Da(t)));pi.__r=0}function Ra(r,e,t,i,n,s,o,a,l,c,p){var d,g,v,x,A,C,U,F=i&&i.__k||Oa,k=e.length;for(l=yp(t,e,F,l,k),d=0;d<k;d++)(v=t.__k[d])!=null&&(g=v.__i==-1?hr:F[v.__i]||hr,v.__i=d,C=In(r,v,g,n,s,o,a,l,c,p),x=v.__e,v.ref&&g.ref!=v.ref&&(g.ref&&Dn(g.ref,null,v),p.push(v.ref,v.__c||x,v)),A==null&&x!=null&&(A=x),(U=!!(4&v.__u))||g.__k===v.__k?l=Na(v,l,r,U):typeof v.type=="function"&&C!==void 0?l=C:x&&(l=x.nextSibling),v.__u&=-7);return t.__e=A,l}function yp(r,e,t,i,n){var s,o,a,l,c,p=t.length,d=p,g=0;for(r.__k=new Array(n),s=0;s<n;s++)(o=e[s])!=null&&typeof o!="boolean"&&typeof o!="function"?(l=s+g,(o=r.__k[s]=typeof o=="string"||typeof o=="number"||typeof o=="bigint"||o.constructor==String?pr(null,o,null,null,null):mr(o)?pr(ae,{children:o},null,null,null):o.constructor==null&&o.__b>0?pr(o.type,o.props,o.key,o.ref?o.ref:null,o.__v):o).__=r,o.__b=r.__b+1,a=null,(c=o.__i=vp(o,t,l,d))!=-1&&(d--,(a=t[c])&&(a.__u|=2)),a==null||a.__v==null?(c==-1&&(n>p?g--:n<p&&g++),typeof o.type!="function"&&(o.__u|=4)):c!=l&&(c==l-1?g--:c==l+1?g++:(c>l?g--:g++,o.__u|=4))):r.__k[s]=null;if(d)for(s=0;s<p;s++)(a=t[s])!=null&&(2&a.__u)==0&&(a.__e==i&&(i=Tt(a)),Ma(a,a));return i}function Na(r,e,t,i){var n,s;if(typeof r.type=="function"){for(n=r.__k,s=0;n&&s<n.length;s++)n[s]&&(n[s].__=r,e=Na(n[s],e,t,i));return e}r.__e!=e&&(i&&(e&&r.type&&!e.parentNode&&(e=Tt(r)),t.insertBefore(r.__e,e||null)),e=r.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function je(r,e){return e=e||[],r==null||typeof r=="boolean"||(mr(r)?r.some(function(t){je(t,e)}):e.push(r)),e}function vp(r,e,t,i){var n,s,o,a=r.key,l=r.type,c=e[t],p=c!=null&&(2&c.__u)==0;if(c===null&&r.key==null||p&&a==c.key&&l==c.type)return t;if(i>(p?1:0)){for(n=t-1,s=t+1;n>=0||s<e.length;)if((c=e[o=n>=0?n--:s++])!=null&&(2&c.__u)==0&&a==c.key&&l==c.type)return o}return-1}function Ea(r,e,t){e[0]=="-"?r.setProperty(e,t??""):r[e]=t==null?"":typeof t!="number"||gp.test(e)?t:t+"px"}function ci(r,e,t,i,n){var s,o;e:if(e=="style")if(typeof t=="string")r.style.cssText=t;else{if(typeof i=="string"&&(r.style.cssText=i=""),i)for(e in i)t&&e in t||Ea(r.style,e,"");if(t)for(e in t)i&&t[e]==i[e]||Ea(r.style,e,t[e])}else if(e[0]=="o"&&e[1]=="n")s=e!=(e=e.replace(Aa,"$1")),o=e.toLowerCase(),e=o in r||e=="onFocusOut"||e=="onFocusIn"?o.slice(2):e.slice(2),r.l||(r.l={}),r.l[e+s]=t,t?i?t.u=i.u:(t.u=An,r.addEventListener(e,s?kn:Tn,s)):r.removeEventListener(e,s?kn:Tn,s);else{if(n=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in r)try{r[e]=t??"";break e}catch{}typeof t=="function"||(t==null||t===!1&&e[4]!="-"?r.removeAttribute(e):r.setAttribute(e,e=="popover"&&t==1?"":t))}}function Ca(r){return function(e){if(this.l){var t=this.l[e.type+r];if(e.t==null)e.t=An++;else if(e.t<t.u)return;return t($.event?$.event(e):e)}}}function In(r,e,t,i,n,s,o,a,l,c){var p,d,g,v,x,A,C,U,F,k,N,M,R,B,G,K,me,X=e.type;if(e.constructor!=null)return null;128&t.__u&&(l=!!(32&t.__u),s=[a=e.__e=t.__e]),(p=$.__b)&&p(e);e:if(typeof X=="function")try{if(U=e.props,F="prototype"in X&&X.prototype.render,k=(p=X.contextType)&&i[p.__c],N=p?k?k.props.value:p.__:i,t.__c?C=(d=e.__c=t.__c).__=d.__E:(F?e.__c=d=new X(U,N):(e.__c=d=new ve(U,N),d.constructor=X,d.render=wp),k&&k.sub(d),d.props=U,d.state||(d.state={}),d.context=N,d.__n=i,g=d.__d=!0,d.__h=[],d._sb=[]),F&&d.__s==null&&(d.__s=d.state),F&&X.getDerivedStateFromProps!=null&&(d.__s==d.state&&(d.__s=Me({},d.__s)),Me(d.__s,X.getDerivedStateFromProps(U,d.__s))),v=d.props,x=d.state,d.__v=e,g)F&&X.getDerivedStateFromProps==null&&d.componentWillMount!=null&&d.componentWillMount(),F&&d.componentDidMount!=null&&d.__h.push(d.componentDidMount);else{if(F&&X.getDerivedStateFromProps==null&&U!==v&&d.componentWillReceiveProps!=null&&d.componentWillReceiveProps(U,N),!d.__e&&d.shouldComponentUpdate!=null&&d.shouldComponentUpdate(U,d.__s,N)===!1||e.__v==t.__v){for(e.__v!=t.__v&&(d.props=U,d.state=d.__s,d.__d=!1),e.__e=t.__e,e.__k=t.__k,e.__k.some(function(ue){ue&&(ue.__=e)}),M=0;M<d._sb.length;M++)d.__h.push(d._sb[M]);d._sb=[],d.__h.length&&o.push(d);break e}d.componentWillUpdate!=null&&d.componentWillUpdate(U,d.__s,N),F&&d.componentDidUpdate!=null&&d.__h.push(function(){d.componentDidUpdate(v,x,A)})}if(d.context=N,d.props=U,d.__P=r,d.__e=!1,R=$.__r,B=0,F){for(d.state=d.__s,d.__d=!1,R&&R(e),p=d.render(d.props,d.state,d.context),G=0;G<d._sb.length;G++)d.__h.push(d._sb[G]);d._sb=[]}else do d.__d=!1,R&&R(e),p=d.render(d.props,d.state,d.context),d.state=d.__s;while(d.__d&&++B<25);d.state=d.__s,d.getChildContext!=null&&(i=Me(Me({},i),d.getChildContext())),F&&!g&&d.getSnapshotBeforeUpdate!=null&&(A=d.getSnapshotBeforeUpdate(v,x)),K=p,p!=null&&p.type===ae&&p.key==null&&(K=La(p.props.children)),a=Ra(r,mr(K)?K:[K],e,t,i,n,s,o,a,l,c),d.base=e.__e,e.__u&=-161,d.__h.length&&o.push(d),C&&(d.__E=d.__=null)}catch(ue){if(e.__v=null,l||s!=null)if(ue.then){for(e.__u|=l?160:128;a&&a.nodeType==8&&a.nextSibling;)a=a.nextSibling;s[s.indexOf(a)]=null,e.__e=a}else{for(me=s.length;me--;)On(s[me]);Un(e)}else e.__e=t.__e,e.__k=t.__k,ue.then||Un(e);$.__e(ue,e,t)}else s==null&&e.__v==t.__v?(e.__k=t.__k,e.__e=t.__e):a=e.__e=bp(t.__e,e,t,i,n,s,o,l,c);return(p=$.diffed)&&p(e),128&e.__u?void 0:a}function Un(r){r&&r.__c&&(r.__c.__e=!0),r&&r.__k&&r.__k.forEach(Un)}function Ba(r,e,t){for(var i=0;i<t.length;i++)Dn(t[i],t[++i],t[++i]);$.__c&&$.__c(e,r),r.some(function(n){try{r=n.__h,n.__h=[],r.some(function(s){s.call(n)})}catch(s){$.__e(s,n.__v)}})}function La(r){return typeof r!="object"||r==null||r.__b&&r.__b>0?r:mr(r)?r.map(La):Me({},r)}function bp(r,e,t,i,n,s,o,a,l){var c,p,d,g,v,x,A,C=t.props,U=e.props,F=e.type;if(F=="svg"?n="http://www.w3.org/2000/svg":F=="math"?n="http://www.w3.org/1998/Math/MathML":n||(n="http://www.w3.org/1999/xhtml"),s!=null){for(c=0;c<s.length;c++)if((v=s[c])&&"setAttribute"in v==!!F&&(F?v.localName==F:v.nodeType==3)){r=v,s[c]=null;break}}if(r==null){if(F==null)return document.createTextNode(U);r=document.createElementNS(n,F,U.is&&U),a&&($.__m&&$.__m(e,s),a=!1),s=null}if(F==null)C===U||a&&r.data==U||(r.data=U);else{if(s=s&&fr.call(r.childNodes),C=t.props||hr,!a&&s!=null)for(C={},c=0;c<r.attributes.length;c++)C[(v=r.attributes[c]).name]=v.value;for(c in C)if(v=C[c],c!="children"){if(c=="dangerouslySetInnerHTML")d=v;else if(!(c in U)){if(c=="value"&&"defaultValue"in U||c=="checked"&&"defaultChecked"in U)continue;ci(r,c,null,v,n)}}for(c in U)v=U[c],c=="children"?g=v:c=="dangerouslySetInnerHTML"?p=v:c=="value"?x=v:c=="checked"?A=v:a&&typeof v!="function"||C[c]===v||ci(r,c,v,C[c],n);if(p)a||d&&(p.__html==d.__html||p.__html==r.innerHTML)||(r.innerHTML=p.__html),e.__k=[];else if(d&&(r.innerHTML=""),Ra(e.type=="template"?r.content:r,mr(g)?g:[g],e,t,i,F=="foreignObject"?"http://www.w3.org/1999/xhtml":n,s,o,s?s[0]:t.__k&&Tt(t,0),a,l),s!=null)for(c=s.length;c--;)On(s[c]);a||(c="value",F=="progress"&&x==null?r.removeAttribute("value"):x!=null&&(x!==r[c]||F=="progress"&&!x||F=="option"&&x!=C[c])&&ci(r,c,x,C[c],n),c="checked",A!=null&&A!=r[c]&&ci(r,c,A,C[c],n))}return r}function Dn(r,e,t){try{if(typeof r=="function"){var i=typeof r.__u=="function";i&&r.__u(),i&&e==null||(r.__u=r(e))}else r.current=e}catch(n){$.__e(n,t)}}function Ma(r,e,t){var i,n;if($.unmount&&$.unmount(r),(i=r.ref)&&(i.current&&i.current!=r.__e||Dn(i,null,e)),(i=r.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(s){$.__e(s,e)}i.base=i.__P=null}if(i=r.__k)for(n=0;n<i.length;n++)i[n]&&Ma(i[n],e,t||typeof r.type!="function");t||On(r.__e),r.__c=r.__=r.__e=void 0}function wp(r,e,t){return this.constructor(r,t)}function Rn(r,e,t){var i,n,s,o;e==document&&(e=document.documentElement),$.__&&$.__(r,e),n=(i=typeof t=="function")?null:t&&t.__k||e.__k,s=[],o=[],In(e,r=(!i&&t||e).__k=gr(ae,null,[r]),n||hr,hr,e.namespaceURI,!i&&t?[t]:n?null:e.firstChild?fr.call(e.childNodes):null,s,!i&&t?t:n?n.__e:e.firstChild,i,o),Ba(s,r,o)}function hi(r,e,t){var i,n,s,o,a=Me({},r.props);for(s in r.type&&r.type.defaultProps&&(o=r.type.defaultProps),e)s=="key"?i=e[s]:s=="ref"?n=e[s]:a[s]=e[s]===void 0&&o!=null?o[s]:e[s];return arguments.length>2&&(a.children=arguments.length>3?fr.call(arguments,2):t),pr(r.type,a,i||r.key,n||r.ref,null)}fr=Oa.slice,$={__e:function(r,e,t,i){for(var n,s,o;e=e.__;)if((n=e.__c)&&!n.__)try{if((s=n.constructor)&&s.getDerivedStateFromError!=null&&(n.setState(s.getDerivedStateFromError(r)),o=n.__d),n.componentDidCatch!=null&&(n.componentDidCatch(r,i||{}),o=n.__d),o)return n.__E=n}catch(a){r=a}throw r}},Ta=0,fp=function(r){return r!=null&&r.constructor==null},ve.prototype.setState=function(r,e){var t;t=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=Me({},this.state),typeof r=="function"&&(r=r(Me({},t),this.props)),r&&Me(t,r),r!=null&&this.__v&&(e&&this._sb.push(e),Pa(this))},ve.prototype.forceUpdate=function(r){this.__v&&(this.__e=!0,r&&this.__h.push(r),Pa(this))},ve.prototype.render=ae,ut=[],ka=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Ua=function(r,e){return r.__v.__b-e.__v.__b},pi.__r=0,Aa=/(PointerCapture)$|Capture$/i,An=0,Tn=Ca(!1),kn=Ca(!0),mp=0;var _p=0,e0=Array.isArray;function u(r,e,t,i,n,s){e||(e={});var o,a,l=e;if("ref"in l)for(a in l={},e)a=="ref"?o=e[a]:l[a]=e[a];var c={type:r,props:l,key:t,ref:o,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--_p,__i:-1,__u:0,__source:n,__self:s};if(typeof r=="function"&&(o=r.defaultProps))for(a in o)l[a]===void 0&&(l[a]=o[a]);return $.vnode&&$.vnode(c),c}var yr,te,Nn,ja,vr=0,Ka=[],re=$,za=re.__b,Ha=re.__r,qa=re.diffed,Va=re.__c,$a=re.unmount,Ga=re.__;function Ln(r,e){re.__h&&re.__h(te,r,vr||e),vr=0;var t=te.__H||(te.__H={__:[],__h:[]});return r>=t.__.length&&t.__.push({}),t.__[r]}function Ce(r){return vr=1,xp(Ya,r)}function xp(r,e,t){var i=Ln(yr++,2);if(i.t=r,!i.__c&&(i.__=[t?t(e):Ya(void 0,e),function(a){var l=i.__N?i.__N[0]:i.__[0],c=i.t(l,a);l!==c&&(i.__N=[c,i.__[1]],i.__c.setState({}))}],i.__c=te,!te.__f)){var n=function(a,l,c){if(!i.__c.__H)return!0;var p=i.__c.__H.__.filter(function(g){return!!g.__c});if(p.every(function(g){return!g.__N}))return!s||s.call(this,a,l,c);var d=i.__c.props!==a;return p.forEach(function(g){if(g.__N){var v=g.__[0];g.__=g.__N,g.__N=void 0,v!==g.__[0]&&(d=!0)}}),s&&s.call(this,a,l,c)||d};te.__f=!0;var s=te.shouldComponentUpdate,o=te.componentWillUpdate;te.componentWillUpdate=function(a,l,c){if(this.__e){var p=s;s=void 0,n(a,l,c),s=p}o&&o.call(this,a,l,c)},te.shouldComponentUpdate=n}return i.__N||i.__}function Ne(r,e){var t=Ln(yr++,3);!re.__s&&Xa(t.__H,e)&&(t.__=r,t.u=e,te.__H.__h.push(t))}function Je(r){return vr=5,dt(function(){return{current:r}},[])}function dt(r,e){var t=Ln(yr++,7);return Xa(t.__H,e)&&(t.__=r(),t.__H=e,t.__h=r),t.__}function Be(r,e){return vr=8,dt(function(){return r},e)}function Sp(){for(var r;r=Ka.shift();)if(r.__P&&r.__H)try{r.__H.__h.forEach(fi),r.__H.__h.forEach(Bn),r.__H.__h=[]}catch(e){r.__H.__h=[],re.__e(e,r.__v)}}re.__b=function(r){te=null,za&&za(r)},re.__=function(r,e){r&&e.__k&&e.__k.__m&&(r.__m=e.__k.__m),Ga&&Ga(r,e)},re.__r=function(r){Ha&&Ha(r),yr=0;var e=(te=r.__c).__H;e&&(Nn===te?(e.__h=[],te.__h=[],e.__.forEach(function(t){t.__N&&(t.__=t.__N),t.u=t.__N=void 0})):(e.__h.forEach(fi),e.__h.forEach(Bn),e.__h=[],yr=0)),Nn=te},re.diffed=function(r){qa&&qa(r);var e=r.__c;e&&e.__H&&(e.__H.__h.length&&(Ka.push(e)!==1&&ja===re.requestAnimationFrame||((ja=re.requestAnimationFrame)||Fp)(Sp)),e.__H.__.forEach(function(t){t.u&&(t.__H=t.u),t.u=void 0})),Nn=te=null},re.__c=function(r,e){e.some(function(t){try{t.__h.forEach(fi),t.__h=t.__h.filter(function(i){return!i.__||Bn(i)})}catch(i){e.some(function(n){n.__h&&(n.__h=[])}),e=[],re.__e(i,t.__v)}}),Va&&Va(r,e)},re.unmount=function(r){$a&&$a(r);var e,t=r.__c;t&&t.__H&&(t.__H.__.forEach(function(i){try{fi(i)}catch(n){e=n}}),t.__H=void 0,e&&re.__e(e,t.__v))};var Wa=typeof requestAnimationFrame=="function";function Fp(r){var e,t=function(){clearTimeout(i),Wa&&cancelAnimationFrame(e),setTimeout(r)},i=setTimeout(t,35);Wa&&(e=requestAnimationFrame(t))}function fi(r){var e=te,t=r.__c;typeof t=="function"&&(r.__c=void 0,t()),te=e}function Bn(r){var e=te;r.__c=r.__(),te=e}function Xa(r,e){return!r||r.length!==e.length||e.some(function(t,i){return t!==r[i]})}function Ya(r,e){return typeof e=="function"?e(r):e}var Pp={position:"relative",width:"100%",minHeight:"100%"},Ep={position:"absolute",top:0,left:0,width:"100%",overflow:"visible"};function kt(o){var a=o,{data:r,rowHeight:e,renderRow:t,overscanCount:i=10,padding:n=4}=a,s=wt(a,["data","rowHeight","renderRow","overscanCount","padding"]);let l=Je(null),[c,p]=Ce(0),[d,g]=Ce(0);Ne(()=>{function N(){l.current!=null&&d!==l.current.offsetHeight&&g(l.current.offsetHeight)}return N(),window.addEventListener("resize",N),()=>{window.removeEventListener("resize",N)}},[d]);let v=Be(()=>{l.current&&p(l.current.scrollTop)},[]),x=Math.floor(c/e),A=Math.floor(d/e);i&&(x=Math.max(0,x-x%i),A+=i);let C=x+A+n,U=r.slice(x,C),F=O(m({},Pp),{height:r.length*e}),k=O(m({},Ep),{top:x*e});return u("div",O(m({onScroll:v,ref:l},s),{children:u("div",{role:"presentation",style:F,children:u("div",{role:"presentation",style:k,children:U.map(t)})})}))}var Xe=class{uppy;opts;id;defaultLocale;i18n;i18nArray;type;VERSION;constructor(e,t){this.uppy=e,this.opts=t??{}}getPluginState(){let{plugins:e}=this.uppy.getState();return e?.[this.id]||{}}setPluginState(e){let{plugins:t}=this.uppy.getState();this.uppy.setState({plugins:O(m({},t),{[this.id]:m(m({},t[this.id]),e)})})}setOptions(e){this.opts=m(m({},this.opts),e),this.setPluginState(void 0),this.i18nInit()}i18nInit(){let e=new lt([this.defaultLocale,this.uppy.locale,this.opts.locale]);this.i18n=e.translate.bind(e),this.i18nArray=e.translateArray.bind(e),this.setPluginState(void 0)}addTarget(e){throw new Error("Extend the addTarget method to add your plugin to another plugin's target")}install(){}uninstall(){}update(e){}afterUpdate(){}};var br=class{#e;#t=[];constructor(e){this.#e=e}on(e,t){return this.#t.push([e,t]),this.#e.on(e,t)}remove(){for(let[e,t]of this.#t.splice(0))this.#e.off(e,t)}onFilePause(e,t){this.on("upload-pause",(i,n)=>{e===i?.id&&t(n)})}onFileRemove(e,t){this.on("file-removed",i=>{e===i.id&&t(i.id)})}onPause(e,t){this.on("upload-pause",(i,n)=>{e===i?.id&&t(n)})}onRetry(e,t){this.on("upload-retry",i=>{e===i?.id&&t()})}onRetryAll(e,t){this.on("retry-all",()=>{this.#e.getFile(e)&&t()})}onPauseAll(e,t){this.on("pause-all",()=>{this.#e.getFile(e)&&t()})}onCancelAll(e,t){this.on("cancel-all",(...i)=>{this.#e.getFile(e)&&t(...i)})}onResumeAll(e,t){this.on("resume-all",()=>{this.#e.getFile(e)&&t()})}};var Qa={debug:()=>{},warn:()=>{},error:(...r)=>console.error(`[Uppy] [${ot()}]`,...r)},Za={debug:(...r)=>console.debug(`[Uppy] [${ot()}]`,...r),warn:(...r)=>console.warn(`[Uppy] [${ot()}]`,...r),error:(...r)=>console.error(`[Uppy] [${ot()}]`,...r)};var wr=Q(nr(),1),nl=Q(il(),1),sl={maxFileSize:null,minFileSize:null,maxTotalFileSize:null,maxNumberOfFiles:null,minNumberOfFiles:null,allowedFileTypes:null,requiredMetaFields:[]},Se=class extends Error{isUserFacing;file;constructor(e,t){super(e),this.isUserFacing=t?.isUserFacing??!0,t?.file&&(this.file=t.file)}isRestriction=!0},mi=class{getI18n;getOpts;constructor(e,t){this.getI18n=t,this.getOpts=()=>{let i=e();if(i.restrictions?.allowedFileTypes!=null&&!Array.isArray(i.restrictions.allowedFileTypes))throw new TypeError("`restrictions.allowedFileTypes` must be an array");return i}}validateAggregateRestrictions(e,t){let{maxTotalFileSize:i,maxNumberOfFiles:n}=this.getOpts().restrictions;if(n&&e.filter(o=>!o.isGhost).length+t.length>n)throw new Se(`${this.getI18n()("youCanOnlyUploadX",{smart_count:n})}`);if(i){let s=[...e,...t].reduce((o,a)=>o+(a.size??0),0);if(s>i)throw new Se(this.getI18n()("aggregateExceedsSize",{sizeAllowed:(0,wr.default)(i),size:(0,wr.default)(s)}))}}validateSingleFile(e){let{maxFileSize:t,minFileSize:i,allowedFileTypes:n}=this.getOpts().restrictions;if(n&&!n.some(o=>o.includes("/")?e.type?(0,nl.default)(e.type.replace(/;.*?$/,""),o):!1:o[0]==="."&&e.extension?e.extension.toLowerCase()===o.slice(1).toLowerCase():!1)){let o=n.join(", ");throw new Se(this.getI18n()("youCanOnlyUploadFileTypes",{types:o}),{file:e})}if(t&&e.size!=null&&e.size>t)throw new Se(this.getI18n()("exceedsSize",{size:(0,wr.default)(t),file:e.name??this.getI18n()("unnamed")}),{file:e});if(i&&e.size!=null&&e.size<i)throw new Se(this.getI18n()("inferiorSize",{size:(0,wr.default)(i)}),{file:e})}validate(e,t){t.forEach(i=>{this.validateSingleFile(i)}),this.validateAggregateRestrictions(e,t)}validateMinNumberOfFiles(e){let{minNumberOfFiles:t}=this.getOpts().restrictions;if(t&&Object.keys(e).length<t)throw new Se(this.getI18n()("youHaveToAtLeastSelectX",{smart_count:t}))}getMissingRequiredMetaFields(e){let t=new Se(this.getI18n()("missingRequiredMetaFieldOnFile",{fileName:e.name??this.getI18n()("unnamed")})),{requiredMetaFields:i}=this.getOpts().restrictions,n=[];for(let s of i)(!Object.hasOwn(e.meta,s)||e.meta[s]==="")&&n.push(s);return{missingFields:n,error:t}}};function kp(r){let e=null,t;return(...i)=>(t=i,e||(e=Promise.resolve().then(()=>(e=null,r(...t)))),e)}var Mn=class r extends Xe{#e;isTargetDOMEl;el;parent;title;getTargetPlugin(e){let t;if(typeof e?.addTarget=="function")t=e,t instanceof r||console.warn(new Error("The provided plugin is not an instance of UIPlugin. This is an indication of a bug with the way Uppy is bundled.",{cause:{targetPlugin:t,UIPlugin:r}}));else if(typeof e=="function"){let i=e;this.uppy.iteratePlugins(n=>{n instanceof i&&(t=n)})}return t}mount(e,t){let i=t.id,n=bn(e);if(n){this.isTargetDOMEl=!0;let a=document.createElement("div");return a.classList.add("uppy-Root"),this.#e=kp(l=>{this.uppy.getPlugin(this.id)&&(Rn(this.render(l,a),a),this.afterUpdate())}),this.uppy.log(`Installing ${i} to a DOM element '${e}'`),this.opts.replaceTargetContent&&(n.innerHTML=""),Rn(this.render(this.uppy.getState(),a),a),this.el=a,n.appendChild(a),a.dir=this.opts.direction||Fn(a)||"ltr",this.onMount(),this.el}let s=this.getTargetPlugin(e);if(s)return this.uppy.log(`Installing ${i} to ${s.id}`),this.parent=s,this.el=s.addTarget(t),this.onMount(),this.el;this.uppy.log(`Not installing ${i}`);let o=`Invalid target option given to ${i}.`;throw typeof e=="function"?o+=" The given target is not a Plugin class. Please check that you're not specifying a React Component instead of a plugin. If you are using @uppy/* packages directly, make sure you have only 1 version of @uppy/core installed: run `npm ls @uppy/core` on the command line and verify that all the versions match and are deduped correctly.":o+="If you meant to target an HTML element, please make sure that the element exists. Check that the <script> tag initializing Uppy is right before the closing </body> tag at the end of the page. (see https://github.com/transloadit/uppy/issues/1042)\n\nIf you meant to target a plugin, please confirm that your `import` statements or `require` calls are correct.",new Error(o)}render(e,t){throw new Error("Extend the render method to add your plugin to a DOM element")}update(e){this.el!=null&&this.#e?.(e)}unmount(){this.isTargetDOMEl&&this.el?.remove(),this.onUnmount()}onMount(){}onUnmount(){}},_r=Mn;var ol={name:"@uppy/store-default",description:"The default simple object-based store for Uppy.",version:"5.0.0",license:"MIT",main:"lib/index.js",type:"module",sideEffects:!1,scripts:{build:"tsc --build tsconfig.build.json",typecheck:"tsc --build",test:"vitest run --environment=jsdom --silent='passed-only'"},keywords:["file uploader","uppy","uppy-store"],homepage:"https://uppy.io",bugs:{url:"https://github.com/transloadit/uppy/issues"},devDependencies:{jsdom:"^26.1.0",typescript:"^5.8.3",vitest:"^3.2.4"},repository:{type:"git",url:"git+https://github.com/transloadit/uppy.git"},exports:{".":"./lib/index.js","./package.json":"./package.json"},files:["src","lib","dist","CHANGELOG.md"]};var jn=class{static VERSION=ol.version;state={};#e=new Set;getState(){return this.state}setState(e){let t=m({},this.state),i=m(m({},this.state),e);this.state=i,this.#t(t,i,e)}subscribe(e){return this.#e.add(e),()=>{this.#e.delete(e)}}#t(...e){this.#e.forEach(t=>{t(...e)})}},al=jn;var $l=Q(jl(),1),Gl=Q(Hl(),1);var Sh="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";var et=(r=21)=>{let e="",t=r|0;for(;t--;)e+=Sh[Math.random()*64|0];return e};var ql={name:"@uppy/core",description:"Core module for the extensible JavaScript file upload widget with support for drag&drop, resumable uploads, previews, restrictions, file processing/encoding, remote providers like Instagram, Dropbox, Google Drive, S3 and more :dog:",version:"5.0.2",license:"MIT",style:"dist/style.min.css",type:"module",sideEffects:["*.css"],scripts:{build:"tsc --build tsconfig.build.json","build:css":"sass --load-path=../../ src/style.scss dist/style.css && postcss dist/style.css -u cssnano -o dist/style.min.css",typecheck:"tsc --build",test:"vitest run --environment=jsdom --silent='passed-only'"},keywords:["file uploader","uppy","uppy-plugin"],homepage:"https://uppy.io",bugs:{url:"https://github.com/transloadit/uppy/issues"},repository:{type:"git",url:"git+https://github.com/transloadit/uppy.git"},files:["src","lib","dist","CHANGELOG.md"],exports:{".":"./lib/index.js","./css/style.min.css":"./dist/style.min.css","./css/style.css":"./dist/style.css","./css/style.scss":"./src/style.scss","./package.json":"./package.json"},dependencies:{"@transloadit/prettier-bytes":"^0.3.4","@uppy/store-default":"^5.0.0","@uppy/utils":"^7.0.2",lodash:"^4.17.21","mime-match":"^1.0.2","namespace-emitter":"^2.0.1",nanoid:"^5.0.9",preact:"^10.5.13"},devDependencies:{"@types/deep-freeze":"^0",cssnano:"^7.0.7","deep-freeze":"^0.0.1",jsdom:"^26.1.0",postcss:"^8.5.6","postcss-cli":"^11.0.1",sass:"^1.89.2",typescript:"^5.8.3",vitest:"^3.2.4"}};function $n(r,e){return e.name?e.name:r.split("/")[0]==="image"?`${r.split("/")[0]}.${r.split("/")[1]}`:"noname"}var Vl={strings:{addBulkFilesFailed:{0:"Failed to add %{smart_count} file due to an internal error",1:"Failed to add %{smart_count} files due to internal errors"},youCanOnlyUploadX:{0:"You can only upload %{smart_count} file",1:"You can only upload %{smart_count} files"},youHaveToAtLeastSelectX:{0:"You have to select at least %{smart_count} file",1:"You have to select at least %{smart_count} files"},aggregateExceedsSize:"You selected %{size} of files, but maximum allowed size is %{sizeAllowed}",exceedsSize:"%{file} exceeds maximum allowed size of %{size}",missingRequiredMetaField:"Missing required meta fields",missingRequiredMetaFieldOnFile:"Missing required meta fields in %{fileName}",inferiorSize:"This file is smaller than the allowed size of %{size}",youCanOnlyUploadFileTypes:"You can only upload: %{types}",noMoreFilesAllowed:"Cannot add more files",noDuplicates:"Cannot add the duplicate file '%{fileName}', it already exists",companionError:"Connection with Companion failed",authAborted:"Authentication aborted",companionUnauthorizeHint:"To unauthorize to your %{provider} account, please go to %{url}",failedToUpload:"Failed to upload %{file}",noInternetConnection:"No Internet connection",connectedToInternet:"Connected to the Internet",noFilesFound:"You have no files or folders here",noSearchResults:"Unfortunately, there are no results for this search",selectX:{0:"Select %{smart_count}",1:"Select %{smart_count}"},allFilesFromFolderNamed:"All files from folder %{name}",openFolderNamed:"Open folder %{name}",cancel:"Cancel",logOut:"Log out",logIn:"Log in",pickFiles:"Pick files",pickPhotos:"Pick photos",filter:"Filter",resetFilter:"Reset filter",loading:"Loading...",loadedXFiles:"Loaded %{numFiles} files",authenticateWithTitle:"Please authenticate with %{pluginName} to select files",authenticateWith:"Connect to %{pluginName}",signInWithGoogle:"Sign in with Google",searchImages:"Search for images",enterTextToSearch:"Enter text to search for images",search:"Search",resetSearch:"Reset search",emptyFolderAdded:"No files were added from empty folder",addedNumFiles:"Added %{numFiles} file(s)",folderAlreadyAdded:'The folder "%{folder}" was already added',folderAdded:{0:"Added %{smart_count} file from %{folder}",1:"Added %{smart_count} files from %{folder}"},additionalRestrictionsFailed:"%{count} additional restrictions were not fulfilled",unnamed:"Unnamed",pleaseWait:"Please wait"}};function Gn(r){if(r==null&&typeof navigator<"u"&&(r=navigator.userAgent),!r)return!0;let e=/Edge\/(\d+\.\d+)/.exec(r);if(!e)return!0;let i=e[1].split(".",2),n=parseInt(i[0],10),s=parseInt(i[1],10);return n<15||n===15&&s<15063||n>18||n===18&&s>=18218}var yi={totalProgress:0,allowNewUpload:!0,error:null,recoveredState:null},Wn=class r{static VERSION=ql.version;#e=Object.create(null);#t;#r;#i=(0,Gl.default)();#n=new Set;#u=new Set;#o=new Set;defaultLocale;locale;opts;store;i18n;i18nArray;scheduledAutoProceed=null;wasOffline=!1;constructor(e){this.defaultLocale=Vl;let t={id:"uppy",autoProceed:!1,allowMultipleUploadBatches:!0,debug:!1,restrictions:sl,meta:{},onBeforeFileAdded:(n,s)=>!Object.hasOwn(s,n.id),onBeforeUpload:n=>n,store:new al,logger:Qa,infoTimeout:5e3},i=m(m({},t),e);this.opts=O(m({},i),{restrictions:m(m({},t.restrictions),e?.restrictions)}),e?.logger&&e.debug?this.log("You are using a custom `logger`, but also set `debug: true`, which uses built-in logger to output logs to console. Ignoring `debug: true` and using your custom `logger`.","warning"):e?.debug&&(this.opts.logger=Za),this.log(`Using Core v${r.VERSION}`),this.i18nInit(),this.store=this.opts.store,this.setState(O(m({},yi),{plugins:{},files:{},currentUploads:{},capabilities:{uploadProgress:Gn(),individualCancellation:!0,resumableUploads:!1},meta:m({},this.opts.meta),info:[]})),this.#t=new mi(()=>this.opts,()=>this.i18n),this.#r=this.store.subscribe((n,s,o)=>{this.emit("state-update",n,s,o),this.updateAll(s)}),this.opts.debug&&typeof window<"u"&&(window[this.opts.id]=this),this.#v()}emit(e,...t){this.#i.emit(e,...t)}on(e,t){return this.#i.on(e,t),this}once(e,t){return this.#i.once(e,t),this}off(e,t){return this.#i.off(e,t),this}updateAll(e){this.iteratePlugins(t=>{t.update(e)})}setState(e){this.store.setState(e)}getState(){return this.store.getState()}patchFilesState(e){let t=this.getState().files;this.setState({files:m(m({},t),Object.fromEntries(Object.entries(e).map(([i,n])=>[i,m(m({},t[i]),n)])))})}setFileState(e,t){if(!this.getState().files[e])throw new Error(`Can\u2019t set state for ${e} (the file could have been removed)`);this.patchFilesState({[e]:t})}i18nInit(){let e=i=>this.log(`Missing i18n string: ${i}`,"error"),t=new lt([this.defaultLocale,this.opts.locale],{onMissingKey:e});this.i18n=t.translate.bind(t),this.i18nArray=t.translateArray.bind(t),this.locale=t.locale}setOptions(e){this.opts=O(m(m({},this.opts),e),{restrictions:m(m({},this.opts.restrictions),e?.restrictions)}),e.meta&&this.setMeta(e.meta),this.i18nInit(),e.locale&&this.iteratePlugins(t=>{t.setOptions(e)}),this.setState(void 0)}resetProgress(){let e={percentage:0,bytesUploaded:!1,uploadComplete:!1,uploadStarted:null},t=m({},this.getState().files),i=Object.create(null);Object.keys(t).forEach(n=>{i[n]=O(m({},t[n]),{progress:m(m({},t[n].progress),e),tus:void 0,transloadit:void 0})}),this.setState(m({files:i},yi))}clear(){let{capabilities:e,currentUploads:t}=this.getState();if(Object.keys(t).length>0&&!e.individualCancellation)throw new Error("The installed uploader plugin does not allow removing files during an upload.");this.setState(O(m({},yi),{files:{}}))}addPreProcessor(e){this.#n.add(e)}removePreProcessor(e){return this.#n.delete(e)}addPostProcessor(e){this.#o.add(e)}removePostProcessor(e){return this.#o.delete(e)}addUploader(e){this.#u.add(e)}removeUploader(e){return this.#u.delete(e)}setMeta(e){let t=m(m({},this.getState().meta),e),i=m({},this.getState().files);Object.keys(i).forEach(n=>{i[n]=O(m({},i[n]),{meta:m(m({},i[n].meta),e)})}),this.log("Adding metadata:"),this.log(e),this.setState({meta:t,files:i})}setFileMeta(e,t){let i=m({},this.getState().files);if(!i[e]){this.log(`Was trying to set metadata for a file that has been removed: ${e}`);return}let n=m(m({},i[e].meta),t);i[e]=O(m({},i[e]),{meta:n}),this.setState({files:i})}getFile(e){return this.getState().files[e]}getFiles(){let{files:e}=this.getState();return Object.values(e)}getFilesByIds(e){return e.map(t=>this.getFile(t))}getObjectOfFilesPerState(){let{files:e,totalProgress:t,error:i}=this.getState(),n=Object.values(e),s=[],o=[],a=[],l=[],c=[],p=[],d=[],g=[],v=[];for(let x of n){let{progress:A}=x;!A.uploadComplete&&A.uploadStarted&&(s.push(x),x.isPaused||g.push(x)),A.uploadStarted||o.push(x),(A.uploadStarted||A.preprocess||A.postprocess)&&a.push(x),A.uploadStarted&&l.push(x),x.isPaused&&c.push(x),A.uploadComplete&&p.push(x),x.error&&d.push(x),(A.preprocess||A.postprocess)&&v.push(x)}return{newFiles:o,startedFiles:a,uploadStartedFiles:l,pausedFiles:c,completeFiles:p,erroredFiles:d,inProgressFiles:s,inProgressNotPausedFiles:g,processingFiles:v,isUploadStarted:l.length>0,isAllComplete:t===100&&p.length===n.length&&v.length===0,isAllErrored:!!i&&d.length===n.length,isAllPaused:s.length!==0&&c.length===s.length,isUploadInProgress:s.length>0,isSomeGhost:n.some(x=>x.isGhost)}}#a(e){for(let o of e)o.isRestriction?this.emit("restriction-failed",o.file,o):this.emit("error",o,o.file),this.log(o,"warning");let t=e.filter(o=>o.isUserFacing),i=4,n=t.slice(0,i),s=t.slice(i);n.forEach(({message:o,details:a=""})=>{this.info({message:o,details:a},"error",this.opts.infoTimeout)}),s.length>0&&this.info({message:this.i18n("additionalRestrictionsFailed",{count:s.length})})}validateRestrictions(e,t=this.getFiles()){try{this.#t.validate(t,[e])}catch(i){return i}return null}validateSingleFile(e){try{this.#t.validateSingleFile(e)}catch(t){return t.message}return null}validateAggregateRestrictions(e){let t=this.getFiles();try{this.#t.validateAggregateRestrictions(t,e)}catch(i){return i.message}return null}#s(e){let{missingFields:t,error:i}=this.#t.getMissingRequiredMetaFields(e);return t.length>0?(this.setFileState(e.id,{missingRequiredMetaFields:t,error:i.message}),this.log(i.message),this.emit("restriction-failed",e,i),!1):(t.length===0&&e.missingRequiredMetaFields&&this.setFileState(e.id,{missingRequiredMetaFields:[]}),!0)}#h(e){let t=!0;for(let i of Object.values(e))this.#s(i)||(t=!1);return t}#l(e){let{allowNewUpload:t}=this.getState();if(t===!1){let i=new Se(this.i18n("noMoreFilesAllowed"),{file:e});throw this.#a([i]),i}}checkIfFileAlreadyExists(e){let{files:t}=this.getState();return!!(t[e]&&!t[e].isGhost)}#c(e){let t=e instanceof File?{name:e.name,type:e.type,size:e.size,data:e}:e,i=Ct(t),n=$n(i,t),s=Re(n).extension,o=lr(t,this.getID()),a=t.meta||{};a.name=n,a.type=i;let l=Number.isFinite(t.data.size)?t.data.size:null;return{source:t.source||"",id:o,name:n,extension:s||"",meta:m(m({},this.getState().meta),a),type:i,data:t.data,progress:{percentage:0,bytesUploaded:!1,bytesTotal:l,uploadComplete:!1,uploadStarted:null},size:l,isGhost:!1,isRemote:t.isRemote||!1,remote:t.remote,preview:t.preview}}#d(){this.opts.autoProceed&&!this.scheduledAutoProceed&&(this.scheduledAutoProceed=setTimeout(()=>{this.scheduledAutoProceed=null,this.upload().catch(e=>{e.isRestriction||this.log(e.stack||e.message||e)})},4))}#p(e){let{files:t}=this.getState(),i=m({},t),n=[],s=[];for(let o of e)try{let a=this.#c(o),l=t[a.id]?.isGhost;if(l){let p=t[a.id];a=O(m({},p),{isGhost:!1,data:o.data}),this.log(`Replaced the blob in the restored ghost file: ${a.name}, ${a.id}`)}let c=this.opts.onBeforeFileAdded(a,i);if(t=this.getState().files,i=m(m({},t),i),!c&&this.checkIfFileAlreadyExists(a.id))throw new Se(this.i18n("noDuplicates",{fileName:a.name??this.i18n("unnamed")}),{file:o});if(c===!1&&!l)throw new Se("Cannot add the file because onBeforeFileAdded returned false.",{isUserFacing:!1,file:o});typeof c=="object"&&c!==null&&(a=c),this.#t.validateSingleFile(a),i[a.id]=a,n.push(a)}catch(a){s.push(a)}try{this.#t.validateAggregateRestrictions(Object.values(t),n)}catch(o){return s.push(o),{nextFilesState:t,validFilesToAdd:[],errors:s}}return{nextFilesState:i,validFilesToAdd:n,errors:s}}addFile(e){this.#l(e);let{nextFilesState:t,validFilesToAdd:i,errors:n}=this.#p([e]),s=n.filter(a=>a.isRestriction);if(this.#a(s),n.length>0)throw n[0];this.setState({files:t});let[o]=i;return this.emit("file-added",o),this.emit("files-added",i),this.log(`Added file: ${o.name}, ${o.id}, mime type: ${o.type}`),this.#d(),o.id}addFiles(e){this.#l();let{nextFilesState:t,validFilesToAdd:i,errors:n}=this.#p(e),s=n.filter(a=>a.isRestriction);this.#a(s);let o=n.filter(a=>!a.isRestriction);if(o.length>0){let a=`Multiple errors occurred while adding files:
`;if(o.forEach(l=>{a+=`
 * ${l.message}`}),this.info({message:this.i18n("addBulkFilesFailed",{smart_count:o.length}),details:a},"error",this.opts.infoTimeout),typeof AggregateError=="function")throw new AggregateError(o,a);{let l=new Error(a);throw l.errors=o,l}}this.setState({files:t}),i.forEach(a=>{this.emit("file-added",a)}),this.emit("files-added",i),i.length>5?this.log(`Added batch of ${i.length} files`):Object.values(i).forEach(a=>{this.log(`Added file: ${a.name}
 id: ${a.id}
 type: ${a.type}`)}),i.length>0&&this.#d()}removeFiles(e){let{files:t,currentUploads:i}=this.getState(),n=m({},t),s=m({},i),o=Object.create(null);e.forEach(p=>{t[p]&&(o[p]=t[p],delete n[p])});function a(p){return o[p]===void 0}Object.keys(s).forEach(p=>{let d=i[p].fileIDs.filter(a);if(d.length===0){delete s[p];return}let{capabilities:g}=this.getState();if(d.length!==i[p].fileIDs.length&&!g.individualCancellation)throw new Error("The installed uploader plugin does not allow removing files during an upload.");s[p]=O(m({},i[p]),{fileIDs:d})});let l={currentUploads:s,files:n};Object.keys(n).length===0&&(l.allowNewUpload=!0,l.error=null,l.recoveredState=null),this.setState(l),this.#y();let c=Object.keys(o);c.forEach(p=>{this.emit("file-removed",o[p])}),c.length>5?this.log(`Removed ${c.length} files`):this.log(`Removed files: ${c.join(", ")}`)}removeFile(e){this.removeFiles([e])}pauseResume(e){if(!this.getState().capabilities.resumableUploads||this.getFile(e).progress.uploadComplete)return;let t=this.getFile(e),n=!(t.isPaused||!1);return this.setFileState(e,{isPaused:n}),this.emit("upload-pause",t,n),n}pauseAll(){let e=m({},this.getState().files);Object.keys(e).filter(i=>!e[i].progress.uploadComplete&&e[i].progress.uploadStarted).forEach(i=>{let n=O(m({},e[i]),{isPaused:!0});e[i]=n}),this.setState({files:e}),this.emit("pause-all")}resumeAll(){let e=m({},this.getState().files);Object.keys(e).filter(i=>!e[i].progress.uploadComplete&&e[i].progress.uploadStarted).forEach(i=>{let n=O(m({},e[i]),{isPaused:!1,error:null});e[i]=n}),this.setState({files:e}),this.emit("resume-all")}#w(){let{files:e}=this.getState();return Object.keys(e).filter(t=>{let i=e[t];return i.error&&(!i.missingRequiredMetaFields||i.missingRequiredMetaFields.length===0)})}async#_(){let e=this.#w(),t=m({},this.getState().files);if(e.forEach(n=>{t[n]=O(m({},t[n]),{isPaused:!1,error:null})}),this.setState({files:t,error:null}),this.emit("retry-all",this.getFilesByIds(e)),e.length===0)return{successful:[],failed:[]};let i=this.#m(e,{forceAllowNewUpload:!0});return this.#S(i)}async retryAll(){let e=await this.#_();return this.emit("complete",e),e}cancelAll(){this.emit("cancel-all");let{files:e}=this.getState(),t=Object.keys(e);t.length&&this.removeFiles(t),this.setState(yi)}retryUpload(e){this.setFileState(e,{error:null,isPaused:!1}),this.emit("upload-retry",this.getFile(e));let t=this.#m([e],{forceAllowNewUpload:!0});return this.#S(t)}logout(){this.iteratePlugins(e=>{e.provider?.logout?.()})}#F=(e,t)=>{let i=e?this.getFile(e.id):void 0;if(e==null||!i){this.log(`Not setting progress for a file that has been removed: ${e?.id}`);return}if(i.progress.percentage===100){this.log(`Not setting progress for a file that has been already uploaded: ${e.id}`);return}let n={bytesTotal:t.bytesTotal,percentage:t.bytesTotal!=null&&Number.isFinite(t.bytesTotal)&&t.bytesTotal>0?Math.round(t.bytesUploaded/t.bytesTotal*100):void 0};i.progress.uploadStarted!=null?this.setFileState(e.id,{progress:O(m(m({},i.progress),n),{bytesUploaded:t.bytesUploaded})}):this.setFileState(e.id,{progress:m(m({},i.progress),n)}),this.#y()};#x(){let e=this.#P(),t=null;e!=null&&(t=Math.round(e*100),t>100?t=100:t<0&&(t=0)),this.emit("progress",t??0),this.setState({totalProgress:t??0})}#y=(0,$l.default)(()=>this.#x(),500,{leading:!0,trailing:!0});[Symbol.for("uppy test: updateTotalProgress")](){return this.#x()}#P(){let t=this.getFiles().filter(l=>l.progress.uploadStarted||l.progress.preprocess||l.progress.postprocess);if(t.length===0)return 0;if(t.every(l=>l.progress.uploadComplete))return 1;let i=l=>l.progress.bytesTotal!=null&&l.progress.bytesTotal!==0,n=t.filter(i),s=t.filter(l=>!i(l));if(n.every(l=>l.progress.uploadComplete)&&s.length>0&&!s.every(l=>l.progress.uploadComplete))return null;let o=n.reduce((l,c)=>l+(c.progress.bytesTotal??0),0),a=n.reduce((l,c)=>l+(c.progress.bytesUploaded||0),0);return o===0?0:a/o}#v(){let e=(n,s,o)=>{let a=n.message||"Unknown error";n.details&&(a+=` ${n.details}`),this.setState({error:a}),s!=null&&s.id in this.getState().files&&this.setFileState(s.id,{error:a,response:o})};this.on("error",e),this.on("upload-error",(n,s,o)=>{if(e(s,n,o),typeof s=="object"&&s.message){this.log(s.message,"error");let a=new Error(this.i18n("failedToUpload",{file:n?.name??""}));a.isUserFacing=!0,a.details=s.message,s.details&&(a.details+=` ${s.details}`),this.#a([a])}else this.#a([s])});let t=null;this.on("upload-stalled",(n,s)=>{let{message:o}=n,a=s.map(l=>l.meta.name).join(", ");t||(this.info({message:o,details:a},"warning",this.opts.infoTimeout),t=setTimeout(()=>{t=null},this.opts.infoTimeout)),this.log(`${o} ${a}`.trim(),"warning")}),this.on("upload",()=>{this.setState({error:null})});let i=n=>{let s=n.filter(a=>{let l=a!=null&&this.getFile(a.id);return l||this.log(`Not setting progress for a file that has been removed: ${a?.id}`),l}),o=Object.fromEntries(s.map(a=>[a.id,{progress:{uploadStarted:Date.now(),uploadComplete:!1,bytesUploaded:0,bytesTotal:a.size}}]));this.patchFilesState(o)};this.on("upload-start",i),this.on("upload-progress",this.#F),this.on("upload-success",(n,s)=>{if(n==null||!this.getFile(n.id)){this.log(`Not setting progress for a file that has been removed: ${n?.id}`);return}let o=this.getFile(n.id).progress;this.setFileState(n.id,{progress:O(m({},o),{postprocess:this.#o.size>0?{mode:"indeterminate"}:void 0,uploadComplete:!0,percentage:100,bytesUploaded:o.bytesTotal}),response:s,uploadURL:s.uploadURL,isPaused:!1}),n.size==null&&this.setFileState(n.id,{size:s.bytesUploaded||o.bytesTotal}),this.#y()}),this.on("preprocess-progress",(n,s)=>{if(n==null||!this.getFile(n.id)){this.log(`Not setting progress for a file that has been removed: ${n?.id}`);return}this.setFileState(n.id,{progress:O(m({},this.getFile(n.id).progress),{preprocess:s})})}),this.on("preprocess-complete",n=>{if(n==null||!this.getFile(n.id)){this.log(`Not setting progress for a file that has been removed: ${n?.id}`);return}let s=m({},this.getState().files);s[n.id]=O(m({},s[n.id]),{progress:m({},s[n.id].progress)}),delete s[n.id].progress.preprocess,this.setState({files:s})}),this.on("postprocess-progress",(n,s)=>{if(n==null||!this.getFile(n.id)){this.log(`Not setting progress for a file that has been removed: ${n?.id}`);return}this.setFileState(n.id,{progress:O(m({},this.getState().files[n.id].progress),{postprocess:s})})}),this.on("postprocess-complete",n=>{if(n==null||!this.getFile(n.id)){this.log(`Not setting progress for a file that has been removed: ${n?.id}`);return}let s=m({},this.getState().files);s[n.id]=O(m({},s[n.id]),{progress:m({},s[n.id].progress)}),delete s[n.id].progress.postprocess,this.setState({files:s})}),this.on("restored",()=>{this.#y()}),this.on("dashboard:file-edit-complete",n=>{n&&this.#s(n)}),typeof window<"u"&&window.addEventListener&&(window.addEventListener("online",this.#f),window.addEventListener("offline",this.#f),setTimeout(this.#f,3e3))}updateOnlineStatus(){window.navigator.onLine??!0?(this.emit("is-online"),this.wasOffline&&(this.emit("back-online"),this.info(this.i18n("connectedToInternet"),"success",3e3),this.wasOffline=!1)):(this.emit("is-offline"),this.info(this.i18n("noInternetConnection"),"error",0),this.wasOffline=!0)}#f=this.updateOnlineStatus.bind(this);getID(){return this.opts.id}use(e,...t){if(typeof e!="function"){let o=`Expected a plugin class, but got ${e===null?"null":typeof e}. Please verify that the plugin was imported and spelled correctly.`;throw new TypeError(o)}let i=new e(this,...t),n=i.id;if(!n)throw new Error("Your plugin must have an id");if(!i.type)throw new Error("Your plugin must have a type");let s=this.getPlugin(n);if(s){let o=`Already found a plugin named '${s.id}'. Tried to use: '${n}'.
Uppy plugins must have unique \`id\` options.`;throw new Error(o)}return e.VERSION&&this.log(`Using ${n} v${e.VERSION}`),i.type in this.#e?this.#e[i.type].push(i):this.#e[i.type]=[i],i.install(),this.emit("plugin-added",i),this}getPlugin(e){for(let t of Object.values(this.#e)){let i=t.find(n=>n.id===e);if(i!=null)return i}}[Symbol.for("uppy test: getPlugins")](e){return this.#e[e]}iteratePlugins(e){Object.values(this.#e).flat(1).forEach(e)}removePlugin(e){this.log(`Removing plugin ${e.id}`),this.emit("plugin-remove",e),e.uninstall&&e.uninstall();let t=this.#e[e.type],i=t.findIndex(o=>o.id===e.id);i!==-1&&t.splice(i,1);let n=this.getState(),s={plugins:O(m({},n.plugins),{[e.id]:void 0})};this.setState(s)}destroy(){this.log(`Closing Uppy instance ${this.opts.id}: removing all files and uninstalling plugins`),this.cancelAll(),this.#r(),this.iteratePlugins(e=>{this.removePlugin(e)}),typeof window<"u"&&window.removeEventListener&&(window.removeEventListener("online",this.#f),window.removeEventListener("offline",this.#f))}hideInfo(){let{info:e}=this.getState();this.setState({info:e.slice(1)}),this.emit("info-hidden")}info(e,t="info",i=3e3){let n=typeof e=="object";this.setState({info:[...this.getState().info,{type:t,message:n?e.message:e,details:n?e.details:null}]}),setTimeout(()=>this.hideInfo(),i),this.emit("info-visible")}log(e,t){let{logger:i}=this.opts;switch(t){case"error":i.error(e);break;case"warning":i.warn(e);break;default:i.debug(e);break}}#b=new Map;registerRequestClient(e,t){this.#b.set(e,t)}getRequestClientForFile(e){if(!e.remote)throw new Error(`Tried to get RequestClient for a non-remote file ${e.id}`);let t=this.#b.get(e.remote.requestClientId);if(t==null)throw new Error(`requestClientId "${e.remote.requestClientId}" not registered for file "${e.id}"`);return t}async restore(e){if(this.log(`Core: attempting to restore upload "${e}"`),!this.getState().currentUploads[e])throw this.#g(e),new Error("Nonexistent upload");let t=await this.#S(e);return this.emit("complete",t),t}#m(e,t={}){let{forceAllowNewUpload:i=!1}=t,{allowNewUpload:n,currentUploads:s}=this.getState();if(!n&&!i)throw new Error("Cannot create a new upload: already uploading.");let o=et();return this.emit("upload",o,this.getFilesByIds(e)),this.setState({allowNewUpload:this.opts.allowMultipleUploadBatches!==!1&&this.opts.allowMultipleUploads!==!1,currentUploads:O(m({},s),{[o]:{fileIDs:e,step:0,result:{}}})}),o}[Symbol.for("uppy test: createUpload")](...e){return this.#m(...e)}#E(e){let{currentUploads:t}=this.getState();return t[e]}addResultData(e,t){if(!this.#E(e)){this.log(`Not setting result for an upload that has been removed: ${e}`);return}let{currentUploads:i}=this.getState(),n=O(m({},i[e]),{result:m(m({},i[e].result),t)});this.setState({currentUploads:O(m({},i),{[e]:n})})}#g(e){let t=m({},this.getState().currentUploads);delete t[e],this.setState({currentUploads:t})}async#S(e){let t=()=>{let{currentUploads:o}=this.getState();return o[e]},i=t(),n=[...this.#n,...this.#u,...this.#o];try{for(let o=i.step||0;o<n.length&&i;o++){let a=n[o];this.setState({currentUploads:O(m({},this.getState().currentUploads),{[e]:O(m({},i),{step:o})})});let{fileIDs:l}=i;await a(l,e),i=t()}}catch(o){throw this.#g(e),o}if(i){i.fileIDs.forEach(c=>{let p=this.getFile(c);p?.progress.postprocess&&this.emit("postprocess-complete",p)});let o=i.fileIDs.map(c=>this.getFile(c)),a=o.filter(c=>!c.error),l=o.filter(c=>c.error);this.addResultData(e,{successful:a,failed:l,uploadID:e}),i=t()}let s;return i&&(s=i.result,this.#g(e)),s==null&&(this.log(`Not setting result for an upload that has been removed: ${e}`),s={successful:[],failed:[],uploadID:e}),s}async upload(){this.#e.uploader?.length||this.log("No uploader type plugins are used","warning");let{files:e}=this.getState();if(this.#w().length>0){let n=await this.#_();if(!(this.getFiles().filter(o=>o.progress.uploadStarted==null).length>0))return this.emit("complete",n),n;({files:e}=this.getState())}let i=this.opts.onBeforeUpload(e);return i===!1?Promise.reject(new Error("Not starting the upload because onBeforeUpload returned false")):(i&&typeof i=="object"&&(e=i,this.setState({files:e})),Promise.resolve().then(()=>this.#t.validateMinNumberOfFiles(e)).catch(n=>{throw this.#a([n]),n}).then(()=>{if(!this.#h(e))throw new Se(this.i18n("missingRequiredMetaField"))}).catch(n=>{throw n}).then(async()=>{let{currentUploads:n}=this.getState(),s=Object.values(n).flatMap(c=>c.fileIDs),o=[];Object.keys(e).forEach(c=>{let p=this.getFile(c);!p.progress.uploadStarted&&s.indexOf(c)===-1&&o.push(p.id)});let a=this.#m(o),l=await this.#S(a);return this.emit("complete",l),l}).catch(n=>{throw this.emit("error",n),this.log(n,"error"),n}))}},vi=Wn;var Xl=Q(Wl(),1);var Kl={strings:{compressingImages:"Compressing images...",compressedX:"Saved %{size} by compressing images"}};var Ph={quality:.6,limit:10},bi=class extends Xe{#e;constructor(e,t){super(e,m(m({},Ph),t)),this.id=this.opts.id||"Compressor",this.type="modifier",this.defaultLocale=Kl,this.#e=new at(this.opts.limit),this.i18nInit(),this.prepareUpload=this.prepareUpload.bind(this),this.compress=this.compress.bind(this)}compress(e){return new Promise((t,i)=>{new Xl.default(e,O(m({},this.opts),{success:t,error:i}))})}async prepareUpload(e){let t=0,i=[],n=this.#e.wrapPromiseFunction(async o=>{try{let a=await this.compress(o.data),l=o.data.size-a.size;this.uppy.log(`[Image Compressor] Image ${o.id} compressed by ${(0,Yn.default)(l)}`),t+=l;let{name:c,type:p,size:d}=a,g=Re(c),x=`${Re(o.meta.name).name}.${g.extension}`;this.uppy.setFileState(o.id,O(m(m(m(m({},c&&{name:c}),g.extension&&{extension:g.extension}),p&&{type:p}),d&&{size:d}),{data:a,meta:O(m({},o.meta),{type:p,name:x})})),i.push(o)}catch(a){this.uppy.log(`[Image Compressor] Failed to compress ${o.id}:`,"warning"),this.uppy.log(a,"warning")}}),s=e.map(o=>{let a=this.uppy.getFile(o);return this.uppy.emit("preprocess-progress",a,{mode:"indeterminate",message:this.i18n("compressingImages")}),a.isRemote||(a.data.type||(a.data=a.data.slice(0,a.data.size,a.type)),!a.type?.startsWith("image/"))?Promise.resolve():n(a)});await Promise.all(s),this.uppy.emit("compressor:complete",i),t>1024&&this.uppy.info(this.i18n("compressedX",{size:(0,Yn.default)(t)}),"info");for(let o of e){let a=this.uppy.getFile(o);this.uppy.emit("preprocess-complete",a)}}install(){this.uppy.addPreProcessor(this.prepareUpload)}uninstall(){this.uppy.removePreProcessor(this.prepareUpload)}};function Eh(){return u("svg",{width:"26",height:"26",viewBox:"0 0 26 26",xmlns:"http://www.w3.org/2000/svg",children:u("g",{fill:"none","fill-rule":"evenodd",children:[u("circle",{fill:"#FFF",cx:"13",cy:"13",r:"13"}),u("path",{d:"M21.64 13.205c0-.639-.057-1.252-.164-1.841H13v3.481h4.844a4.14 4.14 0 01-1.796 2.716v2.259h2.908c1.702-1.567 2.684-3.875 2.684-6.615z",fill:"#4285F4","fill-rule":"nonzero"}),u("path",{d:"M13 22c2.43 0 4.467-.806 5.956-2.18l-2.908-2.259c-.806.54-1.837.86-3.048.86-2.344 0-4.328-1.584-5.036-3.711H4.957v2.332A8.997 8.997 0 0013 22z",fill:"#34A853","fill-rule":"nonzero"}),u("path",{d:"M7.964 14.71A5.41 5.41 0 017.682 13c0-.593.102-1.17.282-1.71V8.958H4.957A8.996 8.996 0 004 13c0 1.452.348 2.827.957 4.042l3.007-2.332z",fill:"#FBBC05","fill-rule":"nonzero"}),u("path",{d:"M13 7.58c1.321 0 2.508.454 3.44 1.345l2.582-2.58C17.463 4.891 15.426 4 13 4a8.997 8.997 0 00-8.043 4.958l3.007 2.332C8.672 9.163 10.656 7.58 13 7.58z",fill:"#EA4335","fill-rule":"nonzero"}),u("path",{d:"M4 4h18v18H4z"})]})})}function Ch({pluginName:r,i18n:e,onAuth:t}){let i=r==="Google Drive",n=Be(s=>{s.preventDefault(),t()},[t]);return u("form",{onSubmit:n,children:i?u("button",{type:"submit",className:"uppy-u-reset uppy-c-btn uppy-c-btn-primary uppy-Provider-authBtn uppy-Provider-btn-google","data-uppy-super-focusable":!0,children:[u(Eh,{}),e("signInWithGoogle")]}):u("button",{type:"submit",className:"uppy-u-reset uppy-c-btn uppy-c-btn-primary uppy-Provider-authBtn","data-uppy-super-focusable":!0,children:e("authenticateWith",{pluginName:r})})})}var Th=({pluginName:r,i18n:e,onAuth:t})=>u(Ch,{pluginName:r,i18n:e,onAuth:t});function Qn({loading:r,pluginName:e,pluginIcon:t,i18n:i,handleAuth:n,renderForm:s=Th}){return u("div",{className:"uppy-Provider-auth",children:[u("div",{className:"uppy-Provider-authIcon",children:t()}),u("div",{className:"uppy-Provider-authTitle",children:i("authenticateWithTitle",{pluginName:e})}),s({pluginName:e,i18n:i,loading:r,onAuth:n})]})}var bu=Q(Fe(),1);var Yl={name:"@uppy/provider-views",description:"View library for Uppy remote provider plugins.",version:"5.0.2",license:"MIT",style:"dist/style.min.css",type:"module",sideEffects:["*.css"],scripts:{build:"tsc --build tsconfig.build.json","build:css":"sass --load-path=../../ src/style.scss dist/style.css && postcss dist/style.css -u cssnano -o dist/style.min.css",typecheck:"tsc --build",test:"vitest run --environment=jsdom --silent='passed-only'"},keywords:["file uploader","uppy"],homepage:"https://uppy.io",bugs:{url:"https://github.com/transloadit/uppy/issues"},repository:{type:"git",url:"git+https://github.com/transloadit/uppy.git"},files:["src","lib","dist","CHANGELOG.md"],exports:{".":"./lib/index.js","./css/style.min.css":"./dist/style.min.css","./css/style.css":"./dist/style.css","./css/style.scss":"./src/style.scss","./package.json":"./package.json"},dependencies:{"@uppy/utils":"^7.0.2",classnames:"^2.2.6",nanoid:"^5.0.9","p-queue":"^8.0.0",preact:"^10.5.13"},devDependencies:{"@types/gapi":"^0.0.47","@types/google.accounts":"^0.0.14","@types/google.picker":"^0.0.42",cssnano:"^7.0.7",jsdom:"^26.1.0",postcss:"^8.5.6","postcss-cli":"^11.0.1",sass:"^1.89.2",typescript:"^5.8.3",vitest:"^3.2.4"},peerDependencies:{"@uppy/core":"^5.0.2"}};var Ql=Q(Fe(),1);function Uh(){return u("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:11,height:14.5,viewBox:"0 0 44 58",children:u("path",{d:"M27.437.517a1 1 0 0 0-.094.03H4.25C2.037.548.217 2.368.217 4.58v48.405c0 2.212 1.82 4.03 4.03 4.03H39.03c2.21 0 4.03-1.818 4.03-4.03V15.61a1 1 0 0 0-.03-.28 1 1 0 0 0 0-.093 1 1 0 0 0-.03-.032 1 1 0 0 0 0-.03 1 1 0 0 0-.032-.063 1 1 0 0 0-.03-.063 1 1 0 0 0-.032 0 1 1 0 0 0-.03-.063 1 1 0 0 0-.032-.03 1 1 0 0 0-.03-.063 1 1 0 0 0-.063-.062l-14.593-14a1 1 0 0 0-.062-.062A1 1 0 0 0 28 .708a1 1 0 0 0-.374-.157 1 1 0 0 0-.156 0 1 1 0 0 0-.03-.03l-.003-.003zM4.25 2.547h22.218v9.97c0 2.21 1.82 4.03 4.03 4.03h10.564v36.438a2.02 2.02 0 0 1-2.032 2.032H4.25c-1.13 0-2.032-.9-2.032-2.032V4.58c0-1.13.902-2.032 2.03-2.032zm24.218 1.345l10.375 9.937.75.718H30.5c-1.13 0-2.032-.9-2.032-2.03V3.89z"})})}function Ah(){return u("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",style:{minWidth:16,marginRight:3},viewBox:"0 0 276.157 276.157",children:u("path",{d:"M273.08 101.378c-3.3-4.65-8.86-7.32-15.254-7.32h-24.34V67.59c0-10.2-8.3-18.5-18.5-18.5h-85.322c-3.63 0-9.295-2.875-11.436-5.805l-6.386-8.735c-4.982-6.814-15.104-11.954-23.546-11.954H58.73c-9.292 0-18.638 6.608-21.737 15.372l-2.033 5.752c-.958 2.71-4.72 5.37-7.596 5.37H18.5C8.3 49.09 0 57.39 0 67.59v167.07c0 .886.16 1.73.443 2.52.152 3.306 1.18 6.424 3.053 9.064 3.3 4.652 8.86 7.32 15.255 7.32h188.487c11.395 0 23.27-8.425 27.035-19.18l40.677-116.188c2.11-6.035 1.43-12.164-1.87-16.816zM18.5 64.088h8.864c9.295 0 18.64-6.607 21.738-15.37l2.032-5.75c.96-2.712 4.722-5.373 7.597-5.373h29.565c3.63 0 9.295 2.876 11.437 5.806l6.386 8.735c4.982 6.815 15.104 11.954 23.546 11.954h85.322c1.898 0 3.5 1.602 3.5 3.5v26.47H69.34c-11.395 0-23.27 8.423-27.035 19.178L15 191.23V67.59c0-1.898 1.603-3.5 3.5-3.5zm242.29 49.15l-40.676 116.188c-1.674 4.78-7.812 9.135-12.877 9.135H18.75c-1.447 0-2.576-.372-3.02-.997-.442-.625-.422-1.814.057-3.18l40.677-116.19c1.674-4.78 7.812-9.134 12.877-9.134h188.487c1.448 0 2.577.372 3.02.997.443.625.423 1.814-.056 3.18z"})})}function Oh(){return u("svg",{"aria-hidden":"true",focusable:"false",style:{width:16,marginRight:4},viewBox:"0 0 58 58",children:[u("path",{d:"M36.537 28.156l-11-7a1.005 1.005 0 0 0-1.02-.033C24.2 21.3 24 21.635 24 22v14a1 1 0 0 0 1.537.844l11-7a1.002 1.002 0 0 0 0-1.688zM26 34.18V23.82L34.137 29 26 34.18z"}),u("path",{d:"M57 6H1a1 1 0 0 0-1 1v44a1 1 0 0 0 1 1h56a1 1 0 0 0 1-1V7a1 1 0 0 0-1-1zM10 28H2v-9h8v9zm-8 2h8v9H2v-9zm10 10V8h34v42H12V40zm44-12h-8v-9h8v9zm-8 2h8v9h-8v-9zm8-22v9h-8V8h8zM2 8h8v9H2V8zm0 42v-9h8v9H2zm54 0h-8v-9h8v9z"})]})}function Ut({itemIconString:r,alt:e=void 0}){if(r===null)return null;switch(r){case"file":return u(Uh,{});case"folder":return u(Ah,{});case"video":return u(Oh,{});default:return u("img",{src:r,alt:e,referrerPolicy:"no-referrer",loading:"lazy",width:16,height:16})}}function Ih({file:r,toggleCheckbox:e,className:t,isDisabled:i,restrictionError:n,showTitles:s,children:o=null,i18n:a}){return u("li",{className:t,title:i&&n?n:void 0,children:[u("input",{type:"checkbox",className:"uppy-u-reset uppy-ProviderBrowserItem-checkbox uppy-ProviderBrowserItem-checkbox--grid",onChange:e,name:"listitem",id:r.id,checked:r.status==="checked",disabled:i,"data-uppy-super-focusable":!0}),u("label",{htmlFor:r.id,"aria-label":r.data.name??a("unnamed"),className:"uppy-u-reset uppy-ProviderBrowserItem-inner",children:[u(Ut,{itemIconString:r.data.thumbnail||r.data.icon}),s&&(r.data.name??a("unnamed")),o]})]})}var Zn=Ih;function Jn({file:r,openFolder:e,className:t,isDisabled:i,restrictionError:n,toggleCheckbox:s,showTitles:o,i18n:a}){return u("li",{className:t,title:r.status!=="checked"&&n?n:void 0,children:[u("input",{type:"checkbox",className:"uppy-u-reset uppy-ProviderBrowserItem-checkbox",onChange:s,name:"listitem",id:r.id,checked:r.status==="checked","aria-label":r.data.isFolder?a("allFilesFromFolderNamed",{name:r.data.name??a("unnamed")}):null,disabled:i,"data-uppy-super-focusable":!0}),r.data.isFolder?u("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-ProviderBrowserItem-inner",onClick:()=>e(r.id),"aria-label":a("openFolderNamed",{name:r.data.name??a("unnamed")}),children:[u("div",{className:"uppy-ProviderBrowserItem-iconWrap",children:u(Ut,{itemIconString:r.data.icon})}),o&&r.data.name?u("span",{children:r.data.name}):a("unnamed")]}):u("label",{htmlFor:r.id,className:"uppy-u-reset uppy-ProviderBrowserItem-inner",children:[u("div",{className:"uppy-ProviderBrowserItem-iconWrap",children:u(Ut,{itemIconString:r.data.icon})}),o&&(r.data.name??a("unnamed"))]})]})}function es(r){let{viewType:e,toggleCheckbox:t,showTitles:i,i18n:n,openFolder:s,file:o,utmSource:a}=r,l=o.type==="folder"?null:o.restrictionError,c=!!l&&o.status!=="checked",p={file:o,openFolder:s,toggleCheckbox:t,utmSource:a,i18n:n,viewType:e,showTitles:i,className:(0,Ql.default)("uppy-ProviderBrowserItem",{"uppy-ProviderBrowserItem--disabled":c},{"uppy-ProviderBrowserItem--noPreview":o.data.icon==="video"},{"uppy-ProviderBrowserItem--is-checked":o.status==="checked"},{"uppy-ProviderBrowserItem--is-partial":o.status==="partial"}),isDisabled:c,restrictionError:l};switch(e){case"grid":return u(Zn,m({},p));case"list":return u(Jn,m({},p));case"unsplash":return u(Zn,O(m({},p),{children:u("a",{href:`${o.data.author.url}?utm_source=${a}&utm_medium=referral`,target:"_blank",rel:"noopener noreferrer",className:"uppy-ProviderBrowserItem-author",tabIndex:-1,children:o.data.author.name})}));default:throw new Error(`There is no such type ${e}`)}}function Dh(r){let{displayedPartialTree:e,viewType:t,toggleCheckbox:i,handleScroll:n,showTitles:s,i18n:o,isLoading:a,openFolder:l,noResultsLabel:c,virtualList:p,utmSource:d}=r,[g,v]=Ce(!1);if(Ne(()=>{let A=U=>{U.key==="Shift"&&v(!1)},C=U=>{U.key==="Shift"&&v(!0)};return document.addEventListener("keyup",A),document.addEventListener("keydown",C),()=>{document.removeEventListener("keyup",A),document.removeEventListener("keydown",C)}},[]),a)return u("div",{className:"uppy-Provider-loading",children:typeof a=="string"?a:o("loading")});if(e.length===0)return u("div",{className:"uppy-Provider-empty",children:c});let x=A=>u(es,{viewType:t,toggleCheckbox:C=>{C.stopPropagation(),C.preventDefault(),document.getSelection()?.removeAllRanges(),i(A,g)},showTitles:s,i18n:o,openFolder:l,file:A,utmSource:d},A.id);return p?u("div",{className:"uppy-ProviderBrowser-body",children:u(kt,{className:"uppy-ProviderBrowser-list",data:e,renderRow:x,rowHeight:35.5})}):u("div",{className:"uppy-ProviderBrowser-body",children:u("ul",{className:"uppy-ProviderBrowser-list",onScroll:n,tabIndex:-1,children:e.map(x)})})}var Zl=Dh;var Jl=Q(Fe(),1);var Rh=r=>r.filter(t=>t.type==="file"&&t.status==="checked"?!0:t.type==="folder"&&t.status==="checked"?!r.some(n=>n.type!=="root"&&n.parentId===t.id):!1).length,_i=Rh;function ts({cancelSelection:r,donePicking:e,i18n:t,partialTree:i,validateAggregateRestrictions:n}){let s=dt(()=>n(i),[i,n]),o=dt(()=>_i(i),[i]);return o===0?null:u("div",{className:"uppy-ProviderBrowser-footer",children:[u("div",{className:"uppy-ProviderBrowser-footer-buttons",children:[u("button",{className:(0,Jl.default)("uppy-u-reset uppy-c-btn uppy-c-btn-primary",{"uppy-c-btn--disabled":s}),disabled:!!s,onClick:e,type:"button",children:t("selectX",{smart_count:o})}),u("button",{className:"uppy-u-reset uppy-c-btn uppy-c-btn-link",onClick:r,type:"button",children:t("cancel")})]}),s&&u("div",{className:"uppy-ProviderBrowser-footer-error",children:s})]})}function Nh({searchString:r,setSearchString:e,submitSearchString:t,wrapperClassName:i,inputClassName:n,inputLabel:s,clearSearchLabel:o="",showButton:a=!1,buttonLabel:l="",buttonCSSClassName:c=""}){let p=v=>{e(v.target.value)},d=Be(v=>{v.preventDefault(),t()},[t]),[g]=Ce(()=>{let v=document.createElement("form");return v.setAttribute("tabindex","-1"),v.id=et(),v});return Ne(()=>(document.body.appendChild(g),g.addEventListener("submit",d),()=>{g.removeEventListener("submit",d),document.body.removeChild(g)}),[g,d]),u("section",{className:i,children:[u("input",{className:`uppy-u-reset ${n}`,type:"search","aria-label":s,placeholder:s,value:r,onInput:p,form:g.id,"data-uppy-super-focusable":!0}),!a&&u("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon uppy-ProviderBrowser-searchFilterIcon",width:"12",height:"12",viewBox:"0 0 12 12",children:u("path",{d:"M8.638 7.99l3.172 3.172a.492.492 0 1 1-.697.697L7.91 8.656a4.977 4.977 0 0 1-2.983.983C2.206 9.639 0 7.481 0 4.819 0 2.158 2.206 0 4.927 0c2.721 0 4.927 2.158 4.927 4.82a4.74 4.74 0 0 1-1.216 3.17zm-3.71.685c2.176 0 3.94-1.726 3.94-3.856 0-2.129-1.764-3.855-3.94-3.855C2.75.964.984 2.69.984 4.819c0 2.13 1.765 3.856 3.942 3.856z"})}),!a&&r&&u("button",{className:"uppy-u-reset uppy-ProviderBrowser-searchFilterReset",type:"button","aria-label":o,title:o,onClick:()=>e(""),children:u("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",viewBox:"0 0 19 19",children:u("path",{d:"M17.318 17.232L9.94 9.854 9.586 9.5l-.354.354-7.378 7.378h.707l-.62-.62v.706L9.318 9.94l.354-.354-.354-.354L1.94 1.854v.707l.62-.62h-.706l7.378 7.378.354.354.354-.354 7.378-7.378h-.707l.622.62v-.706L9.854 9.232l-.354.354.354.354 7.378 7.378.708-.707-7.38-7.378v.708l7.38-7.38.353-.353-.353-.353-.622-.622-.353-.353-.354.352-7.378 7.38h.708L2.56 1.23 2.208.88l-.353.353-.622.62-.353.355.352.353 7.38 7.38v-.708l-7.38 7.38-.353.353.352.353.622.622.353.353.354-.353 7.38-7.38h-.708l7.38 7.38z"})})}),a&&u("button",{className:`uppy-u-reset uppy-c-btn uppy-c-btn-primary ${c}`,type:"submit",form:g.id,children:l})]})}var eu=Nh;var Bh=(r,e,t)=>({id:r.id,source:e.id,name:r.name||r.id,type:r.mimeType,isRemote:!0,data:r,preview:r.thumbnail||void 0,meta:{authorName:r.author?.name,authorUrl:r.author?.url,relativePath:r.relDirPath||null,absolutePath:r.absDirPath},body:{fileId:r.id},remote:{companionUrl:e.opts.companionUrl,url:`${t.fileUrl(r.requestPath)}`,body:{fileId:r.id},providerName:t.name,provider:t.provider,requestClientId:t.provider}}),tu=Bh;var Lh=(r,e,t)=>{let i=r.map(o=>tu(o,e,t)),n=[],s=[];i.forEach(o=>{e.uppy.checkIfFileAlreadyExists(lr(o,e.uppy.getID()))?s.push(o):n.push(o)}),n.length>0&&e.uppy.info(e.uppy.i18n("addedNumFiles",{numFiles:n.length})),s.length>0&&e.uppy.info(`Not adding ${s.length} files because they already exist`),e.uppy.addFiles(n)},ru=Lh;var Mh=(r,e,t,i)=>{let n=e.findIndex(s=>s.id===i);if(n!==-1&&t){let s=e.findIndex(a=>a.id===r);return e.slice(Math.min(n,s),Math.max(n,s)+1).map(a=>a.id)}return[r]},iu=Mh;var jh=r=>e=>{if(!e.isAuthError){if(e.name==="AbortError"){r.log("Aborting request","warning");return}r.log(e,"error"),e.name==="UserFacingApiError"&&r.info({message:r.i18n("companionError"),details:r.i18n(e.message)},"warning",5e3)}},At=jh;var zh=(r,e)=>{let t=r.find(n=>n.id===e),i=[];for(;i=[t,...i],t.type!=="root";){let n=t.parentId;t=r.find(s=>s.id===n)}return i},nu=zh;var su=(r,e,t)=>{let i=e===null?"null":e;if(t[i])return t[i];let n=r.find(o=>o.id===e);if(n.type==="root")return[];let s=[...su(r,n.parentId,t),n];return t[i]=s,s},Hh=r=>{let e=Object.create(null);return r.filter(n=>n.type==="file"&&n.status==="checked").map(n=>{let s=su(r,n.id,e),o=s.findIndex(p=>p.type==="folder"&&p.status==="checked"),a=s.slice(o),l=`/${s.map(p=>p.data.name).join("/")}`,c=a.length===1?void 0:a.map(p=>p.data.name).join("/");return O(m({},n.data),{absDirPath:l,relDirPath:c})})},ou=Hh;var is=Q(lu(),1);var Fr=class extends Error{constructor(e){super(e),this.name="TimeoutError"}},ns=class extends Error{constructor(e){super(),this.name="AbortError",this.message=e}},uu=r=>globalThis.DOMException===void 0?new ns(r):new DOMException(r),du=r=>{let e=r.reason===void 0?uu("This operation was aborted."):r.reason;return e instanceof Error?e:uu(e)};function ss(r,e){let{milliseconds:t,fallback:i,message:n,customTimers:s={setTimeout,clearTimeout}}=e,o,a,c=new Promise((p,d)=>{if(typeof t!="number"||Math.sign(t)!==1)throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${t}\``);if(e.signal){let{signal:v}=e;v.aborted&&d(du(v)),a=()=>{d(du(v))},v.addEventListener("abort",a,{once:!0})}if(t===Number.POSITIVE_INFINITY){r.then(p,d);return}let g=new Fr;o=s.setTimeout.call(void 0,()=>{if(i){try{p(i())}catch(v){d(v)}return}typeof r.cancel=="function"&&r.cancel(),n===!1?p():n instanceof Error?d(n):(g.message=n??`Promise timed out after ${t} milliseconds`,d(g))},t),(async()=>{try{p(await r)}catch(v){d(v)}})()}).finally(()=>{c.clear(),a&&e.signal&&e.signal.removeEventListener("abort",a)});return c.clear=()=>{s.clearTimeout.call(void 0,o),o=void 0},c}function os(r,e,t){let i=0,n=r.length;for(;n>0;){let s=Math.trunc(n/2),o=i+s;t(r[o],e)<=0?(i=++o,n-=s+1):n=s}return i}var Si=class{#e=[];enqueue(e,t){t=m({priority:0},t);let i={priority:t.priority,id:t.id,run:e};if(this.size===0||this.#e[this.size-1].priority>=t.priority){this.#e.push(i);return}let n=os(this.#e,i,(s,o)=>o.priority-s.priority);this.#e.splice(n,0,i)}setPriority(e,t){let i=this.#e.findIndex(s=>s.id===e);if(i===-1)throw new ReferenceError(`No promise function with the id "${e}" exists in the queue.`);let[n]=this.#e.splice(i,1);this.enqueue(n.run,{priority:t,id:e})}dequeue(){return this.#e.shift()?.run}filter(e){return this.#e.filter(t=>t.priority===e.priority).map(t=>t.run)}get size(){return this.#e.length}};var Fi=class extends is.default{#e;#t;#r=0;#i;#n;#u=0;#o;#a;#s;#h;#l=0;#c;#d;#p;#w=1n;timeout;constructor(e){if(super(),e=m({carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:Si},e),!(typeof e.intervalCap=="number"&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${e.intervalCap?.toString()??""}\` (${typeof e.intervalCap})`);if(e.interval===void 0||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${e.interval?.toString()??""}\` (${typeof e.interval})`);this.#e=e.carryoverConcurrencyCount,this.#t=e.intervalCap===Number.POSITIVE_INFINITY||e.interval===0,this.#i=e.intervalCap,this.#n=e.interval,this.#s=new e.queueClass,this.#h=e.queueClass,this.concurrency=e.concurrency,this.timeout=e.timeout,this.#p=e.throwOnTimeout===!0,this.#d=e.autoStart===!1}get#_(){return this.#t||this.#r<this.#i}get#F(){return this.#l<this.#c}#x(){this.#l--,this.#v(),this.emit("next")}#y(){this.#b(),this.#f(),this.#a=void 0}get#P(){let e=Date.now();if(this.#o===void 0){let t=this.#u-e;if(t<0)this.#r=this.#e?this.#l:0;else return this.#a===void 0&&(this.#a=setTimeout(()=>{this.#y()},t)),!0}return!1}#v(){if(this.#s.size===0)return this.#o&&clearInterval(this.#o),this.#o=void 0,this.emit("empty"),this.#l===0&&this.emit("idle"),!1;if(!this.#d){let e=!this.#P;if(this.#_&&this.#F){let t=this.#s.dequeue();return t?(this.emit("active"),t(),e&&this.#f(),!0):!1}}return!1}#f(){this.#t||this.#o!==void 0||(this.#o=setInterval(()=>{this.#b()},this.#n),this.#u=Date.now()+this.#n)}#b(){this.#r===0&&this.#l===0&&this.#o&&(clearInterval(this.#o),this.#o=void 0),this.#r=this.#e?this.#l:0,this.#m()}#m(){for(;this.#v(););}get concurrency(){return this.#c}set concurrency(e){if(!(typeof e=="number"&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this.#c=e,this.#m()}async#E(e){return new Promise((t,i)=>{e.addEventListener("abort",()=>{i(e.reason)},{once:!0})})}setPriority(e,t){this.#s.setPriority(e,t)}async add(e,t={}){return t.id??=(this.#w++).toString(),t=m({timeout:this.timeout,throwOnTimeout:this.#p},t),new Promise((i,n)=>{this.#s.enqueue(async()=>{this.#l++;try{t.signal?.throwIfAborted(),this.#r++;let s=e({signal:t.signal});t.timeout&&(s=ss(Promise.resolve(s),{milliseconds:t.timeout})),t.signal&&(s=Promise.race([s,this.#E(t.signal)]));let o=await s;i(o),this.emit("completed",o)}catch(s){if(s instanceof Fr&&!t.throwOnTimeout){i();return}n(s),this.emit("error",s)}finally{this.#x()}},t),this.emit("add"),this.#v()})}async addAll(e,t){return Promise.all(e.map(async i=>this.add(i,t)))}start(){return this.#d?(this.#d=!1,this.#m(),this):this}pause(){this.#d=!0}clear(){this.#s=new this.#h}async onEmpty(){this.#s.size!==0&&await this.#g("empty")}async onSizeLessThan(e){this.#s.size<e||await this.#g("next",()=>this.#s.size<e)}async onIdle(){this.#l===0&&this.#s.size===0||await this.#g("idle")}async#g(e,t){return new Promise(i=>{let n=()=>{t&&!t()||(this.off(e,n),i())};this.on(e,n)})}get size(){return this.#s.size}sizeBy(e){return this.#s.filter(e).length}get pending(){return this.#l}get isPaused(){return this.#d}};var $h=r=>r.map(e=>m({},e)),Pi=$h;var cu=async(r,e,t,i,n)=>{let s=[],o=t.cached?t.nextPagePath:t.id;for(;o;){let d=await i(o);s=s.concat(d.items),o=d.nextPagePath}let a=s.filter(d=>d.isFolder===!0),l=s.filter(d=>d.isFolder===!1),c=a.map(d=>({type:"folder",id:d.requestPath,cached:!1,nextPagePath:null,status:"checked",parentId:t.id,data:d})),p=l.map(d=>{let g=n(d);return{type:"file",id:d.requestPath,restrictionError:g,status:g?"unchecked":"checked",parentId:t.id,data:d}});t.cached=!0,t.nextPagePath=null,e.push(...p,...c),c.forEach(async d=>{r.add(()=>cu(r,e,d,i,n))})},Gh=async(r,e,t,i)=>{let n=new Fi({concurrency:6}),s=Pi(r);return s.filter(a=>a.type==="folder"&&a.status==="checked"&&(a.cached===!1||a.nextPagePath)).forEach(a=>{n.add(()=>cu(n,s,a,e,t))}),n.on("completed",()=>{let a=s.filter(l=>l.type==="file"&&l.status==="checked").length;i(a)}),await n.onIdle(),s},pu=Gh;var Wh=(r,e,t,i,n)=>{let s=e.filter(v=>v.isFolder===!0),o=e.filter(v=>v.isFolder===!1),a=t.type==="folder"&&t.status==="checked",l=s.map(v=>({type:"folder",id:v.requestPath,cached:!1,nextPagePath:null,status:a?"checked":"unchecked",parentId:t.id,data:v})),c=o.map(v=>{let x=n(v);return{type:"file",id:v.requestPath,restrictionError:x,status:a&&!x?"checked":"unchecked",parentId:t.id,data:v}}),p=O(m({},t),{cached:!0,nextPagePath:i});return[...r.map(v=>v.id===p.id?p:v),...l,...c]},hu=Wh;var Kh=(r,e,t,i,n)=>{let s=r.find(x=>x.id===e),o=t.filter(x=>x.isFolder===!0),a=t.filter(x=>x.isFolder===!1),l=O(m({},s),{nextPagePath:i}),c=r.map(x=>x.id===l.id?l:x),p=l.type==="folder"&&l.status==="checked",d=o.map(x=>({type:"folder",id:x.requestPath,cached:!1,nextPagePath:null,status:p?"checked":"unchecked",parentId:l.id,data:x})),g=a.map(x=>{let A=n(x);return{type:"file",id:x.requestPath,restrictionError:A,status:p&&!A?"checked":"unchecked",parentId:l.id,data:x}});return[...c,...d,...g]},fu=Kh;var as=(r,e,t)=>{r.filter(n=>n.type!=="root"&&n.parentId===e).forEach(n=>{n.status=t&&!(n.type==="file"&&n.restrictionError)?"checked":"unchecked",as(r,n.id,t)})},ls=(r,e)=>{let t=r.find(o=>o.id===e);if(t.type==="root")return;let i=r.filter(o=>o.type!=="root"&&o.parentId===t.id&&!(o.type==="file"&&o.restrictionError)),n=i.every(o=>o.status==="checked"),s=i.every(o=>o.status==="unchecked");n?t.status="checked":s?t.status="unchecked":t.status="partial",ls(r,t.parentId)},Xh=(r,e)=>{let t=Pi(r);if(e.length>=2){let i=t.filter(n=>n.type!=="root"&&e.includes(n.id));i.forEach(n=>{n.type==="file"?n.status=n.restrictionError?"unchecked":"checked":n.status="checked"}),i.forEach(n=>{as(t,n.id,!0)}),ls(t,i[0].parentId)}else{let i=t.find(n=>n.id===e[0]);i.status=i.status==="checked"?"unchecked":"checked",as(t,i.id,i.status==="checked"),ls(t,i.parentId)}return t},mu=Xh;var Pr={afterOpenFolder:hu,afterScrollFolder:fu,afterToggleCheckbox:mu,afterFill:pu};var Yh=r=>{let{scrollHeight:e,scrollTop:t,offsetHeight:i}=r.target;return e-(t+i)<50},gu=Yh;var yu=Q(Fe(),1);function us(r){let{openFolder:e,title:t,breadcrumbsIcon:i,breadcrumbs:n,i18n:s}=r;return u("div",{className:"uppy-Provider-breadcrumbs",children:[u("div",{className:"uppy-Provider-breadcrumbsIcon",children:i}),n.map((o,a)=>u(ae,{children:[u("button",{type:"button",className:"uppy-u-reset uppy-c-btn",onClick:()=>e(o.id),children:o.type==="root"?t:o.data.name??s("unnamed")},o.id),n.length===a+1?"":" / "]}))]})}function ds({i18n:r,logout:e,username:t}){return u(ae,{children:[t&&u("span",{className:"uppy-ProviderBrowser-user",children:t},"username"),u("button",{type:"button",onClick:e,className:"uppy-u-reset uppy-c-btn uppy-ProviderBrowser-userLogout",children:r("logOut")},"logout")]})}function cs(r){return u("div",{className:"uppy-ProviderBrowser-header",children:u("div",{className:(0,yu.default)("uppy-ProviderBrowser-headerBar",!r.showBreadcrumbs&&"uppy-ProviderBrowser-headerBar--simple"),children:[r.showBreadcrumbs&&u(us,{openFolder:r.openFolder,breadcrumbs:r.breadcrumbs,breadcrumbsIcon:r.pluginIcon?.(),title:r.title,i18n:r.i18n}),u(ds,{logout:r.logout,username:r.username,i18n:r.i18n})]})})}function Er(){return u("svg",{"aria-hidden":"true",focusable:"false",width:"30",height:"30",viewBox:"0 0 30 30",children:u("path",{d:"M15 30c8.284 0 15-6.716 15-15 0-8.284-6.716-15-15-15C6.716 0 0 6.716 0 15c0 8.284 6.716 15 15 15zm4.258-12.676v6.846h-8.426v-6.846H5.204l9.82-12.364 9.82 12.364H19.26z"})})}var vu=r=>({authenticated:void 0,partialTree:[{type:"root",id:r,cached:!1,nextPagePath:null}],currentFolderId:r,searchString:"",didFirstRender:!1,username:null,loading:!1}),Ei=class{static VERSION=Yl.version;plugin;provider;opts;isHandlingScroll=!1;lastCheckbox=null;constructor(e,t){this.plugin=e,this.provider=t.provider;let i={viewType:"list",showTitles:!0,showFilter:!0,showBreadcrumbs:!0,loadAllFiles:!1,virtualList:!1};this.opts=m(m({},i),t),this.openFolder=this.openFolder.bind(this),this.logout=this.logout.bind(this),this.handleAuth=this.handleAuth.bind(this),this.handleScroll=this.handleScroll.bind(this),this.resetPluginState=this.resetPluginState.bind(this),this.donePicking=this.donePicking.bind(this),this.render=this.render.bind(this),this.cancelSelection=this.cancelSelection.bind(this),this.toggleCheckbox=this.toggleCheckbox.bind(this),this.resetPluginState(),this.plugin.uppy.on("dashboard:close-panel",this.resetPluginState),this.plugin.uppy.registerRequestClient(this.provider.provider,this.provider)}resetPluginState(){this.plugin.setPluginState(vu(this.plugin.rootFolderId))}tearDown(){}setLoading(e){this.plugin.setPluginState({loading:e})}cancelSelection(){let{partialTree:e}=this.plugin.getPluginState(),t=e.map(i=>i.type==="root"?i:O(m({},i),{status:"unchecked"}));this.plugin.setPluginState({partialTree:t})}#e;async#t(e){this.#e?.abort();let t=new AbortController;this.#e=t;let i=()=>{t.abort()};try{this.plugin.uppy.on("dashboard:close-panel",i),this.plugin.uppy.on("cancel-all",i),await e(t.signal)}finally{this.plugin.uppy.off("dashboard:close-panel",i),this.plugin.uppy.off("cancel-all",i),this.#e=void 0}}async openFolder(e){this.lastCheckbox=null;let{partialTree:t}=this.plugin.getPluginState(),i=t.find(n=>n.id===e);if(i.cached){this.plugin.setPluginState({currentFolderId:e,searchString:""});return}this.setLoading(!0),await this.#t(async n=>{let s=e,o=[];do{let{username:l,nextPagePath:c,items:p}=await this.provider.list(s,{signal:n});this.plugin.setPluginState({username:l}),s=c,o=o.concat(p),this.setLoading(this.plugin.uppy.i18n("loadedXFiles",{numFiles:o.length}))}while(this.opts.loadAllFiles&&s);let a=Pr.afterOpenFolder(t,o,i,s,this.validateSingleFile);this.plugin.setPluginState({partialTree:a,currentFolderId:e,searchString:""})}).catch(At(this.plugin.uppy)),this.setLoading(!1)}async logout(){await this.#t(async e=>{let t=await this.provider.logout({signal:e});if(t.ok){if(!t.revoked){let i=this.plugin.uppy.i18n("companionUnauthorizeHint",{provider:this.plugin.title,url:t.manual_revoke_url});this.plugin.uppy.info(i,"info",7e3)}this.plugin.setPluginState(O(m({},vu(this.plugin.rootFolderId)),{authenticated:!1}))}}).catch(At(this.plugin.uppy))}async handleAuth(e){await this.#t(async t=>{this.setLoading(!0),await this.provider.login({authFormData:e,signal:t}),this.plugin.setPluginState({authenticated:!0}),await Promise.all([this.provider.fetchPreAuthToken(),this.openFolder(this.plugin.rootFolderId)])}).catch(At(this.plugin.uppy)),this.setLoading(!1)}async handleScroll(e){let{partialTree:t,currentFolderId:i}=this.plugin.getPluginState(),n=t.find(s=>s.id===i);gu(e)&&!this.isHandlingScroll&&n.nextPagePath&&(this.isHandlingScroll=!0,await this.#t(async s=>{let{nextPagePath:o,items:a}=await this.provider.list(n.nextPagePath,{signal:s}),l=Pr.afterScrollFolder(t,i,a,o,this.validateSingleFile);this.plugin.setPluginState({partialTree:l})}).catch(At(this.plugin.uppy)),this.isHandlingScroll=!1)}validateSingleFile=e=>{let t=di(e);return this.plugin.uppy.validateSingleFile(t)};async donePicking(){let{partialTree:e}=this.plugin.getPluginState();this.setLoading(!0),await this.#t(async t=>{let i=await Pr.afterFill(e,o=>this.provider.list(o,{signal:t}),this.validateSingleFile,o=>{this.setLoading(this.plugin.uppy.i18n("addedNumFiles",{numFiles:o}))});if(this.validateAggregateRestrictions(i)){this.plugin.setPluginState({partialTree:i});return}let s=ou(i);ru(s,this.plugin,this.provider),this.resetPluginState()}).catch(At(this.plugin.uppy)),this.setLoading(!1)}toggleCheckbox(e,t){let{partialTree:i}=this.plugin.getPluginState(),n=iu(e.id,this.getDisplayedPartialTree(),t,this.lastCheckbox),s=Pr.afterToggleCheckbox(i,n);this.plugin.setPluginState({partialTree:s}),this.lastCheckbox=e.id}getDisplayedPartialTree=()=>{let{partialTree:e,currentFolderId:t,searchString:i}=this.plugin.getPluginState(),n=e.filter(o=>o.type!=="root"&&o.parentId===t);return i===""?n:n.filter(o=>(o.data.name??this.plugin.uppy.i18n("unnamed")).toLowerCase().indexOf(i.toLowerCase())!==-1)};getBreadcrumbs=()=>{let{partialTree:e,currentFolderId:t}=this.plugin.getPluginState();return nu(e,t)};getSelectedAmount=()=>{let{partialTree:e}=this.plugin.getPluginState();return _i(e)};validateAggregateRestrictions=e=>{let i=e.filter(n=>n.type==="file"&&n.status==="checked").map(n=>n.data);return this.plugin.uppy.validateAggregateRestrictions(i)};render(e,t={}){let{didFirstRender:i}=this.plugin.getPluginState(),{i18n:n}=this.plugin.uppy;i||(this.plugin.setPluginState({didFirstRender:!0}),this.provider.fetchPreAuthToken(),this.openFolder(this.plugin.rootFolderId));let s=m(m({},this.opts),t),{authenticated:o,loading:a}=this.plugin.getPluginState(),l=this.plugin.icon||Er;if(o===!1)return u(Qn,{pluginName:this.plugin.title,pluginIcon:l,handleAuth:this.handleAuth,i18n:this.plugin.uppy.i18n,renderForm:s.renderAuthForm,loading:a});let{partialTree:c,username:p,searchString:d}=this.plugin.getPluginState(),g=this.getBreadcrumbs();return u("div",{className:(0,bu.default)("uppy-ProviderBrowser",`uppy-ProviderBrowser-viewType--${s.viewType}`),children:[u(cs,{showBreadcrumbs:s.showBreadcrumbs,openFolder:this.openFolder,breadcrumbs:g,pluginIcon:l,title:this.plugin.title,logout:this.logout,username:p,i18n:n}),s.showFilter&&u(eu,{searchString:d,setSearchString:v=>{this.plugin.setPluginState({searchString:v})},submitSearchString:()=>{},inputLabel:n("filter"),clearSearchLabel:n("resetFilter"),wrapperClassName:"uppy-ProviderBrowser-searchFilter",inputClassName:"uppy-ProviderBrowser-searchFilterInput"}),u(Zl,{toggleCheckbox:this.toggleCheckbox,displayedPartialTree:this.getDisplayedPartialTree(),openFolder:this.openFolder,virtualList:s.virtualList,noResultsLabel:n("noFilesFound"),handleScroll:this.handleScroll,viewType:s.viewType,showTitles:s.showTitles,i18n:this.plugin.uppy.i18n,isLoading:a,utmSource:"Companion"}),u(ts,{partialTree:c,donePicking:this.donePicking,cancelSelection:this.cancelSelection,i18n:n,validateAggregateRestrictions:this.validateAggregateRestrictions})]})}};function V(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}var Tu=typeof self<"u"?self:global,Ur=typeof navigator<"u",Qh=Ur&&typeof HTMLImageElement>"u",wu=!(typeof global>"u"||typeof process>"u"||!process.versions||!process.versions.node),ku=Tu.Buffer,Uu=!!ku,Zh=r=>r!==void 0;function Au(r){return r===void 0||(r instanceof Map?r.size===0:Object.values(r).filter(Zh).length===0)}function le(r){let e=new Error(r);throw delete e.stack,e}function _u(r){let e=(function(t){let i=0;return t.ifd0.enabled&&(i+=1024),t.exif.enabled&&(i+=2048),t.makerNote&&(i+=2048),t.userComment&&(i+=1024),t.gps.enabled&&(i+=512),t.interop.enabled&&(i+=100),t.ifd1.enabled&&(i+=1024),i+2048})(r);return r.jfif.enabled&&(e+=50),r.xmp.enabled&&(e+=2e4),r.iptc.enabled&&(e+=14e3),r.icc.enabled&&(e+=6e3),e}var ps=r=>String.fromCharCode.apply(null,r),xu=typeof TextDecoder<"u"?new TextDecoder("utf-8"):void 0,pt=class r{static from(e,t){return e instanceof this&&e.le===t?e:new r(e,void 0,void 0,t)}constructor(e,t=0,i,n){if(typeof n=="boolean"&&(this.le=n),Array.isArray(e)&&(e=new Uint8Array(e)),e===0)this.byteOffset=0,this.byteLength=0;else if(e instanceof ArrayBuffer){i===void 0&&(i=e.byteLength-t);let s=new DataView(e,t,i);this._swapDataView(s)}else if(e instanceof Uint8Array||e instanceof DataView||e instanceof r){i===void 0&&(i=e.byteLength-t),(t+=e.byteOffset)+i>e.byteOffset+e.byteLength&&le("Creating view outside of available memory in ArrayBuffer");let s=new DataView(e.buffer,t,i);this._swapDataView(s)}else if(typeof e=="number"){let s=new DataView(new ArrayBuffer(e));this._swapDataView(s)}else le("Invalid input argument for BufferView: "+e)}_swapArrayBuffer(e){this._swapDataView(new DataView(e))}_swapBuffer(e){this._swapDataView(new DataView(e.buffer,e.byteOffset,e.byteLength))}_swapDataView(e){this.dataView=e,this.buffer=e.buffer,this.byteOffset=e.byteOffset,this.byteLength=e.byteLength}_lengthToEnd(e){return this.byteLength-e}set(e,t,i=r){return e instanceof DataView||e instanceof r?e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer&&(e=new Uint8Array(e)),e instanceof Uint8Array||le("BufferView.set(): Invalid data argument."),this.toUint8().set(e,t),new i(this,t,e.byteLength)}subarray(e,t){return t=t||this._lengthToEnd(e),new r(this,e,t)}toUint8(){return new Uint8Array(this.buffer,this.byteOffset,this.byteLength)}getUint8Array(e,t){return new Uint8Array(this.buffer,this.byteOffset+e,t)}getString(e=0,t=this.byteLength){return n=this.getUint8Array(e,t),xu?xu.decode(n):Uu?Buffer.from(n).toString("utf8"):decodeURIComponent(escape(ps(n)));var n}getLatin1String(e=0,t=this.byteLength){let i=this.getUint8Array(e,t);return ps(i)}getUnicodeString(e=0,t=this.byteLength){let i=[];for(let n=0;n<t&&e+n<this.byteLength;n+=2)i.push(this.getUint16(e+n));return ps(i)}getInt8(e){return this.dataView.getInt8(e)}getUint8(e){return this.dataView.getUint8(e)}getInt16(e,t=this.le){return this.dataView.getInt16(e,t)}getInt32(e,t=this.le){return this.dataView.getInt32(e,t)}getUint16(e,t=this.le){return this.dataView.getUint16(e,t)}getUint32(e,t=this.le){return this.dataView.getUint32(e,t)}getFloat32(e,t=this.le){return this.dataView.getFloat32(e,t)}getFloat64(e,t=this.le){return this.dataView.getFloat64(e,t)}getFloat(e,t=this.le){return this.dataView.getFloat32(e,t)}getDouble(e,t=this.le){return this.dataView.getFloat64(e,t)}getUintBytes(e,t,i){switch(t){case 1:return this.getUint8(e,i);case 2:return this.getUint16(e,i);case 4:return this.getUint32(e,i);case 8:return this.getUint64&&this.getUint64(e,i)}}getUint(e,t,i){switch(t){case 8:return this.getUint8(e,i);case 16:return this.getUint16(e,i);case 32:return this.getUint32(e,i);case 64:return this.getUint64&&this.getUint64(e,i)}}toString(e){return this.dataView.toString(e,this.constructor.name)}ensureChunk(){}};function fs(r,e){le(`${r} '${e}' was not loaded, try using full build of exifr.`)}var Ar=class extends Map{constructor(e){super(),this.kind=e}get(e,t){return this.has(e)||fs(this.kind,e),t&&(e in t||(function(i,n){le(`Unknown ${i} '${n}'.`)})(this.kind,e),t[e].enabled||fs(this.kind,e)),super.get(e)}keyList(){return Array.from(this.keys())}},Ai=new Ar("file parser"),Te=new Ar("segment parser"),Dr=new Ar("file reader"),Jh=Tu.fetch;function Su(r,e){return(t=r).startsWith("data:")||t.length>1e4?gs(r,e,"base64"):wu&&r.includes("://")?ms(r,e,"url",Ci):wu?gs(r,e,"fs"):Ur?ms(r,e,"url",Ci):void le("Invalid input argument");var t}async function ms(r,e,t,i){return Dr.has(t)?gs(r,e,t):i?(async function(n,s){let o=await s(n);return new pt(o)})(r,i):void le(`Parser ${t} is not loaded`)}async function gs(r,e,t){let i=new(Dr.get(t))(r,e);return await i.read(),i}var Ci=r=>Jh(r).then(e=>e.arrayBuffer()),Or=r=>new Promise((e,t)=>{let i=new FileReader;i.onloadend=()=>e(i.result||new ArrayBuffer),i.onerror=t,i.readAsArrayBuffer(r)}),ys=class extends Map{get tagKeys(){return this.allKeys||(this.allKeys=Array.from(this.keys())),this.allKeys}get tagValues(){return this.allValues||(this.allValues=Array.from(this.values())),this.allValues}};function Ou(r,e,t){let i=new ys;for(let[n,s]of t)i.set(n,s);if(Array.isArray(e))for(let n of e)r.set(n,i);else r.set(e,i);return i}function Iu(r,e,t){let i,n=r.get(e);for(i of t)n.set(i[0],i[1])}var Rr=new Map,xs=new Map,Ss=new Map,Ot=["chunked","firstChunkSize","firstChunkSizeNode","firstChunkSizeBrowser","chunkSize","chunkLimit"],Oi=["jfif","xmp","icc","iptc","ihdr"],Ir=["tiff",...Oi],ie=["ifd0","ifd1","exif","gps","interop"],It=[...Ir,...ie],Dt=["makerNote","userComment"],Ii=["translateKeys","translateValues","reviveValues","multiSegment"],Rt=[...Ii,"sanitize","mergeOutput","silentErrors"],Ti=class{get translate(){return this.translateKeys||this.translateValues||this.reviveValues}},ct=class extends Ti{get needed(){return this.enabled||this.deps.size>0}constructor(e,t,i,n){if(super(),V(this,"enabled",!1),V(this,"skip",new Set),V(this,"pick",new Set),V(this,"deps",new Set),V(this,"translateKeys",!1),V(this,"translateValues",!1),V(this,"reviveValues",!1),this.key=e,this.enabled=t,this.parse=this.enabled,this.applyInheritables(n),this.canBeFiltered=ie.includes(e),this.canBeFiltered&&(this.dict=Rr.get(e)),i!==void 0)if(Array.isArray(i))this.parse=this.enabled=!0,this.canBeFiltered&&i.length>0&&this.translateTagSet(i,this.pick);else if(typeof i=="object"){if(this.enabled=!0,this.parse=i.parse!==!1,this.canBeFiltered){let{pick:s,skip:o}=i;s&&s.length>0&&this.translateTagSet(s,this.pick),o&&o.length>0&&this.translateTagSet(o,this.skip)}this.applyInheritables(i)}else i===!0||i===!1?this.parse=this.enabled=i:le(`Invalid options argument: ${i}`)}applyInheritables(e){let t,i;for(t of Ii)i=e[t],i!==void 0&&(this[t]=i)}translateTagSet(e,t){if(this.dict){let i,n,{tagKeys:s,tagValues:o}=this.dict;for(i of e)typeof i=="string"?(n=o.indexOf(i),n===-1&&(n=s.indexOf(Number(i))),n!==-1&&t.add(Number(s[n]))):t.add(i)}else for(let i of e)t.add(i)}finalizeFilters(){!this.enabled&&this.deps.size>0?(this.enabled=!0,ki(this.pick,this.deps)):this.enabled&&this.pick.size>0&&ki(this.pick,this.deps)}},xe={jfif:!1,tiff:!0,xmp:!1,icc:!1,iptc:!1,ifd0:!0,ifd1:!1,exif:!0,gps:!0,interop:!1,ihdr:void 0,makerNote:!1,userComment:!1,multiSegment:!1,skip:[],pick:[],translateKeys:!0,translateValues:!0,reviveValues:!0,sanitize:!0,mergeOutput:!0,silentErrors:!0,chunked:!0,firstChunkSize:void 0,firstChunkSizeNode:512,firstChunkSizeBrowser:65536,chunkSize:65536,chunkLimit:5},Fu=new Map,ht=class extends Ti{static useCached(e){let t=Fu.get(e);return t!==void 0||(t=new this(e),Fu.set(e,t)),t}constructor(e){super(),e===!0?this.setupFromTrue():e===void 0?this.setupFromUndefined():Array.isArray(e)?this.setupFromArray(e):typeof e=="object"?this.setupFromObject(e):le(`Invalid options argument ${e}`),this.firstChunkSize===void 0&&(this.firstChunkSize=Ur?this.firstChunkSizeBrowser:this.firstChunkSizeNode),this.mergeOutput&&(this.ifd1.enabled=!1),this.filterNestedSegmentTags(),this.traverseTiffDependencyTree(),this.checkLoadedPlugins()}setupFromUndefined(){let e;for(e of Ot)this[e]=xe[e];for(e of Rt)this[e]=xe[e];for(e of Dt)this[e]=xe[e];for(e of It)this[e]=new ct(e,xe[e],void 0,this)}setupFromTrue(){let e;for(e of Ot)this[e]=xe[e];for(e of Rt)this[e]=xe[e];for(e of Dt)this[e]=!0;for(e of It)this[e]=new ct(e,!0,void 0,this)}setupFromArray(e){let t;for(t of Ot)this[t]=xe[t];for(t of Rt)this[t]=xe[t];for(t of Dt)this[t]=xe[t];for(t of It)this[t]=new ct(t,!1,void 0,this);this.setupGlobalFilters(e,void 0,ie)}setupFromObject(e){let t;for(t of(ie.ifd0=ie.ifd0||ie.image,ie.ifd1=ie.ifd1||ie.thumbnail,Object.assign(this,e),Ot))this[t]=hs(e[t],xe[t]);for(t of Rt)this[t]=hs(e[t],xe[t]);for(t of Dt)this[t]=hs(e[t],xe[t]);for(t of Ir)this[t]=new ct(t,xe[t],e[t],this);for(t of ie)this[t]=new ct(t,xe[t],e[t],this.tiff);this.setupGlobalFilters(e.pick,e.skip,ie,It),e.tiff===!0?this.batchEnableWithBool(ie,!0):e.tiff===!1?this.batchEnableWithUserValue(ie,e):Array.isArray(e.tiff)?this.setupGlobalFilters(e.tiff,void 0,ie):typeof e.tiff=="object"&&this.setupGlobalFilters(e.tiff.pick,e.tiff.skip,ie)}batchEnableWithBool(e,t){for(let i of e)this[i].enabled=t}batchEnableWithUserValue(e,t){for(let i of e){let n=t[i];this[i].enabled=n!==!1&&n!==void 0}}setupGlobalFilters(e,t,i,n=i){if(e&&e.length){for(let o of n)this[o].enabled=!1;let s=Pu(e,i);for(let[o,a]of s)ki(this[o].pick,a),this[o].enabled=!0}else if(t&&t.length){let s=Pu(t,i);for(let[o,a]of s)ki(this[o].skip,a)}}filterNestedSegmentTags(){let{ifd0:e,exif:t,xmp:i,iptc:n,icc:s}=this;this.makerNote?t.deps.add(37500):t.skip.add(37500),this.userComment?t.deps.add(37510):t.skip.add(37510),i.enabled||e.skip.add(700),n.enabled||e.skip.add(33723),s.enabled||e.skip.add(34675)}traverseTiffDependencyTree(){let{ifd0:e,exif:t,gps:i,interop:n}=this;n.needed&&(t.deps.add(40965),e.deps.add(40965)),t.needed&&e.deps.add(34665),i.needed&&e.deps.add(34853),this.tiff.enabled=ie.some(s=>this[s].enabled===!0)||this.makerNote||this.userComment;for(let s of ie)this[s].finalizeFilters()}get onlyTiff(){return!Oi.map(e=>this[e].enabled).some(e=>e===!0)&&this.tiff.enabled}checkLoadedPlugins(){for(let e of Ir)this[e].enabled&&!Te.has(e)&&fs("segment parser",e)}};function Pu(r,e){let t,i,n,s,o=[];for(n of e){for(s of(t=Rr.get(n),i=[],t))(r.includes(s[0])||r.includes(s[1]))&&i.push(s[0]);i.length&&o.push([n,i])}return o}function hs(r,e){return r!==void 0?r:e!==void 0?e:void 0}function ki(r,e){for(let t of e)r.add(t)}V(ht,"default",xe);var Nt=class{constructor(e){V(this,"parsers",{}),V(this,"output",{}),V(this,"errors",[]),V(this,"pushToErrors",t=>this.errors.push(t)),this.options=ht.useCached(e)}async read(e){this.file=await(function(t,i){return typeof t=="string"?Su(t,i):Ur&&!Qh&&t instanceof HTMLImageElement?Su(t.src,i):t instanceof Uint8Array||t instanceof ArrayBuffer||t instanceof DataView?new pt(t):Ur&&t instanceof Blob?ms(t,i,"blob",Or):void le("Invalid input argument")})(e,this.options)}setup(){if(this.fileParser)return;let{file:e}=this,t=e.getUint16(0);for(let[i,n]of Ai)if(n.canHandle(e,t))return this.fileParser=new n(this.options,this.file,this.parsers),e[i]=!0;this.file.close&&this.file.close(),le("Unknown file format")}async parse(){let{output:e,errors:t}=this;return this.setup(),this.options.silentErrors?(await this.executeParsers().catch(this.pushToErrors),t.push(...this.fileParser.errors)):await this.executeParsers(),this.file.close&&this.file.close(),this.options.silentErrors&&t.length>0&&(e.errors=t),Au(i=e)?void 0:i;var i}async executeParsers(){let{output:e}=this;await this.fileParser.parse();let t=Object.values(this.parsers).map(async i=>{let n=await i.parse();i.assignToOutput(e,n)});this.options.silentErrors&&(t=t.map(i=>i.catch(this.pushToErrors))),await Promise.all(t)}async extractThumbnail(){this.setup();let{options:e,file:t}=this,i=Te.get("tiff",e);var n;if(t.tiff?n={start:0,type:"tiff"}:t.jpeg&&(n=await this.fileParser.getOrFindSegment("tiff")),n===void 0)return;let s=await this.fileParser.ensureSegmentChunk(n),o=this.parsers.tiff=new i(s,e,t),a=await o.extractThumbnail();return t.close&&t.close(),a}};async function Du(r,e){let t=new Nt(e);return await t.read(r),t.parse()}var ef=Object.freeze({__proto__:null,parse:Du,Exifr:Nt,fileParsers:Ai,segmentParsers:Te,fileReaders:Dr,tagKeys:Rr,tagValues:xs,tagRevivers:Ss,createDictionary:Ou,extendDictionary:Iu,fetchUrlAsArrayBuffer:Ci,readBlobAsArrayBuffer:Or,chunkedProps:Ot,otherSegments:Oi,segments:Ir,tiffBlocks:ie,segmentsAndBlocks:It,tiffExtractables:Dt,inheritables:Ii,allFormatters:Rt,Options:ht}),tt=class{static findPosition(e,t){let i=e.getUint16(t+2)+2,n=typeof this.headerLength=="function"?this.headerLength(e,t,i):this.headerLength,s=t+n,o=i-n;return{offset:t,length:i,headerLength:n,start:s,size:o,end:s+o}}static parse(e,t={}){return new this(e,new ht({[this.type]:t}),e).parse()}normalizeInput(e){return e instanceof pt?e:new pt(e)}constructor(e,t={},i){V(this,"errors",[]),V(this,"raw",new Map),V(this,"handleError",n=>{if(!this.options.silentErrors)throw n;this.errors.push(n.message)}),this.chunk=this.normalizeInput(e),this.file=i,this.type=this.constructor.type,this.globalOptions=this.options=t,this.localOptions=t[this.type],this.canTranslate=this.localOptions&&this.localOptions.translate}translate(){this.canTranslate&&(this.translated=this.translateBlock(this.raw,this.type))}get output(){return this.translated?this.translated:this.raw?Object.fromEntries(this.raw):void 0}translateBlock(e,t){let i=Ss.get(t),n=xs.get(t),s=Rr.get(t),o=this.options[t],a=o.reviveValues&&!!i,l=o.translateValues&&!!n,c=o.translateKeys&&!!s,p={};for(let[d,g]of e)a&&i.has(d)?g=i.get(d)(g):l&&n.has(d)&&(g=this.translateValue(g,n.get(d))),c&&s.has(d)&&(d=s.get(d)||d),p[d]=g;return p}translateValue(e,t){return t[e]||t.DEFAULT||e}assignToOutput(e,t){this.assignObjectToOutput(e,this.constructor.type,t)}assignObjectToOutput(e,t,i){if(this.globalOptions.mergeOutput)return Object.assign(e,i);e[t]?Object.assign(e[t],i):e[t]=i}};V(tt,"headerLength",4),V(tt,"type",void 0),V(tt,"multiSegment",!1),V(tt,"canHandle",()=>!1);function tf(r){return r===192||r===194||r===196||r===219||r===221||r===218||r===254}function rf(r){return r>=224&&r<=239}function nf(r,e,t){for(let[i,n]of Te)if(n.canHandle(r,e,t))return i}var Ui=class extends class{constructor(e,t,i){V(this,"errors",[]),V(this,"ensureSegmentChunk",async n=>{let s=n.start,o=n.size||65536;if(this.file.chunked)if(this.file.available(s,o))n.chunk=this.file.subarray(s,o);else try{n.chunk=await this.file.readChunk(s,o)}catch(a){le(`Couldn't read segment: ${JSON.stringify(n)}. ${a.message}`)}else this.file.byteLength>s+o?n.chunk=this.file.subarray(s,o):n.size===void 0?n.chunk=this.file.subarray(s):le("Segment unreachable: "+JSON.stringify(n));return n.chunk}),this.extendOptions&&this.extendOptions(e),this.options=e,this.file=t,this.parsers=i}injectSegment(e,t){this.options[e].enabled&&this.createParser(e,t)}createParser(e,t){let i=new(Te.get(e))(t,this.options,this.file);return this.parsers[e]=i}createParsers(e){for(let t of e){let{type:i,chunk:n}=t,s=this.options[i];if(s&&s.enabled){let o=this.parsers[i];o&&o.append||o||this.createParser(i,n)}}}async readSegments(e){let t=e.map(this.ensureSegmentChunk);await Promise.all(t)}}{constructor(...e){super(...e),V(this,"appSegments",[]),V(this,"jpegSegments",[]),V(this,"unknownSegments",[])}static canHandle(e,t){return t===65496}async parse(){await this.findAppSegments(),await this.readSegments(this.appSegments),this.mergeMultiSegments(),this.createParsers(this.mergedAppSegments||this.appSegments)}setupSegmentFinderArgs(e){e===!0?(this.findAll=!0,this.wanted=new Set(Te.keyList())):(e=e===void 0?Te.keyList().filter(t=>this.options[t].enabled):e.filter(t=>this.options[t].enabled&&Te.has(t)),this.findAll=!1,this.remaining=new Set(e),this.wanted=new Set(e)),this.unfinishedMultiSegment=!1}async findAppSegments(e=0,t){this.setupSegmentFinderArgs(t);let{file:i,findAll:n,wanted:s,remaining:o}=this;if(!n&&this.file.chunked&&(n=Array.from(s).some(a=>{let l=Te.get(a),c=this.options[a];return l.multiSegment&&c.multiSegment}),n&&await this.file.readWhole()),e=this.findAppSegmentsInRange(e,i.byteLength),!this.options.onlyTiff&&i.chunked){let a=!1;for(;o.size>0&&!a&&(i.canReadNextChunk||this.unfinishedMultiSegment);){let{nextChunkOffset:l}=i,c=this.appSegments.some(p=>!this.file.available(p.offset||p.start,p.length||p.size));if(a=e>l&&!c?!await i.readNextChunk(e):!await i.readNextChunk(l),(e=this.findAppSegmentsInRange(e,i.byteLength))===void 0)return}}}findAppSegmentsInRange(e,t){t-=2;let i,n,s,o,a,l,{file:c,findAll:p,wanted:d,remaining:g,options:v}=this;for(;e<t;e++)if(c.getUint8(e)===255){if(i=c.getUint8(e+1),rf(i)){if(n=c.getUint16(e+2),s=nf(c,e,n),s&&d.has(s)&&(o=Te.get(s),a=o.findPosition(c,e),l=v[s],a.type=s,this.appSegments.push(a),!p&&(o.multiSegment&&l.multiSegment?(this.unfinishedMultiSegment=a.chunkNumber<a.chunkCount,this.unfinishedMultiSegment||g.delete(s)):g.delete(s),g.size===0)))break;v.recordUnknownSegments&&(a=tt.findPosition(c,e),a.marker=i,this.unknownSegments.push(a)),e+=n+1}else if(tf(i)){if(n=c.getUint16(e+2),i===218&&v.stopAfterSos!==!1)return;v.recordJpegSegments&&this.jpegSegments.push({offset:e,length:n,marker:i}),e+=n+1}}return e}mergeMultiSegments(){if(!this.appSegments.some(t=>t.multiSegment))return;let e=(function(t,i){let n,s,o,a=new Map;for(let l=0;l<t.length;l++)n=t[l],s=n[i],a.has(s)?o=a.get(s):a.set(s,o=[]),o.push(n);return Array.from(a)})(this.appSegments,"type");this.mergedAppSegments=e.map(([t,i])=>{let n=Te.get(t,this.options);return n.handleMultiSegments?{type:t,chunk:n.handleMultiSegments(i)}:i[0]})}getSegment(e){return this.appSegments.find(t=>t.type===e)}async getOrFindSegment(e){let t=this.getSegment(e);return t===void 0&&(await this.findAppSegments(0,[e]),t=this.getSegment(e)),t}};V(Ui,"type","jpeg"),Ai.set("jpeg",Ui);var sf=[void 0,1,1,2,4,8,1,1,2,4,8,4,8,4],vs=class extends tt{parseHeader(){var e=this.chunk.getUint16();e===18761?this.le=!0:e===19789&&(this.le=!1),this.chunk.le=this.le,this.headerParsed=!0}parseTags(e,t,i=new Map){let{pick:n,skip:s}=this.options[t];n=new Set(n);let o=n.size>0,a=s.size===0,l=this.chunk.getUint16(e);e+=2;for(let c=0;c<l;c++){let p=this.chunk.getUint16(e);if(o){if(n.has(p)&&(i.set(p,this.parseTag(e,p,t)),n.delete(p),n.size===0))break}else!a&&s.has(p)||i.set(p,this.parseTag(e,p,t));e+=12}return i}parseTag(e,t,i){let{chunk:n}=this,s=n.getUint16(e+2),o=n.getUint32(e+4),a=sf[s];if(a*o<=4?e+=8:e=n.getUint32(e+8),(s<1||s>13)&&le(`Invalid TIFF value type. block: ${i.toUpperCase()}, tag: ${t.toString(16)}, type: ${s}, offset ${e}`),e>n.byteLength&&le(`Invalid TIFF value offset. block: ${i.toUpperCase()}, tag: ${t.toString(16)}, type: ${s}, offset ${e} is outside of chunk size ${n.byteLength}`),s===1)return n.getUint8Array(e,o);if(s===2)return(l=(function(c){for(;c.endsWith("\0");)c=c.slice(0,-1);return c})(l=n.getString(e,o)).trim())===""?void 0:l;var l;if(s===7)return n.getUint8Array(e,o);if(o===1)return this.parseTagValue(s,e);{let c=new((function(d){switch(d){case 1:return Uint8Array;case 3:return Uint16Array;case 4:return Uint32Array;case 5:return Array;case 6:return Int8Array;case 8:return Int16Array;case 9:return Int32Array;case 10:return Array;case 11:return Float32Array;case 12:return Float64Array;default:return Array}})(s))(o),p=a;for(let d=0;d<o;d++)c[d]=this.parseTagValue(s,e),e+=p;return c}}parseTagValue(e,t){let{chunk:i}=this;switch(e){case 1:return i.getUint8(t);case 3:return i.getUint16(t);case 4:return i.getUint32(t);case 5:return i.getUint32(t)/i.getUint32(t+4);case 6:return i.getInt8(t);case 8:return i.getInt16(t);case 9:return i.getInt32(t);case 10:return i.getInt32(t)/i.getInt32(t+4);case 11:return i.getFloat(t);case 12:return i.getDouble(t);case 13:return i.getUint32(t);default:le(`Invalid tiff type ${e}`)}}},kr=class extends vs{static canHandle(e,t){return e.getUint8(t+1)===225&&e.getUint32(t+4)===1165519206&&e.getUint16(t+8)===0}async parse(){this.parseHeader();let{options:e}=this;return e.ifd0.enabled&&await this.parseIfd0Block(),e.exif.enabled&&await this.safeParse("parseExifBlock"),e.gps.enabled&&await this.safeParse("parseGpsBlock"),e.interop.enabled&&await this.safeParse("parseInteropBlock"),e.ifd1.enabled&&await this.safeParse("parseThumbnailBlock"),this.createOutput()}safeParse(e){let t=this[e]();return t.catch!==void 0&&(t=t.catch(this.handleError)),t}findIfd0Offset(){this.ifd0Offset===void 0&&(this.ifd0Offset=this.chunk.getUint32(4))}findIfd1Offset(){if(this.ifd1Offset===void 0){this.findIfd0Offset();let e=this.chunk.getUint16(this.ifd0Offset),t=this.ifd0Offset+2+12*e;this.ifd1Offset=this.chunk.getUint32(t)}}parseBlock(e,t){let i=new Map;return this[t]=i,this.parseTags(e,t,i),i}async parseIfd0Block(){if(this.ifd0)return;let{file:e}=this;this.findIfd0Offset(),this.ifd0Offset<8&&le("Malformed EXIF data"),!e.chunked&&this.ifd0Offset>e.byteLength&&le(`IFD0 offset points to outside of file.
this.ifd0Offset: ${this.ifd0Offset}, file.byteLength: ${e.byteLength}`),e.tiff&&await e.ensureChunk(this.ifd0Offset,_u(this.options));let t=this.parseBlock(this.ifd0Offset,"ifd0");return t.size!==0?(this.exifOffset=t.get(34665),this.interopOffset=t.get(40965),this.gpsOffset=t.get(34853),this.xmp=t.get(700),this.iptc=t.get(33723),this.icc=t.get(34675),this.options.sanitize&&(t.delete(34665),t.delete(40965),t.delete(34853),t.delete(700),t.delete(33723),t.delete(34675)),t):void 0}async parseExifBlock(){if(this.exif||(this.ifd0||await this.parseIfd0Block(),this.exifOffset===void 0))return;this.file.tiff&&await this.file.ensureChunk(this.exifOffset,_u(this.options));let e=this.parseBlock(this.exifOffset,"exif");return this.interopOffset||(this.interopOffset=e.get(40965)),this.makerNote=e.get(37500),this.userComment=e.get(37510),this.options.sanitize&&(e.delete(40965),e.delete(37500),e.delete(37510)),this.unpack(e,41728),this.unpack(e,41729),e}unpack(e,t){let i=e.get(t);i&&i.length===1&&e.set(t,i[0])}async parseGpsBlock(){if(this.gps||(this.ifd0||await this.parseIfd0Block(),this.gpsOffset===void 0))return;let e=this.parseBlock(this.gpsOffset,"gps");return e&&e.has(2)&&e.has(4)&&(e.set("latitude",Eu(...e.get(2),e.get(1))),e.set("longitude",Eu(...e.get(4),e.get(3)))),e}async parseInteropBlock(){if(!this.interop&&(this.ifd0||await this.parseIfd0Block(),this.interopOffset!==void 0||this.exif||await this.parseExifBlock(),this.interopOffset!==void 0))return this.parseBlock(this.interopOffset,"interop")}async parseThumbnailBlock(e=!1){if(!this.ifd1&&!this.ifd1Parsed&&(!this.options.mergeOutput||e))return this.findIfd1Offset(),this.ifd1Offset>0&&(this.parseBlock(this.ifd1Offset,"ifd1"),this.ifd1Parsed=!0),this.ifd1}async extractThumbnail(){if(this.headerParsed||this.parseHeader(),this.ifd1Parsed||await this.parseThumbnailBlock(!0),this.ifd1===void 0)return;let e=this.ifd1.get(513),t=this.ifd1.get(514);return this.chunk.getUint8Array(e,t)}get image(){return this.ifd0}get thumbnail(){return this.ifd1}createOutput(){let e,t,i,n={};for(t of ie)if(e=this[t],!Au(e))if(i=this.canTranslate?this.translateBlock(e,t):Object.fromEntries(e),this.options.mergeOutput){if(t==="ifd1")continue;Object.assign(n,i)}else n[t]=i;return this.makerNote&&(n.makerNote=this.makerNote),this.userComment&&(n.userComment=this.userComment),n}assignToOutput(e,t){if(this.globalOptions.mergeOutput)Object.assign(e,t);else for(let[i,n]of Object.entries(t))this.assignObjectToOutput(e,i,n)}};function Eu(r,e,t,i){var n=r+e/60+t/3600;return i!=="S"&&i!=="W"||(n*=-1),n}V(kr,"type","tiff"),V(kr,"headerLength",10),Te.set("tiff",kr);var N1=Object.freeze({__proto__:null,default:ef,Exifr:Nt,fileParsers:Ai,segmentParsers:Te,fileReaders:Dr,tagKeys:Rr,tagValues:xs,tagRevivers:Ss,createDictionary:Ou,extendDictionary:Iu,fetchUrlAsArrayBuffer:Ci,readBlobAsArrayBuffer:Or,chunkedProps:Ot,otherSegments:Oi,segments:Ir,tiffBlocks:ie,segmentsAndBlocks:It,tiffExtractables:Dt,inheritables:Ii,allFormatters:Rt,Options:ht,parse:Du}),Fs={ifd0:!1,ifd1:!1,exif:!1,gps:!1,interop:!1,sanitize:!1,reviveValues:!0,translateKeys:!1,translateValues:!1,mergeOutput:!1},B1=Object.assign({},Fs,{firstChunkSize:4e4,gps:[1,2,3,4]});var L1=Object.assign({},Fs,{tiff:!1,ifd1:!0,mergeOutput:!1});var of=Object.assign({},Fs,{firstChunkSize:4e4,ifd0:[274]});async function af(r){let e=new Nt(of);await e.read(r);let t=await e.parse();if(t&&t.ifd0)return t.ifd0[274]}var lf=Object.freeze({1:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:0,rad:0},2:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:0,rad:0},3:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:180,rad:180*Math.PI/180},4:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:180,rad:180*Math.PI/180},5:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:90,rad:90*Math.PI/180},6:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:90,rad:90*Math.PI/180},7:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:270,rad:270*Math.PI/180},8:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:270,rad:270*Math.PI/180}}),Cr=!0,Tr=!0;if(typeof navigator=="object"){let r=navigator.userAgent;if(r.includes("iPad")||r.includes("iPhone")){let e=r.match(/OS (\d+)_(\d+)/);if(e){let[,t,i]=e;Cr=Number(t)+.1*Number(i)<13.4,Tr=!1}}else if(r.includes("OS X 10")){let[,e]=r.match(/OS X 10[_.](\d+)/);Cr=Tr=Number(e)<15}if(r.includes("Chrome/")){let[,e]=r.match(/Chrome\/(\d+)/);Cr=Tr=Number(e)<81}else if(r.includes("Firefox/")){let[,e]=r.match(/Firefox\/(\d+)/);Cr=Tr=Number(e)<77}}async function Ru(r){let e=await af(r);return Object.assign({canvas:Cr,css:Tr},lf[e])}var bs=class extends pt{constructor(...e){super(...e),V(this,"ranges",new ws),this.byteLength!==0&&this.ranges.add(0,this.byteLength)}_tryExtend(e,t,i){if(e===0&&this.byteLength===0&&i){let n=new DataView(i.buffer||i,i.byteOffset,i.byteLength);this._swapDataView(n)}else{let n=e+t;if(n>this.byteLength){let{dataView:s}=this._extend(n);this._swapDataView(s)}}}_extend(e){let t;t=Uu?ku.allocUnsafe(e):new Uint8Array(e);let i=new DataView(t.buffer,t.byteOffset,t.byteLength);return t.set(new Uint8Array(this.buffer,this.byteOffset,this.byteLength),0),{uintView:t,dataView:i}}subarray(e,t,i=!1){return t=t||this._lengthToEnd(e),i&&this._tryExtend(e,t),this.ranges.add(e,t),super.subarray(e,t)}set(e,t,i=!1){i&&this._tryExtend(t,e.byteLength,e);let n=super.set(e,t);return this.ranges.add(t,n.byteLength),n}async ensureChunk(e,t){this.chunked&&(this.ranges.available(e,t)||await this.readChunk(e,t))}available(e,t){return this.ranges.available(e,t)}},ws=class{constructor(){V(this,"list",[])}get length(){return this.list.length}add(e,t,i=0){let n=e+t,s=this.list.filter(o=>Cu(e,o.offset,n)||Cu(e,o.end,n));if(s.length>0){e=Math.min(e,...s.map(a=>a.offset)),n=Math.max(n,...s.map(a=>a.end)),t=n-e;let o=s.shift();o.offset=e,o.length=t,o.end=n,this.list=this.list.filter(a=>!s.includes(a))}else this.list.push({offset:e,length:t,end:n})}available(e,t){let i=e+t;return this.list.some(n=>n.offset<=e&&i<=n.end)}};function Cu(r,e,t){return r<=e&&e<=t}var _s=class extends bs{constructor(e,t){super(0),V(this,"chunksRead",0),this.input=e,this.options=t}async readWhole(){this.chunked=!1,await this.readChunk(this.nextChunkOffset)}async readChunked(){this.chunked=!0,await this.readChunk(0,this.options.firstChunkSize)}async readNextChunk(e=this.nextChunkOffset){if(this.fullyRead)return this.chunksRead++,!1;let t=this.options.chunkSize,i=await this.readChunk(e,t);return!!i&&i.byteLength===t}async readChunk(e,t){if(this.chunksRead++,(t=this.safeWrapAddress(e,t))!==0)return this._readChunk(e,t)}safeWrapAddress(e,t){return this.size!==void 0&&e+t>this.size?Math.max(0,this.size-e):t}get nextChunkOffset(){if(this.ranges.list.length!==0)return this.ranges.list[0].length}get canReadNextChunk(){return this.chunksRead<this.options.chunkLimit}get fullyRead(){return this.size!==void 0&&this.nextChunkOffset===this.size}read(){return this.options.chunked?this.readChunked():this.readWhole()}close(){}};Dr.set("blob",class extends _s{async readWhole(){this.chunked=!1;let r=await Or(this.input);this._swapArrayBuffer(r)}readChunked(){return this.chunked=!0,this.size=this.input.size,super.readChunked()}async _readChunk(r,e){let t=e?r+e:void 0,i=this.input.slice(r,t),n=await Or(i);return this.set(n,r,!0)}});var Nu={name:"@uppy/thumbnail-generator",description:"Uppy plugin that generates small previews of images to show on your upload UI.",version:"5.0.1",license:"MIT",type:"module",sideEffects:!1,scripts:{build:"tsc --build tsconfig.build.json",typecheck:"tsc --build",test:"vitest run --environment=jsdom --silent='passed-only'"},keywords:["file uploader","uppy","uppy-plugin","thumbnail","preview","resize"],homepage:"https://uppy.io",bugs:{url:"https://github.com/transloadit/uppy/issues"},repository:{type:"git",url:"git+https://github.com/transloadit/uppy.git"},files:["src","lib","dist","CHANGELOG.md"],exports:{".":"./lib/index.js","./package.json":"./package.json"},dependencies:{"@uppy/utils":"^7.0.2",exifr:"^7.0.0"},devDependencies:{jsdom:"^26.1.0","namespace-emitter":"2.0.1",typescript:"^5.8.3",vitest:"^3.2.4"},peerDependencies:{"@uppy/core":"^5.0.2"}};var Bu={strings:{generatingThumbnails:"Generating thumbnails..."}};function df(r,e,t){try{r.getContext("2d").getImageData(0,0,1,1)}catch(i){if(i.code===18)return Promise.reject(new Error("cannot read image, probably an svg with external resources"))}return r.toBlob?new Promise(i=>{r.toBlob(i,e,t)}).then(i=>{if(i===null)throw new Error("cannot read image, probably an svg with external resources");return i}):Promise.resolve().then(()=>fn(r.toDataURL(e,t),{})).then(i=>{if(i===null)throw new Error("could not extract blob, probably an old browser");return i})}function cf(r,e){let t=r.width,i=r.height;(e.deg===90||e.deg===270)&&(t=r.height,i=r.width);let n=document.createElement("canvas");n.width=t,n.height=i;let s=n.getContext("2d");return s.translate(t/2,i/2),e.canvas&&(s.rotate(e.rad),s.scale(e.scaleX,e.scaleY)),s.drawImage(r,-r.width/2,-r.height/2,r.width,r.height),n}function pf(r){let e=r.width/r.height,t=5e6,i=4096,n=Math.floor(Math.sqrt(t*e)),s=Math.floor(t/Math.sqrt(t*e));if(n>i&&(n=i,s=Math.round(n/e)),s>i&&(s=i,n=Math.round(e*s)),r.width>n){let o=document.createElement("canvas");return o.width=n,o.height=s,o.getContext("2d").drawImage(r,0,0,n,s),o}return r}var hf={thumbnailWidth:null,thumbnailHeight:null,thumbnailType:"image/jpeg",waitForThumbnailsBeforeUpload:!1,lazy:!1},Bt=class extends _r{static VERSION=Nu.version;queue;queueProcessing;defaultThumbnailDimension;thumbnailType;constructor(e,t){if(super(e,m(m({},hf),t)),this.type="modifier",this.id=this.opts.id||"ThumbnailGenerator",this.title="Thumbnail Generator",this.queue=[],this.queueProcessing=!1,this.defaultThumbnailDimension=200,this.thumbnailType=this.opts.thumbnailType,this.defaultLocale=Bu,this.i18nInit(),this.opts.lazy&&this.opts.waitForThumbnailsBeforeUpload)throw new Error("ThumbnailGenerator: The `lazy` and `waitForThumbnailsBeforeUpload` options are mutually exclusive. Please ensure at most one of them is set to `true`.")}createThumbnail(e,t,i){let n=URL.createObjectURL(e.data),s=new Promise((a,l)=>{let c=new Image;c.src=n,c.addEventListener("load",()=>{URL.revokeObjectURL(n),a(c)}),c.addEventListener("error",p=>{URL.revokeObjectURL(n),l(p.error||new Error("Could not create thumbnail"))})}),o=Ru(e.data).catch(()=>1);return Promise.all([s,o]).then(([a,l])=>{let c=this.getProportionalDimensions(a,t,i,l.deg),p=cf(a,l),d=this.resizeImage(p,c.width,c.height);return df(d,this.thumbnailType,80)}).then(a=>URL.createObjectURL(a))}getProportionalDimensions(e,t,i,n){let s=e.width/e.height;if((n===90||n===270)&&(s=e.height/e.width),t!=null){let o=t;return e.width<t&&(o=e.width),{width:o,height:Math.round(o/s)}}if(i!=null){let o=i;return e.height<i&&(o=e.height),{width:Math.round(o*s),height:o}}return{width:this.defaultThumbnailDimension,height:Math.round(this.defaultThumbnailDimension/s)}}resizeImage(e,t,i){let n=pf(e),s=Math.ceil(Math.log2(n.width/t));s<1&&(s=1);let o=t*2**(s-1),a=i*2**(s-1),l=2;for(;s--;){let c=document.createElement("canvas");c.width=o,c.height=a,c.getContext("2d").drawImage(n,0,0,o,a),n=c,o=Math.round(o/l),a=Math.round(a/l)}return n}setPreviewURL(e,t){this.uppy.setFileState(e,{preview:t})}addToQueue(e){this.queue.push(e),this.queueProcessing===!1&&this.processQueue()}processQueue(){if(this.queueProcessing=!0,this.queue.length>0){let e=this.uppy.getFile(this.queue.shift());return e?this.requestThumbnail(e).catch(()=>{}).then(()=>this.processQueue()):(this.uppy.log("[ThumbnailGenerator] file was removed before a thumbnail could be generated, but not removed from the queue. This is probably a bug","error"),Promise.resolve())}return this.queueProcessing=!1,this.uppy.log("[ThumbnailGenerator] Emptied thumbnail queue"),this.uppy.emit("thumbnail:all-generated"),Promise.resolve()}requestThumbnail(e){return dr(e.type)&&!e.isRemote?this.createThumbnail(e,this.opts.thumbnailWidth,this.opts.thumbnailHeight).then(t=>{this.setPreviewURL(e.id,t),this.uppy.log(`[ThumbnailGenerator] Generated thumbnail for ${e.id}`),this.uppy.emit("thumbnail:generated",this.uppy.getFile(e.id),t)}).catch(t=>{this.uppy.log(`[ThumbnailGenerator] Failed thumbnail for ${e.id}:`,"warning"),this.uppy.log(t,"warning"),this.uppy.emit("thumbnail:error",this.uppy.getFile(e.id),t)}):Promise.resolve()}onFileAdded=e=>{!e.preview&&e.data&&dr(e.type)&&!e.isRemote&&this.addToQueue(e.id)};onCancelRequest=e=>{let t=this.queue.indexOf(e.id);t!==-1&&this.queue.splice(t,1)};onFileRemoved=e=>{let t=this.queue.indexOf(e.id);t!==-1&&this.queue.splice(t,1),e.preview&&ur(e.preview)&&URL.revokeObjectURL(e.preview)};onRestored=()=>{this.uppy.getFiles().filter(t=>t.isRestored).forEach(t=>{(!t.preview||ur(t.preview))&&this.addToQueue(t.id)})};onAllFilesRemoved=()=>{this.queue=[]};waitUntilAllProcessed=e=>{e.forEach(i=>{let n=this.uppy.getFile(i);this.uppy.emit("preprocess-progress",n,{mode:"indeterminate",message:this.i18n("generatingThumbnails")})});let t=()=>{e.forEach(i=>{let n=this.uppy.getFile(i);this.uppy.emit("preprocess-complete",n)})};return new Promise(i=>{this.queueProcessing?this.uppy.once("thumbnail:all-generated",()=>{t(),i()}):(t(),i())})};install(){this.uppy.on("file-removed",this.onFileRemoved),this.uppy.on("cancel-all",this.onAllFilesRemoved),this.opts.lazy?(this.uppy.on("thumbnail:request",this.onFileAdded),this.uppy.on("thumbnail:cancel",this.onCancelRequest)):(this.uppy.on("thumbnail:request",this.onFileAdded),this.uppy.on("file-added",this.onFileAdded),this.uppy.on("restored",this.onRestored)),this.opts.waitForThumbnailsBeforeUpload&&this.uppy.addPreProcessor(this.waitUntilAllProcessed)}uninstall(){this.uppy.off("file-removed",this.onFileRemoved),this.uppy.off("cancel-all",this.onAllFilesRemoved),this.opts.lazy?(this.uppy.off("thumbnail:request",this.onFileAdded),this.uppy.off("thumbnail:cancel",this.onCancelRequest)):(this.uppy.off("thumbnail:request",this.onFileAdded),this.uppy.off("file-added",this.onFileAdded),this.uppy.off("restored",this.onRestored)),this.opts.waitForThumbnailsBeforeUpload&&this.uppy.removePreProcessor(this.waitUntilAllProcessed)}};var Lu={name:"@uppy/dashboard",description:"Universal UI plugin for Uppy.",version:"5.0.2",license:"MIT",style:"dist/style.min.css",type:"module",sideEffects:["*.css"],scripts:{build:"tsc --build tsconfig.build.json","build:css":"sass --load-path=../../ src/style.scss dist/style.css && postcss dist/style.css -u cssnano -o dist/style.min.css",typecheck:"tsc --build",test:"vitest run --silent='passed-only'","test:e2e":"vitest watch --project browser --browser.headless false"},keywords:["file uploader","uppy","uppy-plugin","dashboard","ui"],homepage:"https://uppy.io",bugs:{url:"https://github.com/transloadit/uppy/issues"},repository:{type:"git",url:"git+https://github.com/transloadit/uppy.git"},files:["src","lib","dist","CHANGELOG.md"],exports:{".":"./lib/index.js","./css/style.css":"./dist/style.css","./css/style.min.css":"./dist/style.min.css","./css/style.scss":"./src/style.scss","./package.json":"./package.json"},dependencies:{"@transloadit/prettier-bytes":"^0.3.4","@uppy/provider-views":"^5.0.2","@uppy/thumbnail-generator":"^5.0.1","@uppy/utils":"^7.0.2",classnames:"^2.2.6",lodash:"^4.17.21",nanoid:"^5.0.9",preact:"^10.5.13","shallow-equal":"^3.0.0"},devDependencies:{"@uppy/core":"^5.0.2","@uppy/google-drive":"^5.0.1","@uppy/url":"^5.0.1","@uppy/webcam":"^5.0.1","@vitest/browser":"^3.2.4",cssnano:"^7.0.7",jsdom:"^26.1.0",playwright:"1.54.1",postcss:"^8.5.6","postcss-cli":"^11.0.1","resize-observer-polyfill":"^1.5.0",sass:"^1.89.2",typescript:"^5.8.3",vitest:"^3.2.4"},peerDependencies:{"@uppy/core":"^5.0.2"}};var yd=Q(Fe(),1);var Ps=class extends ve{fileInput=null;folderInput=null;mobilePhotoFileInput=null;mobileVideoFileInput=null;triggerFileInputClick=()=>{this.fileInput?.click()};triggerFolderInputClick=()=>{this.folderInput?.click()};triggerVideoCameraInputClick=()=>{this.mobileVideoFileInput?.click()};triggerPhotoCameraInputClick=()=>{this.mobilePhotoFileInput?.click()};onFileInputChange=e=>{this.props.handleInputChange(e),e.currentTarget.value=""};renderHiddenInput=(e,t)=>u("input",{className:"uppy-Dashboard-input",hidden:!0,"aria-hidden":"true",tabIndex:-1,webkitdirectory:e,type:"file",name:"files[]",multiple:this.props.maxNumberOfFiles!==1,onChange:this.onFileInputChange,accept:this.props.allowedFileTypes?.join(", "),ref:t});renderHiddenCameraInput=(e,t,i)=>{let s={photo:"image/*",video:"video/*"}[e];return u("input",{className:"uppy-Dashboard-input",hidden:!0,"aria-hidden":"true",tabIndex:-1,type:"file",name:`camera-${e}`,onChange:this.onFileInputChange,capture:t===""?"environment":t,accept:s,ref:i})};renderMyDeviceAcquirer=()=>u("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":"MyDevice",children:u("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-uppy-super-focusable":!0,onClick:this.triggerFileInputClick,children:[u("div",{className:"uppy-DashboardTab-inner",children:u("svg",{className:"uppy-DashboardTab-iconMyDevice","aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32",children:u("path",{d:"M8.45 22.087l-1.305-6.674h17.678l-1.572 6.674H8.45zm4.975-12.412l1.083 1.765a.823.823 0 00.715.386h7.951V13.5H8.587V9.675h4.838zM26.043 13.5h-1.195v-2.598c0-.463-.336-.75-.798-.75h-8.356l-1.082-1.766A.823.823 0 0013.897 8H7.728c-.462 0-.815.256-.815.718V13.5h-.956a.97.97 0 00-.746.37.972.972 0 00-.19.81l1.724 8.565c.095.44.484.755.933.755H24c.44 0 .824-.3.929-.727l2.043-8.568a.972.972 0 00-.176-.825.967.967 0 00-.753-.38z",fill:"currentcolor","fill-rule":"evenodd"})})}),u("div",{className:"uppy-DashboardTab-name",children:this.props.i18n("myDevice")})]})});renderPhotoCamera=()=>u("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":"MobilePhotoCamera",children:u("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-uppy-super-focusable":!0,onClick:this.triggerPhotoCameraInputClick,children:[u("div",{className:"uppy-DashboardTab-inner",children:u("svg",{"aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32",children:u("path",{d:"M23.5 9.5c1.417 0 2.5 1.083 2.5 2.5v9.167c0 1.416-1.083 2.5-2.5 2.5h-15c-1.417 0-2.5-1.084-2.5-2.5V12c0-1.417 1.083-2.5 2.5-2.5h2.917l1.416-2.167C13 7.167 13.25 7 13.5 7h5c.25 0 .5.167.667.333L20.583 9.5H23.5zM16 11.417a4.706 4.706 0 00-4.75 4.75 4.704 4.704 0 004.75 4.75 4.703 4.703 0 004.75-4.75c0-2.663-2.09-4.75-4.75-4.75zm0 7.825c-1.744 0-3.076-1.332-3.076-3.074 0-1.745 1.333-3.077 3.076-3.077 1.744 0 3.074 1.333 3.074 3.076s-1.33 3.075-3.074 3.075z",fill:"#02B383","fill-rule":"nonzero"})})}),u("div",{className:"uppy-DashboardTab-name",children:this.props.i18n("takePictureBtn")})]})});renderVideoCamera=()=>u("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":"MobileVideoCamera",children:u("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-uppy-super-focusable":!0,onClick:this.triggerVideoCameraInputClick,children:[u("div",{className:"uppy-DashboardTab-inner",children:u("svg",{"aria-hidden":"true",width:"32",height:"32",viewBox:"0 0 32 32",children:u("path",{fill:"#FF675E",fillRule:"nonzero",d:"m21.254 14.277 2.941-2.588c.797-.313 1.243.818 1.09 1.554-.01 2.094.02 4.189-.017 6.282-.126.915-1.145 1.08-1.58.34l-2.434-2.142c-.192.287-.504 1.305-.738.468-.104-1.293-.028-2.596-.05-3.894.047-.312.381.823.426 1.069.063-.384.206-.744.362-1.09zm-12.939-3.73c3.858.013 7.717-.025 11.574.02.912.129 1.492 1.237 1.351 2.217-.019 2.412.04 4.83-.03 7.239-.17 1.025-1.166 1.59-2.029 1.429-3.705-.012-7.41.025-11.114-.019-.913-.129-1.492-1.237-1.352-2.217.018-2.404-.036-4.813.029-7.214.136-.82.83-1.473 1.571-1.454z "})})}),u("div",{className:"uppy-DashboardTab-name",children:this.props.i18n("recordVideoBtn")})]})});renderBrowseButton=(e,t)=>{let i=this.props.acquirers.length;return u("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-Dashboard-browse",onClick:t,"data-uppy-super-focusable":i===0,children:e})};renderDropPasteBrowseTagline=e=>{let t=this.renderBrowseButton(this.props.i18n("browseFiles"),this.triggerFileInputClick),i=this.renderBrowseButton(this.props.i18n("browseFolders"),this.triggerFolderInputClick),n=this.props.fileManagerSelectionType,s=n.charAt(0).toUpperCase()+n.slice(1);return u("div",{class:"uppy-Dashboard-AddFiles-title",children:this.props.disableLocalFiles?this.props.i18n("importFiles"):e>0?this.props.i18nArray(`dropPasteImport${s}`,{browseFiles:t,browseFolders:i,browse:t}):this.props.i18nArray(`dropPaste${s}`,{browseFiles:t,browseFolders:i,browse:t})})};[Symbol.for("uppy test: disable unused locale key warning")](){this.props.i18nArray("dropPasteBoth"),this.props.i18nArray("dropPasteFiles"),this.props.i18nArray("dropPasteFolders"),this.props.i18nArray("dropPasteImportBoth"),this.props.i18nArray("dropPasteImportFiles"),this.props.i18nArray("dropPasteImportFolders")}renderAcquirer=e=>u("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":e.id,children:u("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-cy":e.id,"aria-controls":`uppy-DashboardContent-panel--${e.id}`,"aria-selected":this.props.activePickerPanel?.id===e.id,"data-uppy-super-focusable":!0,onClick:()=>this.props.showPanel(e.id),children:[u("div",{className:"uppy-DashboardTab-inner",children:e.icon()}),u("div",{className:"uppy-DashboardTab-name",children:e.name})]})});renderAcquirers=e=>{let t=[...e],i=t.splice(e.length-2,e.length);return u(ae,{children:[t.map(n=>this.renderAcquirer(n)),u("span",{role:"presentation",style:{"white-space":"nowrap"},children:i.map(n=>this.renderAcquirer(n))})]})};renderSourcesList=(e,t)=>{let{showNativePhotoCameraButton:i,showNativeVideoCameraButton:n}=this.props,s=[],o="myDevice";t||s.push({key:o,elements:this.renderMyDeviceAcquirer()}),i&&s.push({key:"nativePhotoCameraButton",elements:this.renderPhotoCamera()}),n&&s.push({key:"nativePhotoCameraButton",elements:this.renderVideoCamera()}),s.push(...e.map(p=>({key:p.id,elements:this.renderAcquirer(p)}))),s.length===1&&s[0].key===o&&(s=[]);let l=[...s],c=l.splice(s.length-2,s.length);return u(ae,{children:[this.renderDropPasteBrowseTagline(s.length),u("div",{className:"uppy-Dashboard-AddFiles-list",role:"tablist",children:[l.map(({key:p,elements:d})=>u(ae,{children:d},p)),u("span",{role:"presentation",style:{"white-space":"nowrap"},children:c.map(({key:p,elements:d})=>u(ae,{children:d},p))})]})]})};renderPoweredByUppy(){let{i18nArray:e}=this.props,t=u("span",{children:[u("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon uppy-Dashboard-poweredByIcon",width:"11",height:"11",viewBox:"0 0 11 11",children:u("path",{d:"M7.365 10.5l-.01-4.045h2.612L5.5.806l-4.467 5.65h2.604l.01 4.044h3.718z",fillRule:"evenodd"})}),u("span",{className:"uppy-Dashboard-poweredByUppy",children:"Uppy"})]}),i=e("poweredBy",{uppy:t});return u("a",{tabIndex:-1,href:"https://uppy.io",rel:"noreferrer noopener",target:"_blank",className:"uppy-Dashboard-poweredBy",children:i})}render(){let{showNativePhotoCameraButton:e,showNativeVideoCameraButton:t,nativeCameraFacingMode:i}=this.props;return u("div",{className:"uppy-Dashboard-AddFiles",children:[this.renderHiddenInput(!1,n=>{this.fileInput=n}),this.renderHiddenInput(!0,n=>{this.folderInput=n}),e&&this.renderHiddenCameraInput("photo",i,n=>{this.mobilePhotoFileInput=n}),t&&this.renderHiddenCameraInput("video",i,n=>{this.mobileVideoFileInput=n}),this.renderSourcesList(this.props.acquirers,this.props.disableLocalFiles),u("div",{className:"uppy-Dashboard-AddFiles-info",children:[this.props.note&&u("div",{className:"uppy-Dashboard-note",children:this.props.note}),this.props.proudlyDisplayPoweredByUppy&&this.renderPoweredByUppy()]})]})}},Di=Ps;var Mu=Q(Fe(),1);var mf=r=>u("div",{className:(0,Mu.default)("uppy-Dashboard-AddFilesPanel",r.className),"data-uppy-panelType":"AddFiles","aria-hidden":!r.showAddFilesPanel,children:[u("div",{className:"uppy-DashboardContent-bar",children:[u("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":1,children:r.i18n("addingMoreFiles")}),u("button",{className:"uppy-DashboardContent-back",type:"button",onClick:()=>r.toggleAddFilesPanel(!1),children:r.i18n("back")})]}),u(Di,m({},r))]}),ju=mf;var zu=Q(Fe(),1);function gf(r){let e=r.files[r.fileCardFor],t=()=>{r.uppy.emit("file-editor:cancel",e),r.closeFileEditor()};return u("div",{className:(0,zu.default)("uppy-DashboardContent-panel",r.className),role:"tabpanel","data-uppy-panelType":"FileEditor",id:"uppy-DashboardContent-panel--editor",children:[u("div",{className:"uppy-DashboardContent-bar",children:[u("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":1,children:r.i18nArray("editing",{file:u("span",{className:"uppy-DashboardContent-titleFile",children:e.meta?e.meta.name:e.name})})}),u("button",{className:"uppy-DashboardContent-back",type:"button",onClick:t,children:r.i18n("cancel")}),u("button",{className:"uppy-DashboardContent-save",type:"button",onClick:r.saveFileEditor,children:r.i18n("save")})]}),u("div",{className:"uppy-DashboardContent-panelBody",children:r.editors.map(i=>r.uppy.getPlugin(i.id).render(r.state))})]})}var Hu=gf;var qu=Q(Fe(),1);function yf(){return u("svg",{"aria-hidden":"true",focusable:"false",width:"25",height:"25",viewBox:"0 0 25 25",children:u("g",{fill:"#686DE0",fillRule:"evenodd",children:[u("path",{d:"M5 7v10h15V7H5zm0-1h15a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1z",fillRule:"nonzero"}),u("path",{d:"M6.35 17.172l4.994-5.026a.5.5 0 0 1 .707 0l2.16 2.16 3.505-3.505a.5.5 0 0 1 .707 0l2.336 2.31-.707.72-1.983-1.97-3.505 3.505a.5.5 0 0 1-.707 0l-2.16-2.159-3.938 3.939-1.409.026z",fillRule:"nonzero"}),u("circle",{cx:"7.5",cy:"9.5",r:"1.5"})]})})}function vf(){return u("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25",children:u("path",{d:"M9.5 18.64c0 1.14-1.145 2-2.5 2s-2.5-.86-2.5-2c0-1.14 1.145-2 2.5-2 .557 0 1.079.145 1.5.396V7.25a.5.5 0 0 1 .379-.485l9-2.25A.5.5 0 0 1 18.5 5v11.64c0 1.14-1.145 2-2.5 2s-2.5-.86-2.5-2c0-1.14 1.145-2 2.5-2 .557 0 1.079.145 1.5.396V8.67l-8 2v7.97zm8-11v-2l-8 2v2l8-2zM7 19.64c.855 0 1.5-.484 1.5-1s-.645-1-1.5-1-1.5.484-1.5 1 .645 1 1.5 1zm9-2c.855 0 1.5-.484 1.5-1s-.645-1-1.5-1-1.5.484-1.5 1 .645 1 1.5 1z",fill:"#049BCF",fillRule:"nonzero"})})}function bf(){return u("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25",children:u("path",{d:"M16 11.834l4.486-2.691A1 1 0 0 1 22 10v6a1 1 0 0 1-1.514.857L16 14.167V17a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V9a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v2.834zM15 9H5v8h10V9zm1 4l5 3v-6l-5 3z",fill:"#19AF67",fillRule:"nonzero"})})}function wf(){return u("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25",children:u("path",{d:"M9.766 8.295c-.691-1.843-.539-3.401.747-3.726 1.643-.414 2.505.938 2.39 3.299-.039.79-.194 1.662-.537 3.148.324.49.66.967 1.055 1.51.17.231.382.488.629.757 1.866-.128 3.653.114 4.918.655 1.487.635 2.192 1.685 1.614 2.84-.566 1.133-1.839 1.084-3.416.249-1.141-.604-2.457-1.634-3.51-2.707a13.467 13.467 0 0 0-2.238.426c-1.392 4.051-4.534 6.453-5.707 4.572-.986-1.58 1.38-4.206 4.914-5.375.097-.322.185-.656.264-1.001.08-.353.306-1.31.407-1.737-.678-1.059-1.2-2.031-1.53-2.91zm2.098 4.87c-.033.144-.068.287-.104.427l.033-.01-.012.038a14.065 14.065 0 0 1 1.02-.197l-.032-.033.052-.004a7.902 7.902 0 0 1-.208-.271c-.197-.27-.38-.526-.555-.775l-.006.028-.002-.003c-.076.323-.148.632-.186.8zm5.77 2.978c1.143.605 1.832.632 2.054.187.26-.519-.087-1.034-1.113-1.473-.911-.39-2.175-.608-3.55-.608.845.766 1.787 1.459 2.609 1.894zM6.559 18.789c.14.223.693.16 1.425-.413.827-.648 1.61-1.747 2.208-3.206-2.563 1.064-4.102 2.867-3.633 3.62zm5.345-10.97c.088-1.793-.351-2.48-1.146-2.28-.473.119-.564 1.05-.056 2.405.213.566.52 1.188.908 1.859.18-.858.268-1.453.294-1.984z",fill:"#E2514A",fillRule:"nonzero"})})}function _f(){return u("svg",{"aria-hidden":"true",focusable:"false",width:"25",height:"25",viewBox:"0 0 25 25",children:u("path",{d:"M10.45 2.05h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5V2.55a.5.5 0 0 1 .5-.5zm2.05 1.024h1.05a.5.5 0 0 1 .5.5V3.6a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5v-.001zM10.45 0h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5V.5a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-2.05 3.074h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-2.05 1.024h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm-2.05 1.025h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-1.656 3.074l-.82 5.946c.52.302 1.174.458 1.976.458.803 0 1.455-.156 1.975-.458l-.82-5.946h-2.311zm0-1.025h2.312c.512 0 .946.378 1.015.885l.82 5.946c.056.412-.142.817-.501 1.026-.686.398-1.515.597-2.49.597-.974 0-1.804-.199-2.49-.597a1.025 1.025 0 0 1-.5-1.026l.819-5.946c.07-.507.503-.885 1.015-.885zm.545 6.6a.5.5 0 0 1-.397-.561l.143-.999a.5.5 0 0 1 .495-.429h.74a.5.5 0 0 1 .495.43l.143.998a.5.5 0 0 1-.397.561c-.404.08-.819.08-1.222 0z",fill:"#00C469",fillRule:"nonzero"})})}function xf(){return u("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25",children:u("g",{fill:"#A7AFB7",fillRule:"nonzero",children:[u("path",{d:"M5.5 22a.5.5 0 0 1-.5-.5v-18a.5.5 0 0 1 .5-.5h10.719a.5.5 0 0 1 .367.16l3.281 3.556a.5.5 0 0 1 .133.339V21.5a.5.5 0 0 1-.5.5h-14zm.5-1h13V7.25L16 4H6v17z"}),u("path",{d:"M15 4v3a1 1 0 0 0 1 1h3V7h-3V4h-1z"})]})})}function Sf(){return u("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25",children:u("path",{d:"M4.5 7h13a.5.5 0 1 1 0 1h-13a.5.5 0 0 1 0-1zm0 3h15a.5.5 0 1 1 0 1h-15a.5.5 0 1 1 0-1zm0 3h15a.5.5 0 1 1 0 1h-15a.5.5 0 1 1 0-1zm0 3h10a.5.5 0 1 1 0 1h-10a.5.5 0 1 1 0-1z",fill:"#5A5E69",fillRule:"nonzero"})})}function ft(r){let e={color:"#838999",icon:xf()};if(!r)return e;let t=r.split("/")[0],i=r.split("/")[1];return t==="text"?{color:"#5a5e69",icon:Sf()}:t==="image"?{color:"#686de0",icon:yf()}:t==="audio"?{color:"#068dbb",icon:vf()}:t==="video"?{color:"#19af67",icon:bf()}:t==="application"&&i==="pdf"?{color:"#e25149",icon:wf()}:t==="application"&&["zip","x-7z-compressed","x-zip-compressed","x-rar-compressed","x-tar","x-gzip","x-apple-diskimage"].indexOf(i)!==-1?{color:"#00C469",icon:_f()}:e}function Ff(r){let{tagName:e}=r.target;if(e==="INPUT"||e==="TEXTAREA"){r.stopPropagation();return}r.preventDefault(),r.stopPropagation()}var ze=Ff;function Nr(r){let{file:e}=r;if(e.preview)return u("img",{draggable:!1,className:"uppy-Dashboard-Item-previewImg",alt:e.name,src:e.preview});let{color:t,icon:i}=ft(e.type);return u("div",{className:"uppy-Dashboard-Item-previewIconWrap",children:[u("span",{className:"uppy-Dashboard-Item-previewIcon",style:{color:t},children:i}),u("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-Dashboard-Item-previewIconBg",width:"58",height:"76",viewBox:"0 0 58 76",children:u("rect",{fill:"#FFF",width:"58",height:"76",rx:"3",fillRule:"evenodd"})})]})}function Es(r){let{computedMetaFields:e,requiredMetaFields:t,updateMeta:i,form:n,formState:s}=r,o={text:"uppy-u-reset uppy-c-textInput uppy-Dashboard-FileCard-input"};return e.map(a=>{let l=`uppy-Dashboard-FileCard-input-${a.id}`,c=t.includes(a.id);return u("fieldset",{className:"uppy-Dashboard-FileCard-fieldset",children:[u("label",{className:"uppy-Dashboard-FileCard-label",htmlFor:l,children:a.name}),a.render!==void 0?a.render({value:s[a.id],onChange:p=>i(p,a.id),fieldCSSClasses:o,required:c,form:n.id},gr):u("input",{className:o.text,id:l,form:n.id,type:a.type||"text",required:c,value:s[a.id],placeholder:a.placeholder,onInput:p=>i(p.target.value,a.id),"data-uppy-super-focusable":!0})]},a.id)})}function Cs(r){let{files:e,fileCardFor:t,toggleFileCard:i,saveFileCard:n,metaFields:s,requiredMetaFields:o,openFileEditor:a,i18n:l,i18nArray:c,className:p,canEditFile:d}=r,g=()=>typeof s=="function"?s(e[t]):s,v=e[t],x=g()??[],A=d(v),C={};x.forEach(B=>{C[B.id]=v.meta[B.id]??""});let[U,F]=Ce(C),k=Be(B=>{B.preventDefault(),n(U,t)},[n,U,t]),N=(B,G)=>{F(O(m({},U),{[G]:B}))},M=()=>{i(!1)},[R]=Ce(()=>{let B=document.createElement("form");return B.setAttribute("tabindex","-1"),B.id=et(),B});return Ne(()=>(document.body.appendChild(R),R.addEventListener("submit",k),()=>{R.removeEventListener("submit",k),R.parentNode&&document.body.removeChild(R)}),[R,k]),u("div",{className:(0,qu.default)("uppy-Dashboard-FileCard",p),"data-uppy-panelType":"FileCard",onDragOver:ze,onDragLeave:ze,onDrop:ze,onPaste:ze,children:[u("div",{className:"uppy-DashboardContent-bar",children:[u("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":1,children:c("editing",{file:u("span",{className:"uppy-DashboardContent-titleFile",children:v.meta?v.meta.name:v.name})})}),u("button",{className:"uppy-DashboardContent-back",type:"button",form:R.id,title:l("finishEditingFile"),onClick:M,children:l("cancel")})]}),u("div",{className:"uppy-Dashboard-FileCard-inner",children:[u("div",{className:"uppy-Dashboard-FileCard-preview",style:{backgroundColor:ft(v.type).color},children:[u(Nr,{file:v}),A&&u("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-Dashboard-FileCard-edit",onClick:B=>{k(B),a(v)},children:l("editImage")})]}),u("div",{className:"uppy-Dashboard-FileCard-info",children:u(Es,{computedMetaFields:x,requiredMetaFields:o,updateMeta:N,form:R,formState:U})}),u("div",{className:"uppy-Dashboard-FileCard-actions",children:[u("button",{className:"uppy-u-reset uppy-c-btn uppy-c-btn-primary uppy-Dashboard-FileCard-actionsBtn",type:"submit",form:R.id,children:l("saveChanges")}),u("button",{className:"uppy-u-reset uppy-c-btn uppy-c-btn-link uppy-Dashboard-FileCard-actionsBtn",type:"button",onClick:M,form:R.id,children:l("cancel")})]})]})]})}var Wu=Q(Fe(),1);function Vu(r,e){if(r===e)return!0;if(!r||!e)return!1;let t=Object.keys(r),i=Object.keys(e),n=t.length;if(i.length!==n)return!1;for(let s=0;s<n;s++){let o=t[s];if(r[o]!==e[o]||!Object.prototype.hasOwnProperty.call(e,o))return!1}return!0}function Ts(r,e="Copy the URL below"){return new Promise(t=>{let i=document.createElement("textarea");i.setAttribute("style",{position:"fixed",top:0,left:0,width:"2em",height:"2em",padding:0,border:"none",outline:"none",boxShadow:"none",background:"transparent"}),i.value=r,document.body.appendChild(i),i.select();let n=()=>{document.body.removeChild(i),window.prompt(e,r),t()};try{return document.execCommand("copy")?(document.body.removeChild(i),t()):n()}catch{return document.body.removeChild(i),n()}})}function Pf({file:r,uploadInProgressOrComplete:e,metaFields:t,canEditFile:i,i18n:n,onClick:s}){return!e&&t&&t.length>0||!e&&i(r)?u("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-action uppy-Dashboard-Item-action--edit",type:"button","aria-label":n("editFileWithFilename",{file:r.meta.name}),title:n("editFileWithFilename",{file:r.meta.name}),onClick:()=>s(),children:u("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"14",height:"14",viewBox:"0 0 14 14",children:u("g",{fillRule:"evenodd",children:[u("path",{d:"M1.5 10.793h2.793A1 1 0 0 0 5 10.5L11.5 4a1 1 0 0 0 0-1.414L9.707.793a1 1 0 0 0-1.414 0l-6.5 6.5A1 1 0 0 0 1.5 8v2.793zm1-1V8L9 1.5l1.793 1.793-6.5 6.5H2.5z",fillRule:"nonzero"}),u("rect",{x:"1",y:"12.293",width:"11",height:"1",rx:".5"}),u("path",{fillRule:"nonzero",d:"M6.793 2.5L9.5 5.207l.707-.707L7.5 1.793z"})]})})}):null}function Ef({i18n:r,onClick:e,file:t}){return u("button",{className:"uppy-u-reset uppy-Dashboard-Item-action uppy-Dashboard-Item-action--remove",type:"button","aria-label":r("removeFile",{file:t.meta.name}),title:r("removeFile",{file:t.meta.name}),onClick:()=>e(),children:u("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"18",height:"18",viewBox:"0 0 18 18",children:[u("path",{d:"M9 0C4.034 0 0 4.034 0 9s4.034 9 9 9 9-4.034 9-9-4.034-9-9-9z"}),u("path",{fill:"#FFF",d:"M13 12.222l-.778.778L9 9.778 5.778 13 5 12.222 8.222 9 5 5.778 5.778 5 9 8.222 12.222 5l.778.778L9.778 9z"})]})})}function Cf({file:r,uppy:e,i18n:t}){let i=n=>{Ts(r.uploadURL,t("copyLinkToClipboardFallback")).then(()=>{e.log("Link copied to clipboard."),e.info(t("copyLinkToClipboardSuccess"),"info",3e3)}).catch(e.log).then(()=>n.target.focus({preventScroll:!0}))};return u("button",{className:"uppy-u-reset uppy-Dashboard-Item-action uppy-Dashboard-Item-action--copyLink",type:"button","aria-label":t("copyLink"),title:t("copyLink"),onClick:n=>i(n),children:u("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"14",height:"14",viewBox:"0 0 14 12",children:u("path",{d:"M7.94 7.703a2.613 2.613 0 0 1-.626 2.681l-.852.851a2.597 2.597 0 0 1-1.849.766A2.616 2.616 0 0 1 2.764 7.54l.852-.852a2.596 2.596 0 0 1 2.69-.625L5.267 7.099a1.44 1.44 0 0 0-.833.407l-.852.851a1.458 1.458 0 0 0 1.03 2.486c.39 0 .755-.152 1.03-.426l.852-.852c.231-.231.363-.522.406-.824l1.04-1.038zm4.295-5.937A2.596 2.596 0 0 0 10.387 1c-.698 0-1.355.272-1.849.766l-.852.851a2.614 2.614 0 0 0-.624 2.688l1.036-1.036c.041-.304.173-.6.407-.833l.852-.852c.275-.275.64-.426 1.03-.426a1.458 1.458 0 0 1 1.03 2.486l-.852.851a1.442 1.442 0 0 1-.824.406l-1.04 1.04a2.596 2.596 0 0 0 2.683-.628l.851-.85a2.616 2.616 0 0 0 0-3.697zm-6.88 6.883a.577.577 0 0 0 .82 0l3.474-3.474a.579.579 0 1 0-.819-.82L5.355 7.83a.579.579 0 0 0 0 .819z"})})})}function ks(r){let{uppy:e,file:t,uploadInProgressOrComplete:i,canEditFile:n,metaFields:s,showLinkToFileUploadResult:o,showRemoveButton:a,i18n:l,toggleFileCard:c,openFileEditor:p}=r;return u("div",{className:"uppy-Dashboard-Item-actionWrapper",children:[u(Pf,{i18n:l,file:t,uploadInProgressOrComplete:i,canEditFile:n,metaFields:s,onClick:()=>{s&&s.length>0?c(!0,t.id):p(t)}}),o&&t.uploadURL?u(Cf,{file:t,uppy:e,i18n:l}):null,a?u(Ef,{i18n:l,file:t,onClick:()=>e.removeFile(t.id)}):null]})}var $u=Q(nr(),1);var Tf=(r,e)=>(typeof e=="function"?e():e).filter(n=>n.id===r)[0].name;function Br(r){let{file:e,toggleFileCard:t,i18n:i,metaFields:n}=r,{missingRequiredMetaFields:s}=e;if(!s?.length)return null;let o=s.map(a=>Tf(a,n)).join(", ");return u("div",{className:"uppy-Dashboard-Item-errorMessage",children:[i("missingRequiredMetaFields",{smart_count:s.length,fields:o})," ",u("button",{type:"button",class:"uppy-u-reset uppy-Dashboard-Item-errorMessageBtn",onClick:()=>t(!0,e.id),children:i("editFile")})]})}var kf=r=>{let{author:e,name:t}=r.file.meta;function i(){return r.isSingleFile&&r.containerHeight>=350?90:r.containerWidth<=352?35:r.containerWidth<=576?60:e?20:30}return u("div",{className:"uppy-Dashboard-Item-name",title:t,children:cr(t,i())})},Uf=r=>{let{author:e}=r.file.meta,t=r.file.remote?.providerName,i="\xB7";return e?u("div",{className:"uppy-Dashboard-Item-author",children:[u("a",{href:`${e.url}?utm_source=Companion&utm_medium=referral`,target:"_blank",rel:"noopener noreferrer",children:cr(e.name,13)}),t?u(ae,{children:[` ${i} `,t,` ${i} `]}):null]}):null},Af=r=>r.file.size&&u("div",{className:"uppy-Dashboard-Item-statusSize",children:(0,$u.default)(r.file.size)}),Of=r=>r.file.isGhost&&u("span",{children:[" \u2022 ",u("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-reSelect",type:"button",onClick:()=>r.toggleAddFilesPanel(!0),children:r.i18n("reSelect")})]}),If=({file:r,onClick:e})=>r.error?u("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-errorDetails","aria-label":r.error,"data-microtip-position":"bottom","data-microtip-size":"medium",onClick:e,type:"button",children:"?"}):null;function Us(r){let{file:e,i18n:t,toggleFileCard:i,metaFields:n,toggleAddFilesPanel:s,isSingleFile:o,containerHeight:a,containerWidth:l}=r;return u("div",{className:"uppy-Dashboard-Item-fileInfo","data-uppy-file-source":e.source,children:[u("div",{className:"uppy-Dashboard-Item-fileName",children:[kf({file:e,isSingleFile:o,containerHeight:a,containerWidth:l}),u(If,{file:e,onClick:()=>alert(e.error)})]}),u("div",{className:"uppy-Dashboard-Item-status",children:[Uf({file:e}),Af({file:e}),Of({file:e,toggleAddFilesPanel:s,i18n:t})]}),u(Br,{file:e,i18n:t,toggleFileCard:i,metaFields:n})]})}function As(r){let{file:e,i18n:t,toggleFileCard:i,metaFields:n,showLinkToFileUploadResult:s}=r,a=e.preview?"rgba(255, 255, 255, 0.5)":ft(e.type).color;return u("div",{className:"uppy-Dashboard-Item-previewInnerWrap",style:{backgroundColor:a},children:[s&&e.uploadURL&&u("a",{className:"uppy-Dashboard-Item-previewLink",href:e.uploadURL,rel:"noreferrer noopener",target:"_blank","aria-label":e.meta.name,children:u("span",{hidden:!0,children:e.meta.name})}),u(Nr,{file:e}),u(Br,{file:e,i18n:t,toggleFileCard:i,metaFields:n})]})}function Df(r){if(!r.isUploaded){if(r.error&&!r.hideRetryButton){r.uppy.retryUpload(r.file.id);return}r.resumableUploads&&!r.hidePauseResumeButton?r.uppy.pauseResume(r.file.id):r.individualCancellation&&!r.hideCancelButton&&r.uppy.removeFile(r.file.id)}}function Gu(r){return r.isUploaded?r.i18n("uploadComplete"):r.error?r.i18n("retryUpload"):r.resumableUploads?r.file.isPaused?r.i18n("resumeUpload"):r.i18n("pauseUpload"):r.individualCancellation?r.i18n("cancelUpload"):""}function Os(r){return u("div",{className:"uppy-Dashboard-Item-progress",children:u("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-progressIndicator",type:"button","aria-label":Gu(r),title:Gu(r),onClick:()=>Df(r),children:r.children})})}function Ri({children:r}){return u("svg",{"aria-hidden":"true",focusable:"false",width:"70",height:"70",viewBox:"0 0 36 36",className:"uppy-c-icon uppy-Dashboard-Item-progressIcon--circle",children:r})}function Is({progress:r}){let e=2*Math.PI*15;return u("g",{children:[u("circle",{className:"uppy-Dashboard-Item-progressIcon--bg",r:"15",cx:"18",cy:"18","stroke-width":"2",fill:"none"}),u("circle",{className:"uppy-Dashboard-Item-progressIcon--progress",r:"15",cx:"18",cy:"18",transform:"rotate(-90, 18, 18)",fill:"none","stroke-width":"2","stroke-dasharray":e,"stroke-dashoffset":e-e/100*r})]})}function Ds(r){return!r.file.progress.uploadStarted||r.file.progress.percentage===void 0?null:r.isUploaded?u("div",{className:"uppy-Dashboard-Item-progress",children:u("div",{className:"uppy-Dashboard-Item-progressIndicator",children:u(Ri,{children:[u("circle",{r:"15",cx:"18",cy:"18",fill:"#1bb240"}),u("polygon",{className:"uppy-Dashboard-Item-progressIcon--check",transform:"translate(2, 3)",points:"14 22.5 7 15.2457065 8.99985857 13.1732815 14 18.3547104 22.9729883 9 25 11.1005634"})]})})}):r.recoveredState?null:r.error&&!r.hideRetryButton?u(Os,O(m({},r),{children:u("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon uppy-Dashboard-Item-progressIcon--retry",width:"28",height:"31",viewBox:"0 0 16 19",children:[u("path",{d:"M16 11a8 8 0 1 1-8-8v2a6 6 0 1 0 6 6h2z"}),u("path",{d:"M7.9 3H10v2H7.9z"}),u("path",{d:"M8.536.5l3.535 3.536-1.414 1.414L7.12 1.914z"}),u("path",{d:"M10.657 2.621l1.414 1.415L8.536 7.57 7.12 6.157z"})]})})):r.resumableUploads&&!r.hidePauseResumeButton?u(Os,O(m({},r),{children:u(Ri,{children:[u(Is,{progress:r.file.progress.percentage}),r.file.isPaused?u("polygon",{className:"uppy-Dashboard-Item-progressIcon--play",transform:"translate(3, 3)",points:"12 20 12 10 20 15"}):u("g",{className:"uppy-Dashboard-Item-progressIcon--pause",transform:"translate(14.5, 13)",children:[u("rect",{x:"0",y:"0",width:"2",height:"10",rx:"0"}),u("rect",{x:"5",y:"0",width:"2",height:"10",rx:"0"})]})]})})):!r.resumableUploads&&r.individualCancellation&&!r.hideCancelButton?u(Os,O(m({},r),{children:u(Ri,{children:[u(Is,{progress:r.file.progress.percentage}),u("polygon",{className:"cancel",transform:"translate(2, 2)",points:"19.8856516 11.0625 16 14.9481516 12.1019737 11.0625 11.0625 12.1143484 14.9481516 16 11.0625 19.8980263 12.1019737 20.9375 16 17.0518484 19.8856516 20.9375 20.9375 19.8980263 17.0518484 16 20.9375 12"})]})})):u("div",{className:"uppy-Dashboard-Item-progress",children:u("div",{className:"uppy-Dashboard-Item-progressIndicator",children:u(Ri,{children:u(Is,{progress:r.file.progress.percentage})})})})}var Ni=class extends ve{componentDidMount(){let{file:e}=this.props;e.preview||this.props.handleRequestThumbnail(e)}shouldComponentUpdate(e){return!Vu(this.props,e)}componentDidUpdate(){let{file:e}=this.props;e.preview||this.props.handleRequestThumbnail(e)}componentWillUnmount(){let{file:e}=this.props;e.preview||this.props.handleCancelThumbnail(e)}render(){let{file:e}=this.props,t=e.progress.preprocess||e.progress.postprocess,i=!!e.progress.uploadComplete&&!t&&!e.error,n=!!e.progress.uploadStarted||!!t,s=e.progress.uploadStarted&&!e.progress.uploadComplete||t,o=e.error||!1,{isGhost:a}=e,l=(this.props.individualCancellation||!s)&&!i;i&&this.props.showRemoveButtonAfterComplete&&(l=!0);let c=(0,Wu.default)({"uppy-Dashboard-Item":!0,"is-inprogress":s&&!this.props.recoveredState,"is-processing":t,"is-complete":i,"is-error":!!o,"is-resumable":this.props.resumableUploads,"is-noIndividualCancellation":!this.props.individualCancellation,"is-ghost":a});return u("div",{className:c,id:`uppy_${e.id}`,role:this.props.role,children:[u("div",{className:"uppy-Dashboard-Item-preview",children:[u(As,{file:e,showLinkToFileUploadResult:this.props.showLinkToFileUploadResult,i18n:this.props.i18n,toggleFileCard:this.props.toggleFileCard,metaFields:this.props.metaFields}),u(Ds,{uppy:this.props.uppy,file:e,error:o,isUploaded:i,hideRetryButton:this.props.hideRetryButton,hideCancelButton:this.props.hideCancelButton,hidePauseResumeButton:this.props.hidePauseResumeButton,recoveredState:this.props.recoveredState,resumableUploads:this.props.resumableUploads,individualCancellation:this.props.individualCancellation,i18n:this.props.i18n})]}),u("div",{className:"uppy-Dashboard-Item-fileInfoAndButtons",children:[u(Us,{file:e,containerWidth:this.props.containerWidth,containerHeight:this.props.containerHeight,i18n:this.props.i18n,toggleAddFilesPanel:this.props.toggleAddFilesPanel,toggleFileCard:this.props.toggleFileCard,metaFields:this.props.metaFields,isSingleFile:this.props.isSingleFile}),u(ks,{file:e,metaFields:this.props.metaFields,showLinkToFileUploadResult:this.props.showLinkToFileUploadResult,showRemoveButton:l,canEditFile:this.props.canEditFile,uploadInProgressOrComplete:n,toggleFileCard:this.props.toggleFileCard,openFileEditor:this.props.openFileEditor,uppy:this.props.uppy,i18n:this.props.i18n})]})]})}};function Rf(r,e){let t=[],i=[];return r.forEach(n=>{i.length<e?i.push(n):(t.push(i),i=[n])}),i.length&&t.push(i),t}function Rs({id:r,i18n:e,uppy:t,files:i,resumableUploads:n,hideRetryButton:s,hidePauseResumeButton:o,hideCancelButton:a,showLinkToFileUploadResult:l,showRemoveButtonAfterComplete:c,metaFields:p,isSingleFile:d,toggleFileCard:g,handleRequestThumbnail:v,handleCancelThumbnail:x,recoveredState:A,individualCancellation:C,itemsPerRow:U,openFileEditor:F,canEditFile:k,toggleAddFilesPanel:N,containerWidth:M,containerHeight:R}){let B=U===1?71:200,G=dt(()=>{let me=(ue,de)=>Number(i[de].isGhost)-Number(i[ue].isGhost),X=Object.keys(i);return A&&X.sort(me),Rf(X,U)},[i,U,A]),K=me=>u("div",{class:"uppy-Dashboard-filesInner",role:"presentation",children:me.map(X=>u(Ni,{uppy:t,id:r,i18n:e,resumableUploads:n,individualCancellation:C,hideRetryButton:s,hidePauseResumeButton:o,hideCancelButton:a,showLinkToFileUploadResult:l,showRemoveButtonAfterComplete:c,metaFields:p,recoveredState:A,isSingleFile:d,containerWidth:M,containerHeight:R,toggleFileCard:g,handleRequestThumbnail:v,handleCancelThumbnail:x,role:"listitem",openFileEditor:F,canEditFile:k,toggleAddFilesPanel:N,file:i[X]},X))},me[0]);return d?u("div",{class:"uppy-Dashboard-files",children:K(G[0])}):u(kt,{class:"uppy-Dashboard-files",role:"list",data:G,renderRow:K,rowHeight:B})}var Ku=300,Bi=class extends ve{ref=Ia();componentWillEnter(e){this.ref.current.style.opacity="1",this.ref.current.style.transform="none",setTimeout(e,Ku)}componentWillLeave(e){this.ref.current.style.opacity="0",this.ref.current.style.transform="translateY(350%)",setTimeout(e,Ku)}render(){let{children:e}=this.props;return u("div",{className:"uppy-Informer-animated",ref:this.ref,children:e})}};function Nf(r,e){return Object.assign(r,e)}function Bf(r,e){return r?.key??e}function Lf(r,e){let t=r._ptgLinkedRefs||(r._ptgLinkedRefs={});return t[e]||(t[e]=i=>{r.refs[e]=i})}function Lr(r){let e={};for(let t=0;t<r.length;t++)if(r[t]!=null){let i=Bf(r[t],t.toString(36));e[i]=r[t]}return e}function Mf(r,e){r=r||{},e=e||{};let t=o=>Object.hasOwn(e,o)?e[o]:r[o],i={},n=[];for(let o in r)Object.hasOwn(e,o)?n.length&&(i[o]=n,n=[]):n.push(o);let s={};for(let o in e){if(Object.hasOwn(i,o))for(let a=0;a<i[o].length;a++){let l=i[o][a];s[i[o][a]]=t(l)}s[o]=t(o)}for(let o=0;o<n.length;o++)s[n[o]]=t(n[o]);return s}var jf=r=>r,zf=(()=>{class r extends ve{constructor(t,i){super(t,i),this.refs={},this.state={children:Lr(je(je(this.props.children))||[])},this.performAppear=this.performAppear.bind(this),this.performEnter=this.performEnter.bind(this),this.performLeave=this.performLeave.bind(this)}componentWillMount(){this.currentlyTransitioningKeys={},this.keysToAbortLeave=[],this.keysToEnter=[],this.keysToLeave=[]}componentDidMount(){let t=this.state.children;for(let i in t)t[i]&&this.performAppear(i)}componentWillReceiveProps(t){let i=Lr(je(t.children)||[]),n=this.state.children;this.setState(o=>({children:Mf(o.children,i)}));let s;for(s in i)if(Object.hasOwn(i,s)){let o=n&&Object.hasOwn(n,s);i[s]&&o&&this.currentlyTransitioningKeys[s]?(this.keysToEnter.push(s),this.keysToAbortLeave.push(s)):i[s]&&!o&&!this.currentlyTransitioningKeys[s]&&this.keysToEnter.push(s)}for(s in n)if(Object.hasOwn(n,s)){let o=i&&Object.hasOwn(i,s);n[s]&&!o&&!this.currentlyTransitioningKeys[s]&&this.keysToLeave.push(s)}}componentDidUpdate(){let{keysToEnter:t}=this;this.keysToEnter=[],t.forEach(this.performEnter);let{keysToLeave:i}=this;this.keysToLeave=[],i.forEach(this.performLeave)}_finishAbort(t){let i=this.keysToAbortLeave.indexOf(t);i!==-1&&this.keysToAbortLeave.splice(i,1)}performAppear(t){this.currentlyTransitioningKeys[t]=!0;let i=this.refs[t];i?.componentWillAppear?i.componentWillAppear(this._handleDoneAppearing.bind(this,t)):this._handleDoneAppearing(t)}_handleDoneAppearing(t){let i=this.refs[t];i?.componentDidAppear&&i.componentDidAppear(),delete this.currentlyTransitioningKeys[t],this._finishAbort(t);let n=Lr(je(this.props.children)||[]);(!n||!Object.hasOwn(n,t))&&this.performLeave(t)}performEnter(t){this.currentlyTransitioningKeys[t]=!0;let i=this.refs[t];i?.componentWillEnter?i.componentWillEnter(this._handleDoneEntering.bind(this,t)):this._handleDoneEntering(t)}_handleDoneEntering(t){let i=this.refs[t];i?.componentDidEnter&&i.componentDidEnter(),delete this.currentlyTransitioningKeys[t],this._finishAbort(t);let n=Lr(je(this.props.children)||[]);(!n||!Object.hasOwn(n,t))&&this.performLeave(t)}performLeave(t){if(this.keysToAbortLeave.indexOf(t)!==-1)return;this.currentlyTransitioningKeys[t]=!0;let n=this.refs[t];n?.componentWillLeave?n.componentWillLeave(this._handleDoneLeaving.bind(this,t)):this._handleDoneLeaving(t)}_handleDoneLeaving(t){if(this.keysToAbortLeave.indexOf(t)!==-1)return;let n=this.refs[t];n?.componentDidLeave&&n.componentDidLeave(),delete this.currentlyTransitioningKeys[t];let s=Lr(je(this.props.children)||[]);if(s&&Object.hasOwn(s,t))this.performEnter(t);else{let o=Nf({},this.state.children);delete o[t],this.setState({children:o})}}render(v,{children:g}){var x=v,{childFactory:t,transitionLeave:i,transitionName:n,transitionAppear:s,transitionEnter:o,transitionLeaveTimeout:a,transitionEnterTimeout:l,transitionAppearTimeout:c,component:p}=x,d=wt(x,["childFactory","transitionLeave","transitionName","transitionAppear","transitionEnter","transitionLeaveTimeout","transitionEnterTimeout","transitionAppearTimeout","component"]);let A=Object.entries(g).map(([C,U])=>{if(!U)return;let F=Lf(this,C);return hi(t(U),{ref:F,key:C})}).filter(Boolean);return gr(p,d,A)}}return r.defaultProps={component:"span",childFactory:jf},r})(),Xu=zf;var Mr=class extends ve{render(){let{info:e}=this.props.uppy.getState();return u("div",{className:"uppy uppy-Informer",children:u(Xu,{children:e.map(t=>u(Bi,{children:u("p",{role:"alert",children:[t.message," ",t.details&&u("span",{"aria-label":t.details,"data-microtip-position":"top-left","data-microtip-size":"medium",role:"tooltip",onClick:()=>alert(`${t.message} 

 ${t.details}`),children:"?"})]})},t.message))})})}};var Yu=Q(Fe(),1);function Hf({activePickerPanel:r,className:e,hideAllPanels:t,i18n:i,state:n,uppy:s}){let o=Je(null);return u("div",{className:(0,Yu.default)("uppy-DashboardContent-panel",e),role:"tabpanel","data-uppy-panelType":"PickerPanel",id:`uppy-DashboardContent-panel--${r.id}`,onDragOver:ze,onDragLeave:ze,onDrop:ze,onPaste:ze,children:[u("div",{className:"uppy-DashboardContent-bar",children:[u("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":1,children:i("importFrom",{name:r.name})}),u("button",{className:"uppy-DashboardContent-back",type:"button",onClick:t,children:i("cancel")})]}),u("div",{ref:o,className:"uppy-DashboardContent-panelBody",children:s.getPlugin(r.id).render(n,o.current)})]})}var Qu=Hf;var He={STATE_ERROR:"error",STATE_WAITING:"waiting",STATE_PREPROCESSING:"preprocessing",STATE_UPLOADING:"uploading",STATE_POSTPROCESSING:"postprocessing",STATE_COMPLETE:"complete",STATE_PAUSED:"paused"};function qf(r,e,t,i={}){if(r)return He.STATE_ERROR;if(e)return He.STATE_COMPLETE;if(t)return He.STATE_PAUSED;let n=He.STATE_WAITING,s=Object.keys(i);for(let o=0;o<s.length;o++){let{progress:a}=i[s[o]];if(a.uploadStarted&&!a.uploadComplete)return He.STATE_UPLOADING;a.preprocess&&n!==He.STATE_UPLOADING&&(n=He.STATE_PREPROCESSING),a.postprocess&&n!==He.STATE_UPLOADING&&n!==He.STATE_PREPROCESSING&&(n=He.STATE_POSTPROCESSING)}return n}function Vf({files:r,i18n:e,isAllComplete:t,isAllErrored:i,isAllPaused:n,inProgressNotPausedFiles:s,newFiles:o,processingFiles:a}){switch(qf(i,t,n,r)){case"uploading":return e("uploadingXFiles",{smart_count:s.length});case"preprocessing":case"postprocessing":return e("processingXFiles",{smart_count:a.length});case"paused":return e("uploadPaused");case"waiting":return e("xFilesSelected",{smart_count:o.length});case"complete":return e("uploadComplete");case"error":return e("error");default:}}function $f(r){let{i18n:e,isAllComplete:t,hideCancelButton:i,maxNumberOfFiles:n,toggleAddFilesPanel:s,uppy:o}=r,{allowNewUpload:a}=r;return a&&n&&(a=r.totalFileCount<r.maxNumberOfFiles),u("div",{className:"uppy-DashboardContent-bar",children:[!t&&!i?u("button",{className:"uppy-DashboardContent-back",type:"button",onClick:()=>o.cancelAll(),children:e("cancel")}):u("div",{}),u("div",{className:"uppy-DashboardContent-title",children:u(Vf,m({},r))}),a?u("button",{className:"uppy-DashboardContent-addMore",type:"button","aria-label":e("addMoreFiles"),title:e("addMoreFiles"),onClick:()=>s(!0),children:[u("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"15",height:"15",viewBox:"0 0 15 15",children:u("path",{d:"M8 6.5h6a.5.5 0 0 1 .5.5v.5a.5.5 0 0 1-.5.5H8v6a.5.5 0 0 1-.5.5H7a.5.5 0 0 1-.5-.5V8h-6a.5.5 0 0 1-.5-.5V7a.5.5 0 0 1 .5-.5h6v-6A.5.5 0 0 1 7 0h.5a.5.5 0 0 1 .5.5v6z"})}),u("span",{className:"uppy-DashboardContent-addMoreCaption",children:e("addMore")})]}):u("div",{})]})}var Zu=$f;var ed=Q(Fe(),1);var Lt="uppy-transition-slideDownUp",Ju=250;function Gf({children:r}){let[e,t]=Ce(null),[i,n]=Ce(""),s=Je(),o=Je(),a=Je(),l=Be(()=>{n(`${Lt}-enter`),cancelAnimationFrame(a.current),clearTimeout(o.current),o.current=void 0,a.current=requestAnimationFrame(()=>{n(`${Lt}-enter ${Lt}-enter-active`),s.current=setTimeout(()=>{n("")},Ju)})},[]),c=Be(()=>{n(`${Lt}-leave`),cancelAnimationFrame(a.current),clearTimeout(s.current),s.current=void 0,a.current=requestAnimationFrame(()=>{n(`${Lt}-leave ${Lt}-leave-active`),o.current=setTimeout(()=>{t(null),n("")},Ju)})},[]);return Ne(()=>{let p=je(r)[0];e!==p&&(p&&!e?l():e&&!p&&!o.current&&c(),t(p))},[r,e,l,c]),Ne(()=>()=>{clearTimeout(s.current),clearTimeout(o.current),cancelAnimationFrame(a.current)},[]),e?hi(e,{className:(0,ed.default)(i,e.props.className)}):null}var jr=Gf;var ke={STATE_ERROR:"error",STATE_WAITING:"waiting",STATE_PREPROCESSING:"preprocessing",STATE_UPLOADING:"uploading",STATE_POSTPROCESSING:"postprocessing",STATE_COMPLETE:"complete"};var js=Q(Fe(),1);var Ns=Q(nr(),1);var Bs=Q(Fe(),1);var Wf="\xB7",td=()=>` ${Wf} `;function rd(r){let{newFiles:e,isUploadStarted:t,recoveredState:i,i18n:n,uploadState:s,isSomeGhost:o,startUpload:a}=r,l=(0,Bs.default)("uppy-u-reset","uppy-c-btn","uppy-StatusBar-actionBtn","uppy-StatusBar-actionBtn--upload",{"uppy-c-btn-primary":s===ke.STATE_WAITING},{"uppy-StatusBar-actionBtn--disabled":o}),c=e&&t&&!i?n("uploadXNewFiles",{smart_count:e}):n("uploadXFiles",{smart_count:e});return u("button",{type:"button",className:l,"aria-label":n("uploadXFiles",{smart_count:e}),onClick:a,disabled:o,"data-uppy-super-focusable":!0,children:c})}function id(r){let{i18n:e,uppy:t}=r;return u("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-StatusBar-actionBtn uppy-StatusBar-actionBtn--retry","aria-label":e("retryUpload"),onClick:()=>t.retryAll().catch(()=>{}),"data-uppy-super-focusable":!0,"data-cy":"retry",children:[u("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"8",height:"10",viewBox:"0 0 8 10",children:u("path",{d:"M4 2.408a2.75 2.75 0 1 0 2.75 2.75.626.626 0 0 1 1.25.018v.023a4 4 0 1 1-4-4.041V.25a.25.25 0 0 1 .389-.208l2.299 1.533a.25.25 0 0 1 0 .416l-2.3 1.533A.25.25 0 0 1 4 3.316v-.908z"})}),e("retry")]})}function nd(r){let{i18n:e,uppy:t}=r;return u("button",{type:"button",className:"uppy-u-reset uppy-StatusBar-actionCircleBtn",title:e("cancel"),"aria-label":e("cancel"),onClick:()=>t.cancelAll(),"data-cy":"cancel","data-uppy-super-focusable":!0,children:u("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"16",height:"16",viewBox:"0 0 16 16",children:u("g",{fill:"none",fillRule:"evenodd",children:[u("circle",{fill:"#888",cx:"8",cy:"8",r:"8"}),u("path",{fill:"#FFF",d:"M9.283 8l2.567 2.567-1.283 1.283L8 9.283 5.433 11.85 4.15 10.567 6.717 8 4.15 5.433 5.433 4.15 8 6.717l2.567-2.567 1.283 1.283z"})]})})})}function sd(r){let{isAllPaused:e,i18n:t,isAllComplete:i,resumableUploads:n,uppy:s}=r,o=t(e?"resume":"pause");function a(){if(!i){if(!n){s.cancelAll();return}if(e){s.resumeAll();return}s.pauseAll()}}return u("button",{title:o,"aria-label":o,className:"uppy-u-reset uppy-StatusBar-actionCircleBtn",type:"button",onClick:a,"data-cy":"togglePauseResume","data-uppy-super-focusable":!0,children:u("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"16",height:"16",viewBox:"0 0 16 16",children:u("g",{fill:"none",fillRule:"evenodd",children:[u("circle",{fill:"#888",cx:"8",cy:"8",r:"8"}),u("path",{fill:"#FFF",d:e?"M6 4.25L11.5 8 6 11.75z":"M5 4.5h2v7H5v-7zm4 0h2v7H9v-7z"})]})})})}function od(r){let{i18n:e,doneButtonHandler:t}=r;return u("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-StatusBar-actionBtn uppy-StatusBar-actionBtn--done",onClick:t,"data-uppy-super-focusable":!0,children:e("done")})}function ad(){return u("svg",{className:"uppy-StatusBar-spinner","aria-hidden":"true",focusable:"false",width:"14",height:"14",children:u("path",{d:"M13.983 6.547c-.12-2.509-1.64-4.893-3.939-5.936-2.48-1.127-5.488-.656-7.556 1.094C.524 3.367-.398 6.048.162 8.562c.556 2.495 2.46 4.52 4.94 5.183 2.932.784 5.61-.602 7.256-3.015-1.493 1.993-3.745 3.309-6.298 2.868-2.514-.434-4.578-2.349-5.153-4.84a6.226 6.226 0 0 1 2.98-6.778C6.34.586 9.74 1.1 11.373 3.493c.407.596.693 1.282.842 1.988.127.598.073 1.197.161 1.794.078.525.543 1.257 1.15.864.525-.341.49-1.05.456-1.592-.007-.15.02.3 0 0",fillRule:"evenodd"})})}function ld(r){let{progress:e}=r,{value:t,mode:i,message:n}=e;return u("div",{className:"uppy-StatusBar-content",children:[u(ad,{}),i==="determinate"?`${Math.round(t*100)}% \xB7 `:"",n]})}function Kf(r){let{numUploads:e,complete:t,totalUploadedSize:i,totalSize:n,totalETA:s,i18n:o}=r,a=e>1,l=(0,Ns.default)(i);return u("div",{className:"uppy-StatusBar-statusSecondary",children:[a&&o("filesUploadedOfTotal",{complete:t,smart_count:e}),u("span",{className:"uppy-StatusBar-additionalInfo",children:[a&&td(),n!=null?o("dataUploadedOfTotal",{complete:l,total:(0,Ns.default)(n)}):o("dataUploadedOfUnknown",{complete:l}),td(),s!=null&&o("xTimeLeft",{time:ui(s)})]})]})}function ud(r){let{i18n:e,complete:t,numUploads:i}=r;return u("div",{className:"uppy-StatusBar-statusSecondary",children:e("filesUploadedOfTotal",{complete:t,smart_count:i})})}function Xf(r){let{i18n:e,newFiles:t,startUpload:i}=r,n=(0,Bs.default)("uppy-u-reset","uppy-c-btn","uppy-StatusBar-actionBtn","uppy-StatusBar-actionBtn--uploadNewlyAdded");return u("div",{className:"uppy-StatusBar-statusSecondary",children:[u("div",{className:"uppy-StatusBar-statusSecondaryHint",children:e("xMoreFilesAdded",{smart_count:t})}),u("button",{type:"button",className:n,"aria-label":e("uploadXFiles",{smart_count:t}),onClick:i,children:e("upload")})]})}function dd(r){let{i18n:e,supportsUploadProgress:t,totalProgress:i,hideProgressDetails:n,isUploadStarted:s,isAllComplete:o,isAllPaused:a,newFiles:l,numUploads:c,complete:p,totalUploadedSize:d,totalSize:g,totalETA:v,startUpload:x}=r,A=l&&s;if(!s||o)return null;let C=e(a?"paused":"uploading");function U(){return!a&&!A&&!n?t?u(Kf,{numUploads:c,complete:p,totalUploadedSize:d,totalSize:g,totalETA:v,i18n:e}):u(ud,{i18n:e,complete:p,numUploads:c}):null}return u("div",{className:"uppy-StatusBar-content",title:C,children:[a?null:u(ad,{}),u("div",{className:"uppy-StatusBar-status",children:[u("div",{className:"uppy-StatusBar-statusPrimary",children:t&&i!==0?`${C}: ${i}%`:C}),U(),A?u(Xf,{i18n:e,newFiles:l,startUpload:x}):null]})]})}function cd(r){let{i18n:e}=r;return u("div",{className:"uppy-StatusBar-content",role:"status",title:e("complete"),children:u("div",{className:"uppy-StatusBar-status",children:u("div",{className:"uppy-StatusBar-statusPrimary",children:[u("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-StatusBar-statusIndicator uppy-c-icon",width:"15",height:"11",viewBox:"0 0 15 11",children:u("path",{d:"M.414 5.843L1.627 4.63l3.472 3.472L13.202 0l1.212 1.213L5.1 10.528z"})}),e("complete")]})})})}function pd(r){let{error:e,i18n:t,complete:i,numUploads:n}=r;function s(){let o=`${t("uploadFailed")} 

 ${e}`;alert(o)}return u("div",{className:"uppy-StatusBar-content",title:t("uploadFailed"),children:[u("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-StatusBar-statusIndicator uppy-c-icon",width:"11",height:"11",viewBox:"0 0 11 11",children:u("path",{d:"M4.278 5.5L0 1.222 1.222 0 5.5 4.278 9.778 0 11 1.222 6.722 5.5 11 9.778 9.778 11 5.5 6.722 1.222 11 0 9.778z"})}),u("div",{className:"uppy-StatusBar-status",children:[u("div",{className:"uppy-StatusBar-statusPrimary",children:[t("uploadFailed"),u("button",{className:"uppy-u-reset uppy-StatusBar-details","aria-label":t("showErrorDetails"),"data-microtip-position":"top-right","data-microtip-size":"medium",onClick:s,type:"button",children:"?"})]}),u(ud,{i18n:t,complete:i,numUploads:n})]})]})}function zr(r){let e=[],t="indeterminate",i;for(let{progress:s}of Object.values(r)){let{preprocess:o,postprocess:a}=s;i==null&&(o||a)&&({mode:t,message:i}=o||a),o?.mode==="determinate"&&e.push(o.value),a?.mode==="determinate"&&e.push(a.value)}let n=e.reduce((s,o)=>s+o/e.length,0);return{mode:t,message:i,value:n}}var{STATE_ERROR:hd,STATE_WAITING:Yf,STATE_PREPROCESSING:Ls,STATE_UPLOADING:Li,STATE_POSTPROCESSING:Ms,STATE_COMPLETE:Mi}=ke;function zs({newFiles:r,allowNewUpload:e,isUploadInProgress:t,isAllPaused:i,resumableUploads:n,error:s,hideUploadButton:o=void 0,hidePauseResumeButton:a=!1,hideCancelButton:l=!1,hideRetryButton:c=!1,recoveredState:p,uploadState:d,totalProgress:g,files:v,supportsUploadProgress:x,hideAfterFinish:A=!1,isSomeGhost:C,doneButtonHandler:U=void 0,isUploadStarted:F,i18n:k,startUpload:N,uppy:M,isAllComplete:R,hideProgressDetails:B=void 0,numUploads:G,complete:K,totalSize:me,totalETA:X,totalUploadedSize:ue}){function de(){switch(d){case Ms:case Ls:{let W=zr(v);return W.mode==="determinate"?W.value*100:g}case hd:return null;case Li:return x?g:null;default:return g}}function Oe(){switch(d){case Ms:case Ls:{let{mode:W}=zr(v);return W==="indeterminate"}case Li:return!x;default:return!1}}let Ue=de(),y=Ue??100,h=!s&&r&&(!t&&!i||p)&&e&&!o,f=!l&&d!==Yf&&d!==Mi,P=n&&!a&&d===Li,T=s&&!R&&!c,E=U&&d===Mi,_=(0,js.default)("uppy-StatusBar-progress",{"is-indeterminate":Oe()}),b=(0,js.default)("uppy-StatusBar",`is-${d}`,{"has-ghosts":C}),w=(()=>{switch(d){case Ls:case Ms:return u(ld,{progress:zr(v)});case Mi:return u(cd,{i18n:k});case hd:return u(pd,{error:s,i18n:k,numUploads:G,complete:K});case Li:return u(dd,{i18n:k,supportsUploadProgress:x,totalProgress:g,hideProgressDetails:B,isUploadStarted:F,isAllComplete:R,isAllPaused:i,newFiles:r,numUploads:G,complete:K,totalUploadedSize:ue,totalSize:me,totalETA:X,startUpload:N});default:return null}})();return!(h||T||P||f||E)&&!w||d===Mi&&A?null:u("div",{className:b,children:[u("div",{className:_,style:{width:`${y}%`},role:"progressbar","aria-label":`${y}%`,"aria-valuetext":`${y}%`,"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":Ue}),w,u("div",{className:"uppy-StatusBar-actions",children:[h?u(rd,{newFiles:r,isUploadStarted:F,recoveredState:p,i18n:k,isSomeGhost:C,startUpload:N,uploadState:d}):null,T?u(id,{i18n:k,uppy:M}):null,P?u(sd,{isAllPaused:i,i18n:k,isAllComplete:R,resumableUploads:n,uppy:M}):null,f?u(nd,{i18n:k,uppy:M}):null,E?u(od,{i18n:k,doneButtonHandler:U}):null]})]})}var Qf=2e3,Zf=2e3;function Jf(r,e,t,i){if(r)return ke.STATE_ERROR;if(e)return ke.STATE_COMPLETE;if(t)return ke.STATE_WAITING;let n=ke.STATE_WAITING,s=Object.keys(i);for(let o=0;o<s.length;o++){let{progress:a}=i[s[o]];if(a.uploadStarted&&!a.uploadComplete)return ke.STATE_UPLOADING;a.preprocess&&(n=ke.STATE_PREPROCESSING),a.postprocess&&n!==ke.STATE_PREPROCESSING&&(n=ke.STATE_POSTPROCESSING)}return n}var ji=class extends ve{#e;#t;#r;#i;componentDidMount(){this.#e=performance.now(),this.#t=this.props.uppy.getFiles().reduce((e,t)=>e+(t.progress.bytesUploaded||0),0),this.props.uppy.on("upload",this.#n)}componentWillUnmount(){this.props.uppy.off("upload",this.#n)}#n=()=>{let{recoveredState:e}=this.props.uppy.getState();if(this.#r=null,this.#i=null,e){this.#t=Object.values(e.files).reduce((t,{progress:i})=>t+(i.bytesUploaded||0),0),this.props.uppy.emit("restore-confirmed");return}this.#e=performance.now(),this.#t=0};#u(e){if(e.total==null||e.total===0)return null;let t=e.total-e.uploaded;if(t<=0)return null;this.#e??=performance.now();let i=performance.now()-this.#e;if(i===0)return Math.round((this.#i??0)/100)/10;if(this.#t==null)return this.#t=e.uploaded,null;let n=e.uploaded-this.#t;if(this.#t=e.uploaded,n<=0)return Math.round((this.#i??0)/100)/10;let s=n/i;if(!Number.isFinite(s)||s<=0)return null;let o=this.#r==null?s:sr(s,this.#r,Qf,i);if(!Number.isFinite(o)||o<=0)return null;this.#r=o;let a=t/o;if(!Number.isFinite(a)||a<0)return null;let l=Math.max((this.#i??0)-i,0),c=this.#i==null?a:sr(a,l,Zf,i);return!Number.isFinite(c)||c<0?null:(this.#i=c,this.#e=performance.now(),Math.round(c/100)/10)}startUpload=()=>this.props.uppy.upload().catch(()=>{});render(){let{capabilities:e,files:t,allowNewUpload:i,totalProgress:n,error:s,recoveredState:o}=this.props.uppy.getState(),{newFiles:a,startedFiles:l,completeFiles:c,isUploadStarted:p,isAllComplete:d,isAllPaused:g,isUploadInProgress:v,isSomeGhost:x}=this.props.uppy.getObjectOfFilesPerState(),A=o?Object.values(t):a,C=!!e.resumableUploads,U=e.uploadProgress!==!1,F=null,k=0;l.every(M=>M.progress.bytesTotal!=null&&M.progress.bytesTotal!==0)?(F=0,l.forEach(M=>{F+=M.progress.bytesTotal||0,k+=M.progress.bytesUploaded||0})):l.forEach(M=>{k+=M.progress.bytesUploaded||0});let N=this.#u({uploaded:k,total:F});return u(zs,{error:s,uploadState:Jf(s,d,o,t||{}),allowNewUpload:i,totalProgress:n,totalSize:F,totalUploadedSize:k,isAllComplete:d,isAllPaused:g,isUploadStarted:p,isUploadInProgress:v,isSomeGhost:x,recoveredState:o,complete:c.length,newFiles:A.length,numUploads:l.length,totalETA:N,files:t,i18n:this.props.i18n,uppy:this.props.uppy,startUpload:this.startUpload,doneButtonHandler:this.props.doneButtonHandler,resumableUploads:C,supportsUploadProgress:U,hideProgressDetails:this.props.hideProgressDetails,hideUploadButton:this.props.hideUploadButton,hideRetryButton:this.props.hideRetryButton,hidePauseResumeButton:this.props.hidePauseResumeButton,hideCancelButton:this.props.hideCancelButton,hideAfterFinish:this.props.hideAfterFinish})}};var fd=900,md=700,Hs=576,gd=330;function qs(r){let e=r.totalFileCount===0,t=r.totalFileCount===1,i=r.containerWidth>Hs,n=r.containerHeight>gd,s=(0,yd.default)({"uppy-Dashboard":!0,"uppy-Dashboard--isDisabled":r.disabled,"uppy-Dashboard--animateOpenClose":r.animateOpenClose,"uppy-Dashboard--isClosing":r.isClosing,"uppy-Dashboard--isDraggingOver":r.isDraggingOver,"uppy-Dashboard--modal":!r.inline,"uppy-size--md":r.containerWidth>Hs,"uppy-size--lg":r.containerWidth>md,"uppy-size--xl":r.containerWidth>fd,"uppy-size--height-md":r.containerHeight>gd,"uppy-Dashboard--isAddFilesPanelVisible":r.showAddFilesPanel,"uppy-Dashboard--isInnerWrapVisible":r.areInsidesReadyToBeVisible,"uppy-Dashboard--singleFile":r.singleFileFullScreen&&t&&n}),o=1;r.containerWidth>fd?o=5:r.containerWidth>md?o=4:r.containerWidth>Hs&&(o=3);let a=r.showSelectedFiles&&!e,l=r.recoveredState?Object.keys(r.recoveredState.files).length:null,c=r.files?Object.keys(r.files).filter(g=>r.files[g].isGhost).length:0,p=()=>c>0?r.i18n("recoveredXFiles",{smart_count:c}):r.i18n("recoveredAllFiles");return u("div",{className:s,"data-uppy-theme":r.theme,"data-uppy-num-acquirers":r.acquirers.length,"data-uppy-drag-drop-supported":!r.disableLocalFiles&&li(),"aria-hidden":r.inline?"false":r.isHidden,"aria-disabled":r.disabled,"aria-label":r.inline?r.i18n("dashboardTitle"):r.i18n("dashboardWindowTitle"),onPaste:r.handlePaste,onDragOver:r.handleDragOver,onDragLeave:r.handleDragLeave,onDrop:r.handleDrop,children:[u("div",{"aria-hidden":"true",className:"uppy-Dashboard-overlay",tabIndex:-1,onClick:r.handleClickOutside}),u("div",{className:"uppy-Dashboard-inner",role:r.inline?void 0:"dialog",style:{width:r.inline&&r.width?r.width:"",height:r.inline&&r.height?r.height:""},children:[r.inline?null:u("button",{className:"uppy-u-reset uppy-Dashboard-close",type:"button","aria-label":r.i18n("closeModal"),title:r.i18n("closeModal"),onClick:r.closeModal,children:u("span",{"aria-hidden":"true",children:"\xD7"})}),u("div",{className:"uppy-Dashboard-innerWrap",children:[u("div",{className:"uppy-Dashboard-dropFilesHereHint",children:r.i18n("dropHint")}),a&&u(Zu,m({},r)),l&&u("div",{className:"uppy-Dashboard-serviceMsg",children:[u("svg",{className:"uppy-Dashboard-serviceMsg-icon","aria-hidden":"true",focusable:"false",width:"21",height:"16",viewBox:"0 0 24 19",children:u("g",{transform:"translate(0 -1)",fill:"none",fillRule:"evenodd",children:[u("path",{d:"M12.857 1.43l10.234 17.056A1 1 0 0122.234 20H1.766a1 1 0 01-.857-1.514L11.143 1.429a1 1 0 011.714 0z",fill:"#FFD300"}),u("path",{fill:"#000",d:"M11 6h2l-.3 8h-1.4z"}),u("circle",{fill:"#000",cx:"12",cy:"17",r:"1"})]})}),u("strong",{className:"uppy-Dashboard-serviceMsg-title",children:r.i18n("sessionRestored")}),u("div",{className:"uppy-Dashboard-serviceMsg-text",children:p()})]}),a?u(Rs,{id:r.id,i18n:r.i18n,uppy:r.uppy,files:r.files,resumableUploads:r.resumableUploads,hideRetryButton:r.hideRetryButton,hidePauseResumeButton:r.hidePauseResumeButton,hideCancelButton:r.hideCancelButton,showLinkToFileUploadResult:r.showLinkToFileUploadResult,showRemoveButtonAfterComplete:r.showRemoveButtonAfterComplete,metaFields:r.metaFields,toggleFileCard:r.toggleFileCard,handleRequestThumbnail:r.handleRequestThumbnail,handleCancelThumbnail:r.handleCancelThumbnail,recoveredState:r.recoveredState,individualCancellation:r.individualCancellation,openFileEditor:r.openFileEditor,canEditFile:r.canEditFile,toggleAddFilesPanel:r.toggleAddFilesPanel,isSingleFile:t,itemsPerRow:o,containerWidth:r.containerWidth,containerHeight:r.containerHeight}):u(Di,{i18n:r.i18n,i18nArray:r.i18nArray,acquirers:r.acquirers,handleInputChange:r.handleInputChange,maxNumberOfFiles:r.maxNumberOfFiles,allowedFileTypes:r.allowedFileTypes,showNativePhotoCameraButton:r.showNativePhotoCameraButton,showNativeVideoCameraButton:r.showNativeVideoCameraButton,nativeCameraFacingMode:r.nativeCameraFacingMode,showPanel:r.showPanel,activePickerPanel:r.activePickerPanel,disableLocalFiles:r.disableLocalFiles,fileManagerSelectionType:r.fileManagerSelectionType,note:r.note,proudlyDisplayPoweredByUppy:r.proudlyDisplayPoweredByUppy}),u(jr,{children:r.showAddFilesPanel?u(ju,O(m({},r),{isSizeMD:i}),"AddFiles"):null}),u(jr,{children:r.fileCardFor?u(Cs,m({},r),"FileCard"):null}),u(jr,{children:r.activePickerPanel?u(Qu,m({},r),"Picker"):null}),u(jr,{children:r.showFileEditor?u(Hu,m({},r),"Editor"):null}),u("div",{className:"uppy-Dashboard-progressindicators",children:[!r.disableInformer&&u(Mr,{uppy:r.uppy}),!r.disableStatusBar&&u(ji,{uppy:r.uppy,i18n:r.i18n,hideProgressDetails:r.hideProgressDetails,hideUploadButton:r.hideUploadButton,hideRetryButton:r.hideRetryButton,hidePauseResumeButton:r.hidePauseResumeButton,hideCancelButton:r.hideCancelButton,hideAfterFinish:r.hideProgressAfterFinish,doneButtonHandler:r.doneButtonHandler}),!r.disableInformer&&u(Mr,{uppy:r.uppy}),r.progressindicators.map(g=>r.uppy.getPlugin(g.id).render(r.state))]})]})]})]})}var vd={strings:{closeModal:"Close Modal",addMoreFiles:"Add more files",addingMoreFiles:"Adding more files",importFrom:"Import from %{name}",dashboardWindowTitle:"Uppy Dashboard Window (Press escape to close)",dashboardTitle:"Uppy Dashboard",copyLinkToClipboardSuccess:"Link copied to clipboard.",copyLinkToClipboardFallback:"Copy the URL below",copyLink:"Copy link",back:"Back",removeFile:"Remove file",editFile:"Edit file",editImage:"Edit image",editing:"Editing %{file}",error:"Error",finishEditingFile:"Finish editing file",saveChanges:"Save changes",myDevice:"My Device",dropHint:"Drop your files here",uploadComplete:"Upload complete",uploadPaused:"Upload paused",resumeUpload:"Resume upload",pauseUpload:"Pause upload",retryUpload:"Retry upload",cancelUpload:"Cancel upload",xFilesSelected:{0:"%{smart_count} file selected",1:"%{smart_count} files selected"},uploadingXFiles:{0:"Uploading %{smart_count} file",1:"Uploading %{smart_count} files"},processingXFiles:{0:"Processing %{smart_count} file",1:"Processing %{smart_count} files"},poweredBy:"Powered by %{uppy}",addMore:"Add more",editFileWithFilename:"Edit file %{file}",save:"Save",cancel:"Cancel",dropPasteFiles:"Drop files here or %{browseFiles}",dropPasteFolders:"Drop files here or %{browseFolders}",dropPasteBoth:"Drop files here, %{browseFiles} or %{browseFolders}",dropPasteImportFiles:"Drop files here, %{browseFiles} or import from:",dropPasteImportFolders:"Drop files here, %{browseFolders} or import from:",dropPasteImportBoth:"Drop files here, %{browseFiles}, %{browseFolders} or import from:",importFiles:"Import files from:",browseFiles:"browse files",browseFolders:"browse folders",recoveredXFiles:{0:"We could not fully recover 1 file. Please re-select it and resume the upload.",1:"We could not fully recover %{smart_count} files. Please re-select them and resume the upload."},recoveredAllFiles:"We restored all files. You can now resume the upload.",sessionRestored:"Session restored",reSelect:"Re-select",missingRequiredMetaFields:{0:"Missing required meta field: %{fields}.",1:"Missing required meta fields: %{fields}."},takePictureBtn:"Take Picture",recordVideoBtn:"Record Video",uploading:"Uploading",complete:"Complete",uploadFailed:"Upload failed",paused:"Paused",retry:"Retry",pause:"Pause",resume:"Resume",done:"Done",filesUploadedOfTotal:{0:"%{complete} of %{smart_count} file uploaded",1:"%{complete} of %{smart_count} files uploaded"},dataUploadedOfTotal:"%{complete} of %{total}",dataUploadedOfUnknown:"%{complete} of unknown",xTimeLeft:"%{time} left",uploadXFiles:{0:"Upload %{smart_count} file",1:"Upload %{smart_count} files"},uploadXNewFiles:{0:"Upload +%{smart_count} file",1:"Upload +%{smart_count} files"},upload:"Upload",xMoreFilesAdded:{0:"%{smart_count} more file added",1:"%{smart_count} more files added"},showErrorDetails:"Show error details"}};var bd=Q(Vn(),1);function Hr(r,e){if(e){let t=r.querySelector(`[data-uppy-paneltype="${e}"]`);if(t)return t}return r}function Vs(){let r=!1;return(0,bd.default)((t,i)=>{let n=Hr(t,i),s=n.contains(document.activeElement);if(s&&r)return;let o=n.querySelector("[data-uppy-super-focusable]");s&&!o||(o?(o.focus({preventScroll:!0}),r=!0):(n.querySelector(or)?.focus({preventScroll:!0}),r=!1))},260)}function wd(r,e){let t=e[0];t&&(t.focus(),r.preventDefault())}function em(r,e){let t=e[e.length-1];t&&(t.focus(),r.preventDefault())}function tm(r){return r.contains(document.activeElement)}function $s(r,e,t){let i=Hr(t,e),n=Ke(i.querySelectorAll(or)),s=n.indexOf(document.activeElement);tm(i)?r.shiftKey&&s===0?em(r,n):!r.shiftKey&&s===n.length-1&&wd(r,n):wd(r,n)}function _d(r,e,t){e===null||$s(r,e,t)}var xd=9,im=27;function Sd(){let r={};return r.promise=new Promise((e,t)=>{r.resolve=e,r.reject=t}),r}var nm={target:"body",metaFields:[],thumbnailWidth:280,thumbnailType:"image/jpeg",waitForThumbnailsBeforeUpload:!1,defaultPickerIcon:Er,showLinkToFileUploadResult:!1,hideProgressDetails:!1,hideUploadButton:!1,hideCancelButton:!1,hideRetryButton:!1,hidePauseResumeButton:!1,hideProgressAfterFinish:!1,note:null,singleFileFullScreen:!0,disableStatusBar:!1,disableInformer:!1,disableThumbnailGenerator:!1,fileManagerSelectionType:"files",proudlyDisplayPoweredByUppy:!0,showSelectedFiles:!0,showRemoveButtonAfterComplete:!1,showNativePhotoCameraButton:!1,showNativeVideoCameraButton:!1,theme:"light",autoOpen:null,disabled:!1,disableLocalFiles:!1,nativeCameraFacingMode:"",onDragLeave:()=>{},onDragOver:()=>{},onDrop:()=>{},plugins:[],doneButtonHandler:void 0,onRequestCloseModal:null,inline:!1,animateOpenClose:!0,browserBackButtonClose:!1,closeAfterFinish:!1,closeModalOnClickOutside:!1,disablePageScrollWhenModalOpen:!0,trigger:null,width:750,height:550},qr=class extends _r{static VERSION=Lu.version;#e;modalName=`uppy-Dashboard-${et()}`;superFocus=Vs();ifFocusedOnUppyRecently=!1;dashboardIsDisabled;savedScrollPosition;savedActiveElement;resizeObserver;darkModeMediaQuery;makeDashboardInsidesVisibleAnywayTimeout;constructor(e,t){let i=t?.autoOpen??null;super(e,O(m(m({},nm),t),{autoOpen:i})),this.id=this.opts.id||"Dashboard",this.title="Dashboard",this.type="orchestrator",this.defaultLocale=vd,this.opts.doneButtonHandler===void 0&&(this.opts.doneButtonHandler=()=>{this.uppy.clear(),this.requestCloseModal()}),this.opts.onRequestCloseModal??=()=>this.closeModal(),this.i18nInit()}removeTarget=e=>{let i=this.getPluginState().targets.filter(n=>n.id!==e.id);this.setPluginState({targets:i})};addTarget=e=>{let t=e.id||e.constructor.name,i=e.title||t,n=e.type;if(n!=="acquirer"&&n!=="progressindicator"&&n!=="editor")return this.uppy.log("Dashboard: can only be targeted by plugins of types: acquirer, progressindicator, editor","error"),null;let s={id:t,name:i,type:n},a=this.getPluginState().targets.slice();return a.push(s),this.setPluginState({targets:a}),this.el};hideAllPanels=()=>{let e=this.getPluginState(),t={activePickerPanel:void 0,showAddFilesPanel:!1,activeOverlayType:null,fileCardFor:null,showFileEditor:!1};e.activePickerPanel===t.activePickerPanel&&e.showAddFilesPanel===t.showAddFilesPanel&&e.showFileEditor===t.showFileEditor&&e.activeOverlayType===t.activeOverlayType||(this.setPluginState(t),this.uppy.emit("dashboard:close-panel",e.activePickerPanel?.id))};showPanel=e=>{let{targets:t}=this.getPluginState(),i=t.find(n=>n.type==="acquirer"&&n.id===e);this.setPluginState({activePickerPanel:i,activeOverlayType:"PickerPanel"}),this.uppy.emit("dashboard:show-panel",e)};canEditFile=e=>{let{targets:t}=this.getPluginState();return this.#a(t).some(n=>this.uppy.getPlugin(n.id).canEditFile(e))};openFileEditor=e=>{let{targets:t}=this.getPluginState(),i=this.#a(t);this.setPluginState({showFileEditor:!0,fileCardFor:e.id||null,activeOverlayType:"FileEditor"}),i.forEach(n=>{this.uppy.getPlugin(n.id).selectFile(e)})};closeFileEditor=()=>{let{metaFields:e}=this.getPluginState();e&&e.length>0?this.setPluginState({showFileEditor:!1,activeOverlayType:"FileCard"}):this.setPluginState({showFileEditor:!1,fileCardFor:null,activeOverlayType:"AddFiles"})};saveFileEditor=()=>{let{targets:e}=this.getPluginState();this.#a(e).forEach(i=>{this.uppy.getPlugin(i.id).save()}),this.closeFileEditor()};openModal=()=>{let{promise:e,resolve:t}=Sd();if(this.savedScrollPosition=window.pageYOffset,this.savedActiveElement=document.activeElement,this.opts.disablePageScrollWhenModalOpen&&document.body.classList.add("uppy-Dashboard-isFixed"),this.opts.animateOpenClose&&this.getPluginState().isClosing){let i=()=>{this.setPluginState({isHidden:!1}),this.el.removeEventListener("animationend",i,!1),t()};this.el.addEventListener("animationend",i,!1)}else this.setPluginState({isHidden:!1}),t();return this.opts.browserBackButtonClose&&this.updateBrowserHistory(),document.addEventListener("keydown",this.handleKeyDownInModal),this.uppy.emit("dashboard:modal-open"),e};closeModal=e=>{let t=e?.manualClose??!0,{isHidden:i,isClosing:n}=this.getPluginState();if(i||n)return;let{promise:s,resolve:o}=Sd();if(this.opts.disablePageScrollWhenModalOpen&&document.body.classList.remove("uppy-Dashboard-isFixed"),this.opts.animateOpenClose){this.setPluginState({isClosing:!0});let a=()=>{this.setPluginState({isHidden:!0,isClosing:!1}),this.superFocus.cancel(),this.savedActiveElement.focus(),this.el.removeEventListener("animationend",a,!1),o()};this.el.addEventListener("animationend",a,!1)}else this.setPluginState({isHidden:!0}),this.superFocus.cancel(),this.savedActiveElement.focus(),o();return document.removeEventListener("keydown",this.handleKeyDownInModal),t&&this.opts.browserBackButtonClose&&history.state?.[this.modalName]&&history.back(),this.uppy.emit("dashboard:modal-closed"),s};isModalOpen=()=>!this.getPluginState().isHidden||!1;requestCloseModal=()=>this.opts.onRequestCloseModal?this.opts.onRequestCloseModal():this.closeModal();setDarkModeCapability=e=>{let{capabilities:t}=this.uppy.getState();this.uppy.setState({capabilities:O(m({},t),{darkMode:e})})};handleSystemDarkModeChange=e=>{let t=e.matches;this.uppy.log(`[Dashboard] Dark mode is ${t?"on":"off"}`),this.setDarkModeCapability(t)};toggleFileCard=(e,t)=>{let i=this.uppy.getFile(t);e?this.uppy.emit("dashboard:file-edit-start",i):this.uppy.emit("dashboard:file-edit-complete",i),this.setPluginState({fileCardFor:e?t:null,activeOverlayType:e?"FileCard":null})};toggleAddFilesPanel=e=>{this.setPluginState({showAddFilesPanel:e,activeOverlayType:e?"AddFiles":null})};addFiles=e=>{let t=e.map(i=>({source:this.id,name:i.name,type:i.type,data:i,meta:{relativePath:i.relativePath||i.webkitRelativePath||null}}));try{this.uppy.addFiles(t)}catch(i){this.uppy.log(i)}};startListeningToResize=()=>{this.resizeObserver=new ResizeObserver(e=>{let t=e[0],{width:i,height:n}=t.contentRect;this.setPluginState({containerWidth:i,containerHeight:n,areInsidesReadyToBeVisible:!0})}),this.resizeObserver.observe(this.el.querySelector(".uppy-Dashboard-inner")),this.makeDashboardInsidesVisibleAnywayTimeout=setTimeout(()=>{let e=this.getPluginState(),t=!this.opts.inline&&e.isHidden;!e.areInsidesReadyToBeVisible&&!t&&(this.uppy.log("[Dashboard] resize event didn\u2019t fire on time: defaulted to mobile layout","warning"),this.setPluginState({areInsidesReadyToBeVisible:!0}))},1e3)};stopListeningToResize=()=>{this.resizeObserver.disconnect(),clearTimeout(this.makeDashboardInsidesVisibleAnywayTimeout)};recordIfFocusedOnUppyRecently=e=>{this.el.contains(e.target)?this.ifFocusedOnUppyRecently=!0:(this.ifFocusedOnUppyRecently=!1,this.superFocus.cancel())};disableInteractiveElements=e=>{let t=["a[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])",'[role="button"]:not([disabled])'],i=this.#e??Ke(this.el.querySelectorAll(t)).filter(n=>!n.classList.contains("uppy-Dashboard-close"));for(let n of i)n.tagName==="A"?n.setAttribute("aria-disabled",e):n.disabled=e;e?this.#e=i:this.#e=null,this.dashboardIsDisabled=e};updateBrowserHistory=()=>{history.state?.[this.modalName]||history.pushState(O(m({},history.state),{[this.modalName]:!0}),""),window.addEventListener("popstate",this.handlePopState,!1)};handlePopState=e=>{this.isModalOpen()&&(!e.state||!e.state[this.modalName])&&this.closeModal({manualClose:!1}),!this.isModalOpen()&&e.state?.[this.modalName]&&history.back()};handleKeyDownInModal=e=>{e.keyCode===im&&this.requestCloseModal(),e.keyCode===xd&&$s(e,this.getPluginState().activeOverlayType,this.el)};handleClickOutside=()=>{this.opts.closeModalOnClickOutside&&this.requestCloseModal()};handlePaste=e=>{this.uppy.iteratePlugins(i=>{i.type==="acquirer"&&i.handleRootPaste?.(e)});let t=Ke(e.clipboardData.files);t.length>0&&(this.uppy.log("[Dashboard] Files pasted"),this.addFiles(t))};handleInputChange=e=>{e.preventDefault();let t=Ke(e.currentTarget.files||[]);t.length>0&&(this.uppy.log("[Dashboard] Files selected through input"),this.addFiles(t))};handleDragOver=e=>{e.preventDefault(),e.stopPropagation();let t=()=>{let o=!0;return this.uppy.iteratePlugins(a=>{a.canHandleRootDrop?.(e)&&(o=!0)}),o},i=()=>{let{types:o}=e.dataTransfer;return o.some(a=>a==="Files")},n=t(),s=i();if(!n&&!s||this.opts.disabled||this.opts.disableLocalFiles&&(s||!n)||!this.uppy.getState().allowNewUpload){e.dataTransfer.dropEffect="none";return}e.dataTransfer.dropEffect="copy",this.setPluginState({isDraggingOver:!0}),this.opts.onDragOver(e)};handleDragLeave=e=>{e.preventDefault(),e.stopPropagation(),this.setPluginState({isDraggingOver:!1}),this.opts.onDragLeave(e)};handleDrop=async e=>{e.preventDefault(),e.stopPropagation(),this.setPluginState({isDraggingOver:!1}),this.uppy.iteratePlugins(s=>{s.type==="acquirer"&&s.handleRootDrop?.(e)});let t=!1,i=s=>{this.uppy.log(s,"error"),t||(this.uppy.info(s.message,"error"),t=!0)};this.uppy.log("[Dashboard] Processing dropped files");let n=await ai(e.dataTransfer,{logDropError:i});n.length>0&&(this.uppy.log("[Dashboard] Files dropped"),this.addFiles(n)),this.opts.onDrop(e)};handleRequestThumbnail=e=>{this.opts.waitForThumbnailsBeforeUpload||this.uppy.emit("thumbnail:request",e)};handleCancelThumbnail=e=>{this.opts.waitForThumbnailsBeforeUpload||this.uppy.emit("thumbnail:cancel",e)};handleKeyDownInInline=e=>{e.keyCode===xd&&_d(e,this.getPluginState().activeOverlayType,this.el)};handlePasteOnBody=e=>{this.el.contains(document.activeElement)&&this.handlePaste(e)};handleComplete=({failed:e})=>{this.opts.closeAfterFinish&&!e?.length&&this.requestCloseModal()};handleCancelRestore=()=>{this.uppy.emit("restore-canceled")};#t=()=>{if(this.opts.disableThumbnailGenerator)return;let e=600,t=this.uppy.getFiles();if(t.length===1){let i=this.uppy.getPlugin(`${this.id}:ThumbnailGenerator`);i?.setOptions({thumbnailWidth:e});let n=O(m({},t[0]),{preview:void 0});i?.requestThumbnail(n).then(()=>{i?.setOptions({thumbnailWidth:this.opts.thumbnailWidth})})}};#r=e=>{let t=e[0],{metaFields:i}=this.getPluginState(),n=i&&i.length>0,s=this.canEditFile(t);n&&this.opts.autoOpen==="metaEditor"?this.toggleFileCard(!0,t.id):s&&this.opts.autoOpen==="imageEditor"&&this.openFileEditor(t)};initEvents=()=>{if(this.opts.trigger&&!this.opts.inline){let e=ni(this.opts.trigger);e?e.forEach(t=>t.addEventListener("click",this.openModal)):this.uppy.log("Dashboard modal trigger not found. Make sure `trigger` is set in Dashboard options, unless you are planning to call `dashboard.openModal()` method yourself","warning")}this.startListeningToResize(),document.addEventListener("paste",this.handlePasteOnBody),this.uppy.on("plugin-added",this.#l),this.uppy.on("plugin-remove",this.removeTarget),this.uppy.on("file-added",this.hideAllPanels),this.uppy.on("dashboard:modal-closed",this.hideAllPanels),this.uppy.on("complete",this.handleComplete),this.uppy.on("files-added",this.#t),this.uppy.on("file-removed",this.#t),document.addEventListener("focus",this.recordIfFocusedOnUppyRecently,!0),document.addEventListener("click",this.recordIfFocusedOnUppyRecently,!0),this.opts.inline&&this.el.addEventListener("keydown",this.handleKeyDownInInline),this.opts.autoOpen&&this.uppy.on("files-added",this.#r)};removeEvents=()=>{let e=ni(this.opts.trigger);!this.opts.inline&&e&&e.forEach(t=>t.removeEventListener("click",this.openModal)),this.stopListeningToResize(),document.removeEventListener("paste",this.handlePasteOnBody),window.removeEventListener("popstate",this.handlePopState,!1),this.uppy.off("plugin-added",this.#l),this.uppy.off("plugin-remove",this.removeTarget),this.uppy.off("file-added",this.hideAllPanels),this.uppy.off("dashboard:modal-closed",this.hideAllPanels),this.uppy.off("complete",this.handleComplete),this.uppy.off("files-added",this.#t),this.uppy.off("file-removed",this.#t),document.removeEventListener("focus",this.recordIfFocusedOnUppyRecently),document.removeEventListener("click",this.recordIfFocusedOnUppyRecently),this.opts.inline&&this.el.removeEventListener("keydown",this.handleKeyDownInInline),this.opts.autoOpen&&this.uppy.off("files-added",this.#r)};superFocusOnEachUpdate=()=>{let e=this.el.contains(document.activeElement),t=document.activeElement===document.body||document.activeElement===null,i=this.uppy.getState().info.length===0,n=!this.opts.inline;i&&(n||e||t&&this.ifFocusedOnUppyRecently)?this.superFocus(this.el,this.getPluginState().activeOverlayType):this.superFocus.cancel()};afterUpdate=()=>{if(this.opts.disabled&&!this.dashboardIsDisabled){this.disableInteractiveElements(!0);return}!this.opts.disabled&&this.dashboardIsDisabled&&this.disableInteractiveElements(!1),this.superFocusOnEachUpdate()};saveFileCard=(e,t)=>{this.uppy.setFileMeta(t,e),this.toggleFileCard(!1,t)};#i=e=>{let t=this.uppy.getPlugin(e.id);return O(m({},e),{icon:t.icon||this.opts.defaultPickerIcon,render:t.render})};#n=e=>{let t=this.uppy.getPlugin(e.id);return typeof t.isSupported!="function"?!0:t.isSupported()};#u=e=>e.filter(t=>t.type==="acquirer"&&this.#n(t)).map(this.#i);#o=e=>e.filter(t=>t.type==="progressindicator").map(this.#i);#a=e=>e.filter(t=>t.type==="editor").map(this.#i);render=e=>{let t=this.getPluginState(),{files:i,capabilities:n,allowNewUpload:s}=e,{newFiles:o,uploadStartedFiles:a,completeFiles:l,erroredFiles:c,inProgressFiles:p,inProgressNotPausedFiles:d,processingFiles:g,isUploadStarted:v,isAllComplete:x,isAllPaused:A}=this.uppy.getObjectOfFilesPerState(),C=this.#u(t.targets),U=this.#o(t.targets),F=this.#a(t.targets),k;return this.opts.theme==="auto"?k=n.darkMode?"dark":"light":k=this.opts.theme,["files","folders","both"].indexOf(this.opts.fileManagerSelectionType)<0&&(this.opts.fileManagerSelectionType="files",console.warn(`Unsupported option for "fileManagerSelectionType". Using default of "${this.opts.fileManagerSelectionType}".`)),qs({state:e,isHidden:t.isHidden,files:i,newFiles:o,uploadStartedFiles:a,completeFiles:l,erroredFiles:c,inProgressFiles:p,inProgressNotPausedFiles:d,processingFiles:g,isUploadStarted:v,isAllComplete:x,isAllPaused:A,totalFileCount:Object.keys(i).length,totalProgress:e.totalProgress,allowNewUpload:s,acquirers:C,theme:k,disabled:this.opts.disabled,disableLocalFiles:this.opts.disableLocalFiles,direction:this.opts.direction,activePickerPanel:t.activePickerPanel,showFileEditor:t.showFileEditor,saveFileEditor:this.saveFileEditor,closeFileEditor:this.closeFileEditor,disableInteractiveElements:this.disableInteractiveElements,animateOpenClose:this.opts.animateOpenClose,isClosing:t.isClosing,progressindicators:U,editors:F,autoProceed:this.uppy.opts.autoProceed,id:this.id,closeModal:this.requestCloseModal,handleClickOutside:this.handleClickOutside,handleInputChange:this.handleInputChange,handlePaste:this.handlePaste,inline:this.opts.inline,showPanel:this.showPanel,hideAllPanels:this.hideAllPanels,i18n:this.i18n,i18nArray:this.i18nArray,uppy:this.uppy,note:this.opts.note,recoveredState:e.recoveredState,metaFields:t.metaFields,resumableUploads:n.resumableUploads||!1,individualCancellation:n.individualCancellation,isMobileDevice:n.isMobileDevice,fileCardFor:t.fileCardFor,toggleFileCard:this.toggleFileCard,toggleAddFilesPanel:this.toggleAddFilesPanel,showAddFilesPanel:t.showAddFilesPanel,saveFileCard:this.saveFileCard,openFileEditor:this.openFileEditor,canEditFile:this.canEditFile,width:this.opts.width,height:this.opts.height,showLinkToFileUploadResult:this.opts.showLinkToFileUploadResult,fileManagerSelectionType:this.opts.fileManagerSelectionType,proudlyDisplayPoweredByUppy:this.opts.proudlyDisplayPoweredByUppy,showRemoveButtonAfterComplete:this.opts.showRemoveButtonAfterComplete,containerWidth:t.containerWidth,containerHeight:t.containerHeight,areInsidesReadyToBeVisible:t.areInsidesReadyToBeVisible,parentElement:this.el,allowedFileTypes:this.uppy.opts.restrictions.allowedFileTypes,maxNumberOfFiles:this.uppy.opts.restrictions.maxNumberOfFiles,requiredMetaFields:this.uppy.opts.restrictions.requiredMetaFields,showSelectedFiles:this.opts.showSelectedFiles,showNativePhotoCameraButton:this.opts.showNativePhotoCameraButton,showNativeVideoCameraButton:this.opts.showNativeVideoCameraButton,nativeCameraFacingMode:this.opts.nativeCameraFacingMode,singleFileFullScreen:this.opts.singleFileFullScreen,handleCancelRestore:this.handleCancelRestore,handleRequestThumbnail:this.handleRequestThumbnail,handleCancelThumbnail:this.handleCancelThumbnail,isDraggingOver:t.isDraggingOver,handleDragOver:this.handleDragOver,handleDragLeave:this.handleDragLeave,handleDrop:this.handleDrop,disableInformer:this.opts.disableInformer,disableStatusBar:this.opts.disableStatusBar,hideProgressDetails:this.opts.hideProgressDetails,hideUploadButton:this.opts.hideUploadButton,hideRetryButton:this.opts.hideRetryButton,hidePauseResumeButton:this.opts.hidePauseResumeButton,hideCancelButton:this.opts.hideCancelButton,hideProgressAfterFinish:this.opts.hideProgressAfterFinish,doneButtonHandler:this.opts.doneButtonHandler})};#s=()=>{let{plugins:e}=this.opts;e.forEach(t=>{let i=this.uppy.getPlugin(t);i?i.mount(this,i):this.uppy.log(`[Uppy] Dashboard could not find plugin '${t}', make sure to uppy.use() the plugins you are specifying`,"warning")})};#h=()=>{this.uppy.iteratePlugins(this.#l)};#l=e=>{let t=["acquirer","editor"];e&&!e.opts?.target&&t.includes(e.type)&&(this.getPluginState().targets.some(n=>e.id===n.id)||e.mount(this,e))};#c(){let{thumbnailWidth:e,thumbnailHeight:t,thumbnailType:i,waitForThumbnailsBeforeUpload:n}=this.opts;return{thumbnailWidth:e,thumbnailHeight:t,thumbnailType:i,waitForThumbnailsBeforeUpload:n,lazy:!n}}setOptions(e){super.setOptions(e),this.uppy.getPlugin(this.#d())?.setOptions(this.#c())}#d(){return`${this.id}:ThumbnailGenerator`}install=()=>{this.setPluginState({isHidden:!0,fileCardFor:null,activeOverlayType:null,showAddFilesPanel:!1,activePickerPanel:void 0,showFileEditor:!1,metaFields:this.opts.metaFields,targets:[],areInsidesReadyToBeVisible:!1,isDraggingOver:!1});let{inline:e,closeAfterFinish:t}=this.opts;if(e&&t)throw new Error("[Dashboard] `closeAfterFinish: true` cannot be used on an inline Dashboard, because an inline Dashboard cannot be closed at all. Either set `inline: false`, or disable the `closeAfterFinish` option.");let{allowMultipleUploads:i,allowMultipleUploadBatches:n}=this.uppy.opts;(i||n)&&t&&this.uppy.log("[Dashboard] When using `closeAfterFinish`, we recommended setting the `allowMultipleUploadBatches` option to `false` in the Uppy constructor. See https://uppy.io/docs/uppy/#allowMultipleUploads-true","warning");let{target:s}=this.opts;s&&this.mount(s,this),this.opts.disableThumbnailGenerator||this.uppy.use(Bt,m({id:this.#d()},this.#c())),this.darkModeMediaQuery=typeof window<"u"&&window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)"):null;let o=this.darkModeMediaQuery?this.darkModeMediaQuery.matches:!1;this.uppy.log(`[Dashboard] Dark mode is ${o?"on":"off"}`),this.setDarkModeCapability(o),this.opts.theme==="auto"&&this.darkModeMediaQuery?.addListener(this.handleSystemDarkModeChange),this.#s(),this.#h(),this.initEvents()};uninstall=()=>{if(!this.opts.disableThumbnailGenerator){let t=this.uppy.getPlugin(`${this.id}:ThumbnailGenerator`);t&&this.uppy.removePlugin(t)}let{plugins:e}=this.opts;e.forEach(t=>{let i=this.uppy.getPlugin(t);i&&i.unmount()}),this.opts.theme==="auto"&&this.darkModeMediaQuery?.removeListener(this.handleSystemDarkModeChange),this.opts.disablePageScrollWhenModalOpen&&document.body.classList.remove("uppy-Dashboard-isFixed"),this.unmount(),this.removeEvents()}};var Gs={strings:{},pluralize(r){return r===1?0:1}};Gs.strings={addBulkFilesFailed:{0:"Das Hinzuf\xFCgen einer Datei ist aufgrund eines internen Fehlers fehlgeschlagen",1:"Das Hinzuf\xFCgen von %{smart_count} Dateien ist aufgrund eines internen Fehlers fehlgeschlagen"},addingMoreFiles:"Dateien hinzuf\xFCgen",addMore:"Mehr hinzuf\xFCgen",addMoreFiles:"Dateien hinzuf\xFCgen",allFilesFromFolderNamed:"Alle Dateien vom Ordner %{name}",allowAccessDescription:"Um Bilder oder Videos mit Ihrer Kamera aufzunehmen, erlauben Sie dieser Website bitte den Zugriff auf Ihre Kamera.",allowAccessTitle:"Bitte erlauben Sie Zugriff auf Ihre Kamera",aspectRatioLandscape:"Zuschneiden auf Querformat (16:9)",aspectRatioPortrait:"Zuschneiden auf Hochformat (9:16)",aspectRatioSquare:"Zuschneiden auf Quadrat",authenticateWith:"Mit %{pluginName} verbinden",authenticateWithTitle:"Bitte authentifizieren Sie sich mit %{pluginName}, um Dateien auszuw\xE4hlen",back:"Zur\xFCck",backToSearch:"Zur\xFCck zur Suche",browse:"durchsuchen",browseFiles:"Dateien durchsuchen",browseFolders:"Ordner durchsuchen",cancel:"Abbrechen",cancelUpload:"Hochladen abbrechen",closeModal:"Fenster schlie\xDFen",companionError:"Verbindung zu Companion fehlgeschlagen",companionUnauthorizeHint:"Um die Autorisierung f\xFCr Ihr %{provider} Konto aufzuheben, gehen Sie bitte zu %{url}",complete:"Fertig",connectedToInternet:"Mit dem Internet verbunden",copyLink:"Link kopieren",copyLinkToClipboardFallback:"Untenstehende URL kopieren",copyLinkToClipboardSuccess:"Link in die Zwischenablage kopiert",creatingAssembly:"Das Hochladen wird vorbereiten...",creatingAssemblyFailed:"Transloadit: Assembly konnte nicht erstellt werden",dashboardTitle:"Hochladen von Dateien",dashboardWindowTitle:"Hochladen von Dateien (ESC dr\xFCcken zum Schlie\xDFen)",dataUploadedOfTotal:"%{complete} von %{total}",discardRecordedFile:"Aufgenommene Datei verwerfen",done:"Abgeschlossen",dropHint:"Dateien hier ablegen",dropPasteBoth:"Dateien hier ablegen/einf\xFCgen, %{browseFiles} oder %{browseFolders}",dropPasteFiles:"Dateien hier ablegen/einf\xFCgen oder %{browseFiles}",dropPasteFolders:"Dateien hier ablegen/einf\xFCgen oder %{browseFolders}",dropPasteImportBoth:"Dateien hier ablegen/einf\xFCgen, %{browse} oder von folgenden Quellen importieren:",dropPasteImportFiles:"Dateien hier ablegen/einf\xFCgen, %{browseFiles} oder von folgenden Quellen importieren:",dropPasteImportFolders:"Dateien hier ablegen/einf\xFCgen, %{browseFolders} oder von folgenden Quellen importieren:",editFile:"Datei bearbeiten",editImage:"Bild bearbeiten",editFileWithFilename:"Datei %{file} bearbeiten",editing:"%{file} bearbeiten",emptyFolderAdded:"Keine Dateien hinzugef\xFCgt, da der Ordner leer war",encoding:"Kodieren...",enterCorrectUrl:"Falsche URL: Bitte stellen Sie sicher, dass Sie einen direkten Link zu einer Datei eingeben",enterTextToSearch:"Text zum Suchen von Bildern eingeben",enterUrlToImport:"URL zum Importieren einer Datei eingeben",exceedsSize:"Datei %{file} ist gr\xF6\xDFer als die maximal erlaubte Dateigr\xF6\xDFe von %{size}",failedToFetch:"Companion konnte diese URL nicht verarbeiten - stellen Sie bitte sicher, dass sie korrekt ist",failedToUpload:"Fehler beim Hochladen der Datei %{file}",filesUploadedOfTotal:{0:"%{complete} von %{smart_count} Datei hochgeladen",1:"%{complete} von %{smart_count} Dateien hochgeladen"},filter:"Filter",finishEditingFile:"Bearbeitung beenden",flipHorizontal:"Horizontal spiegeln",folderAdded:{0:"Eine Datei von %{folder} hinzugef\xFCgt",1:"%{smart_count} Dateien von %{folder} hinzugef\xFCgt"},folderAlreadyAdded:'Der Ordner "%{folder}" wurde bereits hinzugef\xFCgt',generatingThumbnails:"Erstellen von Miniaturansichten...",import:"Importieren",importFiles:"Importiere Dateien von:",importFrom:"Importieren von %{name}",inferiorSize:"Diese Datei ist kleiner als die minimal erlaubte Dateigr\xF6\xDFe von %{size}",loading:"Laden...",logOut:"Abmelden",micDisabled:"Zugriff auf Mikrofon von Benutzer abgelehnt",missingRequiredMetaField:"Fehlende erforderliche Meta-Felder",missingRequiredMetaFieldOnFile:"Fehlende erforderliche Meta-Felder in %{fileName}",missingRequiredMetaFields:{0:"Fehlendes erforderliches Meta-Feld: %{fields}.",1:"Fehlende erforderliche Meta-Felder: %{fields}."},myDevice:"Mein Ger\xE4t",noCameraDescription:"Bitte Kamera anschlie\xDFen, um Bilder oder Videos aufzunehmen",noCameraTitle:"Kamera nicht verf\xFCgbar",noDuplicates:"Datei '%{fileName}' existiert bereits und kann nicht erneut hinzugef\xFCgt werden",noFilesFound:"Sie haben hier keine Dateien oder Ordner",noInternetConnection:"Keine Internetverbindung",noMoreFilesAllowed:"W\xE4hrend der Upload l\xE4uft, k\xF6nnen keine weiteren Dateien hinzugef\xFCgt werden",openFolderNamed:"Ordner %{name} \xF6ffnen",pause:"Pausieren",paused:"Pausiert",pauseUpload:"Hochladen pausieren",pluginNameBox:"Box",pluginNameCamera:"Kamera",pluginNameDropbox:"Dropbox",pluginNameFacebook:"Facebook",pluginNameGoogleDrive:"Google Drive",pluginNameInstagram:"Instagram",pluginNameOneDrive:"OneDrive",pluginNameZoom:"Zoom",poweredBy:"Powered by %{uppy}",processingXFiles:{0:"Eine Datei verarbeiten",1:"%{smart_count} Dateien verarbeiten"},recording:"Aufnahme",recordingLength:"Aufnahmedauer %{recording_length}",recordingStoppedMaxSize:"Die Aufnahme wurde gestoppt, weil die Dateigr\xF6\xDFe das Limit \xFCberschritten hat",recordVideoBtn:"Video aufnehmen",recoveredAllFiles:"Wir haben alle Dateien wiederhergestellt. Sie k\xF6nnen mit dem Hochladen fortfahren.",recoveredXFiles:{0:"Wir konnten eine Datei nicht vollst\xE4ndig wiederherstellen. Bitte w\xE4hlen Sie sie erneut aus und fahren Sie dann mit dem Hochladen fort.",1:"Wir konnten %{smart_count} Dateien nicht vollst\xE4ndig wiederherstellen. Bitte w\xE4hlen Sie sie erneut aus und fahren Sie dann mit dem Hochladen fort."},removeFile:"Datei entfernen",reSelect:"Erneut ausw\xE4hlen",resetFilter:"Filter zur\xFCcksetzen",resume:"Fortsetzen",resumeUpload:"Hochladen fortsetzen",retry:"Erneut versuchen",retryUpload:"Hochladen erneut versuchen",revert:"R\xFCckg\xE4ngig machen",rotate:"Drehen",save:"Speichern",saveChanges:"\xC4nderungen speichern",searchImages:"Suche nach Bildern",selectX:{0:"W\xE4hlen Sie %{smart_count}",1:"W\xE4hlen Sie %{smart_count}"},sessionRestored:"",smile:"Bitte l\xE4cheln!",startCapturing:"Bildschirmaufnahme starten",startRecording:"Videoaufnahme starten",stopCapturing:"Bildschirmaufnahme stoppen",stopRecording:"Videoaufnahme stoppen",streamActive:"Stream aktiv",streamPassive:"Stream passiv",submitRecordedFile:"Aufgezeichnete Datei verwenden",takePicture:"Ein Foto aufnehmen",takePictureBtn:"Foto aufnehmen",timedOut:"Upload f\xFCr %{seconds} Sekunden stehen geblieben, breche ab.",upload:"Hochladen",uploadComplete:"Hochladen abgeschlossen",uploadFailed:"Hochladen fehlgeschlagen",uploading:"Wird hochgeladen",uploadingXFiles:{0:"Eine Datei wird hochgeladen",1:"%{smart_count} Dateien werden hochgeladen"},uploadPaused:"Hochladen pausiert",uploadXFiles:{0:"Eine Datei hochladen",1:"%{smart_count} Dateien hochladen"},uploadXNewFiles:{0:"+%{smart_count} Datei hochladen",1:"+%{smart_count} Dateien hochladen"},xFilesSelected:{0:"Eine Datei ausgew\xE4hlt",1:"%{smart_count} Dateien ausgew\xE4hlt"},xMoreFilesAdded:{0:"Eine weitere Datei hinzugef\xFCgt",1:"%{smart_count} weitere Dateien hinzugef\xFCgt"},xTimeLeft:"%{time} verbleibend",youCanOnlyUploadFileTypes:"Sie k\xF6nnen nur folgende Dateitypen hochladen: %{types}",youCanOnlyUploadX:{0:"Sie k\xF6nnen nur eine Datei hochladen",1:"Sie k\xF6nnen nur %{smart_count} Dateien hochladen"},youHaveToAtLeastSelectX:{0:"Sie m\xFCssen mindestens eine Datei ausw\xE4hlen",1:"Sie m\xFCssen mindestens %{smart_count} Dateien ausw\xE4hlen"},zoomIn:"Vergr\xF6\xDFern",zoomOut:"Verkleinern"};typeof Uppy<"u"&&(globalThis.Uppy.locales.de_DE=Gs);var Fd=Gs;function Mt(r){"@babel/helpers - typeof";return Mt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mt(r)}function Pd(r,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,om(i.key),i)}}function sm(r,e,t){return e&&Pd(r.prototype,e),t&&Pd(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function om(r){var e=am(r,"string");return Mt(e)=="symbol"?e:e+""}function am(r,e){if(Mt(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var i=t.call(r,e||"default");if(Mt(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function lm(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function um(r,e,t){return e=$r(e),dm(r,Ks()?Reflect.construct(e,t||[],$r(r).constructor):e.apply(r,t))}function dm(r,e){if(e&&(Mt(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return cm(r)}function cm(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function pm(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&Vr(r,e)}function Ws(r){var e=typeof Map=="function"?new Map:void 0;return Ws=function(i){if(i===null||!fm(i))return i;if(typeof i!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(i))return e.get(i);e.set(i,n)}function n(){return hm(i,arguments,$r(this).constructor)}return n.prototype=Object.create(i.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Vr(n,i)},Ws(r)}function hm(r,e,t){if(Ks())return Reflect.construct.apply(null,arguments);var i=[null];i.push.apply(i,e);var n=new(r.bind.apply(r,i));return t&&Vr(n,t.prototype),n}function Ks(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ks=function(){return!!r})()}function fm(r){try{return Function.toString.call(r).indexOf("[native code]")!==-1}catch{return typeof r=="function"}}function Vr(r,e){return Vr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},Vr(r,e)}function $r(r){return $r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},$r(r)}var mm=(function(r){function e(t){var i,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;if(lm(this,e),i=um(this,e,[t]),i.originalRequest=s,i.originalResponse=o,i.causingError=n,n!=null&&(t+=", caused by ".concat(n.toString())),s!=null){var a=s.getHeader("X-Request-ID")||"n/a",l=s.getMethod(),c=s.getURL(),p=o?o.getStatus():"n/a",d=o?o.getBody()||"":"n/a";t+=", originated from request (method: ".concat(l,", url: ").concat(c,", response code: ").concat(p,", response text: ").concat(d,", request id: ").concat(a,")")}return i.message=t,i}return pm(e,r),sm(e)})(Ws(Error)),jt=mm;var gm=!1;function rt(r){gm&&console.log(r)}function Gr(r){"@babel/helpers - typeof";return Gr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gr(r)}function ym(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function Ed(r,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,bm(i.key),i)}}function vm(r,e,t){return e&&Ed(r.prototype,e),t&&Ed(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function bm(r){var e=wm(r,"string");return Gr(e)=="symbol"?e:e+""}function wm(r,e){if(Gr(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var i=t.call(r,e||"default");if(Gr(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var Cd=(function(){function r(){ym(this,r)}return vm(r,[{key:"listAllUploads",value:function(){return Promise.resolve([])}},{key:"findUploadsByFingerprint",value:function(t){return Promise.resolve([])}},{key:"removeUpload",value:function(t){return Promise.resolve()}},{key:"addUpload",value:function(t,i){return Promise.resolve(null)}}])})();var Id="3.7.8",_m=Id,Ht=typeof Buffer=="function",Td=typeof TextDecoder=="function"?new TextDecoder:void 0,kd=typeof TextEncoder=="function"?new TextEncoder:void 0,xm="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Wr=Array.prototype.slice.call(xm),zi=(r=>{let e={};return r.forEach((t,i)=>e[t]=i),e})(Wr),Sm=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,fe=String.fromCharCode.bind(String),Ud=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):r=>new Uint8Array(Array.prototype.slice.call(r,0)),Dd=r=>r.replace(/=/g,"").replace(/[+\/]/g,e=>e=="+"?"-":"_"),Rd=r=>r.replace(/[^A-Za-z0-9\+\/]/g,""),Nd=r=>{let e,t,i,n,s="",o=r.length%3;for(let a=0;a<r.length;){if((t=r.charCodeAt(a++))>255||(i=r.charCodeAt(a++))>255||(n=r.charCodeAt(a++))>255)throw new TypeError("invalid character found");e=t<<16|i<<8|n,s+=Wr[e>>18&63]+Wr[e>>12&63]+Wr[e>>6&63]+Wr[e&63]}return o?s.slice(0,o-3)+"===".substring(o):s},Qs=typeof btoa=="function"?r=>btoa(r):Ht?r=>Buffer.from(r,"binary").toString("base64"):Nd,Xs=Ht?r=>Buffer.from(r).toString("base64"):r=>{let t=[];for(let i=0,n=r.length;i<n;i+=4096)t.push(fe.apply(null,r.subarray(i,i+4096)));return Qs(t.join(""))},Hi=(r,e=!1)=>e?Dd(Xs(r)):Xs(r),Fm=r=>{if(r.length<2){var e=r.charCodeAt(0);return e<128?r:e<2048?fe(192|e>>>6)+fe(128|e&63):fe(224|e>>>12&15)+fe(128|e>>>6&63)+fe(128|e&63)}else{var e=65536+(r.charCodeAt(0)-55296)*1024+(r.charCodeAt(1)-56320);return fe(240|e>>>18&7)+fe(128|e>>>12&63)+fe(128|e>>>6&63)+fe(128|e&63)}},Pm=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,Bd=r=>r.replace(Pm,Fm),Ad=Ht?r=>Buffer.from(r,"utf8").toString("base64"):kd?r=>Xs(kd.encode(r)):r=>Qs(Bd(r)),zt=(r,e=!1)=>e?Dd(Ad(r)):Ad(r),Od=r=>zt(r,!0),Em=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,Cm=r=>{switch(r.length){case 4:var e=(7&r.charCodeAt(0))<<18|(63&r.charCodeAt(1))<<12|(63&r.charCodeAt(2))<<6|63&r.charCodeAt(3),t=e-65536;return fe((t>>>10)+55296)+fe((t&1023)+56320);case 3:return fe((15&r.charCodeAt(0))<<12|(63&r.charCodeAt(1))<<6|63&r.charCodeAt(2));default:return fe((31&r.charCodeAt(0))<<6|63&r.charCodeAt(1))}},Ld=r=>r.replace(Em,Cm),Md=r=>{if(r=r.replace(/\s+/g,""),!Sm.test(r))throw new TypeError("malformed base64.");r+="==".slice(2-(r.length&3));let e,t,i,n=[];for(let s=0;s<r.length;)e=zi[r.charAt(s++)]<<18|zi[r.charAt(s++)]<<12|(t=zi[r.charAt(s++)])<<6|(i=zi[r.charAt(s++)]),t===64?n.push(fe(e>>16&255)):i===64?n.push(fe(e>>16&255,e>>8&255)):n.push(fe(e>>16&255,e>>8&255,e&255));return n.join("")},Zs=typeof atob=="function"?r=>atob(Rd(r)):Ht?r=>Buffer.from(r,"base64").toString("binary"):Md,jd=Ht?r=>Ud(Buffer.from(r,"base64")):r=>Ud(Zs(r).split("").map(e=>e.charCodeAt(0))),zd=r=>jd(Hd(r)),Tm=Ht?r=>Buffer.from(r,"base64").toString("utf8"):Td?r=>Td.decode(jd(r)):r=>Ld(Zs(r)),Hd=r=>Rd(r.replace(/[-_]/g,e=>e=="-"?"+":"/")),Ys=r=>Tm(Hd(r)),km=r=>{if(typeof r!="string")return!1;let e=r.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(e)||!/[^\s0-9a-zA-Z\-_]/.test(e)},qd=r=>({value:r,enumerable:!1,writable:!0,configurable:!0}),Vd=function(){let r=(e,t)=>Object.defineProperty(String.prototype,e,qd(t));r("fromBase64",function(){return Ys(this)}),r("toBase64",function(e){return zt(this,e)}),r("toBase64URI",function(){return zt(this,!0)}),r("toBase64URL",function(){return zt(this,!0)}),r("toUint8Array",function(){return zd(this)})},$d=function(){let r=(e,t)=>Object.defineProperty(Uint8Array.prototype,e,qd(t));r("toBase64",function(e){return Hi(this,e)}),r("toBase64URI",function(){return Hi(this,!0)}),r("toBase64URL",function(){return Hi(this,!0)})},Um=()=>{Vd(),$d()},Gd={version:Id,VERSION:_m,atob:Zs,atobPolyfill:Md,btoa:Qs,btoaPolyfill:Nd,fromBase64:Ys,toBase64:zt,encode:zt,encodeURI:Od,encodeURL:Od,utob:Bd,btou:Ld,decode:Ys,isValid:km,fromUint8Array:Hi,toUint8Array:zd,extendString:Vd,extendUint8Array:$d,extendBuiltins:Um};var vc=Q(sc());function ro(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){var e=Math.random()*16|0,t=r==="x"?e:e&3|8;return t.toString(16)})}function io(){"use strict";io=function(){return e};var r,e={},t=Object.prototype,i=t.hasOwnProperty,n=Object.defineProperty||function(y,h,f){y[h]=f.value},s=typeof Symbol=="function"?Symbol:{},o=s.iterator||"@@iterator",a=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function c(y,h,f){return Object.defineProperty(y,h,{value:f,enumerable:!0,configurable:!0,writable:!0}),y[h]}try{c({},"")}catch{c=function(f,P,T){return f[P]=T}}function p(y,h,f,P){var T=h&&h.prototype instanceof U?h:U,E=Object.create(T.prototype),_=new Oe(P||[]);return n(E,"_invoke",{value:me(y,f,_)}),E}function d(y,h,f){try{return{type:"normal",arg:y.call(h,f)}}catch(P){return{type:"throw",arg:P}}}e.wrap=p;var g="suspendedStart",v="suspendedYield",x="executing",A="completed",C={};function U(){}function F(){}function k(){}var N={};c(N,o,function(){return this});var M=Object.getPrototypeOf,R=M&&M(M(Ue([])));R&&R!==t&&i.call(R,o)&&(N=R);var B=k.prototype=U.prototype=Object.create(N);function G(y){["next","throw","return"].forEach(function(h){c(y,h,function(f){return this._invoke(h,f)})})}function K(y,h){function f(T,E,_,b){var w=d(y[T],y,E);if(w.type!=="throw"){var S=w.arg,I=S.value;return I&&mt(I)=="object"&&i.call(I,"__await")?h.resolve(I.__await).then(function(D){f("next",D,_,b)},function(D){f("throw",D,_,b)}):h.resolve(I).then(function(D){S.value=D,_(S)},function(D){return f("throw",D,_,b)})}b(w.arg)}var P;n(this,"_invoke",{value:function(E,_){function b(){return new h(function(w,S){f(E,_,w,S)})}return P=P?P.then(b,b):b()}})}function me(y,h,f){var P=g;return function(T,E){if(P===x)throw Error("Generator is already running");if(P===A){if(T==="throw")throw E;return{value:r,done:!0}}for(f.method=T,f.arg=E;;){var _=f.delegate;if(_){var b=X(_,f);if(b){if(b===C)continue;return b}}if(f.method==="next")f.sent=f._sent=f.arg;else if(f.method==="throw"){if(P===g)throw P=A,f.arg;f.dispatchException(f.arg)}else f.method==="return"&&f.abrupt("return",f.arg);P=x;var w=d(y,h,f);if(w.type==="normal"){if(P=f.done?A:v,w.arg===C)continue;return{value:w.arg,done:f.done}}w.type==="throw"&&(P=A,f.method="throw",f.arg=w.arg)}}}function X(y,h){var f=h.method,P=y.iterator[f];if(P===r)return h.delegate=null,f==="throw"&&y.iterator.return&&(h.method="return",h.arg=r,X(y,h),h.method==="throw")||f!=="return"&&(h.method="throw",h.arg=new TypeError("The iterator does not provide a '"+f+"' method")),C;var T=d(P,y.iterator,h.arg);if(T.type==="throw")return h.method="throw",h.arg=T.arg,h.delegate=null,C;var E=T.arg;return E?E.done?(h[y.resultName]=E.value,h.next=y.nextLoc,h.method!=="return"&&(h.method="next",h.arg=r),h.delegate=null,C):E:(h.method="throw",h.arg=new TypeError("iterator result is not an object"),h.delegate=null,C)}function ue(y){var h={tryLoc:y[0]};1 in y&&(h.catchLoc=y[1]),2 in y&&(h.finallyLoc=y[2],h.afterLoc=y[3]),this.tryEntries.push(h)}function de(y){var h=y.completion||{};h.type="normal",delete h.arg,y.completion=h}function Oe(y){this.tryEntries=[{tryLoc:"root"}],y.forEach(ue,this),this.reset(!0)}function Ue(y){if(y||y===""){var h=y[o];if(h)return h.call(y);if(typeof y.next=="function")return y;if(!isNaN(y.length)){var f=-1,P=function T(){for(;++f<y.length;)if(i.call(y,f))return T.value=y[f],T.done=!1,T;return T.value=r,T.done=!0,T};return P.next=P}}throw new TypeError(mt(y)+" is not iterable")}return F.prototype=k,n(B,"constructor",{value:k,configurable:!0}),n(k,"constructor",{value:F,configurable:!0}),F.displayName=c(k,l,"GeneratorFunction"),e.isGeneratorFunction=function(y){var h=typeof y=="function"&&y.constructor;return!!h&&(h===F||(h.displayName||h.name)==="GeneratorFunction")},e.mark=function(y){return Object.setPrototypeOf?Object.setPrototypeOf(y,k):(y.__proto__=k,c(y,l,"GeneratorFunction")),y.prototype=Object.create(B),y},e.awrap=function(y){return{__await:y}},G(K.prototype),c(K.prototype,a,function(){return this}),e.AsyncIterator=K,e.async=function(y,h,f,P,T){T===void 0&&(T=Promise);var E=new K(p(y,h,f,P),T);return e.isGeneratorFunction(h)?E:E.next().then(function(_){return _.done?_.value:E.next()})},G(B),c(B,l,"Generator"),c(B,o,function(){return this}),c(B,"toString",function(){return"[object Generator]"}),e.keys=function(y){var h=Object(y),f=[];for(var P in h)f.push(P);return f.reverse(),function T(){for(;f.length;){var E=f.pop();if(E in h)return T.value=E,T.done=!1,T}return T.done=!0,T}},e.values=Ue,Oe.prototype={constructor:Oe,reset:function(h){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(de),!h)for(var f in this)f.charAt(0)==="t"&&i.call(this,f)&&!isNaN(+f.slice(1))&&(this[f]=r)},stop:function(){this.done=!0;var h=this.tryEntries[0].completion;if(h.type==="throw")throw h.arg;return this.rval},dispatchException:function(h){if(this.done)throw h;var f=this;function P(S,I){return _.type="throw",_.arg=h,f.next=S,I&&(f.method="next",f.arg=r),!!I}for(var T=this.tryEntries.length-1;T>=0;--T){var E=this.tryEntries[T],_=E.completion;if(E.tryLoc==="root")return P("end");if(E.tryLoc<=this.prev){var b=i.call(E,"catchLoc"),w=i.call(E,"finallyLoc");if(b&&w){if(this.prev<E.catchLoc)return P(E.catchLoc,!0);if(this.prev<E.finallyLoc)return P(E.finallyLoc)}else if(b){if(this.prev<E.catchLoc)return P(E.catchLoc,!0)}else{if(!w)throw Error("try statement without catch or finally");if(this.prev<E.finallyLoc)return P(E.finallyLoc)}}}},abrupt:function(h,f){for(var P=this.tryEntries.length-1;P>=0;--P){var T=this.tryEntries[P];if(T.tryLoc<=this.prev&&i.call(T,"finallyLoc")&&this.prev<T.finallyLoc){var E=T;break}}E&&(h==="break"||h==="continue")&&E.tryLoc<=f&&f<=E.finallyLoc&&(E=null);var _=E?E.completion:{};return _.type=h,_.arg=f,E?(this.method="next",this.next=E.finallyLoc,C):this.complete(_)},complete:function(h,f){if(h.type==="throw")throw h.arg;return h.type==="break"||h.type==="continue"?this.next=h.arg:h.type==="return"?(this.rval=this.arg=h.arg,this.method="return",this.next="end"):h.type==="normal"&&f&&(this.next=f),C},finish:function(h){for(var f=this.tryEntries.length-1;f>=0;--f){var P=this.tryEntries[f];if(P.finallyLoc===h)return this.complete(P.completion,P.afterLoc),de(P),C}},catch:function(h){for(var f=this.tryEntries.length-1;f>=0;--f){var P=this.tryEntries[f];if(P.tryLoc===h){var T=P.completion;if(T.type==="throw"){var E=T.arg;de(P)}return E}}throw Error("illegal catch attempt")},delegateYield:function(h,f,P){return this.delegate={iterator:Ue(h),resultName:f,nextLoc:P},this.method==="next"&&(this.arg=r),C}},e}function oc(r,e,t,i,n,s,o){try{var a=r[s](o),l=a.value}catch(c){t(c);return}a.done?e(l):Promise.resolve(l).then(i,n)}function Hm(r){return function(){var e=this,t=arguments;return new Promise(function(i,n){var s=r.apply(e,t);function o(l){oc(s,i,n,o,a,"next",l)}function a(l){oc(s,i,n,o,a,"throw",l)}o(void 0)})}}function mc(r,e){return $m(r)||Vm(r,e)||gc(r,e)||qm()}function qm(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vm(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var i,n,s,o,a=[],l=!0,c=!1;try{if(s=(t=t.call(r)).next,e===0){if(Object(t)!==t)return;l=!1}else for(;!(l=(i=s.call(t)).done)&&(a.push(i.value),a.length!==e);l=!0);}catch(p){c=!0,n=p}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw n}}return a}}function $m(r){if(Array.isArray(r))return r}function mt(r){"@babel/helpers - typeof";return mt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mt(r)}function Gm(r,e){var t=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=gc(r))||e&&r&&typeof r.length=="number"){t&&(r=t);var i=0,n=function(){};return{s:n,n:function(){return i>=r.length?{done:!0}:{done:!1,value:r[i++]}},e:function(c){throw c},f:n}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,a;return{s:function(){t=t.call(r)},n:function(){var c=t.next();return s=c.done,c},e:function(c){o=!0,a=c},f:function(){try{!s&&t.return!=null&&t.return()}finally{if(o)throw a}}}}function gc(r,e){if(r){if(typeof r=="string")return ac(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return ac(r,e)}}function ac(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=r[t];return i}function lc(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable})),t.push.apply(t,i)}return t}function qt(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?lc(Object(t),!0).forEach(function(i){Wm(r,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):lc(Object(t)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(t,i))})}return r}function Wm(r,e,t){return e=yc(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Km(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function uc(r,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,yc(i.key),i)}}function Xm(r,e,t){return e&&uc(r.prototype,e),t&&uc(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function yc(r){var e=Ym(r,"string");return mt(e)=="symbol"?e:e+""}function Ym(r,e){if(mt(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var i=t.call(r,e||"default");if(mt(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var Vi="tus-v1",$i="ietf-draft-03",Kr="ietf-draft-05",Qm={endpoint:null,uploadUrl:null,metadata:{},metadataForPartialUploads:{},fingerprint:null,uploadSize:null,onProgress:null,onChunkComplete:null,onSuccess:null,onError:null,onUploadUrlAvailable:null,overridePatchMethod:!1,headers:{},addRequestId:!1,onBeforeRequest:null,onAfterResponse:null,onShouldRetry:wc,chunkSize:Number.POSITIVE_INFINITY,retryDelays:[0,1e3,3e3,5e3],parallelUploads:1,parallelUploadBoundaries:null,storeFingerprintForResuming:!0,removeFingerprintOnSuccess:!1,uploadLengthDeferred:!1,uploadDataDuringCreation:!1,urlStorage:null,fileReader:null,httpStack:null,protocol:Vi},bc=(function(){function r(e,t){Km(this,r),"resume"in t&&console.log("tus: The `resume` option has been removed in tus-js-client v2. Please use the URL storage API instead."),this.options=t,this.options.chunkSize=Number(this.options.chunkSize),this._urlStorage=this.options.urlStorage,this.file=e,this.url=null,this._req=null,this._fingerprint=null,this._urlStorageKey=null,this._offset=null,this._aborted=!1,this._size=null,this._source=null,this._retryAttempt=0,this._retryTimeout=null,this._offsetBeforeRetry=0,this._parallelUploads=null,this._parallelUploadUrls=null}return Xm(r,[{key:"findPreviousUploads",value:function(){var t=this;return this.options.fingerprint(this.file,this.options).then(function(i){return t._urlStorage.findUploadsByFingerprint(i)})}},{key:"resumeFromPreviousUpload",value:function(t){this.url=t.uploadUrl||null,this._parallelUploadUrls=t.parallelUploadUrls||null,this._urlStorageKey=t.urlStorageKey}},{key:"start",value:function(){var t=this,i=this.file;if(!i){this._emitError(new Error("tus: no file or stream to upload provided"));return}if(![Vi,$i,Kr].includes(this.options.protocol)){this._emitError(new Error("tus: unsupported protocol ".concat(this.options.protocol)));return}if(!this.options.endpoint&&!this.options.uploadUrl&&!this.url){this._emitError(new Error("tus: neither an endpoint or an upload URL is provided"));return}var n=this.options.retryDelays;if(n!=null&&Object.prototype.toString.call(n)!=="[object Array]"){this._emitError(new Error("tus: the `retryDelays` option must either be an array or null"));return}if(this.options.parallelUploads>1)for(var s=0,o=["uploadUrl","uploadSize","uploadLengthDeferred"];s<o.length;s++){var a=o[s];if(this.options[a]){this._emitError(new Error("tus: cannot use the ".concat(a," option when parallelUploads is enabled")));return}}if(this.options.parallelUploadBoundaries){if(this.options.parallelUploads<=1){this._emitError(new Error("tus: cannot use the `parallelUploadBoundaries` option when `parallelUploads` is disabled"));return}if(this.options.parallelUploads!==this.options.parallelUploadBoundaries.length){this._emitError(new Error("tus: the `parallelUploadBoundaries` must have the same length as the value of `parallelUploads`"));return}}this.options.fingerprint(i,this.options).then(function(l){return l==null?rt("No fingerprint was calculated meaning that the upload cannot be stored in the URL storage."):rt("Calculated fingerprint: ".concat(l)),t._fingerprint=l,t._source?t._source:t.options.fileReader.openFile(i,t.options.chunkSize)}).then(function(l){if(t._source=l,t.options.uploadLengthDeferred)t._size=null;else if(t.options.uploadSize!=null){if(t._size=Number(t.options.uploadSize),Number.isNaN(t._size)){t._emitError(new Error("tus: cannot convert `uploadSize` option into a number"));return}}else if(t._size=t._source.size,t._size==null){t._emitError(new Error("tus: cannot automatically derive upload's size from input. Specify it manually using the `uploadSize` option or use the `uploadLengthDeferred` option"));return}t.options.parallelUploads>1||t._parallelUploadUrls!=null?t._startParallelUpload():t._startSingleUpload()}).catch(function(l){t._emitError(l)})}},{key:"_startParallelUpload",value:function(){var t,i=this,n=this._size,s=0;this._parallelUploads=[];var o=this._parallelUploadUrls!=null?this._parallelUploadUrls.length:this.options.parallelUploads,a=(t=this.options.parallelUploadBoundaries)!==null&&t!==void 0?t:Jm(this._source.size,o);this._parallelUploadUrls&&a.forEach(function(p,d){p.uploadUrl=i._parallelUploadUrls[d]||null}),this._parallelUploadUrls=new Array(a.length);var l=a.map(function(p,d){var g=0;return i._source.slice(p.start,p.end).then(function(v){var x=v.value;return new Promise(function(A,C){var U=qt(qt({},i.options),{},{uploadUrl:p.uploadUrl||null,storeFingerprintForResuming:!1,removeFingerprintOnSuccess:!1,parallelUploads:1,parallelUploadBoundaries:null,metadata:i.options.metadataForPartialUploads,headers:qt(qt({},i.options.headers),{},{"Upload-Concat":"partial"}),onSuccess:A,onError:C,onProgress:function(N){s=s-g+N,g=N,i._emitProgress(s,n)},onUploadUrlAvailable:function(){i._parallelUploadUrls[d]=F.url,i._parallelUploadUrls.filter(function(N){return!!N}).length===a.length&&i._saveUploadInUrlStorage()}}),F=new r(x,U);F.start(),i._parallelUploads.push(F)})})}),c;Promise.all(l).then(function(){c=i._openRequest("POST",i.options.endpoint),c.setHeader("Upload-Concat","final;".concat(i._parallelUploadUrls.join(" ")));var p=dc(i.options.metadata);return p!==""&&c.setHeader("Upload-Metadata",p),i._sendRequest(c,null)}).then(function(p){if(!Vt(p.getStatus(),200)){i._emitHttpError(c,p,"tus: unexpected response while creating upload");return}var d=p.getHeader("Location");if(d==null){i._emitHttpError(c,p,"tus: invalid or missing Location header");return}i.url=fc(i.options.endpoint,d),rt("Created upload at ".concat(i.url)),i._emitSuccess(p)}).catch(function(p){i._emitError(p)})}},{key:"_startSingleUpload",value:function(){if(this._aborted=!1,this.url!=null){rt("Resuming upload from previous URL: ".concat(this.url)),this._resumeUpload();return}if(this.options.uploadUrl!=null){rt("Resuming upload from provided URL: ".concat(this.options.uploadUrl)),this.url=this.options.uploadUrl,this._resumeUpload();return}rt("Creating a new upload"),this._createUpload()}},{key:"abort",value:function(t){var i=this;if(this._parallelUploads!=null){var n=Gm(this._parallelUploads),s;try{for(n.s();!(s=n.n()).done;){var o=s.value;o.abort(t)}}catch(a){n.e(a)}finally{n.f()}}return this._req!==null&&this._req.abort(),this._aborted=!0,this._retryTimeout!=null&&(clearTimeout(this._retryTimeout),this._retryTimeout=null),!t||this.url==null?Promise.resolve():r.terminate(this.url,this.options).then(function(){return i._removeFromUrlStorage()})}},{key:"_emitHttpError",value:function(t,i,n,s){this._emitError(new jt(n,s,t,i))}},{key:"_emitError",value:function(t){var i=this;if(!this._aborted){if(this.options.retryDelays!=null){var n=this._offset!=null&&this._offset>this._offsetBeforeRetry;if(n&&(this._retryAttempt=0),hc(t,this._retryAttempt,this.options)){var s=this.options.retryDelays[this._retryAttempt++];this._offsetBeforeRetry=this._offset,this._retryTimeout=setTimeout(function(){i.start()},s);return}}if(typeof this.options.onError=="function")this.options.onError(t);else throw t}}},{key:"_emitSuccess",value:function(t){this.options.removeFingerprintOnSuccess&&this._removeFromUrlStorage(),typeof this.options.onSuccess=="function"&&this.options.onSuccess({lastResponse:t})}},{key:"_emitProgress",value:function(t,i){typeof this.options.onProgress=="function"&&this.options.onProgress(t,i)}},{key:"_emitChunkComplete",value:function(t,i,n){typeof this.options.onChunkComplete=="function"&&this.options.onChunkComplete(t,i,n)}},{key:"_createUpload",value:function(){var t=this;if(!this.options.endpoint){this._emitError(new Error("tus: unable to create upload because no endpoint is provided"));return}var i=this._openRequest("POST",this.options.endpoint);this.options.uploadLengthDeferred?i.setHeader("Upload-Defer-Length","1"):i.setHeader("Upload-Length","".concat(this._size));var n=dc(this.options.metadata);n!==""&&i.setHeader("Upload-Metadata",n);var s;this.options.uploadDataDuringCreation&&!this.options.uploadLengthDeferred?(this._offset=0,s=this._addChunkToRequest(i)):((this.options.protocol===$i||this.options.protocol===Kr)&&i.setHeader("Upload-Complete","?0"),s=this._sendRequest(i,null)),s.then(function(o){if(!Vt(o.getStatus(),200)){t._emitHttpError(i,o,"tus: unexpected response while creating upload");return}var a=o.getHeader("Location");if(a==null){t._emitHttpError(i,o,"tus: invalid or missing Location header");return}if(t.url=fc(t.options.endpoint,a),rt("Created upload at ".concat(t.url)),typeof t.options.onUploadUrlAvailable=="function"&&t.options.onUploadUrlAvailable(),t._size===0){t._emitSuccess(o),t._source.close();return}t._saveUploadInUrlStorage().then(function(){t.options.uploadDataDuringCreation?t._handleUploadResponse(i,o):(t._offset=0,t._performUpload())})}).catch(function(o){t._emitHttpError(i,null,"tus: failed to create upload",o)})}},{key:"_resumeUpload",value:function(){var t=this,i=this._openRequest("HEAD",this.url),n=this._sendRequest(i,null);n.then(function(s){var o=s.getStatus();if(!Vt(o,200)){if(o===423){t._emitHttpError(i,s,"tus: upload is currently locked; retry later");return}if(Vt(o,400)&&t._removeFromUrlStorage(),!t.options.endpoint){t._emitHttpError(i,s,"tus: unable to resume upload (new upload cannot be created without an endpoint)");return}t.url=null,t._createUpload();return}var a=Number.parseInt(s.getHeader("Upload-Offset"),10);if(Number.isNaN(a)){t._emitHttpError(i,s,"tus: invalid or missing offset value");return}var l=Number.parseInt(s.getHeader("Upload-Length"),10);if(Number.isNaN(l)&&!t.options.uploadLengthDeferred&&t.options.protocol===Vi){t._emitHttpError(i,s,"tus: invalid or missing length value");return}typeof t.options.onUploadUrlAvailable=="function"&&t.options.onUploadUrlAvailable(),t._saveUploadInUrlStorage().then(function(){if(a===l){t._emitProgress(l,l),t._emitSuccess(s);return}t._offset=a,t._performUpload()})}).catch(function(s){t._emitHttpError(i,null,"tus: failed to resume upload",s)})}},{key:"_performUpload",value:function(){var t=this;if(!this._aborted){var i;this.options.overridePatchMethod?(i=this._openRequest("POST",this.url),i.setHeader("X-HTTP-Method-Override","PATCH")):i=this._openRequest("PATCH",this.url),i.setHeader("Upload-Offset","".concat(this._offset));var n=this._addChunkToRequest(i);n.then(function(s){if(!Vt(s.getStatus(),200)){t._emitHttpError(i,s,"tus: unexpected response while uploading chunk");return}t._handleUploadResponse(i,s)}).catch(function(s){t._aborted||t._emitHttpError(i,null,"tus: failed to upload chunk at offset ".concat(t._offset),s)})}}},{key:"_addChunkToRequest",value:function(t){var i=this,n=this._offset,s=this._offset+this.options.chunkSize;return t.setProgressHandler(function(o){i._emitProgress(n+o,i._size)}),this.options.protocol===Vi?t.setHeader("Content-Type","application/offset+octet-stream"):this.options.protocol===Kr&&t.setHeader("Content-Type","application/partial-upload"),(s===Number.POSITIVE_INFINITY||s>this._size)&&!this.options.uploadLengthDeferred&&(s=this._size),this._source.slice(n,s).then(function(o){var a=o.value,l=o.done,c=a!=null&&a.size?a.size:0;i.options.uploadLengthDeferred&&l&&(i._size=i._offset+c,t.setHeader("Upload-Length","".concat(i._size)));var p=i._offset+c;return!i.options.uploadLengthDeferred&&l&&p!==i._size?Promise.reject(new Error("upload was configured with a size of ".concat(i._size," bytes, but the source is done after ").concat(p," bytes"))):a===null?i._sendRequest(t):((i.options.protocol===$i||i.options.protocol===Kr)&&t.setHeader("Upload-Complete",l?"?1":"?0"),i._emitProgress(i._offset,i._size),i._sendRequest(t,a))})}},{key:"_handleUploadResponse",value:function(t,i){var n=Number.parseInt(i.getHeader("Upload-Offset"),10);if(Number.isNaN(n)){this._emitHttpError(t,i,"tus: invalid or missing offset value");return}if(this._emitProgress(n,this._size),this._emitChunkComplete(n-this._offset,n,this._size),this._offset=n,n===this._size){this._emitSuccess(i),this._source.close();return}this._performUpload()}},{key:"_openRequest",value:function(t,i){var n=cc(t,i,this.options);return this._req=n,n}},{key:"_removeFromUrlStorage",value:function(){var t=this;this._urlStorageKey&&(this._urlStorage.removeUpload(this._urlStorageKey).catch(function(i){t._emitError(i)}),this._urlStorageKey=null)}},{key:"_saveUploadInUrlStorage",value:function(){var t=this;if(!this.options.storeFingerprintForResuming||!this._fingerprint||this._urlStorageKey!==null)return Promise.resolve();var i={size:this._size,metadata:this.options.metadata,creationTime:new Date().toString()};return this._parallelUploads?i.parallelUploadUrls=this._parallelUploadUrls:i.uploadUrl=this.url,this._urlStorage.addUpload(this._fingerprint,i).then(function(n){t._urlStorageKey=n})}},{key:"_sendRequest",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return pc(t,i,this.options)}}],[{key:"terminate",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=cc("DELETE",t,i);return pc(n,null,i).then(function(s){if(s.getStatus()!==204)throw new jt("tus: unexpected response while terminating upload",null,n,s)}).catch(function(s){if(s instanceof jt||(s=new jt("tus: failed to terminate upload",s,n,null)),!hc(s,0,i))throw s;var o=i.retryDelays[0],a=i.retryDelays.slice(1),l=qt(qt({},i),{},{retryDelays:a});return new Promise(function(c){return setTimeout(c,o)}).then(function(){return r.terminate(t,l)})})}}])})();function dc(r){return Object.entries(r).map(function(e){var t=mc(e,2),i=t[0],n=t[1];return"".concat(i," ").concat(Gd.encode(String(n)))}).join(",")}function Vt(r,e){return r>=e&&r<e+100}function cc(r,e,t){var i=t.httpStack.createRequest(r,e);t.protocol===$i?i.setHeader("Upload-Draft-Interop-Version","5"):t.protocol===Kr?i.setHeader("Upload-Draft-Interop-Version","6"):i.setHeader("Tus-Resumable","1.0.0");for(var n=t.headers||{},s=0,o=Object.entries(n);s<o.length;s++){var a=mc(o[s],2),l=a[0],c=a[1];i.setHeader(l,c)}if(t.addRequestId){var p=ro();i.setHeader("X-Request-ID",p)}return i}function pc(r,e,t){return no.apply(this,arguments)}function no(){return no=Hm(io().mark(function r(e,t,i){var n;return io().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(typeof i.onBeforeRequest!="function"){o.next=3;break}return o.next=3,i.onBeforeRequest(e);case 3:return o.next=5,e.send(t);case 5:if(n=o.sent,typeof i.onAfterResponse!="function"){o.next=9;break}return o.next=9,i.onAfterResponse(e,n);case 9:return o.abrupt("return",n);case 10:case"end":return o.stop()}},r)})),no.apply(this,arguments)}function Zm(){var r=!0;return typeof navigator<"u"&&navigator.onLine===!1&&(r=!1),r}function hc(r,e,t){return t.retryDelays==null||e>=t.retryDelays.length||r.originalRequest==null?!1:t&&typeof t.onShouldRetry=="function"?t.onShouldRetry(r,e,t):wc(r)}function wc(r){var e=r.originalResponse?r.originalResponse.getStatus():0;return(!Vt(e,400)||e===409||e===423)&&Zm()}function fc(r,e){return new vc.default(e,r).toString()}function Jm(r,e){for(var t=Math.floor(r/e),i=[],n=0;n<e;n++)i.push({start:t*n,end:t*(n+1)});return i[e-1].end=r,i}bc.defaultOptions=Qm;var Gi=bc;var eg=function(){return typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative"},Wi=eg;function so(r){return new Promise(function(e,t){var i=new XMLHttpRequest;i.responseType="blob",i.onload=function(){var n=i.response;e(n)},i.onerror=function(n){t(n)},i.open("GET",r),i.send()})}var tg=function(){return typeof window<"u"&&(typeof window.PhoneGap<"u"||typeof window.Cordova<"u"||typeof window.cordova<"u")},_c=tg;function oo(r){return new Promise(function(e,t){var i=new FileReader;i.onload=function(){var n=new Uint8Array(i.result);e({value:n})},i.onerror=function(n){t(n)},i.readAsArrayBuffer(r)})}function Xr(r){"@babel/helpers - typeof";return Xr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xr(r)}function rg(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function xc(r,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,ng(i.key),i)}}function ig(r,e,t){return e&&xc(r.prototype,e),t&&xc(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function ng(r){var e=sg(r,"string");return Xr(e)=="symbol"?e:e+""}function sg(r,e){if(Xr(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var i=t.call(r,e||"default");if(Xr(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var ao=(function(){function r(e){rg(this,r),this._file=e,this.size=e.size}return ig(r,[{key:"slice",value:function(t,i){if(_c())return oo(this._file.slice(t,i));var n=this._file.slice(t,i),s=i>=this.size;return Promise.resolve({value:n,done:s})}},{key:"close",value:function(){}}])})();function Yr(r){"@babel/helpers - typeof";return Yr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yr(r)}function og(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function Sc(r,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,lg(i.key),i)}}function ag(r,e,t){return e&&Sc(r.prototype,e),t&&Sc(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function lg(r){var e=ug(r,"string");return Yr(e)=="symbol"?e:e+""}function ug(r,e){if(Yr(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var i=t.call(r,e||"default");if(Yr(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function Fc(r){return r===void 0?0:r.size!==void 0?r.size:r.length}function dg(r,e){if(r.concat)return r.concat(e);if(r instanceof Blob)return new Blob([r,e],{type:r.type});if(r.set){var t=new r.constructor(r.length+e.length);return t.set(r),t.set(e,r.length),t}throw new Error("Unknown data type")}var Pc=(function(){function r(e){og(this,r),this._buffer=void 0,this._bufferOffset=0,this._reader=e,this._done=!1}return ag(r,[{key:"slice",value:function(t,i){return t<this._bufferOffset?Promise.reject(new Error("Requested data is before the reader's current offset")):this._readUntilEnoughDataOrDone(t,i)}},{key:"_readUntilEnoughDataOrDone",value:function(t,i){var n=this,s=i<=this._bufferOffset+Fc(this._buffer);if(this._done||s){var o=this._getDataFromBuffer(t,i),a=o==null?this._done:!1;return Promise.resolve({value:o,done:a})}return this._reader.read().then(function(l){var c=l.value,p=l.done;return p?n._done=!0:n._buffer===void 0?n._buffer=c:n._buffer=dg(n._buffer,c),n._readUntilEnoughDataOrDone(t,i)})}},{key:"_getDataFromBuffer",value:function(t,i){t>this._bufferOffset&&(this._buffer=this._buffer.slice(t-this._bufferOffset),this._bufferOffset=t);var n=Fc(this._buffer)===0;return this._done&&n?null:this._buffer.slice(0,i-t)}},{key:"close",value:function(){this._reader.cancel&&this._reader.cancel()}}])})();function gt(r){"@babel/helpers - typeof";return gt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gt(r)}function lo(){"use strict";lo=function(){return e};var r,e={},t=Object.prototype,i=t.hasOwnProperty,n=Object.defineProperty||function(y,h,f){y[h]=f.value},s=typeof Symbol=="function"?Symbol:{},o=s.iterator||"@@iterator",a=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function c(y,h,f){return Object.defineProperty(y,h,{value:f,enumerable:!0,configurable:!0,writable:!0}),y[h]}try{c({},"")}catch{c=function(f,P,T){return f[P]=T}}function p(y,h,f,P){var T=h&&h.prototype instanceof U?h:U,E=Object.create(T.prototype),_=new Oe(P||[]);return n(E,"_invoke",{value:me(y,f,_)}),E}function d(y,h,f){try{return{type:"normal",arg:y.call(h,f)}}catch(P){return{type:"throw",arg:P}}}e.wrap=p;var g="suspendedStart",v="suspendedYield",x="executing",A="completed",C={};function U(){}function F(){}function k(){}var N={};c(N,o,function(){return this});var M=Object.getPrototypeOf,R=M&&M(M(Ue([])));R&&R!==t&&i.call(R,o)&&(N=R);var B=k.prototype=U.prototype=Object.create(N);function G(y){["next","throw","return"].forEach(function(h){c(y,h,function(f){return this._invoke(h,f)})})}function K(y,h){function f(T,E,_,b){var w=d(y[T],y,E);if(w.type!=="throw"){var S=w.arg,I=S.value;return I&&gt(I)=="object"&&i.call(I,"__await")?h.resolve(I.__await).then(function(D){f("next",D,_,b)},function(D){f("throw",D,_,b)}):h.resolve(I).then(function(D){S.value=D,_(S)},function(D){return f("throw",D,_,b)})}b(w.arg)}var P;n(this,"_invoke",{value:function(E,_){function b(){return new h(function(w,S){f(E,_,w,S)})}return P=P?P.then(b,b):b()}})}function me(y,h,f){var P=g;return function(T,E){if(P===x)throw Error("Generator is already running");if(P===A){if(T==="throw")throw E;return{value:r,done:!0}}for(f.method=T,f.arg=E;;){var _=f.delegate;if(_){var b=X(_,f);if(b){if(b===C)continue;return b}}if(f.method==="next")f.sent=f._sent=f.arg;else if(f.method==="throw"){if(P===g)throw P=A,f.arg;f.dispatchException(f.arg)}else f.method==="return"&&f.abrupt("return",f.arg);P=x;var w=d(y,h,f);if(w.type==="normal"){if(P=f.done?A:v,w.arg===C)continue;return{value:w.arg,done:f.done}}w.type==="throw"&&(P=A,f.method="throw",f.arg=w.arg)}}}function X(y,h){var f=h.method,P=y.iterator[f];if(P===r)return h.delegate=null,f==="throw"&&y.iterator.return&&(h.method="return",h.arg=r,X(y,h),h.method==="throw")||f!=="return"&&(h.method="throw",h.arg=new TypeError("The iterator does not provide a '"+f+"' method")),C;var T=d(P,y.iterator,h.arg);if(T.type==="throw")return h.method="throw",h.arg=T.arg,h.delegate=null,C;var E=T.arg;return E?E.done?(h[y.resultName]=E.value,h.next=y.nextLoc,h.method!=="return"&&(h.method="next",h.arg=r),h.delegate=null,C):E:(h.method="throw",h.arg=new TypeError("iterator result is not an object"),h.delegate=null,C)}function ue(y){var h={tryLoc:y[0]};1 in y&&(h.catchLoc=y[1]),2 in y&&(h.finallyLoc=y[2],h.afterLoc=y[3]),this.tryEntries.push(h)}function de(y){var h=y.completion||{};h.type="normal",delete h.arg,y.completion=h}function Oe(y){this.tryEntries=[{tryLoc:"root"}],y.forEach(ue,this),this.reset(!0)}function Ue(y){if(y||y===""){var h=y[o];if(h)return h.call(y);if(typeof y.next=="function")return y;if(!isNaN(y.length)){var f=-1,P=function T(){for(;++f<y.length;)if(i.call(y,f))return T.value=y[f],T.done=!1,T;return T.value=r,T.done=!0,T};return P.next=P}}throw new TypeError(gt(y)+" is not iterable")}return F.prototype=k,n(B,"constructor",{value:k,configurable:!0}),n(k,"constructor",{value:F,configurable:!0}),F.displayName=c(k,l,"GeneratorFunction"),e.isGeneratorFunction=function(y){var h=typeof y=="function"&&y.constructor;return!!h&&(h===F||(h.displayName||h.name)==="GeneratorFunction")},e.mark=function(y){return Object.setPrototypeOf?Object.setPrototypeOf(y,k):(y.__proto__=k,c(y,l,"GeneratorFunction")),y.prototype=Object.create(B),y},e.awrap=function(y){return{__await:y}},G(K.prototype),c(K.prototype,a,function(){return this}),e.AsyncIterator=K,e.async=function(y,h,f,P,T){T===void 0&&(T=Promise);var E=new K(p(y,h,f,P),T);return e.isGeneratorFunction(h)?E:E.next().then(function(_){return _.done?_.value:E.next()})},G(B),c(B,l,"Generator"),c(B,o,function(){return this}),c(B,"toString",function(){return"[object Generator]"}),e.keys=function(y){var h=Object(y),f=[];for(var P in h)f.push(P);return f.reverse(),function T(){for(;f.length;){var E=f.pop();if(E in h)return T.value=E,T.done=!1,T}return T.done=!0,T}},e.values=Ue,Oe.prototype={constructor:Oe,reset:function(h){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(de),!h)for(var f in this)f.charAt(0)==="t"&&i.call(this,f)&&!isNaN(+f.slice(1))&&(this[f]=r)},stop:function(){this.done=!0;var h=this.tryEntries[0].completion;if(h.type==="throw")throw h.arg;return this.rval},dispatchException:function(h){if(this.done)throw h;var f=this;function P(S,I){return _.type="throw",_.arg=h,f.next=S,I&&(f.method="next",f.arg=r),!!I}for(var T=this.tryEntries.length-1;T>=0;--T){var E=this.tryEntries[T],_=E.completion;if(E.tryLoc==="root")return P("end");if(E.tryLoc<=this.prev){var b=i.call(E,"catchLoc"),w=i.call(E,"finallyLoc");if(b&&w){if(this.prev<E.catchLoc)return P(E.catchLoc,!0);if(this.prev<E.finallyLoc)return P(E.finallyLoc)}else if(b){if(this.prev<E.catchLoc)return P(E.catchLoc,!0)}else{if(!w)throw Error("try statement without catch or finally");if(this.prev<E.finallyLoc)return P(E.finallyLoc)}}}},abrupt:function(h,f){for(var P=this.tryEntries.length-1;P>=0;--P){var T=this.tryEntries[P];if(T.tryLoc<=this.prev&&i.call(T,"finallyLoc")&&this.prev<T.finallyLoc){var E=T;break}}E&&(h==="break"||h==="continue")&&E.tryLoc<=f&&f<=E.finallyLoc&&(E=null);var _=E?E.completion:{};return _.type=h,_.arg=f,E?(this.method="next",this.next=E.finallyLoc,C):this.complete(_)},complete:function(h,f){if(h.type==="throw")throw h.arg;return h.type==="break"||h.type==="continue"?this.next=h.arg:h.type==="return"?(this.rval=this.arg=h.arg,this.method="return",this.next="end"):h.type==="normal"&&f&&(this.next=f),C},finish:function(h){for(var f=this.tryEntries.length-1;f>=0;--f){var P=this.tryEntries[f];if(P.finallyLoc===h)return this.complete(P.completion,P.afterLoc),de(P),C}},catch:function(h){for(var f=this.tryEntries.length-1;f>=0;--f){var P=this.tryEntries[f];if(P.tryLoc===h){var T=P.completion;if(T.type==="throw"){var E=T.arg;de(P)}return E}}throw Error("illegal catch attempt")},delegateYield:function(h,f,P){return this.delegate={iterator:Ue(h),resultName:f,nextLoc:P},this.method==="next"&&(this.arg=r),C}},e}function Ec(r,e,t,i,n,s,o){try{var a=r[s](o),l=a.value}catch(c){t(c);return}a.done?e(l):Promise.resolve(l).then(i,n)}function cg(r){return function(){var e=this,t=arguments;return new Promise(function(i,n){var s=r.apply(e,t);function o(l){Ec(s,i,n,o,a,"next",l)}function a(l){Ec(s,i,n,o,a,"throw",l)}o(void 0)})}}function pg(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function Cc(r,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,fg(i.key),i)}}function hg(r,e,t){return e&&Cc(r.prototype,e),t&&Cc(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function fg(r){var e=mg(r,"string");return gt(e)=="symbol"?e:e+""}function mg(r,e){if(gt(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var i=t.call(r,e||"default");if(gt(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var Tc=(function(){function r(){pg(this,r)}return hg(r,[{key:"openFile",value:(function(){var e=cg(lo().mark(function i(n,s){var o;return lo().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!(Wi()&&n&&typeof n.uri<"u")){l.next=11;break}return l.prev=1,l.next=4,so(n.uri);case 4:return o=l.sent,l.abrupt("return",new ao(o));case 8:throw l.prev=8,l.t0=l.catch(1),new Error("tus: cannot fetch `file.uri` as Blob, make sure the uri is correct and accessible. ".concat(l.t0));case 11:if(!(typeof n.slice=="function"&&typeof n.size<"u")){l.next=13;break}return l.abrupt("return",Promise.resolve(new ao(n)));case 13:if(typeof n.read!="function"){l.next=18;break}if(s=Number(s),Number.isFinite(s)){l.next=17;break}return l.abrupt("return",Promise.reject(new Error("cannot create source for stream without a finite value for the `chunkSize` option")));case 17:return l.abrupt("return",Promise.resolve(new Pc(n,s)));case 18:return l.abrupt("return",Promise.reject(new Error("source object may only be an instance of File, Blob, or Reader in this environment")));case 19:case"end":return l.stop()}},i,null,[[1,8]])}));function t(i,n){return e.apply(this,arguments)}return t})()}])})();function uo(r,e){return Wi()?Promise.resolve(gg(r,e)):Promise.resolve(["tus-br",r.name,r.type,r.size,r.lastModified,e.endpoint].join("-"))}function gg(r,e){var t=r.exif?yg(JSON.stringify(r.exif)):"noexif";return["tus-rn",r.name||"noname",r.size||"nosize",t,e.endpoint].join("/")}function yg(r){var e=0;if(r.length===0)return e;for(var t=0;t<r.length;t++){var i=r.charCodeAt(t);e=(e<<5)-e+i,e&=e}return e}function Qr(r){"@babel/helpers - typeof";return Qr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qr(r)}function co(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function kc(r,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,vg(i.key),i)}}function po(r,e,t){return e&&kc(r.prototype,e),t&&kc(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function vg(r){var e=bg(r,"string");return Qr(e)=="symbol"?e:e+""}function bg(r,e){if(Qr(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var i=t.call(r,e||"default");if(Qr(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var Uc=(function(){function r(){co(this,r)}return po(r,[{key:"createRequest",value:function(t,i){return new wg(t,i)}},{key:"getName",value:function(){return"XHRHttpStack"}}])})();var wg=(function(){function r(e,t){co(this,r),this._xhr=new XMLHttpRequest,this._xhr.open(e,t,!0),this._method=e,this._url=t,this._headers={}}return po(r,[{key:"getMethod",value:function(){return this._method}},{key:"getURL",value:function(){return this._url}},{key:"setHeader",value:function(t,i){this._xhr.setRequestHeader(t,i),this._headers[t]=i}},{key:"getHeader",value:function(t){return this._headers[t]}},{key:"setProgressHandler",value:function(t){"upload"in this._xhr&&(this._xhr.upload.onprogress=function(i){i.lengthComputable&&t(i.loaded)})}},{key:"send",value:function(){var t=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return new Promise(function(n,s){t._xhr.onload=function(){n(new _g(t._xhr))},t._xhr.onerror=function(o){s(o)},t._xhr.send(i)})}},{key:"abort",value:function(){return this._xhr.abort(),Promise.resolve()}},{key:"getUnderlyingObject",value:function(){return this._xhr}}])})(),_g=(function(){function r(e){co(this,r),this._xhr=e}return po(r,[{key:"getStatus",value:function(){return this._xhr.status}},{key:"getHeader",value:function(t){return this._xhr.getResponseHeader(t)}},{key:"getBody",value:function(){return this._xhr.responseText}},{key:"getUnderlyingObject",value:function(){return this._xhr}}])})();function Zr(r){"@babel/helpers - typeof";return Zr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zr(r)}function xg(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function Ac(r,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,Fg(i.key),i)}}function Sg(r,e,t){return e&&Ac(r.prototype,e),t&&Ac(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function Fg(r){var e=Pg(r,"string");return Zr(e)=="symbol"?e:e+""}function Pg(r,e){if(Zr(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var i=t.call(r,e||"default");if(Zr(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var fo=!1;try{fo="localStorage"in window,Ki="tusSupport",ho=localStorage.getItem(Ki),localStorage.setItem(Ki,ho),ho===null&&localStorage.removeItem(Ki)}catch(r){if(r.code===r.SECURITY_ERR||r.code===r.QUOTA_EXCEEDED_ERR)fo=!1;else throw r}var Ki,ho,Oc=fo,Ic=(function(){function r(){xg(this,r)}return Sg(r,[{key:"findAllUploads",value:function(){var t=this._findEntries("tus::");return Promise.resolve(t)}},{key:"findUploadsByFingerprint",value:function(t){var i=this._findEntries("tus::".concat(t,"::"));return Promise.resolve(i)}},{key:"removeUpload",value:function(t){return localStorage.removeItem(t),Promise.resolve()}},{key:"addUpload",value:function(t,i){var n=Math.round(Math.random()*1e12),s="tus::".concat(t,"::").concat(n);return localStorage.setItem(s,JSON.stringify(i)),Promise.resolve(s)}},{key:"_findEntries",value:function(t){for(var i=[],n=0;n<localStorage.length;n++){var s=localStorage.key(n);if(s.indexOf(t)===0)try{var o=JSON.parse(localStorage.getItem(s));o.urlStorageKey=s,i.push(o)}catch{}}return i}}])})();function Gt(r){"@babel/helpers - typeof";return Gt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gt(r)}function Eg(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function Dc(r,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,Bc(i.key),i)}}function Cg(r,e,t){return e&&Dc(r.prototype,e),t&&Dc(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function Tg(r,e,t){return e=Xi(e),kg(r,Nc()?Reflect.construct(e,t||[],Xi(r).constructor):e.apply(r,t))}function kg(r,e){if(e&&(Gt(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ug(r)}function Ug(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function Nc(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Nc=function(){return!!r})()}function Xi(r){return Xi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Xi(r)}function Ag(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&mo(r,e)}function mo(r,e){return mo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},mo(r,e)}function Rc(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable})),t.push.apply(t,i)}return t}function $t(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Rc(Object(t),!0).forEach(function(i){Og(r,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Rc(Object(t)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(t,i))})}return r}function Og(r,e,t){return e=Bc(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Bc(r){var e=Ig(r,"string");return Gt(e)=="symbol"?e:e+""}function Ig(r,e){if(Gt(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var i=t.call(r,e||"default");if(Gt(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var Yi=$t($t({},Gi.defaultOptions),{},{httpStack:new Uc,fileReader:new Tc,urlStorage:Oc?new Ic:new Cd,fingerprint:uo}),Lc=(function(r){function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Eg(this,e),i=$t($t({},Yi),i),Tg(this,e,[t,i])}return Ag(e,r),Cg(e,null,[{key:"terminate",value:function(i){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return n=$t($t({},Yi),n),Gi.terminate(i,n)}}])})(Gi),lx=typeof XMLHttpRequest=="function"&&typeof Blob=="function"&&typeof Blob.prototype.slice=="function";var jc={name:"@uppy/tus",description:"Resumable uploads for Uppy using Tus.io",version:"5.0.1",license:"MIT",type:"module",sideEffects:!1,scripts:{build:"tsc --build tsconfig.build.json",typecheck:"tsc --build",test:"vitest run --environment=jsdom --silent='passed-only'"},keywords:["file uploader","uppy","uppy-plugin","upload","resumable","tus"],homepage:"https://uppy.io",bugs:{url:"https://github.com/transloadit/uppy/issues"},repository:{type:"git",url:"git+https://github.com/transloadit/uppy.git"},files:["src","lib","dist","CHANGELOG.md"],exports:{".":"./lib/index.js","./package.json":"./package.json"},dependencies:{"@uppy/companion-client":"^5.0.1","@uppy/utils":"^7.0.2","tus-js-client":"^4.2.3"},devDependencies:{"@uppy/core":"^5.0.2",jsdom:"^26.1.0",typescript:"^5.8.3",vitest:"^3.2.4"},peerDependencies:{"@uppy/core":"^5.0.2"}};function Rg(){return typeof window<"u"&&(typeof window.PhoneGap<"u"||typeof window.Cordova<"u"||typeof window.cordova<"u")}function Ng(){return typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative"}function go(r){return(e,t)=>{if(Rg()||Ng())return Yi.fingerprint(e,t);let i=["tus",r.id,t.endpoint].join("-");return Promise.resolve(i)}}var zc={endpoint:"",uploadUrl:null,metadata:{},uploadSize:null,onProgress:null,onChunkComplete:null,onSuccess:null,onError:null,overridePatchMethod:!1,headers:{},addRequestId:!1,chunkSize:1/0,retryDelays:[100,1e3,3e3,5e3],parallelUploads:1,removeFingerprintOnSuccess:!1,uploadLengthDeferred:!1,uploadDataDuringCreation:!1},Bg={limit:20,retryDelays:zc.retryDelays,withCredentials:!1,allowedMetaFields:!0},Qi=class extends Xe{static VERSION=jc.version;#e;requests;uploaders;uploaderEvents;constructor(e,t){if(super(e,m(m({},Bg),t)),this.type="uploader",this.id=this.opts.id||"Tus",t?.allowedMetaFields===void 0&&"metaFields"in this.opts)throw new Error("The `metaFields` option has been renamed to `allowedMetaFields`.");if("autoRetry"in t)throw new Error("The `autoRetry` option was deprecated and has been removed.");this.requests=this.opts.rateLimitedQueue??new at(this.opts.limit),this.#e=this.opts.retryDelays?.values(),this.uploaders=Object.create(null),this.uploaderEvents=Object.create(null)}resetUploaderReferences(e,t){let i=this.uploaders[e];i&&(i.abort(),t?.abort&&i.abort(!0),this.uploaders[e]=null),this.uploaderEvents[e]&&(this.uploaderEvents[e].remove(),this.uploaderEvents[e]=null)}#t(e){return this.resetUploaderReferences(e.id),new Promise((t,i)=>{let n,s,o,a=m(m({},this.opts),e.tus||{});typeof a.headers=="function"&&(a.headers=a.headers(e));let U=a,{onShouldRetry:l,onBeforeRequest:c}=U,p=wt(U,["onShouldRetry","onBeforeRequest"]),d=m(m({},zc),p);d.fingerprint=go(e),d.onBeforeRequest=async F=>{let k=F.getUnderlyingObject();k.withCredentials=!!a.withCredentials;let N;if(typeof c=="function"&&(N=c(F,e)),Et(n,"shouldBeRequeued")){if(!n.shouldBeRequeued)return Promise.reject();let M,R=new Promise(B=>{M=B});n=this.requests.run(()=>(e.isPaused&&n.abort(),M(),()=>{})),await Promise.all([R,N]);return}return N},d.onError=F=>{this.uppy.log(F);let k=F.originalRequest!=null?F.originalRequest.getUnderlyingObject():null;En(k)&&(F=new gn(F,k)),this.resetUploaderReferences(e.id),n?.abort(),typeof a.onError=="function"&&a.onError(F),i(F)},d.onProgress=(F,k)=>{this.onReceiveUploadUrl(e,o.url),typeof a.onProgress=="function"&&a.onProgress(F,k);let N=this.uppy.getFile(e.id);this.uppy.emit("upload-progress",N,{uploadStarted:N.progress.uploadStarted??0,bytesUploaded:F,bytesTotal:k})},d.onSuccess=F=>{let k={uploadURL:o.url??void 0,status:200,body:{xhr:F.lastResponse.getUnderlyingObject()}};if(this.uppy.emit("upload-success",this.uppy.getFile(e.id),k),this.resetUploaderReferences(e.id),n.done(),o.url){let{name:N}=o.file;this.uppy.log(`Download ${N} from ${o.url}`)}typeof a.onSuccess=="function"&&a.onSuccess(F),t(o)};let g=F=>{let k=F?.originalResponse?.getStatus();if(k===429){if(!this.requests.isPaused){let N=this.#e?.next();if(N==null||N.done)return!1;this.requests.rateLimit(N.value)}}else{if(k!=null&&k>=400&&k<500&&k!==409&&k!==423)return!1;typeof navigator<"u"&&navigator.onLine===!1&&(this.requests.isPaused||(this.requests.pause(),window.addEventListener("online",()=>{this.requests.resume()},{once:!0})))}return n.abort(),n={shouldBeRequeued:!0,abort(){this.shouldBeRequeued=!1},done(){throw new Error("Cannot mark a queued request as done: this indicates a bug")},fn(){throw new Error("Cannot run a queued request: this indicates a bug")}},!0};l!=null?d.onShouldRetry=(F,k)=>l(F,k,a,g):d.onShouldRetry=g;let v=(F,k,N)=>{Et(F,k)&&!Et(F,N)&&(F[N]=F[k])},x={};si(a.allowedMetaFields,e.meta).forEach(F=>{x[F]=String(e.meta[F])}),v(x,"type","filetype"),v(x,"name","filename"),d.metadata=x,o=new Lc(e.data,d),this.uploaders[e.id]=o;let C=new br(this.uppy);this.uploaderEvents[e.id]=C,s=()=>(e.isPaused||o.start(),()=>{}),o.findPreviousUploads().then(F=>{let k=F[0];k&&(this.uppy.log(`[Tus] Resuming upload of ${e.id} started at ${k.creationTime}`),o.resumeFromPreviousUpload(k)),n=this.requests.run(s)}),C.onFileRemove(e.id,F=>{n.abort(),this.resetUploaderReferences(e.id,{abort:!!o.url}),t(`upload ${F} was removed`)}),C.onPause(e.id,F=>{n.abort(),F?o.abort():n=this.requests.run(s)}),C.onPauseAll(e.id,()=>{n.abort(),o.abort()}),C.onCancelAll(e.id,()=>{n.abort(),this.resetUploaderReferences(e.id,{abort:!!o.url}),t(`upload ${e.id} was canceled`)}),C.onResumeAll(e.id,()=>{n.abort(),e.error&&o.abort(),n=this.requests.run(s)})}).catch(t=>{throw this.uppy.emit("upload-error",e,t),t})}onReceiveUploadUrl(e,t){let i=this.uppy.getFile(e.id);i&&(!i.tus||i.tus.uploadUrl!==t)&&(this.uppy.log("[Tus] Storing upload url"),this.uppy.setFileState(i.id,{tus:O(m({},i.tus),{uploadUrl:t})}))}#r(e){let t=m({},this.opts);return e.tus&&Object.assign(t,e.tus),typeof t.headers=="function"&&(t.headers=t.headers(e)),O(m({},e.remote?.body),{endpoint:t.endpoint,uploadUrl:t.uploadUrl,protocol:"tus",size:e.data.size,headers:t.headers,metadata:e.meta})}async#i(e){let t=yn(e),i=vn(t);this.uppy.emit("upload-start",i),await Promise.allSettled(t.map(n=>{if(n.isRemote){let s=()=>this.requests,o=new AbortController,a=c=>{c.id===n.id&&o.abort()};this.uppy.on("file-removed",a);let l=this.uppy.getRequestClientForFile(n).uploadRemoteFile(n,this.#r(n),{signal:o.signal,getQueue:s});return this.requests.wrapSyncFunction(()=>{this.uppy.off("file-removed",a)},{priority:-1})(),l}return this.#t(n)}))}#n=async e=>{if(e.length===0){this.uppy.log("[Tus] No files to upload");return}this.opts.limit===0&&this.uppy.log("[Tus] When uploading multiple files at once, consider setting the `limit` option (to `10` for example), to limit the number of concurrent uploads, which helps prevent memory and network issues: https://uppy.io/docs/tus/#limit-0","warning"),this.uppy.log("[Tus] Uploading...");let t=this.uppy.getFilesByIds(e);await this.#i(t)};install(){this.uppy.setState({capabilities:O(m({},this.uppy.getState().capabilities),{resumableUploads:!0})}),this.uppy.addUploader(this.#n)}uninstall(){this.uppy.setState({capabilities:O(m({},this.uppy.getState().capabilities),{resumableUploads:!1})}),this.uppy.removeUploader(this.#n)}};var Zi="thumbnails";var Ji="partyHash";var Hc="/video_thumb.png",Jr="vidthu_start_",ei="_vidthu_end.jpeg";function qc(r){return r.replace(/\//g,"--")}function Vc(r){return r.replace(/--/g,"/")}var $c="thumbnailsSigned",en=(()=>{class r{saveFullResSignedUrl(t,i,n){let s=Date.now()+n,o={signedUrl:i,expiredAtTicks:s};localStorage.setItem(t,JSON.stringify(o))}readCachedFullResSignedUrl(t){let i=localStorage.getItem(t);if(!i)return;let n=JSON.parse(i),s=Date.now();if(n.expiredAtTicks>s)return n.signedUrl}saveThumbnailSignedUrls(t,i){let n=Date.now()+i,s=this.loadAndPrepareCache();for(let[a,l]of t.entries())s[a]={expiredAtTicks:n,signedUrl:l};let o=JSON.stringify(s);localStorage.setItem($c,o)}readCachedThumbnailSignedUrls(){let t=this.loadAndPrepareCache();return new Map(Object.entries(t).map(([i,n])=>[i,n.signedUrl]))}loadAndPrepareCache(){let t=localStorage.getItem($c),i={};if(!t)return i;try{let n=JSON.parse(t);i=this.clearOldData(n)}catch{console.warn("Failed to parse signed URL cache")}return i}clearOldData(t){let i=Date.now(),n=Object.entries(t).filter(([,s])=>s.expiredAtTicks>i);return Object.fromEntries(n)}static \u0275fac=function(i){return new(i||r)};static \u0275prov=_t({token:r,factory:r.\u0275fac})}return r})();var Lg=".emptyFolderPlaceholder",Wt=(()=>{class r{supabaseService=se(da);titleService=se(na);imageCacheService=se(en);partyHash=Ae(void 0);anonUser=Ft({params:()=>this.partyHash(),loader:async t=>{let i=await this.supabaseService.supabase.auth.getUser(),n=await this.supabaseService.supabase.auth.getSession(),s={user:i.data.user,session:n.data.session};return(!s.session||!s.user||s.user.user_metadata[Ji]!==t.params)&&(s=(await this.supabaseService.supabase.auth.signInAnonymously({options:{data:{partyHash:t.params}}})).data),s}});anonUser$=st(this.anonUser.value);mandatoryMeta=Ft({params:()=>this.anonUser.value(),loader:async()=>{let t=this.partyHash(),{data:i,error:n}=await this.supabaseService.supabase.from("upload_mandator").select("*");if(n)throw new Error(n.message);if(!i||i.length!==1)throw new Error("no mandator found");let s=i[0];return this.titleService.setTitle(`\u2665 ${s.header_name} \u2665`),s}});imageMetaActive=Ae(void 0);imageMeta=Ft({params:()=>this.imageMetaActive(),loader:async()=>{let t=this.partyHash();if(!t)return[];let i=`${t}/${Zi}`,{data:n,error:s}=await this.supabaseService.supabase.storage.from(t).list(i,{sortBy:{column:"updated_at",order:"desc"}});if(s||!n)return console.warn("Error fetching file list or no data",s),[];let o=n.filter(g=>g.name!==Lg),a=this.imageCacheService.readCachedThumbnailSignedUrls(),l=o.map((g,v)=>{let x=`${i}/${g.name}`,A=a.get(x),C=`${t}/${g.name}`,U;if(C.endsWith(ei)){let F=C.indexOf(Jr),k=C.indexOf(ei);F!==-1&&k!==-1&&k>F&&(U=Vc(C.substring(F+Jr.length,k)),C=C.substring(0,F))}return O(m({},g),{thumbnailPath:x,thumbnailSignedUrl:A,fullResPath:C,fullResType:U,idx:v})}),c=l.filter(g=>g.thumbnailSignedUrl===void 0).map(g=>g.thumbnailPath),p={data:[],error:new ua("no Paths")};c.length>0&&(p=await this.supabaseService.supabase.storage.from(t).createSignedUrls(c,43200));let d=new Map(p.data?.filter(g=>g.error===null&&g.path!==void 0).map(({path:g,signedUrl:v})=>[g,v])??[]);return this.imageCacheService.saveThumbnailSignedUrls(d,432e5),l.map((g,v)=>O(m({},g),{thumbnailSignedUrl:g.thumbnailSignedUrl||d.get(g.thumbnailPath),idx:v}))}});static \u0275fac=function(i){return new(i||r)};static \u0275prov=_t({token:r,factory:r.\u0275fac})}return r})();var jg=(r,e)=>[r,e],tn=(()=>{class r{hostClass=De("",{alias:"class"});contentHeight=De(!1);static \u0275fac=function(i){return new(i||r)};static \u0275cmp=St({type:r,selectors:[["lib-loading-indicator"]],inputs:{hostClass:[1,"class","hostClass"],contentHeight:[1,"contentHeight"]},decls:5,vars:4,consts:[[1,"flex","items-center","justify-center","bg-ivory",3,"ngClass"],[1,"flex","flex-col","items-center","gap-4"],[1,"relative","w-20","h-20"],["xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 24 24",1,"absolute","w-14","h-14","text-sage-green","inset-1/2","-translate-x-1/2","-translate-y-1/2","animate-bounce"],["d",`M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 
             6.5 3.5 5 5.5 5c1.54 0 3.04.99 
             3.57 2.36h1.87C13.46 5.99 14.96 5 
             16.5 5 18.5 5 20 6.5 20 8.5c0 
             3.78-3.4 6.86-8.55 11.54L12 21.35z`]],template:function(i,n){i&1&&(q(0,"div",0)(1,"div",1)(2,"div",2),Le(),q(3,"svg",3),he(4,"path",4),Z()()()()),i&2&&pe("ngClass",ta(1,jg,n.contentHeight()?"h-full":"min-h-dvh",n.hostClass()))},dependencies:[Pt,ii],styles:["[_nghost-%COMP%]{display:contents}"]})}return r})();var Wc=Q(Gc(),1);var _o;try{_o=!!new Blob}catch{_o=!1}var xo=(()=>{class r{get isFileSaverSupported(){return _o}genType(t){if(!t||t.lastIndexOf(".")===-1)return"text/plain";let i=t.substring(t.lastIndexOf(".")+1);switch(i){case"txt":return"text/plain";case"xml":case"html":return`text/${i}`;case"json":return"octet/stream";default:return`application/${i}`}}save(t,i,n,s){if(!t)throw new Error("Data argument should be a blob instance");let o=new Blob([t],{type:n||t.type||this.genType(i)});(0,Wc.saveAs)(o,decodeURI(i||"download"),s)}saveText(t,i,n){let s=new Blob([t]);this.save(s,i,void 0,n)}static \u0275fac=function(i){return new(i||r)};static \u0275prov=_t({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),Kc=(()=>{class r{ngZone=se(Yo);el=se($o);fss=se(xo);httpClient=se(ia);method=De("GET");http=De();query=De();header=De();url=De.required();fileName=De();fsOptions=De();successEmitter=new ln;success=hn(this.successEmitter);errorEmitter=new ln;error=hn(this.errorEmitter);d$=se(Vo);constructor(){this.fss.isFileSaverSupported||this.el.nativeElement.classList.add("filesaver__not-support")}ngOnInit(){this.ngZone.runOutsideAngular(()=>this.setupClickListener())}getName(t){return decodeURI(this.fileName()||t.headers.get("filename")||t.headers.get("x-filename")||"")}setDisabled(t){let i=this.el.nativeElement;i.disabled=t,i.classList[t?"add":"remove"]("filesaver__disabled")}setupClickListener(){Ho(this.el.nativeElement,"click").pipe(er(()=>this.fss.isFileSaverSupported),We(this.d$)).subscribe(()=>{let t=this.http();if(!t){let i=new ra,n=this.query()||{};for(let s in n)i=i.set(s,n[s]);t=this.httpClient.request(this.method(),this.url(),{observe:"response",responseType:"blob",headers:this.header(),params:i})}this.setDisabled(!0),t.pipe(We(this.d$)).subscribe({next:i=>{if(i.status!==200||i.body.size<=0){this.errorEmitter.next(i);return}this.fss.save(i.body,this.getName(i),void 0,this.fsOptions()),this.successEmitter.next(i)},error:i=>this.errorEmitter.next(i),complete:()=>this.setDisabled(!1)})})}static \u0275fac=function(i){return new(i||r)};static \u0275dir=Ko({type:r,selectors:[["","fileSaver",""]],inputs:{method:[1,"method"],http:[1,"http"],query:[1,"query"],header:[1,"header"],url:[1,"url"],fileName:[1,"fileName"],fsOptions:[1,"fsOptions"]},outputs:{success:"success",error:"error"},exportAs:["fileSaver"]})}return r})(),Xc=(()=>{class r{static \u0275fac=function(i){return new(i||r)};static \u0275mod=Wo({type:r});static \u0275inj=qo({})}return r})();function Hg(r,e){r&1&&(q(0,"div",7),he(1,"lib-loading-indicator",14),Z()),r&2&&(oe(),pe("contentHeight",!0))}function qg(r,e){r&1&&he(0,"lib-loading-indicator",15),r&2&&pe("contentHeight",!0)}function Vg(r,e){if(r&1){let t=Ze();q(0,"video",18),Ie("loadedmetadata",function(){Ye(t);let n=we(2);return Qe(n.imgLoaded())}),he(1,"source",19),it(2," Your browser does not support the video tag. "),Z()}if(r&2){let t=we(2);pe("playsInline",!0),oe(),pe("src",t.imgMeta.value(),tr)("type",t.mimeType())}}function $g(r,e){if(r&1){let t=Ze();q(0,"img",20),Ie("load",function(){Ye(t);let n=we(2);return Qe(n.imgLoaded())}),Z()}if(r&2){let t=we(2);pe("src",t.imgMeta.value(),tr)}}function Gg(r,e){if(r&1&&($e(0,qg,1,1,"lib-loading-indicator",15),$e(1,Vg,3,3,"video",16)(2,$g,1,1,"img",17)),r&2){let t=we();Ge(t.imageLoading()?0:-1),oe(),Ge(t.isVideo()?1:2)}}var Yc=(()=>{class r{fileSaver=se(xo);dialogRef=se(fa);imageUploadService=se(Wt);idx=Ae(void 0);imageLoading=Ae(!0);data=nt(()=>{let t=this.idx();if(t===void 0)return;let i=this.imageUploadService.imageMeta.value();if(i!==void 0)return i[t]});mimeType=nt(()=>{let t=this.data();if(t?.fullResType)return t.fullResType;let i=t?.metadata;return i&&"mimetype"in i&&typeof i.mimetype=="string"?i.mimetype:"image/*"});isVideo=nt(()=>this.mimeType().includes("video"));maxIdx=nt(()=>{let t=this.imageUploadService.imageMeta.value()?.length;if(t!==void 0)return t-1});minIdx=0;imgMeta=Ft({params:()=>this.data(),loader:async t=>{this.imageLoading.set(!0);let i=t.params.fullResPath,n=this.imageUploadService.imageCacheService.readCachedFullResSignedUrl(i);if(n)return n;let s=this.imageUploadService.partyHash();if(!s)return;let{data:o,error:a}=await this.imageUploadService.supabaseService.supabase.storage.from(s).createSignedUrl(i,43200);if(!o||a)throw new Error(a?.message||"data null");return this.imageUploadService.imageCacheService.saveFullResSignedUrl(i,o.signedUrl,432e5),o.signedUrl}});constructor(t){this.idx.set(t.idx)}next(){this.idx.update(t=>{let i=t===void 0?void 0:t+1;return(i??0)>(this.maxIdx()??0)?this.minIdx:i})}previous(){this.idx.update(t=>{let i=t===void 0?void 0:t-1;return(i??0)<this.minIdx?this.maxIdx():i})}imgLoaded(){this.imageLoading.set(!1)}static \u0275fac=function(i){return new(i||r)(Go(ma))};static \u0275cmp=St({type:r,selectors:[["lib-image-viewer"]],decls:19,vars:3,consts:[[1,"w-[95dvw]","mx-auto","p-2"],[1,"bg-ivory","rounded-2xl","shadow-lg","overflow-hidden","border","border-primary-border"],[1,"flex","justify-end","p-2"],["type","button",1,"text-lg","text-nowrap","font-semibold","rounded-md","bg-ivory","px-3","py-2","shadow-xs","ring-1","ring-gold","ring-inset","text-gold",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","currentColor","stroke","currentColor","viewBox","0 0 320 512",1,"size-5","text-gold"],["d","M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"],[1,"w-full","h-[70dvh]","flex","items-center","justify-center","relative"],[1,"h-full","w-full"],[1,"text-center","p-3","w-full","flex","justify-between"],["d","M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l192 192c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256 246.6 86.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-192 192z"],["fileSaver","","type","button",1,"text-lg","text-nowrap","font-semibold","rounded-md","bg-ivory","px-3","py-2","shadow-xs","ring-1","ring-gold","ring-inset","text-gold",3,"method","url"],["xmlns","http://www.w3.org/2000/svg","fill","currentColor","stroke","currentColor","viewBox","0 0 512 512",1,"size-5","text-gold"],["d","M288 32c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 242.7-73.4-73.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l128 128c12.5 12.5 32.8 12.5 45.3 0l128-128c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L288 274.7 288 32zM64 352c-35.3 0-64 28.7-64 64l0 32c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-32c0-35.3-28.7-64-64-64l-101.5 0-45.3 45.3c-25 25-65.5 25-90.5 0L165.5 352 64 352zm368 56a24 24 0 1 1 0 48 24 24 0 1 1 0-48z"],["d","M310.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-192 192c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L242.7 256 73.4 86.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l192 192z"],[3,"contentHeight"],[1,"absolute","inset-0",3,"contentHeight"],["controls","",1,"max-h-full","max-w-full","object-contain",3,"playsInline"],[1,"max-h-full","max-w-full","object-contain",3,"src"],["controls","",1,"max-h-full","max-w-full","object-contain",3,"loadedmetadata","playsInline"],[3,"src","type"],[1,"max-h-full","max-w-full","object-contain",3,"load","src"]],template:function(i,n){i&1&&(q(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),Ie("click",function(){return n.dialogRef.close()}),Le(),q(4,"svg",4),he(5,"path",5),Z()()(),xt(),q(6,"div",6),$e(7,Hg,2,1,"div",7)(8,Gg,3,2),Z(),q(9,"div",8)(10,"button",3),Ie("click",function(){return n.previous()}),Le(),q(11,"svg",4),he(12,"path",9),Z()(),xt(),q(13,"button",10),Le(),q(14,"svg",11),he(15,"path",12),Z()(),xt(),q(16,"button",3),Ie("click",function(){return n.next()}),Le(),q(17,"svg",4),he(18,"path",13),Z()()()()()),i&2&&(oe(7),Ge(n.imgMeta.isLoading()?7:8),oe(6),pe("method","GET")("url",n.imgMeta.value()??""))},dependencies:[Pt,tn,Xc,Kc],styles:["[_nghost-%COMP%]{display:contents}"]})}return r})();var Wg=["uppyContainer"],So=r=>[r],Kg=r=>({"animate-spin":r}),Xg=(r,e)=>e.id;function Yg(r,e){r&1&&he(0,"lib-loading-indicator")}function Qg(r,e){if(r&1){let t=Ze();q(0,"div",7)(1,"button",14),Ie("click",function(){Ye(t);let n=we(2);return Qe(n.triggerUppySelector())}),it(2),dn(3,"transloco"),Z()()}r&2&&(oe(2),ea(" ",cn(3,1,"imageUploader.selectPhotos")," "))}function Zg(r,e){r&1&&(q(0,"div",9)(1,"div",15),Le(),q(2,"svg",16),he(3,"circle",17)(4,"path",18),Z(),xt(),q(5,"span"),it(6),dn(7,"transloco"),Z()()()),r&2&&(oe(6),ri(cn(7,1,"imageUploader.loadingGallery")))}function Jg(r,e){if(r&1){let t=Ze();q(0,"div")(1,"div",20),Ie("click",function(){let n=Ye(t).$implicit,s=we(3);return Qe(s.openDialog(n))}),he(2,"img",21),Z()()}if(r&2){let t=e.$implicit;oe(2),pe("src",t.thumbnailSignedUrl,tr)}}function ey(r,e){if(r&1&&(q(0,"cdk-virtual-scroll-viewport",10,1),Xo(2,Jg,3,1,"div",19),Z()),r&2){let t=we(2);pe("itemSize",t.imgHeight()),oe(2),pe("cdkVirtualForOf",t.imageUploadService.imageMeta.value())("cdkVirtualForTrackBy",t.trackByFn)}}function ty(r,e){if(r&1){let t=Ze();Le(),q(0,"svg",26),Ie("click",function(){Ye(t);let n=we(3);return Qe(n.imageUploadService.imageMeta.reload())}),he(1,"path",27),Z()}if(r&2){let t=we(3);pe("ngClass",rr(1,Kg,t.imageUploadService.imageMeta.isLoading()))}}function ry(r,e){r&1&&he(0,"div",23)}function iy(r,e){if(r&1){let t=Ze();q(0,"button",22),Ie("click",function(){let n=Ye(t).$implicit,s=we(2);return Qe(s.activeTab.set(n))}),he(1,"div",23),q(2,"span",24),it(3),Z(),$e(4,ty,2,3,":svg:svg",25)(5,ry,1,0,"div",23),Z()}if(r&2){let t=e.$implicit,i=we(2);pe("ngClass",rr(3,So,i.activeTab().id===t.id?"border-gold":"border-transparent")),oe(3),ri(t.name),oe(),Ge(t.hideIcon?5:4)}}function ny(r,e){if(r&1&&(q(0,"div",2)(1,"div",3)(2,"h1",4),it(3),Z()(),q(4,"div",5)(5,"div",6,0),$e(7,Qg,4,3,"div",7),Z(),q(8,"div",8),$e(9,Zg,8,3,"div",9)(10,ey,3,3,"cdk-virtual-scroll-viewport",10),Z()(),q(11,"div",11)(12,"div",12),Qo(13,iy,6,5,"button",13,Xg),Z()()()),r&2){let t,i=we();oe(3),ri((t=i.imageUploadService.mandatoryMeta.value())==null?null:t.header_name),oe(2),pe("ngClass",rr(5,So,i.activeTab().id==="upload"?"flex":"hidden")),oe(2),Ge(i.showFileButton()?7:-1),oe(),pe("ngClass",rr(7,So,i.activeTab().id==="gallery"?"z-10":"-z-50")),oe(),Ge(i.imageUploadService.imageMeta.isLoading()||!i.imageUploadService.imageMeta.hasValue()?9:10),oe(4),Zo(i.tabs())}}var Qc=(()=>{class r{dialog=se(ga);route=se(sa);transloco=se(oa);imageUploadService=se(Wt);tabs=Ae([{id:"upload",name:this.transloco.translate("imageUploader.upload"),hideIcon:!0},{id:"gallery",name:this.transloco.translate("imageUploader.gallery"),hideIcon:!1}]);activeTab=Ae(this.tabs()[0]);activeTab$=st(this.activeTab);galleryContainer=pn(ir);galleryContainer$=st(this.galleryContainer);uppyContainer=pn("uppyContainer");uppyContainer$=st(this.uppyContainer);uppyReadyToLoad=nt(()=>{let t=this.uppyContainer(),i=this.imageUploadService.anonUser.value();return t?.nativeElement!==void 0&&i?.session?.access_token!==void 0});uppyReadyToLoad$=st(this.uppyReadyToLoad);uppy=Ae(void 0);imgHeight=Ae(200);showFileButton=Ae(!0);trackByFn(t,i){return i.id}triggerUppySelector(){document.querySelector("[data-uppy-super-focusable]").click()}observer;constructor(){this.uppyReadyToLoad$.pipe(We(),er(t=>t===!0)).subscribe(()=>this.initUppy()),this.uppyContainer$.pipe(We(),er(t=>!!t)).subscribe(t=>{this.observer?.disconnect(),this.observer=new MutationObserver(()=>{let i=document.querySelector(".uppy-Dashboard-AddFiles-title");this.showFileButton.set(i!==null)}),this.observer.observe(t?.nativeElement,{childList:!0,subtree:!0})}),this.galleryContainer$.pipe(We()).subscribe(t=>{let i=t?.elementRef.nativeElement;if(!i)return;let n=(i.clientWidth-16-32)*.7/4;this.imgHeight.set(n)}),this.activeTab$.pipe(We()).subscribe(t=>{if(t.id!=="upload")switch(this.imageUploadService.imageMeta.status()){case"idle":this.imageUploadService.imageMetaActive.set(!0);break}}),this.route.queryParams.pipe(We()).subscribe(t=>{let i=t[Ji];this.imageUploadService.partyHash.set(i)})}initUppy(){document.querySelector(".uppy-Root")===null&&this.uppy.set(new vi({debug:!1,autoProceed:!1,locale:Fd,onBeforeFileAdded(i,n){return O(m({},i),{name:`${Date.now()}__${i.name}`})}}).use(qr,{inline:!0,hideProgressDetails:!1,disableThumbnailGenerator:!1,height:"100%",width:"100dvw",target:"[uppy-container]"}).use(Bt,{thumbnailHeight:300,waitForThumbnailsBeforeUpload:!0}).use(bi,{quality:.8}).use(Qi,{endpoint:this.imageUploadService.supabaseService.supabaseStorageURL,headers:{authorization:`Bearer ${this.imageUploadService.anonUser.value()?.session?.access_token}`,apikey:this.imageUploadService.supabaseService.supabaseToken.supabaseKey},uploadDataDuringCreation:!1,removeFingerprintOnSuccess:!0,chunkSize:6*1024*1024,allowedMetaFields:["bucketName","objectName","contentType","cacheControl"],onError:function(i){console.log("Failed because: "+i)}}).on("file-added",async i=>{let n=this.imageUploadService.partyHash(),s={bucketName:n,objectName:`${n}/${i.name}`,contentType:i.type,name:i.name??i.meta.name};if(i.type.includes("video"))try{let o=await this.generateVideoThumbnail(i);i.preview=o?URL.createObjectURL(o):Hc}catch(o){console.error(o)}i.meta=m(m({},i.meta),s)}).on("complete",i=>{this.imageUploadService.imageMetaActive.set(void 0)}).on("upload-success",async i=>{if(!i?.meta.name||!i?.preview)return;let n=this.imageUploadService.partyHash(),s=`${i.meta.name}`;i.meta.type&&i.meta.type.includes("video")&&(s=`${s}${Jr}${qc(i.type)}${ei}`,i.type="image/jpeg");let o=`${n}/${Zi}/${s}`,l=await(await fetch(i.preview)).blob(),c=new File([l],s,{type:i.type});await this.imageUploadService.supabaseService.supabase.storage.from(n).upload(o,c)}))}async generateVideoThumbnail(t){if(t?.data)return new Promise((i,n)=>{let s=document.createElement("video");s.preload="metadata",s.muted=!0,s.src=URL.createObjectURL(t.data),s.addEventListener("loadedmetadata",()=>{s.currentTime=1}),s.addEventListener("seeked",()=>{let o=document.createElement("canvas");o.width=s.videoWidth,o.height=s.videoHeight;let a=o.getContext("2d");if(!a){URL.revokeObjectURL(s.src),n(new Error("Unable to get canvas context"));return}a.drawImage(s,0,0,o.width,o.height),o.toBlob(l=>{if(URL.revokeObjectURL(s.src),!l){n(new Error("Failed to create thumbnail blob"));return}let c=new File([l],"thumbnail.jpg",{type:"image/jpeg"});i(c)},"image/jpeg")}),s.onerror=o=>{URL.revokeObjectURL(s.src),n(new Error("Video failed to load"))}})}ngOnDestroy(){this.observer?.disconnect()}openDialog(t){this.dialog.open(Yc,{data:{idx:t.idx}})}static \u0275fac=function(i){return new(i||r)};static \u0275cmp=St({type:r,selectors:[["lib-gallery-page"]],viewQuery:function(i,n){i&1&&(un(n.galleryContainer,ir,5),un(n.uppyContainer,Wg,5)),i&2&&Jo(2)},decls:2,vars:1,consts:[["uppyContainer",""],["galleryContainer",""],[1,"h-dvh","w-dvw","flex","flex-col","overflow-hidden"],[1,"flex","items-center","justify-center","p-4","flex-initial","text-gold","bg-ivory"],[1,"text-3xl","font-semibold"],[1,"flex-1","flex","justify-center","items-center","flex-col","relative","overflow-hidden"],["uppy-container","",1,"max-w-full","flex-col","flex-auto","gap-2","relative","h-full","overflow-hidden",3,"ngClass"],[1,"absolute","inset-0","flex","justify-center","items-center"],[1,"flex-auto","w-full","flex","flex-col","absolute","inset-0",3,"ngClass"],[1,"flex-auto","w-full","flex","justify-center","items-center","bg-ivory"],["appendOnly","",1,"p-4","flex-auto","w-full","bg-ivory",3,"itemSize"],[1,"border-t","border-primary-border","flex-initial","bg-ivory"],[1,"-mb-px","flex"],[1,"flex-1","border-t-2","px-1","py-4","text-center","text-lg","font-semibold","text-gold","flex","gap-2","items-center",3,"ngClass"],["type","button",1,"z-[2000]","text-lg","text-nowrap","font-semibold","rounded-md","bg-ivory","px-3","py-2","shadow-xs","ring-1","ring-gold","ring-inset","text-gold",3,"click"],[1,"flex","gap-2","items-center"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"size-5","animate-spin","text-gold"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],[4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy"],[1,"group","overflow-hidden","rounded-lg","bg-gray-100","focus-within:ring-2","focus-within:ring-indigo-500","focus-within:ring-offset-2","focus-within:ring-offset-gray-100",3,"click"],[1,"pointer-events-none","aspect-10/7","object-cover","group-hover:opacity-75",3,"src"],[1,"flex-1","border-t-2","px-1","py-4","text-center","text-lg","font-semibold","text-gold","flex","gap-2","items-center",3,"click","ngClass"],[1,"flex-1"],[1,"flex-2"],["xmlns","http://www.w3.org/2000/svg","height","20","width","20","viewBox","0 0 512 512",1,"flex-1","size-5","text-gold","fill-gold",3,"ngClass"],["xmlns","http://www.w3.org/2000/svg","height","20","width","20","viewBox","0 0 512 512",1,"flex-1","size-5","text-gold","fill-gold",3,"click","ngClass"],["fill","currentColor","d","M105.1 202.6c7.7-21.8 20.2-42.3 37.8-59.8c62.5-62.5 163.8-62.5 226.3 0L386.3 160 352 160c-17.7 0-32 14.3-32 32s14.3 32 32 32l111.5 0c0 0 0 0 0 0l.4 0c17.7 0 32-14.3 32-32l0-112c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 35.2L414.4 97.6c-87.5-87.5-229.3-87.5-316.8 0C73.2 122 55.6 150.7 44.8 181.4c-5.9 16.7 2.9 34.9 19.5 40.8s34.9-2.9 40.8-19.5zM39 289.3c-5 1.5-9.8 4.2-13.7 8.2c-4 4-6.7 8.8-8.1 14c-.3 1.2-.6 2.5-.8 3.8c-.3 1.7-.4 3.4-.4 5.1L16 432c0 17.7 14.3 32 32 32s32-14.3 32-32l0-35.1 17.6 17.5c0 0 0 0 0 0c87.5 87.4 229.3 87.4 316.7 0c24.4-24.4 42.1-53.1 52.9-83.8c5.9-16.7-2.9-34.9-19.5-40.8s-34.9 2.9-40.8 19.5c-7.7 21.8-20.2 42.3-37.8 59.8c-62.5 62.5-163.8 62.5-226.3 0l-.1-.1L125.6 352l34.4 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L48.4 288c-1.6 0-3.2 .1-4.8 .3s-3.1 .5-4.6 1z"]],template:function(i,n){i&1&&$e(0,Yg,1,0,"lib-loading-indicator")(1,ny,15,9,"div",2),i&2&&Ge(n.imageUploadService.mandatoryMeta.status()!=="resolved"?0:1)},dependencies:[Pt,ii,ha,ca,pa,ir,tn,ya,la,aa],styles:['[_nghost-%COMP%]{display:contents;font-family:var(--font-amaticsc, "amaticsc", sans-serif)}']})}return r})();var E5=[{path:"",component:Qc,providers:[Wt,en]}];export{Qc as GalleryPageComponent,E5 as imageUploaderRoutes};
