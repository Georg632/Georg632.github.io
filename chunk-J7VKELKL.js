import{a as ho,f as Rt,g as pe,h as Nt,k as po}from"./chunk-2HOMP6LZ.js";import{a as co,b as wo,c as vo,d as go,e as uo,f as ht,g as ko,h as xo,i as mo,k as Zt}from"./chunk-3NJLW2KD.js";import{$a as st,A as Oe,Aa as St,B as xt,Ba as Dt,Bb as H,C as ot,Ca as C,Cb as at,D as rt,Da as g,Ea as k,F as q,Fa as V,G as nt,Hb as Qe,I as y,Ib as zt,J as a,Ja as Ze,Jb as Je,Ka as Y,Kb as to,L as mt,La as z,M as D,Ma as x,N as L,Na as B,Oa as T,Pa as S,Q as U,T as ie,Ta as Ue,U as w,Ua as le,Va as Lt,Wa as it,Xa as It,Xb as de,Y as ze,Ya as c,Z as I,Za as G,Zb as eo,_ as se,_a as Mt,_b as oo,a as Pe,aa as jt,ab as Tt,ac as ro,bb as Pt,bc as no,cb as Ft,d as N,db as Ge,dc as h,ea as m,eb as qe,ec as O,fa as Ht,fb as We,fc as io,ga as Re,gb as Ke,gc as lt,h as et,ha as bt,hb as _,hc as so,i as Z,ib as $e,ic as ao,j as Fe,ja as At,k as re,kb as Et,la as M,lb as Ot,lc as lo,na as d,nb as b,oa as ae,ob as l,pa as E,pb as v,q as gt,qa as Vt,qb as P,s as ut,sb as Xe,t as Bt,tb as F,u as ne,ub as s,v as Ee,vb as he,w as kt,wa as A,wb as Ye,xa as W,xb as Q,ya as K,za as Ne}from"./chunk-MVQCNL4J.js";import{a as j,b as vt}from"./chunk-BUCGFPOZ.js";var bn=new y("Ng Glyph Config");var An=new y("NgGlyphsToken");function er(o){return o==null?"":/^\d+$/.test(o)?`${o}px`:o}var or=new y("Ng Icon Pre Processor"),rr=new y("Ng Icon Post Processor");function nr(){return a(or,{optional:!0})??(o=>o)}function ir(){return a(rr,{optional:!0})??(()=>{})}var sr=new y("Ng Icon Logger"),ce=class{log(n){console.log(n)}warn(n){console.warn(n)}error(n){console.error(n)}};function ar(){return a(sr,{optional:!0})??new ce}var lr=new y("Ng Icon Config");function hr(){return a(lr,{optional:!0})??{}}var dr=new y("Ng Icon Loader Token");var pr=new y("Ng Icon Cache Token");function cr(){return a(dr,{optional:!0})}function wr(){return a(pr,{optional:!0})}function R(o){return[{provide:we,useFactory:(n=a(we,{optional:!0,skipSelf:!0}))=>j(j({},n?.reduce((e,t)=>j(j({},e),t),{})),o),multi:!0}]}var we=new y("Icons Token");function vr(){return a(we,{optional:!0})??[]}function gr(o){return typeof o=="string"?Promise.resolve(o):Fe(o)?o.toPromise():o}function ur(o){return o.replace(/([^a-zA-Z0-9])+(.)?/g,(n,e,t)=>t?t.toUpperCase():"").replace(/[^a-zA-Z\d]/g,"").replace(/^([A-Z])/,n=>n.toLowerCase())}var kr=0,$=(()=>{let n=class n{constructor(){this.config=hr(),this.icons=vr(),this.loader=cr(),this.cache=wr(),this.preProcessor=nr(),this.postProcessor=ir(),this.injector=a(U),this.renderer=a(bt),this.platform=a(jt),this.elementRef=a(I),this.uniqueId=kr++,this.logger=ar(),this.name=s(),this.svg=s(),this.size=s(this.config.size,{transform:er}),this.strokeWidth=s(this.config.strokeWidth),this.color=s(this.config.color),v(()=>this.updateIcon()),a(new Xe("aria-hidden"),{optional:!0})||this.elementRef.nativeElement.setAttribute("aria-hidden","true")}ngOnDestroy(){this.svgElement=void 0}async updateIcon(){let t=this.name(),r=this.svg();if(r!==void 0){this.setSvg(r);return}if(t===void 0)return;let i=ur(t);for(let p of[...this.icons].reverse())if(p[i]){this.setSvg(p[i]);return}if(this.loader){let p=await this.requestIconFromLoader(t);if(p!==null){this.setSvg(p);return}}this.logger.warn(`No icon named ${t} was found. You may need to import it using the withIcons function.`)}setSvg(t){if(to(this.platform)){this.elementRef.nativeElement.innerHTML=t,this.elementRef.nativeElement.setAttribute("data-ng-icon-ssr","");return}if(this.elementRef.nativeElement.hasAttribute("data-ng-icon-ssr")&&(this.elementRef.nativeElement.removeAttribute("data-ng-icon-ssr"),this.svgElement=this.elementRef.nativeElement.querySelector("svg")??void 0,this.elementRef.nativeElement.innerHTML===t)||(this.svgElement&&this.renderer.removeChild(this.elementRef.nativeElement,this.svgElement),t===""))return;let r=this.renderer.createElement("template");t=this.replaceIds(t),this.renderer.setProperty(r,"innerHTML",this.preProcessor(t)),this.svgElement=r.content.firstElementChild,this.postProcessor(this.svgElement),this.renderer.appendChild(this.elementRef.nativeElement,this.svgElement)}replaceIds(t){if(!t.includes("ID_PLACEHOLDER_"))return t;let r=/ID_PLACEHOLDER_(\d+)/g,i=new Map,p=new Set(t.match(r));if(p===null)return t;for(let f of p){let tt=f.replace("ID_PLACEHOLDER_",""),pt=`ng-icon-${this.uniqueId}-${i.size}`;i.set(tt,pt),t=t.replace(new RegExp(f,"g"),pt)}return t}requestIconFromLoader(t){return new Promise(r=>{mt(this.injector,async()=>{if(this.cache){let f=this.cache.get(t);if(typeof f=="string"){r(f);return}if(f instanceof Promise){let tt=await f;r(tt);return}}let i=gr(this.loader(t));this.cache?.set(t,i);let p=await i;this.cache?.set(t,p),r(p)})})}};n.\u0275fac=function(r){return new(r||n)},n.\u0275cmp=M({type:n,selectors:[["ng-icon"]],hostAttrs:["role","img"],hostVars:6,hostBindings:function(r,i){r&2&&it("--ng-icon__stroke-width",i.strokeWidth())("--ng-icon__size",i.size())("--ng-icon__color",i.color())},inputs:{name:[1,"name"],svg:[1,"svg"],size:[1,"size"],strokeWidth:[1,"strokeWidth"],color:[1,"color"]},decls:0,vars:0,template:function(r,i){},styles:["[_nghost-%COMP%]{display:inline-block;width:var(--ng-icon__size, 1em);height:var(--ng-icon__size, 1em);line-height:initial;vertical-align:initial;overflow:hidden}[_nghost-%COMP%]     svg{width:inherit;height:inherit;vertical-align:inherit}@layer ng-icon{[_nghost-%COMP%]{color:var(--ng-icon__color, currentColor)}}"],changeDetection:0});let o=n;return o})();var Mo='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" style="stroke-width:var(--ng-icon__stroke-width, 2)"><path d="m6 9 6 6 6-6"></path></svg>';var _o='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" style="stroke-width:var(--ng-icon__stroke-width, 2)"><circle cx="12" cy="12" r="10"></circle><path d="m15 9-6 6"></path><path d="m9 9 6 6"></path></svg>';var yo='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" style="stroke-width:var(--ng-icon__stroke-width, 2)"><path d="M12 2v4"></path><path d="m16.2 7.8 2.9-2.9"></path><path d="M18 12h4"></path><path d="m16.2 16.2 2.9 2.9"></path><path d="M12 18v4"></path><path d="m4.9 19.1 2.9-2.9"></path><path d="M2 12h4"></path><path d="m4.9 4.9 2.9 2.9"></path></svg>';var fo='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" style="stroke-width:var(--ng-icon__stroke-width, 2)"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path><polyline points="16 17 21 12 16 7"></polyline><line x1="21" x2="9" y1="12" y2="12"></line></svg>';var Co='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" style="stroke-width:var(--ng-icon__stroke-width, 2)"><path d="M5 12h14"></path><path d="M12 5v14"></path></svg>';var Bo='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" style="stroke-width:var(--ng-icon__stroke-width, 2)"><circle cx="11" cy="11" r="8"></circle><path d="m21 21-4.3-4.3"></path></svg>';var jo='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" style="stroke-width:var(--ng-icon__stroke-width, 2)"><path d="m15 11-1 9"></path><path d="m19 11-4-7"></path><path d="M2 11h20"></path><path d="m3.5 11 1.6 7.4a2 2 0 0 0 2 1.6h9.8a2 2 0 0 0 2-1.6l1.7-7.4"></path><path d="M4.5 15.5h15"></path><path d="m5 11 4-7"></path><path d="m9 11 1 9"></path></svg>',Ho='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" style="stroke-width:var(--ng-icon__stroke-width, 2)"><circle cx="8" cy="21" r="1"></circle><circle cx="19" cy="21" r="1"></circle><path d="M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12"></path></svg>';var bo='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" style="stroke-width:var(--ng-icon__stroke-width, 2)"><path d="M3 6h18"></path><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path></svg>';var xr={size:"base"},mr=new y("HlmIconConfig");function Ao(){return a(mr,{optional:!0})??xr}var _t=(()=>{class o{_config=Ao();size=s(this._config.size);_computedSize=l(()=>{let e=this.size();switch(e){case"xs":return"12px";case"sm":return"16px";case"base":return"24px";case"lg":return"32px";case"xl":return"48px";default:return e}});static \u0275fac=function(t){return new(t||o)};static \u0275dir=d({type:o,selectors:[["ng-icon","hlmIcon",""],["ng-icon","hlm",""]],hostVars:2,hostBindings:function(t,r){t&2&&it("--ng-icon__size",r._computedSize())},inputs:{size:[1,"size"]}})}return o})();var So=(()=>{class o{static _uniqueId=0;id=s(`brn-toggle-${++o._uniqueId}`);value=s();disabled=s(!1,{transform:H});state=Q("off");type=s("button");ariaLabel=s(null,{alias:"aria-label"});_isOn=l(()=>this.state()==="on");toggle(){this.disabled()||this.state.set(this._isOn()?"off":"on")}static \u0275fac=function(t){return new(t||o)};static \u0275dir=d({type:o,selectors:[["button","brnToggle",""]],hostVars:7,hostBindings:function(t,r){t&1&&x("click",function(){return r.toggle()}),t&2&&(z("id",r.id())("type",r.type()),A("disabled",r.disabled()?!0:null)("data-disabled",r.disabled()?!0:null)("data-state",r.state())("aria-pressed",r._isOn())("aria-label",r.ariaLabel()||null))},inputs:{id:[1,"id"],value:[1,"value"],disabled:[1,"disabled"],state:[1,"state"],type:[1,"type"],ariaLabel:[1,"aria-label","ariaLabel"]},outputs:{state:"stateChange"}})}return o})();var _r=O('hover:bg-muted hover:text-muted-foreground focus-visible:border-ring data-[state=on]:bg-accent data-[state=on]:text-accent-foreground focus-visible:ring-ring/50 inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium whitespace-nowrap transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:pointer-events-none disabled:opacity-50 [&_ng-icon]:pointer-events-none [&_ng-icon]:shrink-0 [&_ng-icon:not([class*="text-"])]:text-base',{variants:{variant:{default:"bg-transparent",outline:"border-input hover:bg-accent hover:text-accent-foreground border bg-transparent shadow-xs"},size:{default:"h-9 min-w-9 px-2",sm:"h-8 min-w-8 px-1.5",lg:"h-10 min-w-10 px-2.5"}},defaultVariants:{variant:"default",size:"default"}}),ge=(()=>{class o{variant=s("default");size=s("default");userClass=s("",{alias:"class"});_computedClass=l(()=>h(_r({variant:this.variant(),size:this.size()}),this.userClass()));static \u0275fac=function(t){return new(t||o)};static \u0275dir=d({type:o,selectors:[["button","hlmToggle",""]],hostAttrs:["data-slot","toggle"],hostVars:2,hostBindings:function(t,r){t&2&&c(r._computedClass())},inputs:{variant:[1,"variant"],size:[1,"size"],userClass:[1,"class","userClass"]},features:[E([{directive:So,inputs:["id","id","value","value","disabled","disabled","state","state","aria-label","aria-label","type","type"],outputs:["stateChange","stateChange"]}])]})}return o})();var Do=(()=>{class o{variant=s("default");size=s("default");disabled=s(!1);state=Q("off");isAnimating=w(!1);animationDirection=w("");constructor(){v(()=>{let e=this.state();this.animationDirection()===""&&e==="off"||(e==="on"?this.animationDirection.set("fill"):this.animationDirection.set("empty"),this.isAnimating.set(!0),setTimeout(()=>{this.isAnimating.set(!1)},800))})}animationClass=l(()=>{if(!this.isAnimating())return"";let e=this.animationDirection();return e==="fill"?"animate-bounce-shake":e==="empty"?"animate-empty":""});buttonClass=l(()=>{let e=this.state(),t=this.animationClass(),r="";return e==="on"?r="bg-green-100 hover:bg-green-200 dark:bg-green-900/30 dark:hover:bg-green-900/50 border-green-300 dark:border-green-700":r="bg-muted/50 hover:bg-muted dark:bg-muted/20 dark:hover:bg-muted/40 border-muted-foreground/20",`${t} ${r}`});iconClass=l(()=>{let e=this.state(),t=this.isAnimating();if(e==="on"){let r="text-green-600 dark:text-green-400";return t&&this.animationDirection()==="fill"?`${r} animate-fill`:r}return"text-muted-foreground/60"});static \u0275fac=function(t){return new(t||o)};static \u0275cmp=M({type:o,selectors:[["gh-shopping-basket-toggle"]],inputs:{variant:[1,"variant"],size:[1,"size"],disabled:[1,"disabled"],state:[1,"state"]},outputs:{state:"stateChange"},features:[_([R({lucideShoppingBasket:jo})])],decls:2,vars:9,consts:[["hlmToggle","",1,"relative","overflow-hidden","transition-all","duration-300",3,"stateChange","variant","size","disabled","state"],["hlm","",1,"transition-all","duration-500",3,"name"]],template:function(t,r){t&1&&(g(0,"button",0),Ft("stateChange",function(p){return Pt(r.state,p)||(r.state=p),p}),V(1,"ng-icon",1),k()),t&2&&(c(r.buttonClass()),C("variant",r.variant())("size",r.size())("disabled",r.disabled()),Tt("state",r.state),m(),c(r.iconClass()),C("name","lucideShoppingBasket"))},dependencies:[ge,_t,$],styles:["@keyframes _ngcontent-%COMP%_bounce-shake{0%,to{transform:translateY(0) rotate(0) scale(1)}10%{transform:translateY(-8px) rotate(-5deg) scale(1.1)}20%{transform:translateY(-8px) rotate(5deg) scale(1.1)}30%{transform:translateY(-8px) rotate(-5deg) scale(1.1)}40%{transform:translateY(0) rotate(0) scale(1)}50%{transform:scale(.95)}60%{transform:scale(1.05)}70%{transform:scale(.98)}80%{transform:scale(1.02)}90%{transform:scale(1)}}@keyframes _ngcontent-%COMP%_fill-basket{0%{opacity:1}50%{opacity:.6;filter:brightness(1.5)}to{opacity:1}}@keyframes _ngcontent-%COMP%_empty-basket{0%{transform:scale(1);opacity:1}30%{transform:scale(.8) rotate(-10deg);opacity:.7}60%{transform:scale(1.1) rotate(10deg);opacity:.8}to{transform:scale(1) rotate(0);opacity:1}}.animate-bounce-shake[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_bounce-shake .8s ease-in-out}.animate-fill[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fill-basket .5s ease-in-out}.animate-empty[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_empty-basket .6s ease-in-out}[_nghost-%COMP%]{display:inline-block}"],changeDetection:0})}return o})();var Ut=(()=>{class o{supabase=a(lo);itemsSignal=w([]);items=this.itemsSignal;count=l(()=>this.itemsSignal().length);userId=w(null);constructor(){this.supabase.supabase.auth.getSession().then(({data:e})=>{let t=e?.session?.user??null;t&&(this.userId.set(t.id),this.loadItemsForUser(t.id))}).catch(()=>{}),this.supabase.supabase.auth.onAuthStateChange((e,t)=>{let r=t?.user?.id??null;this.userId.set(r),r?this.loadItemsForUser(r):this.itemsSignal.set([])}),v(()=>{let e=this.userId();e&&this.loadItemsForUser(e)})}loadItemsForUser(e){et(this.supabase.supabase.from("shopping_list_item").select("*").eq("creator_id",e).order("created_at",{ascending:!1})).pipe(ut(()=>Z({data:[],error:null}))).subscribe(t=>{t?.error||this.itemsSignal.set(t?.data??[])})}addItem(e,t){return et(this.supabase.supabase.auth.getUser()).pipe(xt(r=>{let i=r?.data?.user?.id??r?.data?.id??null;return i?et(this.supabase.supabase.from("shopping_list_item").insert({product_name:e,additional_info:t,creator_id:i,active:!0,active_changed:new Date().toISOString()}).select().single()):Z({error:new Error("Not authenticated")})}),ut(r=>Z({error:r})),rt(r=>{if(r?.error)throw r.error;let i=r?.data;i&&this.itemsSignal.update(p=>[i,...p])}),xt(r=>{if(r?.error)throw r.error;return Z(r.data)}))}updateItem(e,t){return et(this.supabase.supabase.from("shopping_list_item").update(t).eq("id",e).select().single()).pipe(ut(r=>Z({error:r})),rt(r=>{if(r?.error)throw r.error;let i=r?.data;i&&this.itemsSignal.update(p=>p.map(f=>f.id===e?i:f))}),xt(r=>{if(r?.error)throw r.error;return Z(r.data)}))}deleteItem(e){return et(this.supabase.supabase.from("shopping_list_item").delete().eq("id",e)).pipe(ut(t=>Z({error:t})),rt(t=>{if(t?.error)throw t.error;this.itemsSignal.update(r=>r.filter(i=>i.id!==e))}),xt(t=>{if(t?.error)throw t.error;return Z(void 0)}))}toggleItem(e,t){return this.updateItem(e,{active:t,active_changed:new Date().toISOString()})}static \u0275fac=function(t){return new(t||o)};static \u0275prov=nt({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var fr=200,Gt=class{_letterKeyStream=new N;_items=[];_selectedItemIndex=-1;_pressedLetters=[];_skipPredicateFn;_selectedItem=new N;selectedItem=this._selectedItem;constructor(n,e){let t=typeof e?.debounceInterval=="number"?e.debounceInterval:fr;e?.skipPredicate&&(this._skipPredicateFn=e.skipPredicate),this.setItems(n),this._setupKeyHandler(t)}destroy(){this._pressedLetters=[],this._letterKeyStream.complete(),this._selectedItem.complete()}setCurrentSelectedItemIndex(n){this._selectedItemIndex=n}setItems(n){this._items=n}handleKey(n){let e=n.keyCode;n.key&&n.key.length===1?this._letterKeyStream.next(n.key.toLocaleUpperCase()):(e>=65&&e<=90||e>=48&&e<=57)&&this._letterKeyStream.next(String.fromCharCode(e))}isTyping(){return this._pressedLetters.length>0}reset(){this._pressedLetters=[]}_setupKeyHandler(n){this._letterKeyStream.pipe(rt(e=>this._pressedLetters.push(e)),Bt(n),gt(()=>this._pressedLetters.length>0),re(()=>this._pressedLetters.join("").toLocaleUpperCase())).subscribe(e=>{for(let t=1;t<this._items.length+1;t++){let r=(this._selectedItemIndex+t)%this._items.length,i=this._items[r];if(!this._skipPredicateFn?.(i)&&i.getLabel?.().toLocaleUpperCase().trim().indexOf(e)===0){this._selectedItem.next(i);break}}this._pressedLetters=[]})}};var qt=class{_items;_activeItemIndex=w(-1);_activeItem=w(null);_wrap=!1;_typeaheadSubscription=Pe.EMPTY;_itemChangesSubscription;_vertical=!0;_horizontal;_allowedModifierKeys=[];_homeAndEnd=!1;_pageUpAndDown={enabled:!1,delta:10};_effectRef;_typeahead;_skipPredicateFn=n=>n.disabled;constructor(n,e){this._items=n,n instanceof se?this._itemChangesSubscription=n.changes.subscribe(t=>this._itemsChanged(t.toArray())):ie(n)&&(this._effectRef=v(()=>this._itemsChanged(n()),{injector:e}))}tabOut=new N;change=new N;skipPredicate(n){return this._skipPredicateFn=n,this}withWrap(n=!0){return this._wrap=n,this}withVerticalOrientation(n=!0){return this._vertical=n,this}withHorizontalOrientation(n){return this._horizontal=n,this}withAllowedModifierKeys(n){return this._allowedModifierKeys=n,this}withTypeAhead(n=200){this._typeaheadSubscription.unsubscribe();let e=this._getItemsArray();return this._typeahead=new Gt(e,{debounceInterval:typeof n=="number"?n:void 0,skipPredicate:t=>this._skipPredicateFn(t)}),this._typeaheadSubscription=this._typeahead.selectedItem.subscribe(t=>{this.setActiveItem(t)}),this}cancelTypeahead(){return this._typeahead?.reset(),this}withHomeAndEnd(n=!0){return this._homeAndEnd=n,this}withPageUpDown(n=!0,e=10){return this._pageUpAndDown={enabled:n,delta:e},this}setActiveItem(n){let e=this._activeItem();this.updateActiveItem(n),this._activeItem()!==e&&this.change.next(this._activeItemIndex())}onKeydown(n){let e=n.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(i=>!n[i]||this._allowedModifierKeys.indexOf(i)>-1);switch(e){case 9:this.tabOut.next();return;case 40:if(this._vertical&&r){this.setNextItemActive();break}else return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}else return;case 39:if(this._horizontal&&r){this._horizontal==="rtl"?this.setPreviousItemActive():this.setNextItemActive();break}else return;case 37:if(this._horizontal&&r){this._horizontal==="rtl"?this.setNextItemActive():this.setPreviousItemActive();break}else return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}else return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}else return;case 33:if(this._pageUpAndDown.enabled&&r){let i=this._activeItemIndex()-this._pageUpAndDown.delta;this._setActiveItemByIndex(i>0?i:0,1);break}else return;case 34:if(this._pageUpAndDown.enabled&&r){let i=this._activeItemIndex()+this._pageUpAndDown.delta,p=this._getItemsArray().length;this._setActiveItemByIndex(i<p?i:p-1,-1);break}else return;default:(r||ho(n,"shiftKey"))&&this._typeahead?.handleKey(n);return}this._typeahead?.reset(),n.preventDefault()}get activeItemIndex(){return this._activeItemIndex()}get activeItem(){return this._activeItem()}isTyping(){return!!this._typeahead&&this._typeahead.isTyping()}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._getItemsArray().length-1,-1)}setNextItemActive(){this._activeItemIndex()<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex()<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(n){let e=this._getItemsArray(),t=typeof n=="number"?n:e.indexOf(n),r=e[t];this._activeItem.set(r??null),this._activeItemIndex.set(t),this._typeahead?.setCurrentSelectedItemIndex(t)}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._effectRef?.destroy(),this._typeahead?.destroy(),this.tabOut.complete(),this.change.complete()}_setActiveItemByDelta(n){this._wrap?this._setActiveInWrapMode(n):this._setActiveInDefaultMode(n)}_setActiveInWrapMode(n){let e=this._getItemsArray();for(let t=1;t<=e.length;t++){let r=(this._activeItemIndex()+n*t+e.length)%e.length,i=e[r];if(!this._skipPredicateFn(i)){this.setActiveItem(r);return}}}_setActiveInDefaultMode(n){this._setActiveItemByIndex(this._activeItemIndex()+n,n)}_setActiveItemByIndex(n,e){let t=this._getItemsArray();if(t[n]){for(;this._skipPredicateFn(t[n]);)if(n+=e,!t[n])return;this.setActiveItem(n)}}_getItemsArray(){return ie(this._items)?this._items():this._items instanceof se?this._items.toArray():this._items}_itemsChanged(n){this._typeahead?.setItems(n);let e=this._activeItem();if(e){let t=n.indexOf(e);t>-1&&t!==this._activeItemIndex()&&(this._activeItemIndex.set(t),this._typeahead?.setCurrentSelectedItemIndex(t))}}};var yt=class extends qt{setActiveItem(n){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(n),this.activeItem&&this.activeItem.setActiveStyles()}};function Wt(o){let n=new y(o);return[(i={})=>a(n,i),i=>({provide:n,useValue:i}),i=>({provide:n,useExisting:q(i)}),n]}var[xi,mi,Cr,Mi]=Wt("@spartan-ng SET_CLASS_TO_CUSTOM_ELEMENT_TOKEN");function Lo(o,n){let t=eo(o).pipe(Bt(n),Ee());return oo(t,{initialValue:o()})}var[_i,yi,fi,Ci]=Wt("@spartan-ng EXPOSES_SIDE_TOKEN"),[Io,Bi,Kt,ji]=Wt("@spartan-ng EXPOSES_STATE_TOKEN"),[Hi,bi,Ai,Vi]=Wt("@spartan-ng SET_TABLE_CLASSES_TOKEN");var Br=["*"],ue={attachPositions:[],autoFocus:"first-tabbable",closeDelay:100,closeOnBackdropClick:!0,closeOnOutsidePointerEvents:!1,disableClose:!1,hasBackdrop:!0,positionStrategy:null,restoreFocus:!0,role:"dialog",scrollStrategy:null},To=new y("brn-dialog-default-options",{providedIn:"root",factory:()=>ue});function Po(o){return{provide:To,useValue:j(j({},ue),o)}}function jr(){return a(To,{optional:!0})??ue}var $t=(o,n="")=>{if(typeof o=="string"){let e=o.trim().split(" ");return e.length===0?[n]:e}return o??[]},ft=class{_cdkDialogRef;_open;state;dialogId;_options;_closing$=new N;closing$=this._closing$.asObservable();closed$;_previousTimeout;get open(){return this.state()==="open"}constructor(n,e,t,r,i){this._cdkDialogRef=n,this._open=e,this.state=t,this.dialogId=r,this._options=i,this.closed$=this._cdkDialogRef.closed.pipe(ne(1))}close(n,e=this._options?.closeDelay??0){!this.open||this._options?.disableClose||(this._closing$.next(),this._open.set(!1),this._previousTimeout&&clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._cdkDialogRef.close(n)},e))}setPanelClass(n){this._cdkDialogRef.config.panelClass=$t(n)}setOverlayClass(n){this._cdkDialogRef.config.backdropClass=$t(n)}setAriaDescribedBy(n){this._cdkDialogRef.config.ariaDescribedBy=n}setAriaLabelledBy(n){this._cdkDialogRef.config.ariaLabelledBy=n}setAriaLabel(n){this._cdkDialogRef.config.ariaLabel=n}},Hr=0;var br=(()=>{class o{_overlayCloseDispatcher=a(pe);_cdkDialog=a(po);_rendererFactory=a(Re);_renderer=this._rendererFactory.createRenderer(null,null);_positionBuilder=a(Nt);_sso=a(Rt);_injector=a(U);open(e,t,r,i){if(i?.id&&this._cdkDialog.getDialogById(i.id))throw new Error(`Dialog with ID: ${i.id} already exists`);let p=i?.positionStrategy??(i?.attachTo&&i?.attachPositions&&i?.attachPositions?.length>0?this._positionBuilder?.flexibleConnectedTo(i.attachTo).withPositions(i.attachPositions??[]):this._positionBuilder.global().centerHorizontally().centerVertically()),f,tt,pt=vt(j({},r),{close:(wt=void 0)=>f.close(wt,i?.closeDelay)}),ct=new N,Le=w(!0),ee=l(()=>Le()?"open":"closed"),Ct=++Hr,X=this._cdkDialog.open(e,{id:i?.id??`brn-dialog-${Ct}`,role:i?.role,viewContainerRef:t,templateContext:()=>({$implicit:pt}),data:pt,hasBackdrop:i?.hasBackdrop,panelClass:$t(i?.panelClass),backdropClass:$t(i?.backdropClass,"bg-transparent"),positionStrategy:p,scrollStrategy:i?.scrollStrategy??this._sso?.block(),restoreFocus:i?.restoreFocus,disableClose:!0,autoFocus:i?.autoFocus??"first-tabbable",ariaDescribedBy:i?.ariaDescribedBy??`brn-dialog-description-${Ct}`,ariaLabelledBy:i?.ariaLabelledBy??`brn-dialog-title-${Ct}`,ariaLabel:i?.ariaLabel,ariaModal:i?.ariaModal,providers:wt=>{f=new ft(wt,Le,ee,Ct,i),mt(this._injector,()=>{tt=v(()=>{Ie&&this._renderer.setAttribute(Ie,"data-state",ee()),Te&&this._renderer.setAttribute(Te,"data-state",ee())})});let oe=[{provide:ft,useValue:f}];return i?.providers&&(typeof i.providers=="function"&&oe.push(...i.providers()),Array.isArray(i.providers)&&oe.push(...i.providers)),oe}}),Ie=X.overlayRef.overlayElement,Te=X.overlayRef.backdropElement;return i?.closeOnOutsidePointerEvents&&X.outsidePointerEvents.pipe(ot(ct)).subscribe(()=>{this._overlayCloseDispatcher._attachedOverlays.at(-1)===X.overlayRef&&f.close(void 0,i?.closeDelay)}),i?.closeOnBackdropClick&&X.backdropClick.pipe(ot(ct)).subscribe(()=>{f.close(void 0,i?.closeDelay)}),i?.disableClose||X.keydownEvents.pipe(gt(wt=>wt.key==="Escape"),ot(ct)).subscribe(()=>{f.close(void 0,i?.closeDelay)}),X.closed.pipe(ot(ct)).subscribe(()=>{tt?.destroy(),ct.next()}),f}static \u0275fac=function(t){return new(t||o)};static \u0275prov=nt({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})(),dt=(()=>{class o{_dialogService=a(br);_vcr=a(At);positionBuilder=a(Nt);ssos=a(Rt);_injector=a(U);_defaultOptions=jr();_context={};stateComputed=l(()=>this._dialogRef()?.state()??"closed");_contentTemplate;_dialogRef=w(void 0);_dialogStateEffectRef;_backdropClass=w(null);_panelClass=w(null);closed=F();stateChanged=F();state=s(null);role=s(this._defaultOptions.role);hasBackdrop=s(this._defaultOptions.hasBackdrop,{transform:H});positionStrategy=s(this._defaultOptions.positionStrategy);mutablePositionStrategy=P(()=>this.positionStrategy());scrollStrategy=s(this._defaultOptions.scrollStrategy);_options=l(()=>{let e=this.scrollStrategy(),t;return e==="close"?t=this.ssos.close():e==="reposition"?t=this.ssos.reposition():t=e,{role:this.role(),hasBackdrop:this.hasBackdrop(),positionStrategy:this.mutablePositionStrategy(),scrollStrategy:t,restoreFocus:this.restoreFocus(),closeOnOutsidePointerEvents:this.mutableCloseOnOutsidePointerEvents(),closeOnBackdropClick:this.closeOnBackdropClick(),attachTo:this.mutableAttachTo(),attachPositions:this.mutableAttachPositions(),autoFocus:this.autoFocus(),closeDelay:this.closeDelay(),disableClose:this.disableClose(),backdropClass:this._backdropClass()??"",panelClass:this._panelClass()??"",ariaDescribedBy:this._mutableAriaDescribedBy(),ariaLabelledBy:this._mutableAriaLabelledBy(),ariaLabel:this._mutableAriaLabel(),ariaModal:this._mutableAriaModal()}});constructor(){v(()=>{let e=this.state();e==="open"&&b(()=>this.open()),e==="closed"&&b(()=>this.close())})}restoreFocus=s(this._defaultOptions.restoreFocus);closeOnOutsidePointerEvents=s(this._defaultOptions.closeOnOutsidePointerEvents,{transform:H});mutableCloseOnOutsidePointerEvents=P(()=>this.closeOnOutsidePointerEvents());closeOnBackdropClick=s(this._defaultOptions.closeOnBackdropClick,{transform:H});attachTo=s(null);mutableAttachTo=P(()=>this.attachTo());attachPositions=s(this._defaultOptions.attachPositions);mutableAttachPositions=P(()=>this.attachPositions());autoFocus=s(this._defaultOptions.autoFocus);closeDelay=s(this._defaultOptions.closeDelay,{transform:at});disableClose=s(this._defaultOptions.disableClose,{transform:H});ariaDescribedBy=s(null,{alias:"aria-describedby"});_mutableAriaDescribedBy=P(()=>this.ariaDescribedBy());ariaLabelledBy=s(null,{alias:"aria-labelledby"});_mutableAriaLabelledBy=P(()=>this.ariaLabelledBy());ariaLabel=s(null,{alias:"aria-label"});_mutableAriaLabel=P(()=>this.ariaLabel());ariaModal=s(!0,{alias:"aria-modal",transform:H});_mutableAriaModal=P(()=>this.ariaModal());open(){if(!this._contentTemplate||this._dialogRef())return;this._dialogStateEffectRef?.destroy();let e=this._dialogService.open(this._contentTemplate,this._vcr,this._context,this._options());this._dialogRef.set(e),mt(this._injector,()=>{this._dialogStateEffectRef=v(()=>{let t=e.state();b(()=>this.stateChanged.emit(t))})}),e.closed$.pipe(ne(1)).subscribe(t=>{this._dialogRef.set(void 0),this.closed.emit(t)})}close(e,t){this._dialogRef()?.close(e,t??this._options().closeDelay)}registerTemplate(e){this._contentTemplate=e}setOverlayClass(e){this._backdropClass.set(e),this._dialogRef()?.setOverlayClass(e)}setPanelClass(e){this._panelClass.set(e??""),this._dialogRef()?.setPanelClass(e)}setContext(e){this._context=j(j({},this._context),e)}setAriaDescribedBy(e){this._mutableAriaDescribedBy.set(e),this._dialogRef()?.setAriaDescribedBy(e)}setAriaLabelledBy(e){this._mutableAriaLabelledBy.set(e),this._dialogRef()?.setAriaLabelledBy(e)}setAriaLabel(e){this._mutableAriaLabel.set(e),this._dialogRef()?.setAriaLabel(e)}setAriaModal(e){this._mutableAriaModal.set(e)}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=M({type:o,selectors:[["brn-dialog"]],inputs:{state:[1,"state"],role:[1,"role"],hasBackdrop:[1,"hasBackdrop"],positionStrategy:[1,"positionStrategy"],scrollStrategy:[1,"scrollStrategy"],restoreFocus:[1,"restoreFocus"],closeOnOutsidePointerEvents:[1,"closeOnOutsidePointerEvents"],closeOnBackdropClick:[1,"closeOnBackdropClick"],attachTo:[1,"attachTo"],attachPositions:[1,"attachPositions"],autoFocus:[1,"autoFocus"],closeDelay:[1,"closeDelay"],disableClose:[1,"disableClose"],ariaDescribedBy:[1,"aria-describedby","ariaDescribedBy"],ariaLabelledBy:[1,"aria-labelledby","ariaLabelledBy"],ariaLabel:[1,"aria-label","ariaLabel"],ariaModal:[1,"aria-modal","ariaModal"]},outputs:{closed:"closed",stateChanged:"stateChanged"},exportAs:["brnDialog"],ngContentSelectors:Br,decls:1,vars:0,template:function(t,r){t&1&&(T(),S(0))},encapsulation:2,changeDetection:0})}return o})();var Fo=(()=>{class o{_brnDialog=a(dt,{optional:!0});_brnDialogRef=a(ft,{optional:!0});_template=a(Ht);state=l(()=>this._brnDialog?.stateComputed()??this._brnDialogRef?.state()??"closed");className=s(void 0,{alias:"class"});context=s(void 0);constructor(){this._brnDialog&&(this._brnDialog.registerTemplate(this._template),v(()=>{let e=this.context();!this._brnDialog||!e||b(()=>this._brnDialog?.setContext(e))}),v(()=>{if(!this._brnDialog)return;let e=this.className();b(()=>this._brnDialog?.setPanelClass(e))}))}static \u0275fac=function(t){return new(t||o)};static \u0275dir=d({type:o,selectors:[["","brnDialogContent",""]],inputs:{className:[1,"class","className"],context:[1,"context"]},features:[_([Kt(()=>o)])]})}return o})();var Ar=["*"],Vr={hasBackdrop:!1,scrollStrategy:"reposition"},Xt=(()=>{class o extends dt{align=s("center");sideOffset=s(0,{transform:at});offsetX=s(0,{transform:at});_positionStrategy;constructor(){super(),this.setAriaDescribedBy(""),this.setAriaLabelledBy(""),v(()=>{let e=this.align();b(()=>{this.mutableAttachPositions.set([{originX:e,originY:"bottom",overlayX:e,overlayY:"top"},{originX:e,originY:"top",overlayX:e,overlayY:"bottom"}])}),b(()=>{this.applySideOffset(this.sideOffset())})}),v(()=>{let e=this.sideOffset();b(()=>{this.applySideOffset(e)})}),v(()=>{let e=this.offsetX();b(()=>{this.applyOffsetX(e)})}),v(()=>{let e=this.mutableAttachTo(),t=this.mutableAttachPositions();!e||!t||t.length===0||b(()=>{this._positionStrategy?this._positionStrategy.setOrigin(e):this._positionStrategy=this.positionBuilder.flexibleConnectedTo(e).withPush(!1),this._positionStrategy.withPositions(t),this.mutablePositionStrategy.set(this._positionStrategy)})})}applySideOffset(e){this.mutableAttachPositions.update(t=>t.map(r=>vt(j({},r),{offsetY:r.originY==="top"?-e:e})))}applyOffsetX(e){this.mutableAttachPositions.update(t=>t.map(r=>vt(j({},r),{offsetX:e})))}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=M({type:o,selectors:[["brn-popover"]],inputs:{align:[1,"align"],sideOffset:[1,"sideOffset"],offsetX:[1,"offsetX"]},exportAs:["brnPopover"],features:[_([{provide:dt,useExisting:q(()=>o)},Po(Vr)]),ae],ngContentSelectors:Ar,decls:1,vars:0,template:function(t,r){t&1&&(T(),S(0))},encapsulation:2,changeDetection:0})}return o})();var Eo=(()=>{class o extends Fo{static \u0275fac=(()=>{let e;return function(r){return(e||(e=ze(o)))(r||o)}})();static \u0275dir=d({type:o,selectors:[["","brnPopoverContent",""]],features:[_([Kt(()=>o)]),ae]})}return o})();var ke=new y("BrnAutocompleteItemToken");function Dr(o){return{provide:ke,useExisting:o}}var Oo=new y("BrnAutocompleteToken");function Lr(o){return{provide:Oo,useExisting:o}}function xe(){return a(Oo)}var Yt=(()=>{class o{static _id=0;_injector=a(U);id=s(`brn-autocomplete-${++o._id}`);valueChange=F();selectionCleared=F();_brnPopover=a(Xt,{optional:!0});_focus=w("first");items=Ye(ke,{descendants:!0});keyManager=new yt(this.items,this._injector);isExpanded=l(()=>this._brnPopover?.stateComputed()==="open");constructor(){this.keyManager.withVerticalOrientation().withHomeAndEnd().withWrap().skipPredicate(e=>e.disabled),v(()=>{let e=this.items(),t=this._focus();b(()=>{if(!e.length)return;let r=this.keyManager.activeItem;(!r||!e.includes(r))&&(t==="first"?this.keyManager.setFirstItemActive():this.keyManager.setLastItemActive())})}),this.keyManager.change.pipe(de()).subscribe(()=>{let e=this.keyManager.activeItem?.value();e&&this.valueChange.emit(e)})}selectActiveItem(){this._brnPopover?.stateComputed()==="open"&&this.keyManager.activeItem?.selected.emit()}open(e="first"){this._brnPopover?.open(),this._focus.set(e)}close(){this._brnPopover?.close()}toggle(){this.isExpanded()?this.close():this.open()}static \u0275fac=function(t){return new(t||o)};static \u0275dir=d({type:o,selectors:[["","brnAutocomplete",""]],contentQueries:function(t,r,i){t&1&&Ue(i,r.items,ke,5),t&2&&Lt()},hostVars:1,hostBindings:function(t,r){t&1&&x("keydown.enter",function(){return r.selectActiveItem()}),t&2&&z("id",r.id())},inputs:{id:[1,"id"]},outputs:{valueChange:"valueChange",selectionCleared:"selectionCleared"},features:[_([Lr(o)])]})}return o})(),zo=(()=>{class o{_templateRef=a(Ht);_viewContainerRef=a(At);_autocomplete=xe();_visible=l(()=>this._autocomplete.items().length>0);constructor(){v(()=>{this._visible()?this._viewContainerRef.clear():this._viewContainerRef.createEmbeddedView(this._templateRef)})}static \u0275fac=function(t){return new(t||o)};static \u0275dir=d({type:o,selectors:[["","brnAutocompleteEmpty",""]]})}return o})(),Ro=(()=>{class o{static _id=0;id=s(`brn-autocomplete-group-${++o._id}`);static \u0275fac=function(t){return new(t||o)};static \u0275dir=d({type:o,selectors:[["","brnAutocompleteGroup",""]],hostAttrs:["role","group"],hostVars:1,hostBindings:function(t,r){t&2&&z("id",r.id())},inputs:{id:[1,"id"]}})}return o})(),No=(()=>{class o{static _id=0;_platform=a(jt);_elementRef=a(I);_autocomplete=xe();id=s(`brn-autocomplete-item-${++o._id}`);value=s.required();_disabled=s(!1,{alias:"disabled",transform:H});get disabled(){return this._disabled()}_active=w(!1);selected=F();getLabel(){return this._elementRef.nativeElement.textContent?.trim()??""}setActiveStyles(){this._active.set(!0),Je(this._platform)&&this._elementRef.nativeElement.scrollIntoView({block:"nearest"})}setInactiveStyles(){this._active.set(!1)}onClick(){this._autocomplete.keyManager.setActiveItem(this),this.selected.emit()}activate(){this._disabled()||this._autocomplete.keyManager.setActiveItem(this)}static \u0275fac=function(t){return new(t||o)};static \u0275dir=d({type:o,selectors:[["button","brnAutocompleteItem",""]],hostAttrs:["type","button","role","option","tabIndex","-1"],hostVars:6,hostBindings:function(t,r){t&1&&x("click",function(){return r.onClick()})("mouseenter",function(){return r.activate()}),t&2&&(z("id",r.id()),A("disabled",r._disabled()?!0:null)("data-disabled",r._disabled()?"":null)("data-value",r.value())("aria-selected",r._active())("data-selected",r._active()?"":null))},inputs:{id:[1,"id"],value:[1,"value"],_disabled:[1,"disabled","_disabled"]},outputs:{selected:"selected"},features:[_([Dr(o)])]})}return o})(),Zo=(()=>{class o{static _id=0;id=s(`brn-autocomplete-list-${++o._id}`);static \u0275fac=function(t){return new(t||o)};static \u0275dir=d({type:o,selectors:[["","brnAutocompleteList",""]],hostAttrs:["role","listbox"],hostVars:1,hostBindings:function(t,r){t&2&&z("id",r.id())},inputs:{id:[1,"id"]}})}return o})(),Uo=(()=>{class o{_autocomplete=xe();_isExpanded=this._autocomplete.isExpanded;_activeDescendant=w(void 0);constructor(){this._autocomplete.keyManager.change.pipe(Oe(this._autocomplete.keyManager.activeItemIndex),de()).subscribe(()=>{this._activeDescendant.set(this._autocomplete.keyManager.activeItem?.id())})}onKeyDown(e){e.key==="Enter"&&e.preventDefault(),this._isExpanded()||(e.key==="ArrowDown"&&this._autocomplete.open("first"),e.key==="ArrowUp"&&this._autocomplete.open("last"),e.key==="Escape"&&this._autocomplete.selectionCleared.emit()),this._autocomplete.keyManager.onKeydown(e)}static \u0275fac=function(t){return new(t||o)};static \u0275dir=d({type:o,selectors:[["input","brnAutocompleteSearchInput",""]],hostAttrs:["role","combobox","aria-autocomplete","list"],hostVars:2,hostBindings:function(t,r){t&1&&x("keydown",function(p){return r.onKeyDown(p)}),t&2&&A("aria-activedescendant",r._activeDescendant())("aria-expanded",r._isExpanded())}})}return o})();var me=(()=>{class o{_stateProvider=Io({host:!0});state=this._stateProvider.state??w("closed");_renderer=a(bt);_element=a(I);constructor(){v(()=>{this._renderer.setAttribute(this._element.nativeElement,"data-state",this.state())})}userClass=s("",{alias:"class"});_computedClass=l(()=>h("border-border bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative w-72 rounded-md border p-4 shadow-md outline-none",this.userClass()));static \u0275fac=function(t){return new(t||o)};static \u0275dir=d({type:o,selectors:[["","hlmPopoverContent",""],["","brnPopoverContent","","hlm",""]],hostVars:2,hostBindings:function(t,r){t&2&&c(r._computedClass())},inputs:{userClass:[1,"class","userClass"]}})}return o})();var Me=(()=>{class o{userClass=s("",{alias:"class"});_computedClass=l(()=>h("py-6 text-center text-sm",this.userClass()));static \u0275fac=function(t){return new(t||o)};static \u0275dir=d({type:o,selectors:[["","hlmAutocompleteEmpty",""]],hostVars:2,hostBindings:function(t,r){t&2&&c(r._computedClass())},inputs:{userClass:[1,"class","userClass"]}})}return o})();var Tr=["*"],_e=(()=>{class o{userClass=s("",{alias:"class"});_computedClass=l(()=>h("text-foreground block overflow-hidden p-1",this.userClass()));static \u0275fac=function(t){return new(t||o)};static \u0275cmp=M({type:o,selectors:[["hlm-autocomplete-group"]],hostVars:2,hostBindings:function(t,r){t&2&&c(r._computedClass())},inputs:{userClass:[1,"class","userClass"]},features:[E([{directive:Ro,inputs:["id","id"]}])],ngContentSelectors:Tr,decls:1,vars:0,template:function(t,r){t&1&&(T(),S(0))},encapsulation:2,changeDetection:0})}return o})();var Pr=["hlm-autocomplete-item",""],Fr=["*"],ye=(()=>{class o{userClass=s("",{alias:"class"});_computedClass=l(()=>h("data-[selected]:bg-accent data-[selected=true]:text-accent-foreground [&>ng-icon]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-start text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[hidden]:hidden [&>ng-icon]:pointer-events-none [&>ng-icon]:shrink-0 [&>ng-icon]:text-base",this.userClass()));static \u0275fac=function(t){return new(t||o)};static \u0275cmp=M({type:o,selectors:[["button","hlm-autocomplete-item",""]],hostVars:2,hostBindings:function(t,r){t&2&&c(r._computedClass())},inputs:{userClass:[1,"class","userClass"]},features:[E([{directive:No,inputs:["value","value","disabled","disabled","id","id"],outputs:["selected","selected"]}])],attrs:Pr,ngContentSelectors:Fr,decls:1,vars:0,template:function(t,r){t&1&&(T(),S(0))},encapsulation:2,changeDetection:0})}return o})();var Er=["*"],fe=(()=>{class o{userClass=s("",{alias:"class"});_computedClass=l(()=>h("block max-h-60 overflow-x-hidden overflow-y-auto",this.userClass()));static \u0275fac=function(t){return new(t||o)};static \u0275cmp=M({type:o,selectors:[["hlm-autocomplete-list"]],hostVars:2,hostBindings:function(t,r){t&2&&c(r._computedClass())},inputs:{userClass:[1,"class","userClass"]},features:[E([{directive:Zo,inputs:["id","id"]}])],ngContentSelectors:Er,decls:1,vars:0,template:function(t,r){t&1&&(T(),S(0))},encapsulation:2,changeDetection:0})}return o})();var Ce=(()=>{class o{userClass=s("",{alias:"class"});_computedClass=l(()=>h("group/input-group border-input dark:bg-input/30 relative flex w-full items-center rounded-md border shadow-xs transition-[color,box-shadow] outline-none","h-9 min-w-0 has-[>textarea]:h-auto","has-[>[data-align=inline-start]]:[&>input]:pl-2","has-[>[data-align=inline-end]]:[&>input]:pr-2","has-[>[data-align=block-start]]:h-auto has-[>[data-align=block-start]]:flex-col has-[>[data-align=block-start]]:[&>input]:pb-3","has-[>[data-align=block-end]]:h-auto has-[>[data-align=block-end]]:flex-col has-[>[data-align=block-end]]:[&>input]:pt-3","has-[[data-slot=input-group-control]:focus-visible]:border-ring has-[[data-slot=input-group-control]:focus-visible]:ring-ring/50 has-[[data-slot=input-group-control]:focus-visible]:ring-[3px]","has-[>.ng-invalid.ng-touched]:ring-destructive/20 has-[>.ng-invalid.ng-touched]:border-destructive dark:has-[>.ng-invalid.ng-touched]:ring-destructive/40",this.userClass()));static \u0275fac=function(t){return new(t||o)};static \u0275dir=d({type:o,selectors:[["","hlmInputGroup",""],["hlm-input-group"]],hostAttrs:["data-slot","input-group","role","group"],hostVars:2,hostBindings:function(t,r){t&2&&c(r._computedClass())},inputs:{userClass:[1,"class","userClass"]}})}return o})();var Or=O("text-muted-foreground flex h-auto cursor-text items-center justify-center gap-2 py-1.5 text-sm font-medium select-none group-data-[disabled=true]/input-group:opacity-50 [&>kbd]:rounded-[calc(var(--radius)-5px)] [&>ng-icon:not([class*='text-'])]:text-base",{variants:{align:{"inline-start":"order-first pl-3 has-[>button]:ml-[-0.45rem] has-[>kbd]:ml-[-0.35rem]","inline-end":"order-last pr-3 has-[>button]:mr-[-0.45rem] has-[>kbd]:mr-[-0.35rem]","block-start":"order-first w-full justify-start px-3 pt-3 group-has-[>input]/input-group:pt-2.5 [.border-b]:pb-3","block-end":"order-last w-full justify-start px-3 pb-3 group-has-[>input]/input-group:pb-2.5 [.border-t]:pt-3"}},defaultVariants:{align:"inline-start"}}),Be=(()=>{class o{align=s("inline-start");userClass=s("",{alias:"class"});_computedClass=l(()=>h(Or({align:this.align()}),this.userClass()));static \u0275fac=function(t){return new(t||o)};static \u0275dir=d({type:o,selectors:[["hlm-input-group-addon"],["","hlmInputGroupAddon",""]],hostAttrs:["role","group","data-slot","input-group-addon"],hostVars:3,hostBindings:function(t,r){t&2&&(A("data-align",r.align()),c(r._computedClass()))},inputs:{align:[1,"align"],userClass:[1,"class","userClass"]}})}return o})();var Rr=O("flex items-center gap-2 text-sm shadow-none",{variants:{size:{xs:"h-6 gap-1 rounded-[calc(var(--radius)-5px)] px-2 has-[>ng-icon]:px-2 [&>ng-icon:not([class*='text-'])]:text-sm",sm:"h-8 gap-1.5 rounded-md px-2.5 has-[>ng-icon]:px-2.5","icon-xs":"size-6 rounded-[calc(var(--radius)-5px)] p-0 has-[>ng-icon]:p-0","icon-sm":"size-8 p-0 has-[>ng-icon]:p-0"}},defaultVariants:{size:"xs"}}),je=(()=>{class o{_hlmButton=a(lt);size=s("xs");userClass=s("",{alias:"class"});_computedClass=l(()=>h(Rr({size:this.size()}),this.userClass()));constructor(){v(()=>{this._hlmButton.setClass(this._computedClass())})}static \u0275fac=function(t){return new(t||o)};static \u0275dir=d({type:o,selectors:[["button","hlmInputGroupButton",""]],hostVars:1,hostBindings:function(t,r){t&2&&A("data-size",r.size())},inputs:{size:[1,"size"],userClass:[1,"class","userClass"]},features:[_([io({variant:"ghost"})]),E([{directive:lt,inputs:["variant","variant"]}])]})}return o})();var Go=(()=>{class o{ngControl=null;errorState=w(!1);static \u0275fac=function(t){return new(t||o)};static \u0275dir=d({type:o})}return o})();var qo=(()=>{class o{isInvalid(e,t){return!!(e&&e.invalid&&(e.touched||t instanceof ht&&t.submitted))}static \u0275fac=function(t){return new(t||o)};static \u0275prov=nt({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})(),Jt=class{_defaultMatcher;ngControl;_parentFormGroup;_parentForm;errorState=w(!1);matcher=null;constructor(n,e,t,r){this._defaultMatcher=n,this.ngControl=e,this._parentFormGroup=t,this._parentForm=r}updateErrorState(){let n=this.errorState(),e=this._parentFormGroup||this._parentForm,t=this.matcher||this._defaultMatcher,r=this.ngControl?this.ngControl.control:null,i=t?.isInvalid(r,e)??!1;i!==n&&this.errorState.set(i)}};var Nr=O("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input focus-visible:border-ring focus-visible:ring-ring/50 flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium focus-visible:ring-[3px] disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",{variants:{error:{auto:"[&.ng-invalid.ng-touched]:border-destructive [&.ng-invalid.ng-touched]:ring-destructive/20 dark:[&.ng-invalid.ng-touched]:ring-destructive/40",true:"border-destructive focus-visible:border-destructive focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40"}},defaultVariants:{error:"auto"}}),J=(()=>{class o{_injector=a(U);_additionalClasses=w("");_errorStateTracker;_defaultErrorStateMatcher=a(qo);_parentForm=a(ht,{optional:!0});_parentFormGroup=a(mo,{optional:!0});userClass=s("",{alias:"class"});_computedClass=l(()=>h(Nr({error:this._state().error}),this.userClass(),this._additionalClasses()));error=s("auto");_state=P(()=>({error:this.error()}));ngControl=this._injector.get(vo,null);errorState=l(()=>this._errorStateTracker.errorState());constructor(){this._errorStateTracker=new Jt(this._defaultErrorStateMatcher,this.ngControl,this._parentFormGroup,this._parentForm),v(()=>{let e=this._errorStateTracker.errorState();b(()=>{if(this.ngControl){let t=e&&this.ngControl.invalid&&(this.ngControl.touched||this.ngControl.dirty);this._errorStateTracker.errorState.set(!!t),this.setError(t?!0:"auto")}})})}ngDoCheck(){this._errorStateTracker.updateErrorState()}setError(e){this._state.set({error:e})}setClass(e){this._additionalClasses.set(e)}static \u0275fac=function(t){return new(t||o)};static \u0275dir=d({type:o,selectors:[["","hlmInput",""]],hostVars:2,hostBindings:function(t,r){t&2&&c(r._computedClass())},inputs:{userClass:[1,"class","userClass"],error:[1,"error"]},features:[_([{provide:Go,useExisting:q(()=>o)}])]})}return o})();var He=(()=>{class o{_hlmInput=a(J);userClass=s("",{alias:"class"});_computedClass=l(()=>h("flex-1 rounded-none border-0 bg-transparent shadow-none focus-visible:ring-0 dark:bg-transparent",this.userClass()));constructor(){v(()=>{this._hlmInput.setClass(this._computedClass())})}static \u0275fac=function(t){return new(t||o)};static \u0275dir=d({type:o,selectors:[["input","hlmInputGroupInput",""]],hostAttrs:["data-slot","input-group-control"],hostVars:2,hostBindings:function(t,r){t&2&&c(r._computedClass())},inputs:{userClass:[1,"class","userClass"]},features:[E([J])]})}return o})();var H0=O("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 dark:bg-input/30 flex [field-sizing:content] min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",{variants:{error:{auto:"[&.ng-invalid.ng-touched]:border-destructive [&.ng-invalid.ng-touched]:ring-destructive/20 dark:[&.ng-invalid.ng-touched]:ring-destructive/40",true:"border-destructive focus-visible:border-destructive focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40"}},defaultVariants:{error:"auto"}});var be=(()=>{class o{_host=a(I,{host:!0});_brnDialog=a(dt,{optional:!0});disabledTrigger=s(!1,{transform:H});constructor(){this._brnDialog&&this._brnDialog.mutableAttachTo.set(this._host.nativeElement)}open(){this.disabledTrigger()||this._brnDialog?.open()}static \u0275fac=function(t){return new(t||o)};static \u0275dir=d({type:o,selectors:[["","hlmAutocompleteTrigger",""]],hostBindings:function(t,r){t&1&&x("click",function(){return r.open()})},inputs:{disabledTrigger:[1,"disabledTrigger"]}})}return o})();function $o(){return{transformValueToSearch:o=>typeof o=="string"?o:String(o),transformOptionToString:o=>typeof o=="string"?o:String(o),transformOptionToValue:void 0,requireSelection:!1,showClearBtn:!1,debounceTime:150}}var Xo=new y("HlmAutocompleteConfig");function Yo(o){return{provide:Xo,useValue:j(j({},$o()),o)}}function Qo(){return a(Xo,{optional:!0})??$o()}var Gr=["input"],qr=[[["","loading",""]],[["","empty",""]]],Wr=["[loading]","[empty]"],Kr=o=>({$implicit:o});function $r(o,n){if(o&1){let e=Y();g(0,"button",13),x("click",function(){D(e);let r=B();return L(r._selectionCleared())}),V(1,"ng-icon",14),k()}if(o&2){let e=B();C("disabled",e._disabled())}}function Xr(o,n){o&1&&Ze(0)}function Yr(o,n){if(o&1&&Vt(0,Xr,1,0,"ng-container",19),o&2){let e=B().$implicit;C("ngTemplateOutlet",n)("ngTemplateOutletContext",$e(2,Kr,e))}}function Qr(o,n){if(o&1&&G(0),o&2){let e=B().$implicit,t=B(2);st(" ",t.transformOptionToString()(e)," ")}}function Jr(o,n){if(o&1){let e=Y();g(0,"button",18),x("selected",function(){let r=D(e).$implicit,i=B(2);return L(i._optionSelected(r))}),W(1,Yr,1,4,"ng-container")(2,Qr,1,1),k()}if(o&2){let e,t=n.$implicit,r=B(2),i=We(0);c(r._computedAutocompleteItemClass()),C("value",i?i(t):t),m(),K((e=r.optionTemplate())?1:2,e)}}function tn(o,n){if(o&1&&G(0),o&2){let e=B(4);Mt(e.loadingText())}}function en(o,n){o&1&&S(0,0,null,tn,1,1)}function on(o,n){if(o&1&&G(0),o&2){let e=B(4);Mt(e.emptyText())}}function rn(o,n){o&1&&S(0,1,null,on,1,1)}function nn(o,n){if(o&1&&(g(0,"div",20),W(1,en,2,0)(2,rn,2,0),k()),o&2){let e=B(2);c(e._computedAutocompleteEmptyClass()),m(),K(e.loading()?1:2)}}function sn(o,n){if(o&1&&(g(0,"div",15)(1,"hlm-autocomplete-list")(2,"hlm-autocomplete-group"),St(3,Jr,3,4,"button",16,Ne),k()(),Vt(5,nn,3,3,"div",17),k()),o&2){let e=B();it("width",e._elementRef.nativeElement.offsetWidth,"px"),m(),c(e._computedAutocompleteListClass()),It("hidden",e.filteredOptions().length===0),m(2),Dt(e.filteredOptions())}}var an={provide:co,useExisting:q(()=>te),multi:!0},te=(()=>{class o{static _id=0;_config=Qo();_brnAutocomplete=he.required(Yt);_inputRef=he.required("input",{read:I});_elementRef=a(I);userClass=s("",{alias:"class"});_computedClass=l(()=>h("block w-full",this.userClass()));autocompleteSearchClass=s("");_computedAutocompleteSearchClass=l(()=>h("",this.autocompleteSearchClass()));autocompleteInputClass=s("");_computedAutocompleteInputClass=l(()=>h("",this.autocompleteInputClass()));autocompleteListClass=s("");_computedAutocompleteListClass=l(()=>h("",this.autocompleteListClass()));autocompleteItemClass=s("");_computedAutocompleteItemClass=l(()=>h("",this.autocompleteItemClass()));autocompleteEmptyClass=s("");_computedAutocompleteEmptyClass=l(()=>h("",this.autocompleteEmptyClass()));filteredOptions=s([]);value=Q();debounceTime=s(this._config.debounceTime);search=Q("");_search=Lo(this.search,this.debounceTime());transformValueToSearch=s(this._config.transformValueToSearch);requireSelection=s(this._config.requireSelection,{transform:H});transformOptionToString=s(this._config.transformOptionToString);transformOptionToValue=s(this._config.transformOptionToValue);displayWith=s(void 0);_displaySearchValue=l(()=>{let e=this.displayWith();return e||this.transformValueToSearch()});optionTemplate=s();loading=s(!1,{transform:H});showClearBtn=s(this._config.showClearBtn,{transform:H});searchPlaceholderText=s("Select an option");loadingText=s("Loading options...");emptyText=s("No options found");ariaLabelToggleButton=s("Toggle options");inputId=s(`hlm-autocomplete-input-${++o._id}`);disabled=s(!1,{transform:H});_disabled=P(()=>this.disabled());valueChange=F();searchChange=F();_onChange;_onTouched;constructor(){v(()=>{let e=this._search();this.searchChange.emit(e)})}_searchChanged(e){let t=e.target.value;this.search.set(t??""),!this._brnAutocomplete().isExpanded()&&t.length>0&&this._brnAutocomplete().open()}_toggleOptions(){(this._search()||this.filteredOptions().length>0)&&this._brnAutocomplete().toggle(),this._inputRef().nativeElement.focus()}_selectionCleared(){this.value.set(void 0),this._onChange?.(null),this.valueChange.emit(null),this.search.set("")}_optionSelected(e){let t=this.transformOptionToValue(),r=t?t(e):e;this.value.set(r),this._onChange?.(r),this.valueChange.emit(r);let i=this._displaySearchValue()(r);this.search.set(i??""),this._brnAutocomplete().close()}writeValue(e){this.value.set(e||void 0);let t=e?this._displaySearchValue()(e):"";this.search.set(t)}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this._disabled.set(e)}_closed(){if(this.requireSelection()){let e=this.value(),t=e?this._displaySearchValue()(e):"";this.search.set(t??"")}}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=M({type:o,selectors:[["hlm-autocomplete"]],viewQuery:function(t,r){t&1&&(le(r._brnAutocomplete,Yt,5),le(r._inputRef,Gr,5,I)),t&2&&Lt(2)},hostVars:2,hostBindings:function(t,r){t&2&&c(r._computedClass())},inputs:{userClass:[1,"class","userClass"],autocompleteSearchClass:[1,"autocompleteSearchClass"],autocompleteInputClass:[1,"autocompleteInputClass"],autocompleteListClass:[1,"autocompleteListClass"],autocompleteItemClass:[1,"autocompleteItemClass"],autocompleteEmptyClass:[1,"autocompleteEmptyClass"],filteredOptions:[1,"filteredOptions"],value:[1,"value"],debounceTime:[1,"debounceTime"],search:[1,"search"],transformValueToSearch:[1,"transformValueToSearch"],requireSelection:[1,"requireSelection"],transformOptionToString:[1,"transformOptionToString"],transformOptionToValue:[1,"transformOptionToValue"],displayWith:[1,"displayWith"],optionTemplate:[1,"optionTemplate"],loading:[1,"loading"],showClearBtn:[1,"showClearBtn"],searchPlaceholderText:[1,"searchPlaceholderText"],loadingText:[1,"loadingText"],emptyText:[1,"emptyText"],ariaLabelToggleButton:[1,"ariaLabelToggleButton"],inputId:[1,"inputId"],disabled:[1,"disabled"]},outputs:{value:"valueChange",search:"searchChange",valueChange:"valueChange",searchChange:"searchChange"},features:[_([an,R({lucideSearch:Bo,lucideChevronDown:Mo,lucideCircleX:_o})])],ngContentSelectors:Wr,decls:14,vars:14,consts:[["popover",""],["input",""],["align","start","autoFocus","first-heading","sideOffset","5","closeDelay","100",3,"closed","closeOnOutsidePointerEvents"],["brnAutocomplete","",3,"selectionCleared"],["hlmInputGroup","","hlmAutocompleteTrigger","",3,"disabledTrigger"],["brnAutocompleteSearchInput","","hlmInputGroupInput","","type","text","autocomplete","off",3,"input","id","placeholder","disabled","value"],["hlmInputGroupAddon",""],["name","lucideSearch"],["hlmInputGroupAddon","","align","inline-end"],["hlmInputGroupButton","","type","button","tabindex","-1","aria-label","clear","size","icon-xs",3,"disabled"],["hlmInputGroupButton","","type","button","tabindex","-1","size","icon-xs",3,"click","disabled"],["name","lucideChevronDown"],["hlmPopoverContent","","class","p-0",3,"width",4,"brnPopoverContent"],["hlmInputGroupButton","","type","button","tabindex","-1","aria-label","clear","size","icon-xs",3,"click","disabled"],["name","lucideCircleX"],["hlmPopoverContent","",1,"p-0"],["hlm-autocomplete-item","",3,"class","value"],["hlmAutocompleteEmpty","",3,"class",4,"brnAutocompleteEmpty"],["hlm-autocomplete-item","",3,"selected","value"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["hlmAutocompleteEmpty",""]],template:function(t,r){if(t&1){let i=Y();T(qr),Ge(0),g(1,"brn-popover",2,0),x("closed",function(){return D(i),L(r._closed())}),g(3,"div",3),x("selectionCleared",function(){return D(i),L(r._selectionCleared())}),g(4,"div",4)(5,"input",5,1),x("input",function(f){return D(i),L(r._searchChanged(f))}),k(),g(7,"div",6),V(8,"ng-icon",7),k(),g(9,"div",8),W(10,$r,2,1,"button",9),g(11,"button",10),x("click",function(){return D(i),L(r._toggleOptions())}),V(12,"ng-icon",11),k()()(),Vt(13,sn,6,6,"div",12),k()()}t&2&&(qe(r.transformOptionToValue()),m(),C("closeOnOutsidePointerEvents",!0),m(3),c(r._computedAutocompleteSearchClass()),C("disabledTrigger",!r._search()||r._disabled()),m(),c(r._computedAutocompleteInputClass()),C("id",r.inputId())("placeholder",r.searchPlaceholderText())("disabled",r._disabled())("value",r.search()),m(5),K(r.showClearBtn()&&r.value()!==void 0?10:-1),m(),C("disabled",r._disabled()),A("aria-label",r.ariaLabelToggleButton()))},dependencies:[Qe,Yt,zo,Me,_e,ye,fe,be,Xt,Eo,me,$,Ce,Be,je,He,Uo],encapsulation:2,changeDetection:0})}return o})();var Ae=(()=>{class o{icon=s("lucideLoader");ariaLabel=s("Loading",{alias:"aria-label"});userClass=s("",{alias:"class"});_computedClass=l(()=>h("text-base motion-safe:animate-spin",this.userClass()));static \u0275fac=function(t){return new(t||o)};static \u0275cmp=M({type:o,selectors:[["hlm-spinner"]],hostAttrs:["role","status",1,"inline-flex"],hostVars:1,hostBindings:function(t,r){t&2&&A("aria-label",r.ariaLabel())},inputs:{icon:[1,"icon"],ariaLabel:[1,"aria-label","ariaLabel"],userClass:[1,"class","userClass"]},features:[_([R({lucideLoader:yo})])],decls:1,vars:3,consts:[[3,"name"]],template:function(t,r){t&1&&V(0,"ng-icon",0),t&2&&(c(r._computedClass()),C("name",r.icon()))},dependencies:[$],encapsulation:2,changeDetection:0})}return o})();var dn=O("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",{variants:{},defaultVariants:{}}),Ve=(()=>{class o{userClass=s("",{alias:"class"});_computedClass=l(()=>h(dn(),this.userClass()));static \u0275fac=function(t){return new(t||o)};static \u0275dir=d({type:o,selectors:[["","hlmCard",""]],hostVars:2,hostBindings:function(t,r){t&2&&c(r._computedClass())},inputs:{userClass:[1,"class","userClass"]}})}return o})();var Se=(()=>{class o{userClass=s("",{alias:"class"});_computedClass=l(()=>h("px-2",this.userClass()));static \u0275fac=function(t){return new(t||o)};static \u0275dir=d({type:o,selectors:[["","hlmCardContent",""]],hostVars:2,hostBindings:function(t,r){t&2&&c(r._computedClass())},inputs:{userClass:[1,"class","userClass"]}})}return o})();var De=(()=>{class o{userClass=s("",{alias:"class"});_computedClass=l(()=>h("leading-none font-semibold",this.userClass()));static \u0275fac=function(t){return new(t||o)};static \u0275dir=d({type:o,selectors:[["","hlmCardTitle",""]],hostVars:2,hostBindings:function(t,r){t&2&&c(r._computedClass())},inputs:{userClass:[1,"class","userClass"]}})}return o})();function wn(o,n){if(o&1){let e=Y();g(0,"input",7),x("ngModelChange",function(r){D(e);let i=B();return L(i.editingName.set(r))})("blur",function(){D(e);let r=B();return L(r.saveInline())})("keydown.enter",function(r){D(e);let i=B();return r.preventDefault(),L(i.saveInline())})("keydown.escape",function(){D(e);let r=B();return L(r.cancelEdit())}),k()}if(o&2){let e=B();C("id",Ke("edit-",e.item().id))("ngModel",e.editingName())}}function vn(o,n){if(o&1){let e=Y();g(0,"div",5)(1,"h3",8),x("click",function(){D(e);let r=B();return L(r.startEdit())}),G(2),k()()}if(o&2){let e=B();m(2),st(" ",e.item().product_name," ")}}var Jo=(()=>{class o{service=a(Ut);item=s.required();itemUpdated=F();itemDeleted=F();busyCount=w(0);busy=l(()=>this.busyCount()>0);editingName=w(null);isEditing=l(()=>this.editingName()!==null);toggleItem(){let e=this.item();this.busyCount.update(t=>t+1),this.service.toggleItem(e.id,!e.active).pipe(kt(()=>this.busyCount.update(t=>t-1))).subscribe({next:()=>this.itemUpdated.emit(),error:t=>console.error("Toggle error:",t)})}onBasketToggle(e){let t=this.item(),r=e==="on";t.active!==r&&(this.busyCount.update(i=>i+1),this.service.toggleItem(t.id,r).pipe(kt(()=>this.busyCount.update(i=>i-1))).subscribe({next:()=>this.itemUpdated.emit(),error:i=>console.error("Toggle error:",i)}))}deleteItem(){if(!confirm("Are you sure you want to delete this item?"))return;let e=this.item();this.busyCount.update(t=>t+1),this.service.deleteItem(e.id).pipe(kt(()=>this.busyCount.update(t=>t-1))).subscribe({next:()=>this.itemDeleted.emit(),error:t=>console.error("Delete error:",t)})}startEdit(){this.editingName.set(this.item().product_name??""),setTimeout(()=>{let e=document.getElementById("edit-"+this.item().id);e?.focus(),e?.select()},0)}saveInline(){let e=(this.editingName()||"").trim(),t=this.item();if(e===(t.product_name??"").trim()){this.cancelEdit();return}this.busyCount.update(r=>r+1),this.service.updateItem(t.id,{product_name:e}).pipe(kt(()=>{this.busyCount.update(r=>r-1),this.cancelEdit()})).subscribe({next:()=>this.itemUpdated.emit(),error:r=>console.error("Update error:",r)})}cancelEdit(){this.editingName.set(null)}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=M({type:o,selectors:[["lib-shopping-list-item-card"]],inputs:{item:[1,"item"]},outputs:{itemUpdated:"itemUpdated",itemDeleted:"itemDeleted"},features:[_([R({lucideTrash:bo})])],decls:7,vars:4,consts:[["hlmCard","",1,"group","p-2","sm:p-3","relative"],["hlmCardContent",""],[1,"flex","items-center","gap-3","w-full"],[1,"flex-1","min-w-0"],["hlmInput","",1,"w-full",3,"id","ngModel"],[1,"h-8","flex","items-center"],["size","sm","variant","outline",1,"ml-auto",3,"stateChange","state"],["hlmInput","",1,"w-full",3,"ngModelChange","blur","keydown.enter","keydown.escape","id","ngModel"],["hlmCardTitle","",1,"truncate","cursor-pointer","hover:text-primary",3,"click"]],template:function(t,r){t&1&&(g(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),W(4,wn,1,3,"input",4)(5,vn,3,1,"div",5),k(),g(6,"gh-shopping-basket-toggle",6),x("stateChange",function(p){return r.onBasketToggle(p)}),k()()()()),t&2&&(It("opacity-60",!r.item().active),m(4),K(r.isEditing()?4:5),m(2),C("state",r.item().active?"on":"off"))},dependencies:[zt,Zt,wo,go,ko,Ve,De,Se,J,Do],encapsulation:2,changeDetection:0})}return o})();var gn=(o,n)=>n.id;function un(o,n){o&1&&(g(0,"div",12),V(1,"hlm-spinner",19),k())}function kn(o,n){if(o&1&&V(0,"lib-shopping-list-item-card",18),o&2){let e=n.$implicit;C("item",e)}}var tr=(()=>{class o{service=a(Ut);supabaseAuthService=a(ao);newItemName=w("");items=this.service.items;addingItem=w(!1);loading=l(()=>this.addingItem());sortedItems=l(()=>(this.items()??[]).slice().sort((t,r)=>{if(t.active===r.active){let i=t.active_changed?new Date(t.active_changed).getTime():0;return(r.active_changed?new Date(r.active_changed).getTime():0)-i}return t.active?-1:1}));filteredOptions=l(()=>(this.items()??[]).filter(t=>!t.active&&t.product_name.toLowerCase().includes(this.newItemName().toLowerCase())));handleSearch(e){let t=this.items().find(r=>r.product_name===e);!t||t.active||(this.service.toggleItem(t.id,!0).subscribe(),this.clearAutocomplete())}clearAutocomplete(){this.newItemName.set("")}focusAddInput(){try{document.getElementById("add-input")?.focus()}catch{}}addItem(){let e=this.newItemName();e&&(this.addingItem.set(!0),this.service.addItem(e,void 0).subscribe({next:()=>{this.clearAutocomplete(),this.addingItem.set(!1)},error:t=>{console.error("Add item error:",t),this.addingItem.set(!1)}}))}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=M({type:o,selectors:[["lib-sl-dashboard"]],features:[_([R({lucideShoppingCart:Ho,lucideLogOut:fo,lucidePlus:Co}),Yo({transformOptionToString:e=>e.product_name,transformOptionToValue:e=>e.product_name})])],decls:26,vars:13,consts:[[1,"h-dvh","flex","flex-col","gap-4"],["hlmCard","",1,"w-full","rounded-none","flex-initial"],[1,"mx-auto","px-4","py-3","flex","items-center","justify-between"],[1,"flex","items-center","gap-3"],[1,"p-2","bg-primary/10","rounded-lg"],["hlm","","name","lucideShoppingCart","size","sm",1,"text-primary"],[1,"text-lg","font-semibold"],[1,"flex","items-center","gap-2"],["hlmBtn","","variant","outline","size","sm",1,"gap-2",3,"click"],["hlm","","name","lucideLogOut","size","sm"],[1,"flex-1","flex","flex-col","gap-4","overflow-hidden","py-4"],[1,"flex","sm:flex-row","gap-2","items-stretch","sm:items-center","relative","px-4",3,"ngSubmit"],[1,"absolute","inset-0","bg-background/50","flex","justify-center","items-center","z-10","rounded-lg"],[3,"searchChange","valueChange","keydown.enter","searchPlaceholderText","filteredOptions","search","autocompleteEmptyClass"],["hlmBtn","","size","icon","variant","default","type","submit"],["hlm","","name","lucidePlus","size","sm"],[1,"flex-1","overflow-auto"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","xl:grid-cols-4","gap-4","px-4"],[3,"item"],["size","large"]],template:function(t,r){t&1&&(g(0,"div",0)(1,"header",1)(2,"div",2)(3,"div",3)(4,"div",4),V(5,"ng-icon",5),k(),g(6,"h1",6),G(7),Et(8,"transloco"),k()(),g(9,"div",7),V(10,"gh-language-switcher"),g(11,"button",8),x("click",function(){return r.supabaseAuthService.logout()}),V(12,"ng-icon",9),G(13),Et(14,"transloco"),k()()()(),g(15,"main",10)(16,"form",11),x("ngSubmit",function(){return r.addItem()}),W(17,un,2,0,"div",12),g(18,"hlm-autocomplete",13),Et(19,"transloco"),Ft("searchChange",function(p){return Pt(r.newItemName,p)||(r.newItemName=p),p}),x("valueChange",function(p){return r.handleSearch(p)})("keydown.enter",function(){return r.addItem()}),k(),g(20,"button",14),V(21,"ng-icon",15),k()(),g(22,"section",16)(23,"div",17),St(24,kn,1,1,"lib-shopping-list-item-card",18,gn),k()()()()),t&2&&(m(7),Mt(Ot(8,7,"shoppingList.title")),m(6),st(" ",Ot(14,9,"shoppingList.signOut")," "),m(4),K(r.loading()?17:-1),m(),C("searchPlaceholderText",Ot(19,11,"shoppingList.searchPlaceholder"))("filteredOptions",r.filteredOptions()),Tt("search",r.newItemName),C("autocompleteEmptyClass","hidden"),m(6),Dt(r.sortedItems()))},dependencies:[zt,Zt,xo,uo,ht,lt,_t,$,Ae,te,Jo,no,so,ro],encapsulation:2,changeDetection:0})}return o})();var fl=[{path:"dashboard",component:tr},{path:"**",redirectTo:"dashboard"}];export{Do as ShoppingBasketToggleComponent,Ut as ShoppingListService,fl as shoppingListRoutes};
