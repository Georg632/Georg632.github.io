import{$ as jt,A as Ns,Aa as Ld,B as js,Ba as Bd,C as Ra,Ca as Nd,D as Ae,Da as $s,E as fd,Ea as jd,F as pd,G as md,Ga as Md,H as Bi,I as gd,J as yd,K as We,L as vd,La as zd,M as Ia,N as bd,O as _d,P as jr,Q as Ni,R as Mr,S as Ua,T as wd,U as Sd,V as ji,W as xd,X as Mi,Y as zi,Z as Pd,_ as kd,a as rd,aa as ge,b as Ri,ba as _e,c as id,ca as ot,d as st,da as Ms,e as nd,ea as zs,f as sd,fa as Mt,g as od,ga as Ed,h as Ii,ha as Td,i as Us,ia as Cd,j as Ui,ja as Fd,k as Ds,ka as Od,l as ad,la as Da,m as ld,ma as Ad,n as ud,na as Rd,o as Aa,oa as Id,p as cd,pa as $i,q as Nr,qa as La,r as dd,ra as qi,s as St,sa as Hi,t as Di,u as Yt,ua as Ba,v as W,va as Na,w as Ls,wa as Ud,x as Bs,xa as Vi,y as Li,ya as ja,z as hd,za as Dd}from"./chunk-IFE3LH42.js";import{b as $d,c as qd,f as yv,g as Hd}from"./chunk-HDVAJA6E.js";import{a as v,b as j,c as Lr,e as Q,g as re,h as gv,i as p,j as Br,k as As,l as Rs,m as Is}from"./chunk-N57AJHA5.js";var qa=Q($a=>{"use strict";Object.defineProperty($a,"__esModule",{value:!0});var za=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};$a.default=za});var Va=Q(Ki=>{"use strict";var Wd=Ki&&Ki.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ki,"__esModule",{value:!0});var bv=Wd((Hd(),gv(yv))),_v=Wd(qa()),Ha=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=bv.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Object.assign({},this.headers),this.headers[e]=t,this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");let i=this.fetch,n=i(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(s=>p(this,null,function*(){var o,a,l;let u=null,c=null,d=null,m=s.status,f=s.statusText;if(s.ok){if(this.method!=="HEAD"){let S=yield s.text();S===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?c=S:c=JSON.parse(S))}let x=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),E=(a=s.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");x&&E&&E.length>1&&(d=parseInt(E[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(c)&&(c.length>1?(u={code:"PGRST116",details:`Results contain ${c.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},c=null,d=null,m=406,f="Not Acceptable"):c.length===1?c=c[0]:c=null)}else{let x=yield s.text();try{u=JSON.parse(x),Array.isArray(u)&&s.status===404&&(c=[],u=null,m=200,f="OK")}catch{s.status===404&&x===""?(m=204,f="No Content"):u={message:x}}if(u&&this.isMaybeSingle&&(!((l=u?.details)===null||l===void 0)&&l.includes("0 rows"))&&(u=null,m=200,f="OK"),u&&this.shouldThrowOnError)throw new _v.default(u)}return{error:u,data:c,count:d,status:m,statusText:f}}));return this.shouldThrowOnError||(n=n.catch(s=>{var o,a,l;return{error:{message:`${(o=s?.name)!==null&&o!==void 0?o:"FetchError"}: ${s?.message}`,details:`${(a=s?.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=s?.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),n.then(e,t)}returns(){return this}overrideTypes(){return this}};Ki.default=Ha});var Ga=Q(Ji=>{"use strict";var wv=Ji&&Ji.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ji,"__esModule",{value:!0});var Sv=wv(Va()),Wa=class extends Sv.default{select(e){let t=!1,i=(e??"*").split("").map(n=>/\s/.test(n)&&!t?"":(n==='"'&&(t=!t),n)).join("");return this.url.searchParams.set("select",i),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:i,foreignTable:n,referencedTable:s=n}={}){let o=s?`${s}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${e}.${t?"asc":"desc"}${i===void 0?"":i?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:i=t}={}){let n=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:i,referencedTable:n=i}={}){let s=typeof n>"u"?"offset":`${n}.offset`,o=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(o,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:i=!1,buffers:n=!1,wal:s=!1,format:o="text"}={}){var a;let l=[e?"analyze":null,t?"verbose":null,i?"settings":null,n?"buffers":null,s?"wal":null].filter(Boolean).join("|"),u=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${u}"; options=${l};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Ji.default=Wa});var Ws=Q(Xi=>{"use strict";var xv=Xi&&Xi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Xi,"__esModule",{value:!0});var Pv=xv(Ga()),Ka=class extends Pv.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){let i=Array.from(new Set(t)).map(n=>typeof n=="string"&&new RegExp("[,()]").test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${i})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:i,type:n}={}){let s="";n==="plain"?s="pl":n==="phrase"?s="ph":n==="websearch"&&(s="w");let o=i===void 0?"":`(${i})`;return this.url.searchParams.append(e,`${s}fts${o}.${t}`),this}match(e){return Object.entries(e).forEach(([t,i])=>{this.url.searchParams.append(t,`eq.${i}`)}),this}not(e,t,i){return this.url.searchParams.append(e,`not.${t}.${i}`),this}or(e,{foreignTable:t,referencedTable:i=t}={}){let n=i?`${i}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,i){return this.url.searchParams.append(e,`${t}.${i}`),this}};Xi.default=Ka});var Xa=Q(Qi=>{"use strict";var kv=Qi&&Qi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Qi,"__esModule",{value:!0});var Yi=kv(Ws()),Ja=class{constructor(e,{headers:t={},schema:i,fetch:n}){this.url=e,this.headers=t,this.schema=i,this.fetch=n}select(e,{head:t=!1,count:i}={}){let n=t?"HEAD":"GET",s=!1,o=(e??"*").split("").map(a=>/\s/.test(a)&&!s?"":(a==='"'&&(s=!s),a)).join("");return this.url.searchParams.set("select",o),i&&(this.headers.Prefer=`count=${i}`),new Yi.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:i=!0}={}){let n="POST",s=[];if(this.headers.Prefer&&s.push(this.headers.Prefer),t&&s.push(`count=${t}`),i||s.push("missing=default"),this.headers.Prefer=s.join(","),Array.isArray(e)){let o=e.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(o.length>0){let a=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new Yi.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:i=!1,count:n,defaultToNull:s=!0}={}){let o="POST",a=[`resolution=${i?"ignore":"merge"}-duplicates`];if(t!==void 0&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&a.push(this.headers.Prefer),n&&a.push(`count=${n}`),s||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){let l=e.reduce((u,c)=>u.concat(Object.keys(c)),[]);if(l.length>0){let u=[...new Set(l)].map(c=>`"${c}"`);this.url.searchParams.set("columns",u.join(","))}}return new Yi.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){let i="PATCH",n=[];return this.headers.Prefer&&n.push(this.headers.Prefer),t&&n.push(`count=${t}`),this.headers.Prefer=n.join(","),new Yi.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){let t="DELETE",i=[];return e&&i.push(`count=${e}`),this.headers.Prefer&&i.unshift(this.headers.Prefer),this.headers.Prefer=i.join(","),new Yi.default({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Qi.default=Ja});var Gd=Q(Gs=>{"use strict";Object.defineProperty(Gs,"__esModule",{value:!0});Gs.version=void 0;Gs.version="0.0.0-automated"});var Kd=Q(Ks=>{"use strict";Object.defineProperty(Ks,"__esModule",{value:!0});Ks.DEFAULT_HEADERS=void 0;var Ev=Gd();Ks.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${Ev.version}`}});var Xd=Q(Zi=>{"use strict";var Jd=Zi&&Zi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Zi,"__esModule",{value:!0});var Tv=Jd(Xa()),Cv=Jd(Ws()),Fv=Kd(),Ya=class r{constructor(e,{headers:t={},schema:i,fetch:n}={}){this.url=e,this.headers=Object.assign(Object.assign({},Fv.DEFAULT_HEADERS),t),this.schemaName=i,this.fetch=n}from(e){let t=new URL(`${this.url}/${e}`);return new Tv.default(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new r(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:i=!1,get:n=!1,count:s}={}){let o,a=new URL(`${this.url}/rpc/${e}`),l;i||n?(o=i?"HEAD":"GET",Object.entries(t).filter(([c,d])=>d!==void 0).map(([c,d])=>[c,Array.isArray(d)?`{${d.join(",")}}`:`${d}`]).forEach(([c,d])=>{a.searchParams.append(c,d)})):(o="POST",l=t);let u=Object.assign({},this.headers);return s&&(u.Prefer=`count=${s}`),new Cv.default({method:o,url:a,headers:u,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}};Zi.default=Ya});var ih=Q(we=>{"use strict";var zr=we&&we.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(we,"__esModule",{value:!0});we.PostgrestError=we.PostgrestBuilder=we.PostgrestTransformBuilder=we.PostgrestFilterBuilder=we.PostgrestQueryBuilder=we.PostgrestClient=void 0;var Yd=zr(Xd());we.PostgrestClient=Yd.default;var Qd=zr(Xa());we.PostgrestQueryBuilder=Qd.default;var Zd=zr(Ws());we.PostgrestFilterBuilder=Zd.default;var eh=zr(Ga());we.PostgrestTransformBuilder=eh.default;var th=zr(Va());we.PostgrestBuilder=th.default;var rh=zr(qa());we.PostgrestError=rh.default;we.default={PostgrestClient:Yd.default,PostgrestQueryBuilder:Qd.default,PostgrestFilterBuilder:Zd.default,PostgrestTransformBuilder:eh.default,PostgrestBuilder:th.default,PostgrestError:rh.default}});var ah=Q((nP,oh)=>{"use strict";oh.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}});var df=Q((XE,cf)=>{"use strict";cf.exports=function(){var e={},t=e._fns={};e.emit=function(o,a,l,u,c,d,m){var f=i(o);f.length&&n(o,f,[a,l,u,c,d,m])},e.on=function(o,a){t[o]||(t[o]=[]),t[o].push(a)},e.once=function(o,a){function l(){a.apply(this,arguments),e.off(o,l)}this.on(o,l)},e.off=function(o,a){var l=[];if(o&&a){var u=this._fns[o],c=0,d=u?u.length:0;for(c;c<d;c++)u[c]!==a&&l.push(u[c])}l.length?this._fns[o]=l:delete this._fns[o]};function i(s){var o=t[s]?t[s]:[],a=s.indexOf(":"),l=a===-1?[s]:[s.substring(0,a),s.substring(a+1)],u=Object.keys(t),c=0,d=u.length;for(c;c<d;c++){var m=u[c];if(m==="*"&&(o=o.concat(t[m])),l.length===2&&l[0]===m){o=o.concat(t[m]);break}}return o}function n(s,o,a){var l=0,u=o.length;for(l;l<u&&o[l];l++)o[l].event=s,o[l].apply(o[l],a)}return e}});var vo=Q((QE,hf)=>{"use strict";function b0(r){var e=typeof r;return r!=null&&(e=="object"||e=="function")}hf.exports=b0});var pf=Q((ZE,ff)=>{"use strict";var _0=typeof global=="object"&&global&&global.Object===Object&&global;ff.exports=_0});var hl=Q((eT,mf)=>{"use strict";var w0=pf(),S0=typeof self=="object"&&self&&self.Object===Object&&self,x0=w0||S0||Function("return this")();mf.exports=x0});var yf=Q((tT,gf)=>{"use strict";var P0=hl(),k0=function(){return P0.Date.now()};gf.exports=k0});var bf=Q((rT,vf)=>{"use strict";var E0=/\s/;function T0(r){for(var e=r.length;e--&&E0.test(r.charAt(e)););return e}vf.exports=T0});var wf=Q((iT,_f)=>{"use strict";var C0=bf(),F0=/^\s+/;function O0(r){return r&&r.slice(0,C0(r)+1).replace(F0,"")}_f.exports=O0});var fl=Q((nT,Sf)=>{"use strict";var A0=hl(),R0=A0.Symbol;Sf.exports=R0});var Ef=Q((sT,kf)=>{"use strict";var xf=fl(),Pf=Object.prototype,I0=Pf.hasOwnProperty,U0=Pf.toString,yn=xf?xf.toStringTag:void 0;function D0(r){var e=I0.call(r,yn),t=r[yn];try{r[yn]=void 0;var i=!0}catch{}var n=U0.call(r);return i&&(e?r[yn]=t:delete r[yn]),n}kf.exports=D0});var Cf=Q((oT,Tf)=>{"use strict";var L0=Object.prototype,B0=L0.toString;function N0(r){return B0.call(r)}Tf.exports=N0});var Rf=Q((aT,Af)=>{"use strict";var Ff=fl(),j0=Ef(),M0=Cf(),z0="[object Null]",$0="[object Undefined]",Of=Ff?Ff.toStringTag:void 0;function q0(r){return r==null?r===void 0?$0:z0:Of&&Of in Object(r)?j0(r):M0(r)}Af.exports=q0});var Uf=Q((lT,If)=>{"use strict";function H0(r){return r!=null&&typeof r=="object"}If.exports=H0});var Lf=Q((uT,Df)=>{"use strict";var V0=Rf(),W0=Uf(),G0="[object Symbol]";function K0(r){return typeof r=="symbol"||W0(r)&&V0(r)==G0}Df.exports=K0});var Mf=Q((cT,jf)=>{"use strict";var J0=wf(),Bf=vo(),X0=Lf(),Nf=NaN,Y0=/^[-+]0x[0-9a-f]+$/i,Q0=/^0b[01]+$/i,Z0=/^0o[0-7]+$/i,eb=parseInt;function tb(r){if(typeof r=="number")return r;if(X0(r))return Nf;if(Bf(r)){var e=typeof r.valueOf=="function"?r.valueOf():r;r=Bf(e)?e+"":e}if(typeof r!="string")return r===0?r:+r;r=J0(r);var t=Q0.test(r);return t||Z0.test(r)?eb(r.slice(2),t?2:8):Y0.test(r)?Nf:+r}jf.exports=tb});var ml=Q((dT,$f)=>{"use strict";var rb=vo(),pl=yf(),zf=Mf(),ib="Expected a function",nb=Math.max,sb=Math.min;function ob(r,e,t){var i,n,s,o,a,l,u=0,c=!1,d=!1,m=!0;if(typeof r!="function")throw new TypeError(ib);e=zf(e)||0,rb(t)&&(c=!!t.leading,d="maxWait"in t,s=d?nb(zf(t.maxWait)||0,e):s,m="trailing"in t?!!t.trailing:m);function f(L){var B=i,z=n;return i=n=void 0,u=L,o=r.apply(z,B),o}function b(L){return u=L,a=setTimeout(S,e),c?f(L):o}function x(L){var B=L-l,z=L-u,X=e-B;return d?sb(X,s-z):X}function E(L){var B=L-l,z=L-u;return l===void 0||B>=e||B<0||d&&z>=s}function S(){var L=pl();if(E(L))return F(L);a=setTimeout(S,x(L))}function F(L){return a=void 0,m&&i?f(L):(i=n=void 0,o)}function I(){a!==void 0&&clearTimeout(a),u=0,i=l=n=a=void 0}function T(){return a===void 0?o:F(pl())}function M(){var L=pl(),B=E(L);if(i=arguments,n=this,l=L,B){if(a===void 0)return b(l);if(d)return clearTimeout(a),a=setTimeout(S,e),f(l)}return a===void 0&&(a=setTimeout(S,e)),o}return M.cancel=I,M.flush=T,M}$f.exports=ob});var Hf=Q((hT,qf)=>{"use strict";var ab=ml(),lb=vo(),ub="Expected a function";function cb(r,e,t){var i=!0,n=!0;if(typeof r!="function")throw new TypeError(ub);return lb(t)&&(i="leading"in t?!!t.leading:i,n="trailing"in t?!!t.trailing:n),ab(r,e,{leading:i,maxWait:e,trailing:n})}qf.exports=cb});var bn=Q((CT,Yf)=>{"use strict";Yf.exports=function(e){if(typeof e!="number"||Number.isNaN(e))throw new TypeError(`Expected a number, got ${typeof e}`);let t=e<0,i=Math.abs(e);if(t&&(i=-i),i===0)return"0 B";let n=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],s=Math.min(Math.floor(Math.log(i)/Math.log(1024)),n.length-1),o=Number(i/1024**s),a=n[s];return`${o>=10||o%1===0?Math.round(o):o.toFixed(1)} ${a}`}});var ep=Q((FT,Zf)=>{"use strict";function Qf(r,e){this.text=r=r||"",this.hasWild=~r.indexOf("*"),this.separator=e,this.parts=r.split(e)}Qf.prototype.match=function(r){var e=!0,t=this.parts,i,n=t.length,s;if(typeof r=="string"||r instanceof String)if(!this.hasWild&&this.text!=r)e=!1;else{for(s=(r||"").split(this.separator),i=0;e&&i<n;i++)t[i]!=="*"&&(i<s.length?e=t[i]===s[i]:e=!1);e=e&&s}else if(typeof r.splice=="function")for(e=[],i=r.length;i--;)this.match(r[i])&&(e[e.length]=r[i]);else if(typeof r=="object"){e={};for(var o in r)this.match(o)&&(e[o]=r[o])}return e};Zf.exports=function(r,e,t){var i=new Qf(r,t||/[\/\.]/);return typeof e<"u"?i.match(e):i}});var rp=Q((OT,tp)=>{"use strict";var gb=ep(),yb=/[\/\+\.]/;tp.exports=function(r,e){function t(i){var n=gb(i,r,yb);return n&&n.length>=2}return e?t(e.split(";")[0]):t}});var _m=Q((TC,bm)=>{"use strict";bm.exports=function(e,t){if(t=t.split(":")[0],e=+e,!e)return!1;switch(t){case"http":case"ws":return e!==80;case"https":case"wss":return e!==443;case"ftp":return e!==21;case"gopher":return e!==70;case"file":return!1}return e!==0}});var xm=Q(Vl=>{"use strict";var D_=Object.prototype.hasOwnProperty,L_;function wm(r){try{return decodeURIComponent(r.replace(/\+/g," "))}catch{return null}}function Sm(r){try{return encodeURIComponent(r)}catch{return null}}function B_(r){for(var e=/([^=?#&]+)=?([^&]*)/g,t={},i;i=e.exec(r);){var n=wm(i[1]),s=wm(i[2]);n===null||s===null||n in t||(t[n]=s)}return t}function N_(r,e){e=e||"";var t=[],i,n;typeof e!="string"&&(e="?");for(n in r)if(D_.call(r,n)){if(i=r[n],!i&&(i===null||i===L_||isNaN(i))&&(i=""),n=Sm(n),i=Sm(i),n===null||i===null)continue;t.push(n+"="+i)}return t.length?e+t.join("&"):""}Vl.stringify=N_;Vl.parse=B_});var Am=Q((FC,Om)=>{"use strict";var km=_m(),Uo=xm(),j_=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,Em=/[\n\r\t]/g,M_=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,Tm=/:\d+$/,z_=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,$_=/^[a-zA-Z]:/;function Gl(r){return(r||"").toString().replace(j_,"")}var Wl=[["#","hash"],["?","query"],function(e,t){return vt(t.protocol)?e.replace(/\\/g,"/"):e},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],Pm={hash:1,query:1};function Cm(r){var e;typeof window<"u"?e=window:typeof global<"u"?e=global:typeof self<"u"?e=self:e={};var t=e.location||{};r=r||t;var i={},n=typeof r,s;if(r.protocol==="blob:")i=new bt(unescape(r.pathname),{});else if(n==="string"){i=new bt(r,{});for(s in Pm)delete i[s]}else if(n==="object"){for(s in r)s in Pm||(i[s]=r[s]);i.slashes===void 0&&(i.slashes=M_.test(r.href))}return i}function vt(r){return r==="file:"||r==="ftp:"||r==="http:"||r==="https:"||r==="ws:"||r==="wss:"}function Fm(r,e){r=Gl(r),r=r.replace(Em,""),e=e||{};var t=z_.exec(r),i=t[1]?t[1].toLowerCase():"",n=!!t[2],s=!!t[3],o=0,a;return n?s?(a=t[2]+t[3]+t[4],o=t[2].length+t[3].length):(a=t[2]+t[4],o=t[2].length):s?(a=t[3]+t[4],o=t[3].length):a=t[4],i==="file:"?o>=2&&(a=a.slice(2)):vt(i)?a=t[4]:i?n&&(a=a.slice(2)):o>=2&&vt(e.protocol)&&(a=t[4]),{protocol:i,slashes:n||vt(i),slashesCount:o,rest:a}}function q_(r,e){if(r==="")return e;for(var t=(e||"/").split("/").slice(0,-1).concat(r.split("/")),i=t.length,n=t[i-1],s=!1,o=0;i--;)t[i]==="."?t.splice(i,1):t[i]===".."?(t.splice(i,1),o++):o&&(i===0&&(s=!0),t.splice(i,1),o--);return s&&t.unshift(""),(n==="."||n==="..")&&t.push(""),t.join("/")}function bt(r,e,t){if(r=Gl(r),r=r.replace(Em,""),!(this instanceof bt))return new bt(r,e,t);var i,n,s,o,a,l,u=Wl.slice(),c=typeof e,d=this,m=0;for(c!=="object"&&c!=="string"&&(t=e,e=null),t&&typeof t!="function"&&(t=Uo.parse),e=Cm(e),n=Fm(r||"",e),i=!n.protocol&&!n.slashes,d.slashes=n.slashes||i&&e.slashes,d.protocol=n.protocol||e.protocol||"",r=n.rest,(n.protocol==="file:"&&(n.slashesCount!==2||$_.test(r))||!n.slashes&&(n.protocol||n.slashesCount<2||!vt(d.protocol)))&&(u[3]=[/(.*)/,"pathname"]);m<u.length;m++){if(o=u[m],typeof o=="function"){r=o(r,d);continue}s=o[0],l=o[1],s!==s?d[l]=r:typeof s=="string"?(a=s==="@"?r.lastIndexOf(s):r.indexOf(s),~a&&(typeof o[2]=="number"?(d[l]=r.slice(0,a),r=r.slice(a+o[2])):(d[l]=r.slice(a),r=r.slice(0,a)))):(a=s.exec(r))&&(d[l]=a[1],r=r.slice(0,a.index)),d[l]=d[l]||i&&o[3]&&e[l]||"",o[4]&&(d[l]=d[l].toLowerCase())}t&&(d.query=t(d.query)),i&&e.slashes&&d.pathname.charAt(0)!=="/"&&(d.pathname!==""||e.pathname!=="")&&(d.pathname=q_(d.pathname,e.pathname)),d.pathname.charAt(0)!=="/"&&vt(d.protocol)&&(d.pathname="/"+d.pathname),km(d.port,d.protocol)||(d.host=d.hostname,d.port=""),d.username=d.password="",d.auth&&(a=d.auth.indexOf(":"),~a?(d.username=d.auth.slice(0,a),d.username=encodeURIComponent(decodeURIComponent(d.username)),d.password=d.auth.slice(a+1),d.password=encodeURIComponent(decodeURIComponent(d.password))):d.username=encodeURIComponent(decodeURIComponent(d.auth)),d.auth=d.password?d.username+":"+d.password:d.username),d.origin=d.protocol!=="file:"&&vt(d.protocol)&&d.host?d.protocol+"//"+d.host:"null",d.href=d.toString()}function H_(r,e,t){var i=this;switch(r){case"query":typeof e=="string"&&e.length&&(e=(t||Uo.parse)(e)),i[r]=e;break;case"port":i[r]=e,km(e,i.protocol)?e&&(i.host=i.hostname+":"+e):(i.host=i.hostname,i[r]="");break;case"hostname":i[r]=e,i.port&&(e+=":"+i.port),i.host=e;break;case"host":i[r]=e,Tm.test(e)?(e=e.split(":"),i.port=e.pop(),i.hostname=e.join(":")):(i.hostname=e,i.port="");break;case"protocol":i.protocol=e.toLowerCase(),i.slashes=!t;break;case"pathname":case"hash":if(e){var n=r==="pathname"?"/":"#";i[r]=e.charAt(0)!==n?n+e:e}else i[r]=e;break;case"username":case"password":i[r]=encodeURIComponent(e);break;case"auth":var s=e.indexOf(":");~s?(i.username=e.slice(0,s),i.username=encodeURIComponent(decodeURIComponent(i.username)),i.password=e.slice(s+1),i.password=encodeURIComponent(decodeURIComponent(i.password))):i.username=encodeURIComponent(decodeURIComponent(e))}for(var o=0;o<Wl.length;o++){var a=Wl[o];a[4]&&(i[a[1]]=i[a[1]].toLowerCase())}return i.auth=i.password?i.username+":"+i.password:i.username,i.origin=i.protocol!=="file:"&&vt(i.protocol)&&i.host?i.protocol+"//"+i.host:"null",i.href=i.toString(),i}function V_(r){(!r||typeof r!="function")&&(r=Uo.stringify);var e,t=this,i=t.host,n=t.protocol;n&&n.charAt(n.length-1)!==":"&&(n+=":");var s=n+(t.protocol&&t.slashes||vt(t.protocol)?"//":"");return t.username?(s+=t.username,t.password&&(s+=":"+t.password),s+="@"):t.password?(s+=":"+t.password,s+="@"):t.protocol!=="file:"&&vt(t.protocol)&&!i&&t.pathname!=="/"&&(s+="@"),(i[i.length-1]===":"||Tm.test(t.hostname)&&!t.port)&&(i+=":"),s+=i+t.pathname,e=typeof t.query=="object"?r(t.query):t.query,e&&(s+=e.charAt(0)!=="?"?"?"+e:e),t.hash&&(s+=t.hash),s}bt.prototype={set:H_,toString:V_};bt.extractProtocol=Fm;bt.location=Cm;bt.trimLeft=Gl;bt.qs=Uo;Om.exports=bt});var Le=Q((AF,Ho)=>{"use strict";(function(){"use strict";var r={}.hasOwnProperty;function e(){for(var n="",s=0;s<arguments.length;s++){var o=arguments[s];o&&(n=i(n,t(o)))}return n}function t(n){if(typeof n=="string"||typeof n=="number")return n;if(typeof n!="object")return"";if(Array.isArray(n))return e.apply(null,n);if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]"))return n.toString();var s="";for(var o in n)r.call(n,o)&&n[o]&&(s=i(s,o));return s}function i(n,s){return s?n?n+" "+s:n+s:n}typeof Ho<"u"&&Ho.exports?(e.default=e,Ho.exports=e):typeof define=="function"&&typeof define.amd=="object"&&define.amd?define("classnames",[],function(){return e}):window.classNames=e})()});var ay=Q((UO,Zu)=>{"use strict";var Q1=Object.prototype.hasOwnProperty,Ne="~";function ps(){}Object.create&&(ps.prototype=Object.create(null),new ps().__proto__||(Ne=!1));function Z1(r,e,t){this.fn=r,this.context=e,this.once=t||!1}function oy(r,e,t,i,n){if(typeof t!="function")throw new TypeError("The listener must be a function");var s=new Z1(t,i||r,n),o=Ne?Ne+e:e;return r._events[o]?r._events[o].fn?r._events[o]=[r._events[o],s]:r._events[o].push(s):(r._events[o]=s,r._eventsCount++),r}function la(r,e){--r._eventsCount===0?r._events=new ps:delete r._events[e]}function Fe(){this._events=new ps,this._eventsCount=0}Fe.prototype.eventNames=function(){var e=[],t,i;if(this._eventsCount===0)return e;for(i in t=this._events)Q1.call(t,i)&&e.push(Ne?i.slice(1):i);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(t)):e};Fe.prototype.listeners=function(e){var t=Ne?Ne+e:e,i=this._events[t];if(!i)return[];if(i.fn)return[i.fn];for(var n=0,s=i.length,o=new Array(s);n<s;n++)o[n]=i[n].fn;return o};Fe.prototype.listenerCount=function(e){var t=Ne?Ne+e:e,i=this._events[t];return i?i.fn?1:i.length:0};Fe.prototype.emit=function(e,t,i,n,s,o){var a=Ne?Ne+e:e;if(!this._events[a])return!1;var l=this._events[a],u=arguments.length,c,d;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),u){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,i),!0;case 4:return l.fn.call(l.context,t,i,n),!0;case 5:return l.fn.call(l.context,t,i,n,s),!0;case 6:return l.fn.call(l.context,t,i,n,s,o),!0}for(d=1,c=new Array(u-1);d<u;d++)c[d-1]=arguments[d];l.fn.apply(l.context,c)}else{var m=l.length,f;for(d=0;d<m;d++)switch(l[d].once&&this.removeListener(e,l[d].fn,void 0,!0),u){case 1:l[d].fn.call(l[d].context);break;case 2:l[d].fn.call(l[d].context,t);break;case 3:l[d].fn.call(l[d].context,t,i);break;case 4:l[d].fn.call(l[d].context,t,i,n);break;default:if(!c)for(f=1,c=new Array(u-1);f<u;f++)c[f-1]=arguments[f];l[d].fn.apply(l[d].context,c)}}return!0};Fe.prototype.on=function(e,t,i){return oy(this,e,t,i,!1)};Fe.prototype.once=function(e,t,i){return oy(this,e,t,i,!0)};Fe.prototype.removeListener=function(e,t,i,n){var s=Ne?Ne+e:e;if(!this._events[s])return this;if(!t)return la(this,s),this;var o=this._events[s];if(o.fn)o.fn===t&&(!n||o.once)&&(!i||o.context===i)&&la(this,s);else{for(var a=0,l=[],u=o.length;a<u;a++)(o[a].fn!==t||n&&!o[a].once||i&&o[a].context!==i)&&l.push(o[a]);l.length?this._events[s]=l.length===1?l[0]:l:la(this,s)}return this};Fe.prototype.removeAllListeners=function(e){var t;return e?(t=Ne?Ne+e:e,this._events[t]&&la(this,t)):(this._events=new ps,this._eventsCount=0),this};Fe.prototype.off=Fe.prototype.removeListener;Fe.prototype.addListener=Fe.prototype.on;Fe.prefixed=Ne;Fe.EventEmitter=Fe;typeof Zu<"u"&&(Zu.exports=Fe)});var ov=Q((Uc,Dc)=>{"use strict";(function(r,e){typeof Uc=="object"&&typeof Dc<"u"?Dc.exports=e():typeof define=="function"&&define.amd?define(e):(r=typeof globalThis<"u"?globalThis:r||self,r.Compressor=e())})(Uc,function(){"use strict";function r(k,w){var P=Object.keys(k);if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(k);w&&(C=C.filter(function(D){return Object.getOwnPropertyDescriptor(k,D).enumerable})),P.push.apply(P,C)}return P}function e(k){for(var w=1;w<arguments.length;w++){var P=arguments[w]!=null?arguments[w]:{};w%2?r(Object(P),!0).forEach(function(C){s(k,C,P[C])}):Object.getOwnPropertyDescriptors?Object.defineProperties(k,Object.getOwnPropertyDescriptors(P)):r(Object(P)).forEach(function(C){Object.defineProperty(k,C,Object.getOwnPropertyDescriptor(P,C))})}return k}function t(k,w){if(!(k instanceof w))throw new TypeError("Cannot call a class as a function")}function i(k,w){for(var P=0;P<w.length;P++){var C=w[P];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(k,l(C.key),C)}}function n(k,w,P){return w&&i(k.prototype,w),P&&i(k,P),Object.defineProperty(k,"prototype",{writable:!1}),k}function s(k,w,P){return w=l(w),w in k?Object.defineProperty(k,w,{value:P,enumerable:!0,configurable:!0,writable:!0}):k[w]=P,k}function o(){return o=Object.assign?Object.assign.bind():function(k){for(var w=1;w<arguments.length;w++){var P=arguments[w];for(var C in P)Object.prototype.hasOwnProperty.call(P,C)&&(k[C]=P[C])}return k},o.apply(this,arguments)}function a(k,w){if(typeof k!="object"||k===null)return k;var P=k[Symbol.toPrimitive];if(P!==void 0){var C=P.call(k,w||"default");if(typeof C!="object")return C;throw new TypeError("@@toPrimitive must return a primitive value.")}return(w==="string"?String:Number)(k)}function l(k){var w=a(k,"string");return typeof w=="symbol"?w:String(w)}var u={exports:{}};(function(k){typeof window>"u"||function(w){var P=w.HTMLCanvasElement&&w.HTMLCanvasElement.prototype,C=w.Blob&&function(){try{return!!new Blob}catch{return!1}}(),D=C&&w.Uint8Array&&function(){try{return new Blob([new Uint8Array(100)]).size===100}catch{return!1}}(),N=w.BlobBuilder||w.WebKitBlobBuilder||w.MozBlobBuilder||w.MSBlobBuilder,se=/^data:((.*?)(;charset=.*?)?)(;base64)?,/,Y=(C||N)&&w.atob&&w.ArrayBuffer&&w.Uint8Array&&function(K){var J,ae,le,He,me,q,Ve,be,Ir;if(J=K.match(se),!J)throw new Error("invalid data URI");for(ae=J[2]?J[1]:"text/plain"+(J[3]||";charset=US-ASCII"),le=!!J[4],He=K.slice(J[0].length),le?me=atob(He):me=decodeURIComponent(He),q=new ArrayBuffer(me.length),Ve=new Uint8Array(q),be=0;be<me.length;be+=1)Ve[be]=me.charCodeAt(be);return C?new Blob([D?Ve:q],{type:ae}):(Ir=new N,Ir.append(q),Ir.getBlob(ae))};w.HTMLCanvasElement&&!P.toBlob&&(P.mozGetAsFile?P.toBlob=function(K,J,ae){var le=this;setTimeout(function(){ae&&P.toDataURL&&Y?K(Y(le.toDataURL(J,ae))):K(le.mozGetAsFile("blob",J))})}:P.toDataURL&&Y&&(P.msToBlob?P.toBlob=function(K,J,ae){var le=this;setTimeout(function(){(J&&J!=="image/png"||ae)&&P.toDataURL&&Y?K(Y(le.toDataURL(J,ae))):K(le.msToBlob(J))})}:P.toBlob=function(K,J,ae){var le=this;setTimeout(function(){K(Y(le.toDataURL(J,ae)))})})),k.exports?k.exports=Y:w.dataURLtoBlob=Y}(window)})(u);var c=u.exports,d=function(w){return typeof Blob>"u"?!1:w instanceof Blob||Object.prototype.toString.call(w)==="[object Blob]"},m={strict:!0,checkOrientation:!0,retainExif:!1,maxWidth:1/0,maxHeight:1/0,minWidth:0,minHeight:0,width:void 0,height:void 0,resize:"none",quality:.8,mimeType:"auto",convertTypes:["image/png"],convertSize:5e6,beforeDraw:null,drew:null,success:null,error:null},f=typeof window<"u"&&typeof window.document<"u",b=f?window:{},x=function(w){return w>0&&w<1/0},E=Array.prototype.slice;function S(k){return Array.from?Array.from(k):E.call(k)}var F=/^image\/.+$/;function I(k){return F.test(k)}function T(k){var w=I(k)?k.substr(6):"";return w==="jpeg"&&(w="jpg"),".".concat(w)}var M=String.fromCharCode;function L(k,w,P){var C="",D;for(P+=w,D=w;D<P;D+=1)C+=M(k.getUint8(D));return C}var B=b.btoa;function z(k,w){for(var P=[],C=8192,D=new Uint8Array(k);D.length>0;)P.push(M.apply(null,S(D.subarray(0,C)))),D=D.subarray(C);return"data:".concat(w,";base64,").concat(B(P.join("")))}function X(k){var w=new DataView(k),P;try{var C,D,N;if(w.getUint8(0)===255&&w.getUint8(1)===216)for(var se=w.byteLength,Y=2;Y+1<se;){if(w.getUint8(Y)===255&&w.getUint8(Y+1)===225){D=Y;break}Y+=1}if(D){var K=D+4,J=D+10;if(L(w,K,4)==="Exif"){var ae=w.getUint16(J);if(C=ae===18761,(C||ae===19789)&&w.getUint16(J+2,C)===42){var le=w.getUint32(J+4,C);le>=8&&(N=J+le)}}}if(N){var He=w.getUint16(N,C),me,q;for(q=0;q<He;q+=1)if(me=N+q*12+2,w.getUint16(me,C)===274){me+=8,P=w.getUint16(me,C),w.setUint16(me,1,C);break}}}catch{P=1}return P}function Oe(k){var w=0,P=1,C=1;switch(k){case 2:P=-1;break;case 3:w=-180;break;case 4:C=-1;break;case 5:w=90,C=-1;break;case 6:w=90;break;case 7:w=90,P=-1;break;case 8:w=-90;break}return{rotate:w,scaleX:P,scaleY:C}}var ie=/\.\d*(?:0|9){12}\d*$/;function de(k){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return ie.test(k)?Math.round(k*w)/w:k}function ve(k){var w=k.aspectRatio,P=k.height,C=k.width,D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"none",N=x(C),se=x(P);if(N&&se){var Y=P*w;(D==="contain"||D==="none")&&Y>C||D==="cover"&&Y<C?P=C/w:C=P*w}else N?P=C/w:se&&(C=P*w);return{width:C,height:P}}function qe(k){for(var w=S(new Uint8Array(k)),P=w.length,C=[],D=0;D+3<P;){var N=w[D],se=w[D+1];if(N===255&&se===218)break;if(N===255&&se===216)D+=2;else{var Y=w[D+2]*256+w[D+3],K=D+Y+2,J=w.slice(D,K);C.push(J),D=K}}return C.reduce(function(ae,le){return le[0]===255&&le[1]===225?ae.concat(le):ae},[])}function nt(k,w){var P=S(new Uint8Array(k));if(P[2]!==255||P[3]!==224)return k;var C=P[4]*256+P[5],D=[255,216].concat(w,P.slice(4+C));return new Uint8Array(D)}var _=b.ArrayBuffer,g=b.FileReader,y=b.URL||b.webkitURL,O=/\.\w+$/,R=b.Compressor,A=function(){function k(w,P){t(this,k),this.file=w,this.exif=[],this.image=new Image,this.options=e(e({},m),P),this.aborted=!1,this.result=null,this.init()}return n(k,[{key:"init",value:function(){var P=this,C=this.file,D=this.options;if(!d(C)){this.fail(new Error("The first argument must be a File or Blob object."));return}var N=C.type;if(!I(N)){this.fail(new Error("The first argument must be an image File or Blob object."));return}if(!y||!g){this.fail(new Error("The current browser does not support image compression."));return}_||(D.checkOrientation=!1,D.retainExif=!1);var se=N==="image/jpeg",Y=se&&D.checkOrientation,K=se&&D.retainExif;if(y&&!Y&&!K)this.load({url:y.createObjectURL(C)});else{var J=new g;this.reader=J,J.onload=function(ae){var le=ae.target,He=le.result,me={},q=1;Y&&(q=X(He),q>1&&o(me,Oe(q))),K&&(P.exif=qe(He)),Y||K?!y||q>1?me.url=z(He,N):me.url=y.createObjectURL(C):me.url=He,P.load(me)},J.onabort=function(){P.fail(new Error("Aborted to read the image with FileReader."))},J.onerror=function(){P.fail(new Error("Failed to read the image with FileReader."))},J.onloadend=function(){P.reader=null},Y||K?J.readAsArrayBuffer(C):J.readAsDataURL(C)}}},{key:"load",value:function(P){var C=this,D=this.file,N=this.image;N.onload=function(){C.draw(e(e({},P),{},{naturalWidth:N.naturalWidth,naturalHeight:N.naturalHeight}))},N.onabort=function(){C.fail(new Error("Aborted to load the image."))},N.onerror=function(){C.fail(new Error("Failed to load the image."))},b.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(b.navigator.userAgent)&&(N.crossOrigin="anonymous"),N.alt=D.name,N.src=P.url}},{key:"draw",value:function(P){var C=this,D=P.naturalWidth,N=P.naturalHeight,se=P.rotate,Y=se===void 0?0:se,K=P.scaleX,J=K===void 0?1:K,ae=P.scaleY,le=ae===void 0?1:ae,He=this.file,me=this.image,q=this.options,Ve=document.createElement("canvas"),be=Ve.getContext("2d"),Ir=Math.abs(Y)%180===90,Ea=(q.resize==="contain"||q.resize==="cover")&&x(q.width)&&x(q.height),Ei=Math.max(q.maxWidth,0)||1/0,Ti=Math.max(q.maxHeight,0)||1/0,Ci=Math.max(q.minWidth,0)||0,Fi=Math.max(q.minHeight,0)||0,Ur=D/N,Te=q.width,Ce=q.height;if(Ir){var Nc=[Ti,Ei];Ei=Nc[0],Ti=Nc[1];var jc=[Fi,Ci];Ci=jc[0],Fi=jc[1];var Mc=[Ce,Te];Te=Mc[0],Ce=Mc[1]}Ea&&(Ur=Te/Ce);var zc=ve({aspectRatio:Ur,width:Ei,height:Ti},"contain");Ei=zc.width,Ti=zc.height;var $c=ve({aspectRatio:Ur,width:Ci,height:Fi},"cover");if(Ci=$c.width,Fi=$c.height,Ea){var qc=ve({aspectRatio:Ur,width:Te,height:Ce},q.resize);Te=qc.width,Ce=qc.height}else{var Hc=ve({aspectRatio:Ur,width:Te,height:Ce}),Vc=Hc.width;Te=Vc===void 0?D:Vc;var Wc=Hc.height;Ce=Wc===void 0?N:Wc}Te=Math.floor(de(Math.min(Math.max(Te,Ci),Ei))),Ce=Math.floor(de(Math.min(Math.max(Ce,Fi),Ti)));var hv=-Te/2,fv=-Ce/2,pv=Te,mv=Ce,Ta=[];if(Ea){var Gc=0,Kc=0,Ca=D,Fa=N,Jc=ve({aspectRatio:Ur,width:D,height:N},{contain:"cover",cover:"contain"}[q.resize]);Ca=Jc.width,Fa=Jc.height,Gc=(D-Ca)/2,Kc=(N-Fa)/2,Ta.push(Gc,Kc,Ca,Fa)}if(Ta.push(hv,fv,pv,mv),Ir){var Xc=[Ce,Te];Te=Xc[0],Ce=Xc[1]}Ve.width=Te,Ve.height=Ce,I(q.mimeType)||(q.mimeType=He.type);var Yc="transparent";He.size>q.convertSize&&q.convertTypes.indexOf(q.mimeType)>=0&&(q.mimeType="image/jpeg");var Qc=q.mimeType==="image/jpeg";if(Qc&&(Yc="#fff"),be.fillStyle=Yc,be.fillRect(0,0,Te,Ce),q.beforeDraw&&q.beforeDraw.call(this,be,Ve),!this.aborted&&(be.save(),be.translate(Te/2,Ce/2),be.rotate(Y*Math.PI/180),be.scale(J,le),be.drawImage.apply(be,[me].concat(Ta)),be.restore(),q.drew&&q.drew.call(this,be,Ve),!this.aborted)){var Zc=function(Oi){if(!C.aborted){var ed=function(Ai){return C.done({naturalWidth:D,naturalHeight:N,result:Ai})};if(Oi&&Qc&&q.retainExif&&C.exif&&C.exif.length>0){var td=function(Ai){return ed(c(z(nt(Ai,C.exif),q.mimeType)))};if(Oi.arrayBuffer)Oi.arrayBuffer().then(td).catch(function(){C.fail(new Error("Failed to read the compressed image with Blob.arrayBuffer()."))});else{var Dr=new g;C.reader=Dr,Dr.onload=function(Oa){var Ai=Oa.target;td(Ai.result)},Dr.onabort=function(){C.fail(new Error("Aborted to read the compressed image with FileReader."))},Dr.onerror=function(){C.fail(new Error("Failed to read the compressed image with FileReader."))},Dr.onloadend=function(){C.reader=null},Dr.readAsArrayBuffer(Oi)}}else ed(Oi)}};Ve.toBlob?Ve.toBlob(Zc,q.mimeType,q.quality):Zc(c(Ve.toDataURL(q.mimeType,q.quality)))}}},{key:"done",value:function(P){var C=P.naturalWidth,D=P.naturalHeight,N=P.result,se=this.file,Y=this.image,K=this.options;if(y&&Y.src.indexOf("blob:")===0&&y.revokeObjectURL(Y.src),N)if(K.strict&&!K.retainExif&&N.size>se.size&&K.mimeType===se.type&&!(K.width>C||K.height>D||K.minWidth>C||K.minHeight>D||K.maxWidth<C||K.maxHeight<D))N=se;else{var J=new Date;N.lastModified=J.getTime(),N.lastModifiedDate=J,N.name=se.name,N.name&&N.type!==se.type&&(N.name=N.name.replace(O,T(N.type)))}else N=se;this.result=N,K.success&&K.success.call(this,N)}},{key:"fail",value:function(P){var C=this.options;if(C.error)C.error.call(this,P);else throw P}},{key:"abort",value:function(){this.aborted||(this.aborted=!0,this.reader?this.reader.abort():this.image.complete?this.fail(new Error("The compression process has been aborted.")):(this.image.onload=null,this.image.onabort()))}}],[{key:"noConflict",value:function(){return window.Compressor=R,k}},{key:"setDefaults",value:function(P){o(m,P)}}]),k}();return A})});var Vd=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>import("./chunk-GHVKKAWE.js").then(({default:i})=>i(...t)):e=fetch,(...t)=>e(...t)};var Wi=class extends Error{constructor(e,t="FunctionsError",i){super(e),this.name=t,this.context=i}},qs=class extends Wi{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}},Hs=class extends Wi{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}},Vs=class extends Wi{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}},Ma=function(r){return r.Any="any",r.ApNortheast1="ap-northeast-1",r.ApNortheast2="ap-northeast-2",r.ApSouth1="ap-south-1",r.ApSoutheast1="ap-southeast-1",r.ApSoutheast2="ap-southeast-2",r.CaCentral1="ca-central-1",r.EuCentral1="eu-central-1",r.EuWest1="eu-west-1",r.EuWest2="eu-west-2",r.EuWest3="eu-west-3",r.SaEast1="sa-east-1",r.UsEast1="us-east-1",r.UsWest1="us-west-1",r.UsWest2="us-west-2",r}(Ma||{});var vv=function(r,e,t,i){function n(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{u(i.next(c))}catch(d){o(d)}}function l(c){try{u(i.throw(c))}catch(d){o(d)}}function u(c){c.done?s(c.value):n(c.value).then(a,l)}u((i=i.apply(r,e||[])).next())})},Gi=class{constructor(e,{headers:t={},customFetch:i,region:n=Ma.Any}={}){this.url=e,this.headers=t,this.region=n,this.fetch=Vd(i)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var i;return vv(this,void 0,void 0,function*(){try{let{headers:n,method:s,body:o}=t,a={},{region:l}=t;l||(l=this.region),l&&l!=="any"&&(a["x-region"]=l);let u;o&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(a["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(a["Content-Type"]="application/json",u=JSON.stringify(o)));let c=yield this.fetch(`${this.url}/${e}`,{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),n),body:u}).catch(b=>{throw new qs(b)}),d=c.headers.get("x-relay-error");if(d&&d==="true")throw new Hs(c);if(!c.ok)throw new Vs(c);let m=((i=c.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),f;return m==="application/json"?f=yield c.json():m==="application/octet-stream"?f=yield c.blob():m==="text/event-stream"?f=c:m==="multipart/form-data"?f=yield c.formData():f=yield c.text(),{data:f,error:null}}catch(n){return{data:null,error:n}}})}};var nh=re(ih(),1),{PostgrestClient:sh,PostgrestQueryBuilder:Zx,PostgrestFilterBuilder:eP,PostgrestTransformBuilder:tP,PostgrestBuilder:rP,PostgrestError:Ov}=nh.default;var Qa;typeof window>"u"?Qa=ah():Qa=window.WebSocket;var lh=Qa;var uh="2.11.10";var ch={"X-Client-Info":`realtime-js/${uh}`},dh="1.0.0";var Js=1e4,hh=1e3,$r=function(r){return r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed",r}($r||{}),Re=function(r){return r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving",r}(Re||{}),Ze=function(r){return r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token",r}(Ze||{}),Za=function(r){return r.websocket="websocket",r}(Za||{}),Qt=function(r){return r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed",r}(Qt||{});var Xs=class{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){let t=new DataView(e),i=new TextDecoder;return this._decodeBroadcast(e,t,i)}_decodeBroadcast(e,t,i){let n=t.getUint8(1),s=t.getUint8(2),o=this.HEADER_LENGTH+2,a=i.decode(e.slice(o,o+n));o=o+n;let l=i.decode(e.slice(o,o+s));o=o+s;let u=JSON.parse(i.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:l,payload:u}}};var qr=class{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var ne=function(r){return r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange",r}(ne||{}),tl=(r,e,t={})=>{var i;let n=(i=t.skipTypes)!==null&&i!==void 0?i:[];return Object.keys(e).reduce((s,o)=>(s[o]=Av(o,r,e,n),s),{})},Av=(r,e,t,i)=>{let n=e.find(a=>a.name===r),s=n?.type,o=t[r];return s&&!i.includes(s)?fh(s,o):el(o)},fh=(r,e)=>{if(r.charAt(0)==="_"){let t=r.slice(1,r.length);return Dv(e,t)}switch(r){case ne.bool:return Rv(e);case ne.float4:case ne.float8:case ne.int2:case ne.int4:case ne.int8:case ne.numeric:case ne.oid:return Iv(e);case ne.json:case ne.jsonb:return Uv(e);case ne.timestamp:return Lv(e);case ne.abstime:case ne.date:case ne.daterange:case ne.int4range:case ne.int8range:case ne.money:case ne.reltime:case ne.text:case ne.time:case ne.timestamptz:case ne.timetz:case ne.tsrange:case ne.tstzrange:return el(e);default:return el(e)}},el=r=>r,Rv=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},Iv=r=>{if(typeof r=="string"){let e=parseFloat(r);if(!Number.isNaN(e))return e}return r},Uv=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch(e){return console.log(`JSON parse error: ${e}`),r}return r},Dv=(r,e)=>{if(typeof r!="string")return r;let t=r.length-1,i=r[t];if(r[0]==="{"&&i==="}"){let s,o=r.slice(1,t);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(a=>fh(e,a))}return r},Lv=r=>typeof r=="string"?r.replace(" ","T"):r,Ys=r=>{let e=r;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};var Hr=class{constructor(e,t,i={},n=Js){this.channel=e,this.event=t,this.payload=i,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var i;return this._hasReceived(e)&&t((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);let e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(i=>i.status===e).forEach(i=>i.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}};var en=class r{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};let i=t?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},n=>{let{onJoin:s,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=r.syncState(this.state,n,s,o),this.pendingDiffs.forEach(l=>{this.state=r.syncDiff(this.state,l,s,o)}),this.pendingDiffs=[],a()}),this.channel._on(i.diff,{},n=>{let{onJoin:s,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=r.syncDiff(this.state,n,s,o),a())}),this.onJoin((n,s,o)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:s,newPresences:o})}),this.onLeave((n,s,o)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,i,n){let s=this.cloneDeep(e),o=this.transformState(t),a={},l={};return this.map(s,(u,c)=>{o[u]||(l[u]=c)}),this.map(o,(u,c)=>{let d=s[u];if(d){let m=c.map(E=>E.presence_ref),f=d.map(E=>E.presence_ref),b=c.filter(E=>f.indexOf(E.presence_ref)<0),x=d.filter(E=>m.indexOf(E.presence_ref)<0);b.length>0&&(a[u]=b),x.length>0&&(l[u]=x)}else a[u]=c}),this.syncDiff(s,{joins:a,leaves:l},i,n)}static syncDiff(e,t,i,n){let{joins:s,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return i||(i=()=>{}),n||(n=()=>{}),this.map(s,(a,l)=>{var u;let c=(u=e[a])!==null&&u!==void 0?u:[];if(e[a]=this.cloneDeep(l),c.length>0){let d=e[a].map(f=>f.presence_ref),m=c.filter(f=>d.indexOf(f.presence_ref)<0);e[a].unshift(...m)}i(a,c,l)}),this.map(o,(a,l)=>{let u=e[a];if(!u)return;let c=l.map(d=>d.presence_ref);u=u.filter(d=>c.indexOf(d.presence_ref)<0),e[a]=u,n(a,u,l),u.length===0&&delete e[a]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(i=>t(i,e[i]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,i)=>{let n=e[i];return"metas"in n?t[i]=n.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):t[i]=n,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var xt=function(r){return r.SUBSCRIBED="SUBSCRIBED",r.TIMED_OUT="TIMED_OUT",r.CLOSED="CLOSED",r.CHANNEL_ERROR="CHANNEL_ERROR",r}(xt||{});var tn=class r{constructor(e,t={config:{}},i){this.topic=e,this.params=t,this.socket=i,this.bindings={},this.state=Re.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Hr(this,Ze.join,this.params,this.timeout),this.rejoinTimer=new qr(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Re.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(n=>n.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Re.closed,this.socket._remove(this)}),this._onError(n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=Re.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Re.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ze.reply,{},(n,s)=>{this._trigger(this._replyEventName(s),n)}),this.presence=new en(this),this.broadcastEndpointURL=Ys(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var i,n;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{let{config:{broadcast:s,presence:o,private:a}}=this.params;this._onError(c=>e?.(xt.CHANNEL_ERROR,c)),this._onClose(()=>e?.(xt.CLOSED));let l={},u={broadcast:s,presence:o,postgres_changes:(n=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(c=>c.filter))!==null&&n!==void 0?n:[],private:a};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},l)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",d=>p(this,[d],function*({postgres_changes:c}){var m;if(this.socket.setAuth(),c===void 0){e?.(xt.SUBSCRIBED);return}else{let f=this.bindings.postgres_changes,b=(m=f?.length)!==null&&m!==void 0?m:0,x=[];for(let E=0;E<b;E++){let S=f[E],{filter:{event:F,schema:I,table:T,filter:M}}=S,L=c&&c[E];if(L&&L.event===F&&L.schema===I&&L.table===T&&L.filter===M)x.push(Object.assign(Object.assign({},S),{id:L.id}));else{this.unsubscribe(),this.state=Re.errored,e?.(xt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,e&&e(xt.SUBSCRIBED);return}})).receive("error",c=>{this.state=Re.errored,e?.(xt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(c).join(", ")||"error")))}).receive("timeout",()=>{e?.(xt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}track(i){return p(this,arguments,function*(e,t={}){return yield this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)})}untrack(){return p(this,arguments,function*(e={}){return yield this.send({type:"presence",event:"untrack"},e)})}on(e,t,i){return this._on(e,t,i)}send(i){return p(this,arguments,function*(e,t={}){var n,s;if(!this._canPush()&&e.type==="broadcast"){let{event:o,payload:a}=e,u={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:a,private:this.private}]})};try{let c=yield this._fetchWithTimeout(this.broadcastEndpointURL,u,(n=t.timeout)!==null&&n!==void 0?n:this.timeout);return yield(s=c.body)===null||s===void 0?void 0:s.cancel(),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var a,l,u;let c=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((u=(l=(a=this.params)===null||a===void 0?void 0:a.config)===null||l===void 0?void 0:l.broadcast)===null||u===void 0)&&u.ack)&&o("ok"),c.receive("ok",()=>o("ok")),c.receive("error",()=>o("error")),c.receive("timeout",()=>o("timed out"))})})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Re.leaving;let t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ze.close,"leave",this._joinRef())};return this.joinPush.destroy(),new Promise(i=>{let n=new Hr(this,Ze.leave,{},e);n.receive("ok",()=>{t(),i("ok")}).receive("timeout",()=>{t(),i("timed out")}).receive("error",()=>{i("error")}),n.send(),this._canPush()||n.trigger("ok",{})})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}_fetchWithTimeout(e,t,i){return p(this,null,function*(){let n=new AbortController,s=setTimeout(()=>n.abort(),i),o=yield this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:n.signal}));return clearTimeout(s),o})}_push(e,t,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new Hr(this,e,t,i);return this._canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}_onMessage(e,t,i){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,i){var n,s;let o=e.toLocaleLowerCase(),{close:a,error:l,leave:u,join:c}=Ze;if(i&&[a,l,u,c].indexOf(o)>=0&&i!==this._joinRef())return;let m=this._onMessage(o,t,i);if(t&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(f=>{var b,x,E;return((b=f.filter)===null||b===void 0?void 0:b.event)==="*"||((E=(x=f.filter)===null||x===void 0?void 0:x.event)===null||E===void 0?void 0:E.toLocaleLowerCase())===o}).map(f=>f.callback(m,i)):(s=this.bindings[o])===null||s===void 0||s.filter(f=>{var b,x,E,S,F,I;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){let T=f.id,M=(b=f.filter)===null||b===void 0?void 0:b.event;return T&&((x=t.ids)===null||x===void 0?void 0:x.includes(T))&&(M==="*"||M?.toLocaleLowerCase()===((E=t.data)===null||E===void 0?void 0:E.type.toLocaleLowerCase()))}else{let T=(F=(S=f?.filter)===null||S===void 0?void 0:S.event)===null||F===void 0?void 0:F.toLocaleLowerCase();return T==="*"||T===((I=t?.event)===null||I===void 0?void 0:I.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof m=="object"&&"ids"in m){let b=m.data,{schema:x,table:E,commit_timestamp:S,type:F,errors:I}=b;m=Object.assign(Object.assign({},{schema:x,table:E,commit_timestamp:S,eventType:F,new:{},old:{},errors:I}),this._getPayloadRecords(b))}f.callback(m,i)})}_isClosed(){return this.state===Re.closed}_isJoined(){return this.state===Re.joined}_isJoining(){return this.state===Re.joining}_isLeaving(){return this.state===Re.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,i){let n=e.toLocaleLowerCase(),s={type:n,filter:t,callback:i};return this.bindings[n]?this.bindings[n].push(s):this.bindings[n]=[s],this}_off(e,t){let i=e.toLocaleLowerCase();return this.bindings[i]=this.bindings[i].filter(n=>{var s;return!(((s=n.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===i&&r.isEqual(n.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(let i in e)if(e[i]!==t[i])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Ze.close,{},e)}_onError(e){this._on(Ze.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Re.joining,this.joinPush.resend(e))}_getPayloadRecords(e){let t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=tl(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=tl(e.columns,e.old_record)),t}};var ph=()=>{},Nv=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`,rn=class{constructor(e,t){var i;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers=ch,this.params={},this.timeout=Js,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ph,this.ref=0,this.logger=ph,this.conn=null,this.sendBuffer=[],this.serializer=new Xs,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=s=>{let o;return s?o=s:typeof fetch>"u"?o=(...a)=>import("./chunk-GHVKKAWE.js").then(({default:l})=>l(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${e}/${Za.websocket}`,this.httpEndpoint=Ys(e),t?.transport?this.transport=t.transport:this.transport=null,t?.params&&(this.params=t.params),t?.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t?.timeout&&(this.timeout=t.timeout),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),t?.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);let n=(i=t?.params)===null||i===void 0?void 0:i.apikey;if(n&&(this.accessTokenValue=n,this.apiKey=n),this.reconnectAfterMs=t?.reconnectAfterMs?t.reconnectAfterMs:s=>[1e3,2e3,5e3,1e4][s-1]||1e4,this.encode=t?.encode?t.encode:(s,o)=>o(JSON.stringify(s)),this.decode=t?.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new qr(()=>p(this,null,function*(){this.disconnect(),this.connect()}),this.reconnectAfterMs),this.fetch=this._resolveFetch(t?.fetch),t?.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=t?.worker||!1,this.workerUrl=t?.workerUrl}this.accessToken=t?.accessToken||null}connect(){if(!this.conn){if(this.transport||(this.transport=lh),this.transport){typeof window<"u"&&this.transport===window.WebSocket?this.conn=new this.transport(this.endpointURL()):this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection();return}this.conn=new rl(this.endpointURL(),void 0,{close:()=>{this.conn=null}})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:dh}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(i=>i.teardown()))}getChannels(){return this.channels}removeChannel(e){return p(this,null,function*(){let t=yield e.unsubscribe();return this.channels=this.channels.filter(i=>i._joinRef!==e._joinRef),this.channels.length===0&&this.disconnect(),t})}removeAllChannels(){return p(this,null,function*(){let e=yield Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e})}log(e,t,i){this.logger(e,t,i)}connectionState(){switch(this.conn&&this.conn.readyState){case $r.connecting:return Qt.Connecting;case $r.open:return Qt.Open;case $r.closing:return Qt.Closing;default:return Qt.Closed}}isConnected(){return this.connectionState()===Qt.Open}channel(e,t={config:{}}){let i=`realtime:${e}`,n=this.getChannels().find(s=>s.topic===i);if(n)return n;{let s=new tn(`realtime:${e}`,t,this);return this.channels.push(s),s}}push(e){let{topic:t,event:i,payload:n,ref:s}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${t} ${i} (${s})`,n),this.isConnected()?o():this.sendBuffer.push(o)}setAuth(e=null){return p(this,null,function*(){let t=e||this.accessToken&&(yield this.accessToken())||this.accessTokenValue;this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(i=>{t&&i.updateJoinPayload({access_token:t,version:this.headers&&this.headers["X-Client-Info"]}),i.joinedOnce&&i._isJoined()&&i._push(Ze.access_token,{access_token:t})}))})}sendHeartbeat(){return p(this,null,function*(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(hh,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),yield this.setAuth()})}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(i=>i.topic===e&&(i._isJoined()||i._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:i,event:n,payload:s,ref:o}=t;i==="phoenix"&&n==="phx_reply"&&this.heartbeatCallback(t.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${i} ${n} ${o&&"("+o+")"||""}`,s),Array.from(this.channels).filter(a=>a._isMember(i)).forEach(a=>a._trigger(n,s,o)),this.stateChangeCallbacks.message.forEach(a=>a(t))})}_onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");let e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Ze.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;let i=e.match(/\?/)?"&":"?",n=new URLSearchParams(t);return`${e}${i}${n}`}_workerObjectUrl(e){let t;if(e)t=e;else{let i=new Blob([Nv],{type:"application/javascript"});t=URL.createObjectURL(i)}return t}};var rl=class{constructor(e,t,i){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=$r.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=i.close}};var Vr=class extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}};function he(r){return typeof r=="object"&&r!==null&&"__isStorageError"in r}var Qs=class extends Vr{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}},Zt=class extends Vr{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}};var jv=function(r,e,t,i){function n(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{u(i.next(c))}catch(d){o(d)}}function l(c){try{u(i.throw(c))}catch(d){o(d)}}function u(c){c.done?s(c.value):n(c.value).then(a,l)}u((i=i.apply(r,e||[])).next())})},eo=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>import("./chunk-GHVKKAWE.js").then(({default:i})=>i(...t)):e=fetch,(...t)=>e(...t)},mh=()=>jv(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield import("./chunk-GHVKKAWE.js")).Response:Response}),Zs=r=>{if(Array.isArray(r))return r.map(t=>Zs(t));if(typeof r=="function"||r!==Object(r))return r;let e={};return Object.entries(r).forEach(([t,i])=>{let n=t.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[n]=Zs(i)}),e};var er=function(r,e,t,i){function n(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{u(i.next(c))}catch(d){o(d)}}function l(c){try{u(i.throw(c))}catch(d){o(d)}}function u(c){c.done?s(c.value):n(c.value).then(a,l)}u((i=i.apply(r,e||[])).next())})},il=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),Mv=(r,e,t)=>er(void 0,void 0,void 0,function*(){let i=yield mh();r instanceof i&&!t?.noResolveJson?r.json().then(n=>{e(new Qs(il(n),r.status||500))}).catch(n=>{e(new Zt(il(n),n))}):e(new Zt(il(r),r))}),zv=(r,e,t,i)=>{let n={method:r,headers:e?.headers||{}};return r==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json"},e?.headers),i&&(n.body=JSON.stringify(i)),Object.assign(Object.assign({},n),t))};function nn(r,e,t,i,n,s){return er(this,void 0,void 0,function*(){return new Promise((o,a)=>{r(t,zv(e,i,n,s)).then(l=>{if(!l.ok)throw l;return i?.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>Mv(l,a,i))})})}function Wr(r,e,t,i){return er(this,void 0,void 0,function*(){return nn(r,"GET",e,t,i)})}function ht(r,e,t,i,n){return er(this,void 0,void 0,function*(){return nn(r,"POST",e,i,n,t)})}function gh(r,e,t,i,n){return er(this,void 0,void 0,function*(){return nn(r,"PUT",e,i,n,t)})}function yh(r,e,t,i){return er(this,void 0,void 0,function*(){return nn(r,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),i)})}function to(r,e,t,i,n){return er(this,void 0,void 0,function*(){return nn(r,"DELETE",e,i,n,t)})}var je=function(r,e,t,i){function n(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{u(i.next(c))}catch(d){o(d)}}function l(c){try{u(i.throw(c))}catch(d){o(d)}}function u(c){c.done?s(c.value):n(c.value).then(a,l)}u((i=i.apply(r,e||[])).next())})},$v={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},vh={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1},ro=class{constructor(e,t={},i,n){this.url=e,this.headers=t,this.bucketId=i,this.fetch=eo(n)}uploadOrUpdate(e,t,i,n){return je(this,void 0,void 0,function*(){try{let s,o=Object.assign(Object.assign({},vh),n),a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)}),l=o.metadata;typeof Blob<"u"&&i instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",this.encodeMetadata(l)),s.append("",i)):typeof FormData<"u"&&i instanceof FormData?(s=i,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",this.encodeMetadata(l))):(s=i,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),n?.headers&&(a=Object.assign(Object.assign({},a),n.headers));let u=this._removeEmptyFolders(t),c=this._getFinalPath(u),d=yield this.fetch(`${this.url}/object/${c}`,Object.assign({method:e,body:s,headers:a},o?.duplex?{duplex:o.duplex}:{})),m=yield d.json();return d.ok?{data:{path:u,id:m.Id,fullPath:m.Key},error:null}:{data:null,error:m}}catch(s){if(he(s))return{data:null,error:s};throw s}})}upload(e,t,i){return je(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,i)})}uploadToSignedUrl(e,t,i,n){return je(this,void 0,void 0,function*(){let s=this._removeEmptyFolders(e),o=this._getFinalPath(s),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",t);try{let l,u=Object.assign({upsert:vh.upsert},n),c=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&i instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",i)):typeof FormData<"u"&&i instanceof FormData?(l=i,l.append("cacheControl",u.cacheControl)):(l=i,c["cache-control"]=`max-age=${u.cacheControl}`,c["content-type"]=u.contentType);let d=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:c}),m=yield d.json();return d.ok?{data:{path:s,fullPath:m.Key},error:null}:{data:null,error:m}}catch(l){if(he(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,t){return je(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),n=Object.assign({},this.headers);t?.upsert&&(n["x-upsert"]="true");let s=yield ht(this.fetch,`${this.url}/object/upload/sign/${i}`,{},{headers:n}),o=new URL(this.url+s.url),a=o.searchParams.get("token");if(!a)throw new Vr("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(i){if(he(i))return{data:null,error:i};throw i}})}update(e,t,i){return je(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,i)})}move(e,t,i){return je(this,void 0,void 0,function*(){try{return{data:yield ht(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:i?.destinationBucket},{headers:this.headers}),error:null}}catch(n){if(he(n))return{data:null,error:n};throw n}})}copy(e,t,i){return je(this,void 0,void 0,function*(){try{return{data:{path:(yield ht(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:i?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(n){if(he(n))return{data:null,error:n};throw n}})}createSignedUrl(e,t,i){return je(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e),s=yield ht(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:t},i?.transform?{transform:i.transform}:{}),{headers:this.headers}),o=i?.download?`&download=${i.download===!0?"":i.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(n){if(he(n))return{data:null,error:n};throw n}})}createSignedUrls(e,t,i){return je(this,void 0,void 0,function*(){try{let n=yield ht(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),s=i?.download?`&download=${i.download===!0?"":i.download}`:"";return{data:n.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${s}`):null})),error:null}}catch(n){if(he(n))return{data:null,error:n};throw n}})}download(e,t){return je(this,void 0,void 0,function*(){let n=typeof t?.transform<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString(t?.transform||{}),o=s?`?${s}`:"";try{let a=this._getFinalPath(e);return{data:yield(yield Wr(this.fetch,`${this.url}/${n}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(he(a))return{data:null,error:a};throw a}})}info(e){return je(this,void 0,void 0,function*(){let t=this._getFinalPath(e);try{let i=yield Wr(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:Zs(i),error:null}}catch(i){if(he(i))return{data:null,error:i};throw i}})}exists(e){return je(this,void 0,void 0,function*(){let t=this._getFinalPath(e);try{return yield yh(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(i){if(he(i)&&i instanceof Zt){let n=i.originalError;if([400,404].includes(n?.status))return{data:!1,error:i}}throw i}})}getPublicUrl(e,t){let i=this._getFinalPath(e),n=[],s=t?.download?`download=${t.download===!0?"":t.download}`:"";s!==""&&n.push(s);let a=typeof t?.transform<"u"?"render/image":"object",l=this.transformOptsToQueryString(t?.transform||{});l!==""&&n.push(l);let u=n.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${i}${u}`)}}}remove(e){return je(this,void 0,void 0,function*(){try{return{data:yield to(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(he(t))return{data:null,error:t};throw t}})}list(e,t,i){return je(this,void 0,void 0,function*(){try{let n=Object.assign(Object.assign(Object.assign({},$v),t),{prefix:e||""});return{data:yield ht(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},i),error:null}}catch(n){if(he(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){let t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};var bh="2.7.1";var _h={"X-Client-Info":`storage-js/${bh}`};var Gr=function(r,e,t,i){function n(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{u(i.next(c))}catch(d){o(d)}}function l(c){try{u(i.throw(c))}catch(d){o(d)}}function u(c){c.done?s(c.value):n(c.value).then(a,l)}u((i=i.apply(r,e||[])).next())})},io=class{constructor(e,t={},i){this.url=e,this.headers=Object.assign(Object.assign({},_h),t),this.fetch=eo(i)}listBuckets(){return Gr(this,void 0,void 0,function*(){try{return{data:yield Wr(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(he(e))return{data:null,error:e};throw e}})}getBucket(e){return Gr(this,void 0,void 0,function*(){try{return{data:yield Wr(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(he(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return Gr(this,void 0,void 0,function*(){try{return{data:yield ht(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(he(i))return{data:null,error:i};throw i}})}updateBucket(e,t){return Gr(this,void 0,void 0,function*(){try{return{data:yield gh(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(he(i))return{data:null,error:i};throw i}})}emptyBucket(e){return Gr(this,void 0,void 0,function*(){try{return{data:yield ht(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(he(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Gr(this,void 0,void 0,function*(){try{return{data:yield to(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(he(t))return{data:null,error:t};throw t}})}};var sn=class extends io{constructor(e,t={},i){super(e,t,i)}from(e){return new ro(this.url,this.headers,e,this.fetch)}};var wh="2.50.0";var on="";typeof Deno<"u"?on="deno":typeof document<"u"?on="web":typeof navigator<"u"&&navigator.product==="ReactNative"?on="react-native":on="node";var qv={"X-Client-Info":`supabase-js-${on}/${wh}`},Sh={headers:qv},xh={schema:"public"},Ph={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},kh={};Hd();var Hv=function(r,e,t,i){function n(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{u(i.next(c))}catch(d){o(d)}}function l(c){try{u(i.throw(c))}catch(d){o(d)}}function u(c){c.done?s(c.value):n(c.value).then(a,l)}u((i=i.apply(r,e||[])).next())})},Vv=r=>{let e;return r?e=r:typeof fetch>"u"?e=$d:e=fetch,(...t)=>e(...t)},Wv=()=>typeof Headers>"u"?qd:Headers,Eh=(r,e,t)=>{let i=Vv(t),n=Wv();return(s,o)=>Hv(void 0,void 0,void 0,function*(){var a;let l=(a=yield e())!==null&&a!==void 0?a:r,u=new n(o?.headers);return u.has("apikey")||u.set("apikey",r),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),i(s,Object.assign(Object.assign({},o),{headers:u}))})};var Gv=function(r,e,t,i){function n(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{u(i.next(c))}catch(d){o(d)}}function l(c){try{u(i.throw(c))}catch(d){o(d)}}function u(c){c.done?s(c.value):n(c.value).then(a,l)}u((i=i.apply(r,e||[])).next())})};function Th(r){return r.endsWith("/")?r:r+"/"}function Ch(r,e){var t,i;let{db:n,auth:s,realtime:o,global:a}=r,{db:l,auth:u,realtime:c,global:d}=e,m={db:Object.assign(Object.assign({},l),n),auth:Object.assign(Object.assign({},u),s),realtime:Object.assign(Object.assign({},c),o),global:Object.assign(Object.assign(Object.assign({},d),a),{headers:Object.assign(Object.assign({},(t=d?.headers)!==null&&t!==void 0?t:{}),(i=a?.headers)!==null&&i!==void 0?i:{})}),accessToken:()=>Gv(this,void 0,void 0,function*(){return""})};return r.accessToken?m.accessToken=r.accessToken:delete m.accessToken,m}var no="2.70.0";var tr=30*1e3,so=3,oo=so*tr,Fh="http://localhost:9999",Oh="supabase.auth.token";var Ah={"X-Client-Info":`gotrue-js/${no}`};var an="X-Supabase-Api-Version",nl={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Rh=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Ih=6e5;var ln=class extends Error{constructor(e,t,i){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=i}};function H(r){return typeof r=="object"&&r!==null&&"__isAuthError"in r}var ao=class extends ln{constructor(e,t,i){super(e,t,i),this.name="AuthApiError",this.status=t,this.code=i}};function Uh(r){return H(r)&&r.name==="AuthApiError"}var Kr=class extends ln{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}},ft=class extends ln{constructor(e,t,i,n){super(e,i,n),this.name=t,this.status=i}},et=class extends ft{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function Dh(r){return H(r)&&r.name==="AuthSessionMissingError"}var rr=class extends ft{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},ir=class extends ft{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}},nr=class extends ft{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function Lh(r){return H(r)&&r.name==="AuthImplicitGrantRedirectError"}var un=class extends ft{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},Jr=class extends ft{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}};function lo(r){return H(r)&&r.name==="AuthRetryableFetchError"}var cn=class extends ft{constructor(e,t,i){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=i}};var Pt=class extends ft{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}};var uo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Bh=` 	
\r=`.split(""),Kv=(()=>{let r=new Array(128);for(let e=0;e<r.length;e+=1)r[e]=-1;for(let e=0;e<Bh.length;e+=1)r[Bh[e].charCodeAt(0)]=-2;for(let e=0;e<uo.length;e+=1)r[uo[e].charCodeAt(0)]=e;return r})();function Nh(r,e,t){if(r!==null)for(e.queue=e.queue<<8|r,e.queuedBits+=8;e.queuedBits>=6;){let i=e.queue>>e.queuedBits-6&63;t(uo[i]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){let i=e.queue>>e.queuedBits-6&63;t(uo[i]),e.queuedBits-=6}}function jh(r,e,t){let i=Kv[r];if(i>-1)for(e.queue=e.queue<<6|i,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(r)}"`)}}function sl(r){let e=[],t=o=>{e.push(String.fromCodePoint(o))},i={utf8seq:0,codepoint:0},n={queue:0,queuedBits:0},s=o=>{Yv(o,i,t)};for(let o=0;o<r.length;o+=1)jh(r.charCodeAt(o),n,s);return e.join("")}function Jv(r,e){if(r<=127){e(r);return}else if(r<=2047){e(192|r>>6),e(128|r&63);return}else if(r<=65535){e(224|r>>12),e(128|r>>6&63),e(128|r&63);return}else if(r<=1114111){e(240|r>>18),e(128|r>>12&63),e(128|r>>6&63),e(128|r&63);return}throw new Error(`Unrecognized Unicode codepoint: ${r.toString(16)}`)}function Xv(r,e){for(let t=0;t<r.length;t+=1){let i=r.charCodeAt(t);if(i>55295&&i<=56319){let n=(i-55296)*1024&65535;i=(r.charCodeAt(t+1)-56320&65535|n)+65536,t+=1}Jv(i,e)}}function Yv(r,e,t){if(e.utf8seq===0){if(r<=127){t(r);return}for(let i=1;i<6;i+=1)if((r>>7-i&1)===0){e.utf8seq=i;break}if(e.utf8seq===2)e.codepoint=r&31;else if(e.utf8seq===3)e.codepoint=r&15;else if(e.utf8seq===4)e.codepoint=r&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(r<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|r&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function Mh(r){let e=[],t={queue:0,queuedBits:0},i=n=>{e.push(n)};for(let n=0;n<r.length;n+=1)jh(r.charCodeAt(n),t,i);return new Uint8Array(e)}function zh(r){let e=[];return Xv(r,t=>e.push(t)),new Uint8Array(e)}function $h(r){let e=[],t={queue:0,queuedBits:0},i=n=>{e.push(n)};return r.forEach(n=>Nh(n,t,i)),Nh(null,t,i),e.join("")}function qh(r){return Math.round(Date.now()/1e3)+r}function Hh(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){let e=Math.random()*16|0;return(r=="x"?e:e&3|8).toString(16)})}var tt=()=>typeof window<"u"&&typeof document<"u",sr={tested:!1,writable:!1},zt=()=>{if(!tt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(sr.tested)return sr.writable;let r=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(r,r),globalThis.localStorage.removeItem(r),sr.tested=!0,sr.writable=!0}catch{sr.tested=!0,sr.writable=!1}return sr.writable};function Vh(r){let e={},t=new URL(r);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((n,s)=>{e[s]=n})}catch{}return t.searchParams.forEach((i,n)=>{e[n]=i}),e}var co=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>import("./chunk-GHVKKAWE.js").then(({default:i})=>i(...t)):e=fetch,(...t)=>e(...t)},Wh=r=>typeof r=="object"&&r!==null&&"status"in r&&"ok"in r&&"json"in r&&typeof r.json=="function",ol=(r,e,t)=>p(null,null,function*(){yield r.setItem(e,JSON.stringify(t))}),hn=(r,e)=>p(null,null,function*(){let t=yield r.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}}),fn=(r,e)=>p(null,null,function*(){yield r.removeItem(e)}),dn=class r{constructor(){this.promise=new r.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}};dn.promiseConstructor=Promise;function ho(r){let e=r.split(".");if(e.length!==3)throw new Pt("Invalid JWT structure");for(let i=0;i<e.length;i++)if(!Rh.test(e[i]))throw new Pt("JWT not in base64url format");return{header:JSON.parse(sl(e[0])),payload:JSON.parse(sl(e[1])),signature:Mh(e[2]),raw:{header:e[0],payload:e[1]}}}function Gh(r){return p(this,null,function*(){return yield new Promise(e=>{setTimeout(()=>e(null),r)})})}function Kh(r,e){return new Promise((i,n)=>{p(null,null,function*(){for(let s=0;s<1/0;s++)try{let o=yield r(s);if(!e(s,null,o)){i(o);return}}catch(o){if(!e(s,o)){n(o);return}}})})}function Qv(r){return("0"+r.toString(16)).substr(-2)}function Zv(){let e=new Uint32Array(56);if(typeof crypto>"u"){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=t.length,n="";for(let s=0;s<56;s++)n+=t.charAt(Math.floor(Math.random()*i));return n}return crypto.getRandomValues(e),Array.from(e,Qv).join("")}function e0(r){return p(this,null,function*(){let t=new TextEncoder().encode(r),i=yield crypto.subtle.digest("SHA-256",t),n=new Uint8Array(i);return Array.from(n).map(s=>String.fromCharCode(s)).join("")})}function t0(r){return p(this,null,function*(){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),r;let t=yield e0(r);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")})}function or(r,e,t=!1){return p(this,null,function*(){let i=Zv(),n=i;t&&(n+="/PASSWORD_RECOVERY"),yield ol(r,`${e}-code-verifier`,n);let s=yield t0(i);return[s,i===s?"plain":"s256"]})}var r0=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Jh(r){let e=r.headers.get(an);if(!e||!e.match(r0))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Xh(r){if(!r)throw new Error("Missing exp claim");let e=Math.floor(Date.now()/1e3);if(r<=e)throw new Error("JWT has expired")}function Yh(r){switch(r){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var i0=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ar(r){if(!i0.test(r))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var n0=function(r,e){var t={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(r);n<i.length;n++)e.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(r,i[n])&&(t[i[n]]=r[i[n]]);return t},lr=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),s0=[502,503,504];function Qh(r){return p(this,null,function*(){var e;if(!Wh(r))throw new Jr(lr(r),0);if(s0.includes(r.status))throw new Jr(lr(r),r.status);let t;try{t=yield r.json()}catch(s){throw new Kr(lr(s),s)}let i,n=Jh(r);if(n&&n.getTime()>=nl["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?i=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(i=t.error_code),i){if(i==="weak_password")throw new cn(lr(t),r.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(i==="session_not_found")throw new et}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0))throw new cn(lr(t),r.status,t.weak_password.reasons);throw new ao(lr(t),r.status||500,i)})}var o0=(r,e,t,i)=>{let n={method:r,headers:e?.headers||{}};return r==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),n.body=JSON.stringify(i),Object.assign(Object.assign({},n),t))};function G(r,e,t,i){return p(this,null,function*(){var n;let s=Object.assign({},i?.headers);s[an]||(s[an]=nl["2024-01-01"].name),i?.jwt&&(s.Authorization=`Bearer ${i.jwt}`);let o=(n=i?.query)!==null&&n!==void 0?n:{};i?.redirectTo&&(o.redirect_to=i.redirectTo);let a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=yield a0(r,e,t+a,{headers:s,noResolveJson:i?.noResolveJson},{},i?.body);return i?.xform?i?.xform(l):{data:Object.assign({},l),error:null}})}function a0(r,e,t,i,n,s){return p(this,null,function*(){let o=o0(e,i,n,s),a;try{a=yield r(t,Object.assign({},o))}catch(l){throw console.error(l),new Jr(lr(l),0)}if(a.ok||(yield Qh(a)),i?.noResolveJson)return a;try{return yield a.json()}catch(l){yield Qh(l)}})}function pt(r){var e;let t=null;l0(r)&&(t=Object.assign({},r),r.expires_at||(t.expires_at=qh(r.expires_in)));let i=(e=r.user)!==null&&e!==void 0?e:r;return{data:{session:t,user:i},error:null}}function al(r){let e=pt(r);return!e.error&&r.weak_password&&typeof r.weak_password=="object"&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.message&&typeof r.weak_password.message=="string"&&r.weak_password.reasons.reduce((t,i)=>t&&typeof i=="string",!0)&&(e.data.weak_password=r.weak_password),e}function mt(r){var e;return{data:{user:(e=r.user)!==null&&e!==void 0?e:r},error:null}}function Zh(r){return{data:r,error:null}}function ef(r){let{action_link:e,email_otp:t,hashed_token:i,redirect_to:n,verification_type:s}=r,o=n0(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:t,hashed_token:i,redirect_to:n,verification_type:s},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function tf(r){return r}function l0(r){return r.access_token&&r.refresh_token&&r.expires_in}var fo=["global","local","others"];var u0=function(r,e){var t={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(r);n<i.length;n++)e.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(r,i[n])&&(t[i[n]]=r[i[n]]);return t},Xr=class{constructor({url:e="",headers:t={},fetch:i}){this.url=e,this.headers=t,this.fetch=co(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}signOut(i){return p(this,arguments,function*(e,t=fo[0]){if(fo.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${fo.join(", ")}`);try{return yield G(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(H(n))return{data:null,error:n};throw n}})}inviteUserByEmail(i){return p(this,arguments,function*(e,t={}){try{return yield G(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:mt})}catch(n){if(H(n))return{data:{user:null},error:n};throw n}})}generateLink(e){return p(this,null,function*(){try{let{options:t}=e,i=u0(e,["options"]),n=Object.assign(Object.assign({},i),t);return"newEmail"in i&&(n.new_email=i?.newEmail,delete n.newEmail),yield G(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:ef,redirectTo:t?.redirectTo})}catch(t){if(H(t))return{data:{properties:null,user:null},error:t};throw t}})}createUser(e){return p(this,null,function*(){try{return yield G(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:mt})}catch(t){if(H(t))return{data:{user:null},error:t};throw t}})}listUsers(e){return p(this,null,function*(){var t,i,n,s,o,a,l;try{let u={nextPage:null,lastPage:0,total:0},c=yield G(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&i!==void 0?i:"",per_page:(s=(n=e?.perPage)===null||n===void 0?void 0:n.toString())!==null&&s!==void 0?s:""},xform:tf});if(c.error)throw c.error;let d=yield c.json(),m=(o=c.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(l=(a=c.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return f.length>0&&(f.forEach(b=>{let x=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(b.split(";")[1].split("=")[1]);u[`${E}Page`]=x}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(H(u))return{data:{users:[]},error:u};throw u}})}getUserById(e){return p(this,null,function*(){ar(e);try{return yield G(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:mt})}catch(t){if(H(t))return{data:{user:null},error:t};throw t}})}updateUserById(e,t){return p(this,null,function*(){ar(e);try{return yield G(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:mt})}catch(i){if(H(i))return{data:{user:null},error:i};throw i}})}deleteUser(e,t=!1){return p(this,null,function*(){ar(e);try{return yield G(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:mt})}catch(i){if(H(i))return{data:{user:null},error:i};throw i}})}_listFactors(e){return p(this,null,function*(){ar(e.userId);try{let{data:t,error:i}=yield G(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:t,error:i}}catch(t){if(H(t))return{data:null,error:t};throw t}})}_deleteFactor(e){return p(this,null,function*(){ar(e.userId),ar(e.id);try{return{data:yield G(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(H(t))return{data:null,error:t};throw t}})}};var rf={getItem:r=>zt()?globalThis.localStorage.getItem(r):null,setItem:(r,e)=>{zt()&&globalThis.localStorage.setItem(r,e)},removeItem:r=>{zt()&&globalThis.localStorage.removeItem(r)}};function ll(r={}){return{getItem:e=>r[e]||null,setItem:(e,t)=>{r[e]=t},removeItem:e=>{delete r[e]}}}function nf(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}var ur={debug:!!(globalThis&&zt()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")},pn=class extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}},po=class extends pn{};function ul(r,e,t){return p(this,null,function*(){ur.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",r,e);let i=new globalThis.AbortController;return e>0&&setTimeout(()=>{i.abort(),ur.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",r)},e),yield Promise.resolve().then(()=>globalThis.navigator.locks.request(r,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},n=>p(null,null,function*(){if(n){ur.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",r,n.name);try{return yield t()}finally{ur.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",r,n.name)}}else{if(e===0)throw ur.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",r),new po(`Acquiring an exclusive Navigator LockManager lock "${r}" immediately failed`);if(ur.debug)try{let s=yield globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),yield t()}})))})}nf();var c0={url:Fh,storageKey:Oh,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Ah,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};function sf(r,e,t){return p(this,null,function*(){return yield t()})}var cl=(()=>{class r{constructor(t){var i,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=r.nextInstanceID,r.nextInstanceID+=1,this.instanceID>0&&tt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");let s=Object.assign(Object.assign({},c0),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new Xr({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=co(s.fetch),this.lock=s.lock||sf,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:tt()&&(!((i=globalThis?.navigator)===null||i===void 0)&&i.locks)?this.lock=ul:this.lock=sf,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:zt()?this.storage=rf:(this.memoryStorage={},this.storage=ll(this.memoryStorage)):(this.memoryStorage={},this.storage=ll(this.memoryStorage)),tt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",o=>p(this,null,function*(){this._debug("received broadcast notification from other tab or client",o),yield this._notifyAllSubscribers(o.data.event,o.data.session,!1)}))}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${no}) ${new Date().toISOString()}`,...t),this}initialize(){return p(this,null,function*(){return this.initializePromise?yield this.initializePromise:(this.initializePromise=p(this,null,function*(){return yield this._acquireLock(-1,()=>p(this,null,function*(){return yield this._initialize()}))}),yield this.initializePromise)})}_initialize(){return p(this,null,function*(){var t;try{let i=Vh(window.location.href),n="none";if(this._isImplicitGrantCallback(i)?n="implicit":(yield this._isPKCECallback(i))&&(n="pkce"),tt()&&this.detectSessionInUrl&&n!=="none"){let{data:s,error:o}=yield this._getSessionFromURL(i,n);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),Lh(o)){let u=(t=o.details)===null||t===void 0?void 0:t.code;if(u==="identity_already_exists"||u==="identity_not_found"||u==="single_identity_not_deletable")return{error:o}}return yield this._removeSession(),{error:o}}let{session:a,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",a,"redirect type",l),yield this._saveSession(a),setTimeout(()=>p(this,null,function*(){l==="recovery"?yield this._notifyAllSubscribers("PASSWORD_RECOVERY",a):yield this._notifyAllSubscribers("SIGNED_IN",a)}),0),{error:null}}return yield this._recoverAndRefresh(),{error:null}}catch(i){return H(i)?{error:i}:{error:new Kr("Unexpected error during initialization",i)}}finally{yield this._handleVisibilityChange(),this._debug("#_initialize()","end")}})}signInAnonymously(t){return p(this,null,function*(){var i,n,s;try{let o=yield G(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(i=t?.options)===null||i===void 0?void 0:i.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t?.options)===null||s===void 0?void 0:s.captchaToken}},xform:pt}),{data:a,error:l}=o;if(l||!a)return{data:{user:null,session:null},error:l};let u=a.session,c=a.user;return a.session&&(yield this._saveSession(a.session),yield this._notifyAllSubscribers("SIGNED_IN",u)),{data:{user:c,session:u},error:null}}catch(o){if(H(o))return{data:{user:null,session:null},error:o};throw o}})}signUp(t){return p(this,null,function*(){var i,n,s;try{let o;if("email"in t){let{email:d,password:m,options:f}=t,b=null,x=null;this.flowType==="pkce"&&([b,x]=yield or(this.storage,this.storageKey)),o=yield G(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f?.emailRedirectTo,body:{email:d,password:m,data:(i=f?.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:f?.captchaToken},code_challenge:b,code_challenge_method:x},xform:pt})}else if("phone"in t){let{phone:d,password:m,options:f}=t;o=yield G(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:m,data:(n=f?.data)!==null&&n!==void 0?n:{},channel:(s=f?.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:pt})}else throw new ir("You must provide either an email or phone number and a password");let{data:a,error:l}=o;if(l||!a)return{data:{user:null,session:null},error:l};let u=a.session,c=a.user;return a.session&&(yield this._saveSession(a.session),yield this._notifyAllSubscribers("SIGNED_IN",u)),{data:{user:c,session:u},error:null}}catch(o){if(H(o))return{data:{user:null,session:null},error:o};throw o}})}signInWithPassword(t){return p(this,null,function*(){try{let i;if("email"in t){let{email:o,password:a,options:l}=t;i=yield G(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:a,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:al})}else if("phone"in t){let{phone:o,password:a,options:l}=t;i=yield G(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:a,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:al})}else throw new ir("You must provide either an email or phone number and a password");let{data:n,error:s}=i;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new rr}:(n.session&&(yield this._saveSession(n.session),yield this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(i){if(H(i))return{data:{user:null,session:null},error:i};throw i}})}signInWithOAuth(t){return p(this,null,function*(){var i,n,s,o;return yield this._handleProviderSignIn(t.provider,{redirectTo:(i=t.options)===null||i===void 0?void 0:i.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(o=t.options)===null||o===void 0?void 0:o.skipBrowserRedirect})})}exchangeCodeForSession(t){return p(this,null,function*(){return yield this.initializePromise,this._acquireLock(-1,()=>p(this,null,function*(){return this._exchangeCodeForSession(t)}))})}signInWithWeb3(t){return p(this,null,function*(){let{chain:i}=t;if(i==="solana")return yield this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${i}"`)})}signInWithSolana(t){return p(this,null,function*(){var i,n,s,o,a,l,u,c,d,m,f,b;let x,E;if("message"in t)x=t.message,E=t.signature;else{let{chain:S,wallet:F,statement:I,options:T}=t,M;if(tt())if(typeof F=="object")M=F;else{let B=window;if("solana"in B&&typeof B.solana=="object"&&("signIn"in B.solana&&typeof B.solana.signIn=="function"||"signMessage"in B.solana&&typeof B.solana.signMessage=="function"))M=B.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof F!="object"||!T?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");M=F}let L=new URL((i=T?.url)!==null&&i!==void 0?i:window.location.href);if("signIn"in M&&M.signIn){let B=yield M.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},T?.signInWithSolana),{version:"1",domain:L.host,uri:L.href}),I?{statement:I}:null)),z;if(Array.isArray(B)&&B[0]&&typeof B[0]=="object")z=B[0];else if(B&&typeof B=="object"&&"signedMessage"in B&&"signature"in B)z=B;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in z&&"signature"in z&&(typeof z.signedMessage=="string"||z.signedMessage instanceof Uint8Array)&&z.signature instanceof Uint8Array)x=typeof z.signedMessage=="string"?z.signedMessage:new TextDecoder().decode(z.signedMessage),E=z.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in M)||typeof M.signMessage!="function"||!("publicKey"in M)||typeof M!="object"||!M.publicKey||!("toBase58"in M.publicKey)||typeof M.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");x=[`${L.host} wants you to sign in with your Solana account:`,M.publicKey.toBase58(),...I?["",I,""]:[""],"Version: 1",`URI: ${L.href}`,`Issued At: ${(s=(n=T?.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((o=T?.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${T.signInWithSolana.notBefore}`]:[],...!((a=T?.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${T.signInWithSolana.expirationTime}`]:[],...!((l=T?.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${T.signInWithSolana.chainId}`]:[],...!((u=T?.signInWithSolana)===null||u===void 0)&&u.nonce?[`Nonce: ${T.signInWithSolana.nonce}`]:[],...!((c=T?.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${T.signInWithSolana.requestId}`]:[],...!((m=(d=T?.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||m===void 0)&&m.length?["Resources",...T.signInWithSolana.resources.map(z=>`- ${z}`)]:[]].join(`
`);let B=yield M.signMessage(new TextEncoder().encode(x),"utf8");if(!B||!(B instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");E=B}}try{let{data:S,error:F}=yield G(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:x,signature:$h(E)},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(b=t.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:pt});if(F)throw F;return!S||!S.session||!S.user?{data:{user:null,session:null},error:new rr}:(S.session&&(yield this._saveSession(S.session),yield this._notifyAllSubscribers("SIGNED_IN",S.session)),{data:Object.assign({},S),error:F})}catch(S){if(H(S))return{data:{user:null,session:null},error:S};throw S}})}_exchangeCodeForSession(t){return p(this,null,function*(){let i=yield hn(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(i??"").split("/");try{let{data:o,error:a}=yield G(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:pt});if(yield fn(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new rr}:(o.session&&(yield this._saveSession(o.session),yield this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:s??null}),error:a})}catch(o){if(H(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}})}signInWithIdToken(t){return p(this,null,function*(){try{let{options:i,provider:n,token:s,access_token:o,nonce:a}=t,l=yield G(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:o,nonce:a,gotrue_meta_security:{captcha_token:i?.captchaToken}},xform:pt}),{data:u,error:c}=l;return c?{data:{user:null,session:null},error:c}:!u||!u.session||!u.user?{data:{user:null,session:null},error:new rr}:(u.session&&(yield this._saveSession(u.session),yield this._notifyAllSubscribers("SIGNED_IN",u.session)),{data:u,error:c})}catch(i){if(H(i))return{data:{user:null,session:null},error:i};throw i}})}signInWithOtp(t){return p(this,null,function*(){var i,n,s,o,a;try{if("email"in t){let{email:l,options:u}=t,c=null,d=null;this.flowType==="pkce"&&([c,d]=yield or(this.storage,this.storageKey));let{error:m}=yield G(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(i=u?.data)!==null&&i!==void 0?i:{},create_user:(n=u?.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:u?.captchaToken},code_challenge:c,code_challenge_method:d},redirectTo:u?.emailRedirectTo});return{data:{user:null,session:null},error:m}}if("phone"in t){let{phone:l,options:u}=t,{data:c,error:d}=yield G(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=u?.data)!==null&&s!==void 0?s:{},create_user:(o=u?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:u?.captchaToken},channel:(a=u?.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:c?.message_id},error:d}}throw new ir("You must provide either an email or phone number.")}catch(l){if(H(l))return{data:{user:null,session:null},error:l};throw l}})}verifyOtp(t){return p(this,null,function*(){var i,n;try{let s,o;"options"in t&&(s=(i=t.options)===null||i===void 0?void 0:i.redirectTo,o=(n=t.options)===null||n===void 0?void 0:n.captchaToken);let{data:a,error:l}=yield G(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:o}}),redirectTo:s,xform:pt});if(l)throw l;if(!a)throw new Error("An error occurred on token verification.");let u=a.session,c=a.user;return u?.access_token&&(yield this._saveSession(u),yield this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",u)),{data:{user:c,session:u},error:null}}catch(s){if(H(s))return{data:{user:null,session:null},error:s};throw s}})}signInWithSSO(t){return p(this,null,function*(){var i,n,s;try{let o=null,a=null;return this.flowType==="pkce"&&([o,a]=yield or(this.storage,this.storageKey)),yield G(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(i=t.options)===null||i===void 0?void 0:i.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t?.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:a}),headers:this.headers,xform:Zh})}catch(o){if(H(o))return{data:null,error:o};throw o}})}reauthenticate(){return p(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>p(this,null,function*(){return yield this._reauthenticate()}))})}_reauthenticate(){return p(this,null,function*(){try{return yield this._useSession(t=>p(this,null,function*(){let{data:{session:i},error:n}=t;if(n)throw n;if(!i)throw new et;let{error:s}=yield G(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:i.access_token});return{data:{user:null,session:null},error:s}}))}catch(t){if(H(t))return{data:{user:null,session:null},error:t};throw t}})}resend(t){return p(this,null,function*(){try{let i=`${this.url}/resend`;if("email"in t){let{email:n,type:s,options:o}=t,{error:a}=yield G(this.fetch,"POST",i,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:o?.captchaToken}},redirectTo:o?.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in t){let{phone:n,type:s,options:o}=t,{data:a,error:l}=yield G(this.fetch,"POST",i,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:o?.captchaToken}}});return{data:{user:null,session:null,messageId:a?.message_id},error:l}}throw new ir("You must provide either an email or phone number and a type")}catch(i){if(H(i))return{data:{user:null,session:null},error:i};throw i}})}getSession(){return p(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>p(this,null,function*(){return this._useSession(i=>p(this,null,function*(){return i}))}))})}_acquireLock(t,i){return p(this,null,function*(){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){let n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=p(this,null,function*(){return yield n,yield i()});return this.pendingInLock.push(p(this,null,function*(){try{yield s}catch{}})),s}return yield this.lock(`lock:${this.storageKey}`,t,()=>p(this,null,function*(){this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;let n=i();for(this.pendingInLock.push(p(this,null,function*(){try{yield n}catch{}})),yield n;this.pendingInLock.length;){let s=[...this.pendingInLock];yield Promise.all(s),this.pendingInLock.splice(0,s.length)}return yield n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}}))}finally{this._debug("#_acquireLock","end")}})}_useSession(t){return p(this,null,function*(){this._debug("#_useSession","begin");try{let i=yield this.__loadSession();return yield t(i)}finally{this._debug("#_useSession","end")}})}__loadSession(){return p(this,null,function*(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null,i=yield hn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",i),i!==null&&(this._isValidSession(i)?t=i:(this._debug("#getSession()","session from storage is not valid"),yield this._removeSession())),!t)return{data:{session:null},error:null};let n=t.expires_at?t.expires_at*1e3-Date.now()<oo:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.storage.isServer){let a=this.suppressGetSessionWarning;t=new Proxy(t,{get:(u,c,d)=>(!a&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(u,c,d))})}return{data:{session:t},error:null}}let{session:s,error:o}=yield this._callRefreshToken(t.refresh_token);return o?{data:{session:null},error:o}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}})}getUser(t){return p(this,null,function*(){return t?yield this._getUser(t):(yield this.initializePromise,yield this._acquireLock(-1,()=>p(this,null,function*(){return yield this._getUser()})))})}_getUser(t){return p(this,null,function*(){try{return t?yield G(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:mt}):yield this._useSession(i=>p(this,null,function*(){var n,s,o;let{data:a,error:l}=i;if(l)throw l;return!(!((n=a.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new et}:yield G(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&o!==void 0?o:void 0,xform:mt})}))}catch(i){if(H(i))return Dh(i)&&(yield this._removeSession(),yield fn(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:i};throw i}})}updateUser(n){return p(this,arguments,function*(t,i={}){return yield this.initializePromise,yield this._acquireLock(-1,()=>p(this,null,function*(){return yield this._updateUser(t,i)}))})}_updateUser(n){return p(this,arguments,function*(t,i={}){try{return yield this._useSession(s=>p(this,null,function*(){let{data:o,error:a}=s;if(a)throw a;if(!o.session)throw new et;let l=o.session,u=null,c=null;this.flowType==="pkce"&&t.email!=null&&([u,c]=yield or(this.storage,this.storageKey));let{data:d,error:m}=yield G(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:i?.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:u,code_challenge_method:c}),jwt:l.access_token,xform:mt});if(m)throw m;return l.user=d.user,yield this._saveSession(l),yield this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}}))}catch(s){if(H(s))return{data:{user:null},error:s};throw s}})}setSession(t){return p(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>p(this,null,function*(){return yield this._setSession(t)}))})}_setSession(t){return p(this,null,function*(){try{if(!t.access_token||!t.refresh_token)throw new et;let i=Date.now()/1e3,n=i,s=!0,o=null,{payload:a}=ho(t.access_token);if(a.exp&&(n=a.exp,s=n<=i),s){let{session:l,error:u}=yield this._callRefreshToken(t.refresh_token);if(u)return{data:{user:null,session:null},error:u};if(!l)return{data:{user:null,session:null},error:null};o=l}else{let{data:l,error:u}=yield this._getUser(t.access_token);if(u)throw u;o={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-i,expires_at:n},yield this._saveSession(o),yield this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(i){if(H(i))return{data:{session:null,user:null},error:i};throw i}})}refreshSession(t){return p(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>p(this,null,function*(){return yield this._refreshSession(t)}))})}_refreshSession(t){return p(this,null,function*(){try{return yield this._useSession(i=>p(this,null,function*(){var n;if(!t){let{data:a,error:l}=i;if(l)throw l;t=(n=a.session)!==null&&n!==void 0?n:void 0}if(!t?.refresh_token)throw new et;let{session:s,error:o}=yield this._callRefreshToken(t.refresh_token);return o?{data:{user:null,session:null},error:o}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}}))}catch(i){if(H(i))return{data:{user:null,session:null},error:i};throw i}})}_getSessionFromURL(t,i){return p(this,null,function*(){try{if(!tt())throw new nr("No browser detected.");if(t.error||t.error_description||t.error_code)throw new nr(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(i){case"implicit":if(this.flowType==="pkce")throw new un("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new nr("Not a valid implicit grant flow url.");break;default:}if(i==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new un("No code detected.");let{data:I,error:T}=yield this._exchangeCodeForSession(t.code);if(T)throw T;let M=new URL(window.location.href);return M.searchParams.delete("code"),window.history.replaceState(window.history.state,"",M.toString()),{data:{session:I.session,redirectType:null},error:null}}let{provider_token:n,provider_refresh_token:s,access_token:o,refresh_token:a,expires_in:l,expires_at:u,token_type:c}=t;if(!o||!l||!a||!c)throw new nr("No session defined in URL");let d=Math.round(Date.now()/1e3),m=parseInt(l),f=d+m;u&&(f=parseInt(u));let b=f-d;b*1e3<=tr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${b}s, should have been closer to ${m}s`);let x=f-m;d-x>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",x,f,d):d-x<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",x,f,d);let{data:E,error:S}=yield this._getUser(o);if(S)throw S;let F={provider_token:n,provider_refresh_token:s,access_token:o,expires_in:m,expires_at:f,refresh_token:a,token_type:c,user:E.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:F,redirectType:t.type},error:null}}catch(n){if(H(n))return{data:{session:null,redirectType:null},error:n};throw n}})}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}_isPKCECallback(t){return p(this,null,function*(){let i=yield hn(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&i)})}signOut(){return p(this,arguments,function*(t={scope:"global"}){return yield this.initializePromise,yield this._acquireLock(-1,()=>p(this,null,function*(){return yield this._signOut(t)}))})}_signOut(){return p(this,arguments,function*({scope:t}={scope:"global"}){return yield this._useSession(i=>p(this,null,function*(){var n;let{data:s,error:o}=i;if(o)return{error:o};let a=(n=s.session)===null||n===void 0?void 0:n.access_token;if(a){let{error:l}=yield this.admin.signOut(a,t);if(l&&!(Uh(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(yield this._removeSession(),yield fn(this.storage,`${this.storageKey}-code-verifier`)),{error:null}}))})}onAuthStateChange(t){let i=Hh(),n={id:i,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",i),this.stateChangeEmitters.delete(i)}};return this._debug("#onAuthStateChange()","registered callback with id",i),this.stateChangeEmitters.set(i,n),p(this,null,function*(){yield this.initializePromise,yield this._acquireLock(-1,()=>p(this,null,function*(){this._emitInitialSession(i)}))}),{data:{subscription:n}}}_emitInitialSession(t){return p(this,null,function*(){return yield this._useSession(i=>p(this,null,function*(){var n,s;try{let{data:{session:o},error:a}=i;if(a)throw a;yield(n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",o),this._debug("INITIAL_SESSION","callback id",t,"session",o)}catch(o){yield(s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null),this._debug("INITIAL_SESSION","callback id",t,"error",o),console.error(o)}}))})}resetPasswordForEmail(n){return p(this,arguments,function*(t,i={}){let s=null,o=null;this.flowType==="pkce"&&([s,o]=yield or(this.storage,this.storageKey,!0));try{return yield G(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:s,code_challenge_method:o,gotrue_meta_security:{captcha_token:i.captchaToken}},headers:this.headers,redirectTo:i.redirectTo})}catch(a){if(H(a))return{data:null,error:a};throw a}})}getUserIdentities(){return p(this,null,function*(){var t;try{let{data:i,error:n}=yield this.getUser();if(n)throw n;return{data:{identities:(t=i.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(i){if(H(i))return{data:null,error:i};throw i}})}linkIdentity(t){return p(this,null,function*(){var i;try{let{data:n,error:s}=yield this._useSession(o=>p(this,null,function*(){var a,l,u,c,d;let{data:m,error:f}=o;if(f)throw f;let b=yield this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(a=t.options)===null||a===void 0?void 0:a.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(u=t.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:!0});return yield G(this.fetch,"GET",b,{headers:this.headers,jwt:(d=(c=m.session)===null||c===void 0?void 0:c.access_token)!==null&&d!==void 0?d:void 0})}));if(s)throw s;return tt()&&!(!((i=t.options)===null||i===void 0)&&i.skipBrowserRedirect)&&window.location.assign(n?.url),{data:{provider:t.provider,url:n?.url},error:null}}catch(n){if(H(n))return{data:{provider:t.provider,url:null},error:n};throw n}})}unlinkIdentity(t){return p(this,null,function*(){try{return yield this._useSession(i=>p(this,null,function*(){var n,s;let{data:o,error:a}=i;if(a)throw a;return yield G(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})}))}catch(i){if(H(i))return{data:null,error:i};throw i}})}_refreshAccessToken(t){return p(this,null,function*(){let i=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(i,"begin");try{let n=Date.now();return yield Kh(s=>p(this,null,function*(){return s>0&&(yield Gh(200*Math.pow(2,s-1))),this._debug(i,"refreshing attempt",s),yield G(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:pt})}),(s,o)=>{let a=200*Math.pow(2,s);return o&&lo(o)&&Date.now()+a-n<tr})}catch(n){if(this._debug(i,"error",n),H(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(i,"end")}})}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}_handleProviderSignIn(t,i){return p(this,null,function*(){let n=yield this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:i.redirectTo,scopes:i.scopes,queryParams:i.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",i,"url",n),tt()&&!i.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}})}_recoverAndRefresh(){return p(this,null,function*(){var t;let i="#_recoverAndRefresh()";this._debug(i,"begin");try{let n=yield hn(this.storage,this.storageKey);if(this._debug(i,"session from storage",n),!this._isValidSession(n)){this._debug(i,"session is not valid"),n!==null&&(yield this._removeSession());return}let s=((t=n.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<oo;if(this._debug(i,`session has${s?"":" not"} expired with margin of ${oo}s`),s){if(this.autoRefreshToken&&n.refresh_token){let{error:o}=yield this._callRefreshToken(n.refresh_token);o&&(console.error(o),lo(o)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",o),yield this._removeSession()))}}else yield this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(i,"error",n),console.error(n);return}finally{this._debug(i,"end")}})}_callRefreshToken(t){return p(this,null,function*(){var i,n;if(!t)throw new et;if(this.refreshingDeferred)return this.refreshingDeferred.promise;let s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new dn;let{data:o,error:a}=yield this._refreshAccessToken(t);if(a)throw a;if(!o.session)throw new et;yield this._saveSession(o.session),yield this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);let l={session:o.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(o){if(this._debug(s,"error",o),H(o)){let a={session:null,error:o};return lo(o)||(yield this._removeSession()),(i=this.refreshingDeferred)===null||i===void 0||i.resolve(a),a}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(o),o}finally{this.refreshingDeferred=null,this._debug(s,"end")}})}_notifyAllSubscribers(t,i,n=!0){return p(this,null,function*(){let s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",i,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:i});let o=[],a=Array.from(this.stateChangeEmitters.values()).map(l=>p(this,null,function*(){try{yield l.callback(t,i)}catch(u){o.push(u)}}));if(yield Promise.all(a),o.length>0){for(let l=0;l<o.length;l+=1)console.error(o[l]);throw o[0]}}finally{this._debug(s,"end")}})}_saveSession(t){return p(this,null,function*(){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,yield ol(this.storage,this.storageKey,t)})}_removeSession(){return p(this,null,function*(){this._debug("#_removeSession()"),yield fn(this.storage,this.storageKey),yield this._notifyAllSubscribers("SIGNED_OUT",null)})}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");let t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&tt()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",t)}catch(i){console.error("removing visibilitychange callback failed",i)}}_startAutoRefresh(){return p(this,null,function*(){yield this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");let t=setInterval(()=>this._autoRefreshTokenTick(),tr);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(()=>p(this,null,function*(){yield this.initializePromise,yield this._autoRefreshTokenTick()}),0)})}_stopAutoRefresh(){return p(this,null,function*(){this._debug("#_stopAutoRefresh()");let t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)})}startAutoRefresh(){return p(this,null,function*(){this._removeVisibilityChangedCallback(),yield this._startAutoRefresh()})}stopAutoRefresh(){return p(this,null,function*(){this._removeVisibilityChangedCallback(),yield this._stopAutoRefresh()})}_autoRefreshTokenTick(){return p(this,null,function*(){this._debug("#_autoRefreshTokenTick()","begin");try{yield this._acquireLock(0,()=>p(this,null,function*(){try{let t=Date.now();try{return yield this._useSession(i=>p(this,null,function*(){let{data:{session:n}}=i;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}let s=Math.floor((n.expires_at*1e3-t)/tr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${tr}ms, refresh threshold is ${so} ticks`),s<=so&&(yield this._callRefreshToken(n.refresh_token))}))}catch(i){console.error("Auto refresh tick failed with error. This is likely a transient error.",i)}}finally{this._debug("#_autoRefreshTokenTick()","end")}}))}catch(t){if(t.isAcquireTimeout||t instanceof pn)this._debug("auto refresh token tick lock not available");else throw t}})}_handleVisibilityChange(){return p(this,null,function*(){if(this._debug("#_handleVisibilityChange()"),!tt()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=()=>p(this,null,function*(){return yield this._onVisibilityChanged(!1)}),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),yield this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}})}_onVisibilityChanged(t){return p(this,null,function*(){let i=`#_onVisibilityChanged(${t})`;this._debug(i,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(yield this.initializePromise,yield this._acquireLock(-1,()=>p(this,null,function*(){if(document.visibilityState!=="visible"){this._debug(i,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}yield this._recoverAndRefresh()})))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()})}_getUrlForProvider(t,i,n){return p(this,null,function*(){let s=[`provider=${encodeURIComponent(i)}`];if(n?.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n?.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){let[o,a]=yield or(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(a)}`});s.push(l.toString())}if(n?.queryParams){let o=new URLSearchParams(n.queryParams);s.push(o.toString())}return n?.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`})}_unenroll(t){return p(this,null,function*(){try{return yield this._useSession(i=>p(this,null,function*(){var n;let{data:s,error:o}=i;return o?{data:null,error:o}:yield G(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s?.session)===null||n===void 0?void 0:n.access_token})}))}catch(i){if(H(i))return{data:null,error:i};throw i}})}_enroll(t){return p(this,null,function*(){try{return yield this._useSession(i=>p(this,null,function*(){var n,s;let{data:o,error:a}=i;if(a)return{data:null,error:a};let l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:u,error:c}=yield G(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=o?.session)===null||n===void 0?void 0:n.access_token});return c?{data:null,error:c}:(t.factorType==="totp"&&(!((s=u?.totp)===null||s===void 0)&&s.qr_code)&&(u.totp.qr_code=`data:image/svg+xml;utf-8,${u.totp.qr_code}`),{data:u,error:null})}))}catch(i){if(H(i))return{data:null,error:i};throw i}})}_verify(t){return p(this,null,function*(){return this._acquireLock(-1,()=>p(this,null,function*(){try{return yield this._useSession(i=>p(this,null,function*(){var n;let{data:s,error:o}=i;if(o)return{data:null,error:o};let{data:a,error:l}=yield G(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=s?.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(yield this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),yield this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:l})}))}catch(i){if(H(i))return{data:null,error:i};throw i}}))})}_challenge(t){return p(this,null,function*(){return this._acquireLock(-1,()=>p(this,null,function*(){try{return yield this._useSession(i=>p(this,null,function*(){var n;let{data:s,error:o}=i;return o?{data:null,error:o}:yield G(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(n=s?.session)===null||n===void 0?void 0:n.access_token})}))}catch(i){if(H(i))return{data:null,error:i};throw i}}))})}_challengeAndVerify(t){return p(this,null,function*(){let{data:i,error:n}=yield this._challenge({factorId:t.factorId});return n?{data:null,error:n}:yield this._verify({factorId:t.factorId,challengeId:i.id,code:t.code})})}_listFactors(){return p(this,null,function*(){let{data:{user:t},error:i}=yield this.getUser();if(i)return{data:null,error:i};let n=t?.factors||[],s=n.filter(a=>a.factor_type==="totp"&&a.status==="verified"),o=n.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:n,totp:s,phone:o},error:null}})}_getAuthenticatorAssuranceLevel(){return p(this,null,function*(){return this._acquireLock(-1,()=>p(this,null,function*(){return yield this._useSession(t=>p(this,null,function*(){var i,n;let{data:{session:s},error:o}=t;if(o)return{data:null,error:o};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};let{payload:a}=ho(s.access_token),l=null;a.aal&&(l=a.aal);let u=l;((n=(i=s.user.factors)===null||i===void 0?void 0:i.filter(m=>m.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(u="aal2");let d=a.amr||[];return{data:{currentLevel:l,nextLevel:u,currentAuthenticationMethods:d},error:null}}))}))})}fetchJwk(n){return p(this,arguments,function*(t,i={keys:[]}){let s=i.keys.find(l=>l.kid===t);if(s||(s=this.jwks.keys.find(l=>l.kid===t),s&&this.jwks_cached_at+Ih>Date.now()))return s;let{data:o,error:a}=yield G(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;if(!o.keys||o.keys.length===0)throw new Pt("JWKS is empty");if(this.jwks=o,this.jwks_cached_at=Date.now(),s=o.keys.find(l=>l.kid===t),!s)throw new Pt("No matching signing key found in JWKS");return s})}getClaims(n){return p(this,arguments,function*(t,i={keys:[]}){try{let s=t;if(!s){let{data:x,error:E}=yield this.getSession();if(E||!x.session)return{data:null,error:E};s=x.session.access_token}let{header:o,payload:a,signature:l,raw:{header:u,payload:c}}=ho(s);if(Xh(a.exp),!o.kid||o.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){let{error:x}=yield this.getUser(s);if(x)throw x;return{data:{claims:a,header:o,signature:l},error:null}}let d=Yh(o.alg),m=yield this.fetchJwk(o.kid,i),f=yield crypto.subtle.importKey("jwk",m,d,!0,["verify"]);if(!(yield crypto.subtle.verify(d,f,l,zh(`${u}.${c}`))))throw new Pt("Invalid JWT signature");return{data:{claims:a,header:o,signature:l},error:null}}catch(s){if(H(s))return{data:null,error:s};throw s}})}}return r.nextInstanceID=0,r})();var d0=cl,dl=d0;var mo=class extends dl{constructor(e){super(e)}};var h0=function(r,e,t,i){function n(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{u(i.next(c))}catch(d){o(d)}}function l(c){try{u(i.throw(c))}catch(d){o(d)}}function u(c){c.done?s(c.value):n(c.value).then(a,l)}u((i=i.apply(r,e||[])).next())})},go=class{constructor(e,t,i){var n,s,o;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");let a=Th(e),l=new URL(a);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);let u=`sb-${l.hostname.split(".")[0]}-auth-token`,c={db:xh,realtime:kh,auth:Object.assign(Object.assign({},Ph),{storageKey:u}),global:Sh},d=Ch(i??{},c);this.storageKey=(n=d.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(s=d.global.headers)!==null&&s!==void 0?s:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(m,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=d.auth)!==null&&o!==void 0?o:{},this.headers,d.global.fetch),this.fetch=Eh(t,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new sh(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),d.accessToken||this._listenForAuthEvents()}get functions(){return new Gi(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new sn(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},i={}){return this.rest.rpc(e,t,i)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return h0(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();let{data:i}=yield this.auth.getSession();return(t=(e=i.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:i,storage:n,storageKey:s,flowType:o,lock:a,debug:l},u,c){let d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new mo({url:this.authUrl.href,headers:Object.assign(Object.assign({},d),u),storageKey:s,autoRefreshToken:e,persistSession:t,detectSessionInUrl:i,storage:n,flowType:o,lock:a,debug:l,fetch:c,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new rn(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,i)=>{this._handleTokenChanged(t,"CLIENT",i?.access_token)})}_handleTokenChanged(e,t,i){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==i?this.changedAccessToken=i:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};var of=(r,e,t)=>new go(r,e,t);function Yr(r){r||(r=W(Ra));let e=new Ri(t=>{if(r.destroyed){t.next();return}return r.onDestroy(t.next.bind(t))});return t=>t.pipe(Nr(e))}function cr(r,e){let t=e?.injector??W(Ns),i=new nd(1),n=Ud(()=>{let s;try{s=r()}catch(o){Ba(()=>i.error(o));return}Ba(()=>i.next(s))},{injector:t,manualCleanup:!0});return t.get(Ra).onDestroy(()=>{n.destroy(),i.complete()}),i.asObservable()}var f0=".emptyFolderPlaceholder",af=(()=>{class r{supabaseToken=W(zd);supabase=of(this.supabaseToken.supabaseUrl,this.supabaseToken.supabaseKey);PARTY_HASH_KEY="partyHash";thumbFolderName="thumbnails";expiresIn=60*60*12;supabaseStorageURL=`${this.supabaseToken.supabaseUrl}/storage/v1/upload/resumable`;partyHash=Ae(void 0);anonUser=Vi({params:()=>this.partyHash(),loader:t=>p(this,null,function*(){let i=yield this.supabase.auth.getUser(),n=yield this.supabase.auth.getSession(),s={user:i.data.user,session:n.data.session};return(!s.session||!s.user||s.user.user_metadata[this.PARTY_HASH_KEY]!==t.params)&&(s=(yield this.supabase.auth.signInAnonymously({options:{data:{partyHash:t.params}}})).data),s})});anonUser$=cr(this.anonUser.value);mandatoryMeta=Vi({params:()=>this.anonUser.value(),loader:()=>p(this,null,function*(){let t=this.partyHash(),{data:i,error:n}=yield this.supabase.from("upload_mandator").select("*");if(n)throw new Error(n.message);if(!i||i.length!==1)throw new Error("no mandator found");return i[0]})});imageMetaActive=Ae(void 0);imageMeta=Vi({params:()=>this.imageMetaActive(),loader:()=>p(this,null,function*(){let t=this.partyHash();if(!t)return{data:[],error:null};let i=`${t}/${this.thumbFolderName}`,s=(yield this.supabase.storage.from(t).list(i,{limit:100,sortBy:{column:"updated_at",order:"desc"}})).data?.filter(a=>a.name!==f0).map(a=>`${i}/${a.name}`)??[],o=s.length>0?yield this.supabase.storage.from(t).createSignedUrls(s,this.expiresIn):{data:[],error:null};return{data:o.data,error:o.error}})});static \u0275fac=function(i){return new(i||r)};static \u0275prov=St({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function yo(r,e){if(!{}.hasOwnProperty.call(r,e))throw new TypeError("attempted to use private field on non-instance");return r}var p0=0;function uf(r){return"__private_"+p0+++"_"+r}function m0(r,e,t){let i=[];return r.forEach(n=>typeof n!="string"?i.push(n):e[Symbol.split](n).forEach((s,o,a)=>{s!==""&&i.push(s),o<a.length-1&&i.push(t)})),i}function lf(r,e){let t=/\$/g,i="$$$$",n=[r];if(e==null)return n;for(let s of Object.keys(e))if(s!=="_"){let o=e[s];typeof o=="string"&&(o=t[Symbol.replace](o,i)),n=m0(n,new RegExp(`%\\{${s}\\}`,"g"),o)}return n}var g0=r=>{throw new Error(`missing string: ${r}`)},mn=uf("onMissingKey"),gn=uf("apply"),Zr=class{constructor(e,t){let{onMissingKey:i=g0}=t===void 0?{}:t;Object.defineProperty(this,gn,{value:y0}),Object.defineProperty(this,mn,{writable:!0,value:void 0}),this.locale={strings:{},pluralize(n){return n===1?0:1}},Array.isArray(e)?e.forEach(yo(this,gn)[gn],this):yo(this,gn)[gn](e),yo(this,mn)[mn]=i}translate(e,t){return this.translateArray(e,t).join("")}translateArray(e,t){let i=this.locale.strings[e];if(i==null&&(yo(this,mn)[mn](e),i=e),typeof i=="object"){if(t&&typeof t.smart_count<"u"){let s=this.locale.pluralize(t.smart_count);return lf(i[s],t)}throw new Error("Attempted to use a string with plural forms, but no value was given for %{smart_count}")}if(typeof i!="string")throw new Error("string was not a string");return lf(i,t)}};function y0(r){if(!(r!=null&&r.strings))return;let e=this.locale;Object.assign(this.locale,{strings:v(v({},e.strings),r.strings),pluralize:r.pluralize||e.pluralize})}var op=re(df(),1);var v0="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";var $t=(r=21)=>{let e="",t=r|0;for(;t--;)e+=v0[Math.random()*64|0];return e};var ap=re(Hf(),1);function bo(r,e){if(!{}.hasOwnProperty.call(r,e))throw new TypeError("attempted to use private field on non-instance");return r}var db=0;function Vf(r){return"__private_"+db+++"_"+r}var hb={version:"4.2.0"},dr=Vf("callbacks"),gl=Vf("publish"),_o=class{constructor(){Object.defineProperty(this,gl,{value:fb}),this.state={},Object.defineProperty(this,dr,{writable:!0,value:new Set})}getState(){return this.state}setState(e){let t=v({},this.state),i=v(v({},this.state),e);this.state=i,bo(this,gl)[gl](t,i,e)}subscribe(e){return bo(this,dr)[dr].add(e),()=>{bo(this,dr)[dr].delete(e)}}};function fb(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];bo(this,dr)[dr].forEach(i=>{i(...e)})}_o.VERSION=hb.version;var Wf=_o;function gt(r){let e=r.lastIndexOf(".");return e===-1||e===r.length-1?{name:r,extension:void 0}:{name:r.slice(0,e),extension:r.slice(e+1)}}var yl={__proto__:null,md:"text/markdown",markdown:"text/markdown",mp4:"video/mp4",mp3:"audio/mp3",svg:"image/svg+xml",jpg:"image/jpeg",png:"image/png",webp:"image/webp",gif:"image/gif",heic:"image/heic",heif:"image/heif",yaml:"text/yaml",yml:"text/yaml",csv:"text/csv",tsv:"text/tab-separated-values",tab:"text/tab-separated-values",avi:"video/x-msvideo",mks:"video/x-matroska",mkv:"video/x-matroska",mov:"video/quicktime",dicom:"application/dicom",doc:"application/msword",msg:"application/vnd.ms-outlook",docm:"application/vnd.ms-word.document.macroenabled.12",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",dot:"application/msword",dotm:"application/vnd.ms-word.template.macroenabled.12",dotx:"application/vnd.openxmlformats-officedocument.wordprocessingml.template",xla:"application/vnd.ms-excel",xlam:"application/vnd.ms-excel.addin.macroenabled.12",xlc:"application/vnd.ms-excel",xlf:"application/x-xliff+xml",xlm:"application/vnd.ms-excel",xls:"application/vnd.ms-excel",xlsb:"application/vnd.ms-excel.sheet.binary.macroenabled.12",xlsm:"application/vnd.ms-excel.sheet.macroenabled.12",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xlt:"application/vnd.ms-excel",xltm:"application/vnd.ms-excel.template.macroenabled.12",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template",xlw:"application/vnd.ms-excel",txt:"text/plain",text:"text/plain",conf:"text/plain",log:"text/plain",pdf:"application/pdf",zip:"application/zip","7z":"application/x-7z-compressed",rar:"application/x-rar-compressed",tar:"application/x-tar",gz:"application/gzip",dmg:"application/x-apple-diskimage"};function vn(r){var e;if(r.type)return r.type;let t=r.name?(e=gt(r.name).extension)==null?void 0:e.toLowerCase():null;return t&&t in yl?yl[t]:"application/octet-stream"}function pb(r){return r.charCodeAt(0).toString(32)}function Gf(r){let e="";return r.replace(/[^A-Z0-9]/gi,t=>(e+=`-${pb(t)}`,"/"))+e}function Kf(r,e){let t=e||"uppy";return typeof r.name=="string"&&(t+=`-${Gf(r.name.toLowerCase())}`),r.type!==void 0&&(t+=`-${r.type}`),r.meta&&typeof r.meta.relativePath=="string"&&(t+=`-${Gf(r.meta.relativePath.toLowerCase())}`),r.data.size!==void 0&&(t+=`-${r.data.size}`),r.data.lastModified!==void 0&&(t+=`-${r.data.lastModified}`),t}function mb(r){return!r.isRemote||!r.remote?!1:new Set(["box","dropbox","drive","facebook","unsplash"]).has(r.remote.provider)}function wo(r,e){if(mb(r))return r.id;let t=vn(r);return Kf(j(v({},r),{type:t}),e)}function vl(r){if(r==null&&typeof navigator<"u"&&(r=navigator.userAgent),!r)return!0;let e=/Edge\/(\d+\.\d+)/.exec(r);if(!e)return!0;let i=e[1].split(".",2),n=parseInt(i[0],10),s=parseInt(i[1],10);return n<15||n===15&&s<15063||n>18||n===18&&s>=18218}function bl(r,e){return e.name?e.name:r.split("/")[0]==="image"?`${r.split("/")[0]}.${r.split("/")[1]}`:"noname"}function _l(r){return r<10?`0${r}`:r.toString()}function ei(){let r=new Date,e=_l(r.getHours()),t=_l(r.getMinutes()),i=_l(r.getSeconds());return`${e}:${t}:${i}`}var Jf={debug:()=>{},warn:()=>{},error:function(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];return console.error(`[Uppy] [${ei()}]`,...e)}},Xf={debug:function(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];return console.debug(`[Uppy] [${ei()}]`,...e)},warn:function(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];return console.warn(`[Uppy] [${ei()}]`,...e)},error:function(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];return console.error(`[Uppy] [${ei()}]`,...e)}};var _n=re(bn(),1),ip=re(rp(),1),np={maxFileSize:null,minFileSize:null,maxTotalFileSize:null,maxNumberOfFiles:null,minNumberOfFiles:null,allowedFileTypes:null,requiredMetaFields:[]},Me=class extends Error{constructor(e,t){var i;super(e),this.isRestriction=!0,this.isUserFacing=(i=t?.isUserFacing)!=null?i:!0,t!=null&&t.file&&(this.file=t.file)}},So=class{constructor(e,t){this.getI18n=t,this.getOpts=()=>{var i;let n=e();if(((i=n.restrictions)==null?void 0:i.allowedFileTypes)!=null&&!Array.isArray(n.restrictions.allowedFileTypes))throw new TypeError("`restrictions.allowedFileTypes` must be an array");return n}}validateAggregateRestrictions(e,t){let{maxTotalFileSize:i,maxNumberOfFiles:n}=this.getOpts().restrictions;if(n&&e.filter(o=>!o.isGhost).length+t.length>n)throw new Me(`${this.getI18n()("youCanOnlyUploadX",{smart_count:n})}`);if(i){let s=[...e,...t].reduce((o,a)=>{var l;return o+((l=a.size)!=null?l:0)},0);if(s>i)throw new Me(this.getI18n()("aggregateExceedsSize",{sizeAllowed:(0,_n.default)(i),size:(0,_n.default)(s)}))}}validateSingleFile(e){let{maxFileSize:t,minFileSize:i,allowedFileTypes:n}=this.getOpts().restrictions;if(n&&!n.some(a=>a.includes("/")?e.type?(0,ip.default)(e.type.replace(/;.*?$/,""),a):!1:a[0]==="."&&e.extension?e.extension.toLowerCase()===a.slice(1).toLowerCase():!1)){let a=n.join(", ");throw new Me(this.getI18n()("youCanOnlyUploadFileTypes",{types:a}),{file:e})}if(t&&e.size!=null&&e.size>t){var s;throw new Me(this.getI18n()("exceedsSize",{size:(0,_n.default)(t),file:(s=e.name)!=null?s:this.getI18n()("unnamed")}),{file:e})}if(i&&e.size!=null&&e.size<i)throw new Me(this.getI18n()("inferiorSize",{size:(0,_n.default)(i)}),{file:e})}validate(e,t){t.forEach(i=>{this.validateSingleFile(i)}),this.validateAggregateRestrictions(e,t)}validateMinNumberOfFiles(e){let{minNumberOfFiles:t}=this.getOpts().restrictions;if(t&&Object.keys(e).length<t)throw new Me(this.getI18n()("youHaveToAtLeastSelectX",{smart_count:t}))}getMissingRequiredMetaFields(e){var t;let i=new Me(this.getI18n()("missingRequiredMetaFieldOnFile",{fileName:(t=e.name)!=null?t:this.getI18n()("unnamed")})),{requiredMetaFields:n}=this.getOpts().restrictions,s=[];for(let o of n)(!Object.hasOwn(e.meta,o)||e.meta[o]==="")&&s.push(o);return{missingFields:s,error:i}}};var sp={strings:{addBulkFilesFailed:{0:"Failed to add %{smart_count} file due to an internal error",1:"Failed to add %{smart_count} files due to internal errors"},youCanOnlyUploadX:{0:"You can only upload %{smart_count} file",1:"You can only upload %{smart_count} files"},youHaveToAtLeastSelectX:{0:"You have to select at least %{smart_count} file",1:"You have to select at least %{smart_count} files"},aggregateExceedsSize:"You selected %{size} of files, but maximum allowed size is %{sizeAllowed}",exceedsSize:"%{file} exceeds maximum allowed size of %{size}",missingRequiredMetaField:"Missing required meta fields",missingRequiredMetaFieldOnFile:"Missing required meta fields in %{fileName}",inferiorSize:"This file is smaller than the allowed size of %{size}",youCanOnlyUploadFileTypes:"You can only upload: %{types}",noMoreFilesAllowed:"Cannot add more files",noDuplicates:"Cannot add the duplicate file '%{fileName}', it already exists",companionError:"Connection with Companion failed",authAborted:"Authentication aborted",companionUnauthorizeHint:"To unauthorize to your %{provider} account, please go to %{url}",failedToUpload:"Failed to upload %{file}",noInternetConnection:"No Internet connection",connectedToInternet:"Connected to the Internet",noFilesFound:"You have no files or folders here",noSearchResults:"Unfortunately, there are no results for this search",selectX:{0:"Select %{smart_count}",1:"Select %{smart_count}"},allFilesFromFolderNamed:"All files from folder %{name}",openFolderNamed:"Open folder %{name}",cancel:"Cancel",logOut:"Log out",logIn:"Log in",pickFiles:"Pick files",pickPhotos:"Pick photos",filter:"Filter",resetFilter:"Reset filter",loading:"Loading...",loadedXFiles:"Loaded %{numFiles} files",authenticateWithTitle:"Please authenticate with %{pluginName} to select files",authenticateWith:"Connect to %{pluginName}",signInWithGoogle:"Sign in with Google",searchImages:"Search for images",enterTextToSearch:"Enter text to search for images",search:"Search",resetSearch:"Reset search",emptyFolderAdded:"No files were added from empty folder",addedNumFiles:"Added %{numFiles} file(s)",folderAlreadyAdded:'The folder "%{folder}" was already added',folderAdded:{0:"Added %{smart_count} file from %{folder}",1:"Added %{smart_count} files from %{folder}"},additionalRestrictionsFailed:"%{count} additional restrictions were not fulfilled",unnamed:"Unnamed",pleaseWait:"Please wait"}};function U(r,e){if(!{}.hasOwnProperty.call(r,e))throw new TypeError("attempted to use private field on non-instance");return r}var vb=0;function te(r){return"__private_"+vb+++"_"+r}var bb={version:"4.4.6"},xo={totalProgress:0,allowNewUpload:!0,error:null,recoveredState:null},Se=te("plugins"),xe=te("restricter"),wn=te("storeUnsubscribe"),kt=te("emitter"),hr=te("preProcessors"),fr=te("uploaders"),Ct=te("postProcessors"),Ge=te("informAndEmit"),Fn=te("checkRequiredMetaFieldsOnFile"),wl=te("checkRequiredMetaFields"),Sn=te("assertNewUploadAllowed"),Pl=te("transformFile"),xn=te("startIfAutoProceed"),Pn=te("checkAndUpdateFileState"),Cn=te("getFilesToRetry"),kn=te("doRetryAll"),kl=te("handleUploadProgress"),En=te("updateTotalProgress"),Ft=te("updateTotalProgressThrottled"),El=te("calculateTotalProgress"),Sl=te("addListeners"),at=te("updateOnlineStatus"),Tn=te("requestClientById"),Et=te("createUpload"),xl=te("getUpload"),pr=te("removeUpload"),Tt=te("runUpload"),Po=class r{constructor(e){Object.defineProperty(this,Tt,{value:Db}),Object.defineProperty(this,pr,{value:Ub}),Object.defineProperty(this,xl,{value:Ib}),Object.defineProperty(this,Et,{value:Rb}),Object.defineProperty(this,Sl,{value:Ab}),Object.defineProperty(this,El,{value:Ob}),Object.defineProperty(this,En,{value:Fb}),Object.defineProperty(this,kn,{value:Cb}),Object.defineProperty(this,Cn,{value:Tb}),Object.defineProperty(this,Pn,{value:Eb}),Object.defineProperty(this,xn,{value:kb}),Object.defineProperty(this,Pl,{value:Pb}),Object.defineProperty(this,Sn,{value:xb}),Object.defineProperty(this,wl,{value:Sb}),Object.defineProperty(this,Fn,{value:wb}),Object.defineProperty(this,Ge,{value:_b}),Object.defineProperty(this,Se,{writable:!0,value:Object.create(null)}),Object.defineProperty(this,xe,{writable:!0,value:void 0}),Object.defineProperty(this,wn,{writable:!0,value:void 0}),Object.defineProperty(this,kt,{writable:!0,value:(0,op.default)()}),Object.defineProperty(this,hr,{writable:!0,value:new Set}),Object.defineProperty(this,fr,{writable:!0,value:new Set}),Object.defineProperty(this,Ct,{writable:!0,value:new Set}),this.scheduledAutoProceed=null,this.wasOffline=!1,Object.defineProperty(this,kl,{writable:!0,value:(n,s)=>{let o=n?this.getFile(n.id):void 0;if(n==null||!o){this.log(`Not setting progress for a file that has been removed: ${n?.id}`);return}if(o.progress.percentage===100){this.log(`Not setting progress for a file that has been already uploaded: ${n.id}`);return}let a={bytesTotal:s.bytesTotal,percentage:s.bytesTotal!=null&&Number.isFinite(s.bytesTotal)&&s.bytesTotal>0?Math.round(s.bytesUploaded/s.bytesTotal*100):void 0};o.progress.uploadStarted!=null?this.setFileState(n.id,{progress:j(v(v({},o.progress),a),{bytesUploaded:s.bytesUploaded})}):this.setFileState(n.id,{progress:v(v({},o.progress),a)}),U(this,Ft)[Ft]()}}),Object.defineProperty(this,Ft,{writable:!0,value:(0,ap.default)(()=>U(this,En)[En](),500,{leading:!0,trailing:!0})}),Object.defineProperty(this,at,{writable:!0,value:this.updateOnlineStatus.bind(this)}),Object.defineProperty(this,Tn,{writable:!0,value:new Map}),this.defaultLocale=sp;let t={id:"uppy",autoProceed:!1,allowMultipleUploadBatches:!0,debug:!1,restrictions:np,meta:{},onBeforeFileAdded:(n,s)=>!Object.hasOwn(s,n.id),onBeforeUpload:n=>n,store:new Wf,logger:Jf,infoTimeout:5e3},i=v(v({},t),e);this.opts=j(v({},i),{restrictions:v(v({},t.restrictions),e&&e.restrictions)}),e&&e.logger&&e.debug?this.log("You are using a custom `logger`, but also set `debug: true`, which uses built-in logger to output logs to console. Ignoring `debug: true` and using your custom `logger`.","warning"):e&&e.debug&&(this.opts.logger=Xf),this.log(`Using Core v${r.VERSION}`),this.i18nInit(),this.store=this.opts.store,this.setState(j(v({},xo),{plugins:{},files:{},currentUploads:{},capabilities:{uploadProgress:vl(),individualCancellation:!0,resumableUploads:!1},meta:v({},this.opts.meta),info:[]})),U(this,xe)[xe]=new So(()=>this.opts,()=>this.i18n),U(this,wn)[wn]=this.store.subscribe((n,s,o)=>{this.emit("state-update",n,s,o),this.updateAll(s)}),this.opts.debug&&typeof window<"u"&&(window[this.opts.id]=this),U(this,Sl)[Sl]()}emit(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];U(this,kt)[kt].emit(e,...i)}on(e,t){return U(this,kt)[kt].on(e,t),this}once(e,t){return U(this,kt)[kt].once(e,t),this}off(e,t){return U(this,kt)[kt].off(e,t),this}updateAll(e){this.iteratePlugins(t=>{t.update(e)})}setState(e){this.store.setState(e)}getState(){return this.store.getState()}patchFilesState(e){let t=this.getState().files;this.setState({files:v(v({},t),Object.fromEntries(Object.entries(e).map(i=>{let[n,s]=i;return[n,v(v({},t[n]),s)]})))})}setFileState(e,t){if(!this.getState().files[e])throw new Error(`Can\u2019t set state for ${e} (the file could have been removed)`);this.patchFilesState({[e]:t})}i18nInit(){let e=i=>this.log(`Missing i18n string: ${i}`,"error"),t=new Zr([this.defaultLocale,this.opts.locale],{onMissingKey:e});this.i18n=t.translate.bind(t),this.i18nArray=t.translateArray.bind(t),this.locale=t.locale}setOptions(e){this.opts=j(v(v({},this.opts),e),{restrictions:v(v({},this.opts.restrictions),e?.restrictions)}),e.meta&&this.setMeta(e.meta),this.i18nInit(),e.locale&&this.iteratePlugins(t=>{t.setOptions(e)}),this.setState(void 0)}resetProgress(){let e={percentage:0,bytesUploaded:!1,uploadComplete:!1,uploadStarted:null},t=v({},this.getState().files),i=Object.create(null);Object.keys(t).forEach(n=>{i[n]=j(v({},t[n]),{progress:v(v({},t[n].progress),e),tus:void 0,transloadit:void 0})}),this.setState(v({files:i},xo))}clear(){let{capabilities:e,currentUploads:t}=this.getState();if(Object.keys(t).length>0&&!e.individualCancellation)throw new Error("The installed uploader plugin does not allow removing files during an upload.");this.setState(j(v({},xo),{files:{}}))}addPreProcessor(e){U(this,hr)[hr].add(e)}removePreProcessor(e){return U(this,hr)[hr].delete(e)}addPostProcessor(e){U(this,Ct)[Ct].add(e)}removePostProcessor(e){return U(this,Ct)[Ct].delete(e)}addUploader(e){U(this,fr)[fr].add(e)}removeUploader(e){return U(this,fr)[fr].delete(e)}setMeta(e){let t=v(v({},this.getState().meta),e),i=v({},this.getState().files);Object.keys(i).forEach(n=>{i[n]=j(v({},i[n]),{meta:v(v({},i[n].meta),e)})}),this.log("Adding metadata:"),this.log(e),this.setState({meta:t,files:i})}setFileMeta(e,t){let i=v({},this.getState().files);if(!i[e]){this.log(`Was trying to set metadata for a file that has been removed: ${e}`);return}let n=v(v({},i[e].meta),t);i[e]=j(v({},i[e]),{meta:n}),this.setState({files:i})}getFile(e){return this.getState().files[e]}getFiles(){let{files:e}=this.getState();return Object.values(e)}getFilesByIds(e){return e.map(t=>this.getFile(t))}getObjectOfFilesPerState(){let{files:e,totalProgress:t,error:i}=this.getState(),n=Object.values(e),s=[],o=[],a=[],l=[],u=[],c=[],d=[],m=[],f=[];for(let b of n){let{progress:x}=b;!x.uploadComplete&&x.uploadStarted&&(s.push(b),b.isPaused||m.push(b)),x.uploadStarted||o.push(b),(x.uploadStarted||x.preprocess||x.postprocess)&&a.push(b),x.uploadStarted&&l.push(b),b.isPaused&&u.push(b),x.uploadComplete&&c.push(b),b.error&&d.push(b),(x.preprocess||x.postprocess)&&f.push(b)}return{newFiles:o,startedFiles:a,uploadStartedFiles:l,pausedFiles:u,completeFiles:c,erroredFiles:d,inProgressFiles:s,inProgressNotPausedFiles:m,processingFiles:f,isUploadStarted:l.length>0,isAllComplete:t===100&&c.length===n.length&&f.length===0,isAllErrored:!!i&&d.length===n.length,isAllPaused:s.length!==0&&u.length===s.length,isUploadInProgress:s.length>0,isSomeGhost:n.some(b=>b.isGhost)}}validateRestrictions(e,t){t===void 0&&(t=this.getFiles());try{U(this,xe)[xe].validate(t,[e])}catch(i){return i}return null}validateSingleFile(e){try{U(this,xe)[xe].validateSingleFile(e)}catch(t){return t.message}return null}validateAggregateRestrictions(e){let t=this.getFiles();try{U(this,xe)[xe].validateAggregateRestrictions(t,e)}catch(i){return i.message}return null}checkIfFileAlreadyExists(e){let{files:t}=this.getState();return!!(t[e]&&!t[e].isGhost)}addFile(e){U(this,Sn)[Sn](e);let{nextFilesState:t,validFilesToAdd:i,errors:n}=U(this,Pn)[Pn]([e]),s=n.filter(a=>a.isRestriction);if(U(this,Ge)[Ge](s),n.length>0)throw n[0];this.setState({files:t});let[o]=i;return this.emit("file-added",o),this.emit("files-added",i),this.log(`Added file: ${o.name}, ${o.id}, mime type: ${o.type}`),U(this,xn)[xn](),o.id}addFiles(e){U(this,Sn)[Sn]();let{nextFilesState:t,validFilesToAdd:i,errors:n}=U(this,Pn)[Pn](e),s=n.filter(a=>a.isRestriction);U(this,Ge)[Ge](s);let o=n.filter(a=>!a.isRestriction);if(o.length>0){let a=`Multiple errors occurred while adding files:
`;if(o.forEach(l=>{a+=`
 * ${l.message}`}),this.info({message:this.i18n("addBulkFilesFailed",{smart_count:o.length}),details:a},"error",this.opts.infoTimeout),typeof AggregateError=="function")throw new AggregateError(o,a);{let l=new Error(a);throw l.errors=o,l}}this.setState({files:t}),i.forEach(a=>{this.emit("file-added",a)}),this.emit("files-added",i),i.length>5?this.log(`Added batch of ${i.length} files`):Object.values(i).forEach(a=>{this.log(`Added file: ${a.name}
 id: ${a.id}
 type: ${a.type}`)}),i.length>0&&U(this,xn)[xn]()}removeFiles(e){let{files:t,currentUploads:i}=this.getState(),n=v({},t),s=v({},i),o=Object.create(null);e.forEach(c=>{t[c]&&(o[c]=t[c],delete n[c])});function a(c){return o[c]===void 0}Object.keys(s).forEach(c=>{let d=i[c].fileIDs.filter(a);if(d.length===0){delete s[c];return}let{capabilities:m}=this.getState();if(d.length!==i[c].fileIDs.length&&!m.individualCancellation)throw new Error("The installed uploader plugin does not allow removing files during an upload.");s[c]=j(v({},i[c]),{fileIDs:d})});let l={currentUploads:s,files:n};Object.keys(n).length===0&&(l.allowNewUpload=!0,l.error=null,l.recoveredState=null),this.setState(l),U(this,Ft)[Ft]();let u=Object.keys(o);u.forEach(c=>{this.emit("file-removed",o[c])}),u.length>5?this.log(`Removed ${u.length} files`):this.log(`Removed files: ${u.join(", ")}`)}removeFile(e){this.removeFiles([e])}pauseResume(e){if(!this.getState().capabilities.resumableUploads||this.getFile(e).progress.uploadComplete)return;let t=this.getFile(e),n=!(t.isPaused||!1);return this.setFileState(e,{isPaused:n}),this.emit("upload-pause",t,n),n}pauseAll(){let e=v({},this.getState().files);Object.keys(e).filter(i=>!e[i].progress.uploadComplete&&e[i].progress.uploadStarted).forEach(i=>{let n=j(v({},e[i]),{isPaused:!0});e[i]=n}),this.setState({files:e}),this.emit("pause-all")}resumeAll(){let e=v({},this.getState().files);Object.keys(e).filter(i=>!e[i].progress.uploadComplete&&e[i].progress.uploadStarted).forEach(i=>{let n=j(v({},e[i]),{isPaused:!1,error:null});e[i]=n}),this.setState({files:e}),this.emit("resume-all")}retryAll(){return p(this,null,function*(){let e=yield U(this,kn)[kn]();return this.emit("complete",e),e})}cancelAll(){this.emit("cancel-all");let{files:e}=this.getState(),t=Object.keys(e);t.length&&this.removeFiles(t),this.setState(xo)}retryUpload(e){this.setFileState(e,{error:null,isPaused:!1}),this.emit("upload-retry",this.getFile(e));let t=U(this,Et)[Et]([e],{forceAllowNewUpload:!0});return U(this,Tt)[Tt](t)}logout(){this.iteratePlugins(e=>{var t;(t=e.provider)==null||t.logout==null||t.logout()})}[Symbol.for("uppy test: updateTotalProgress")](){return U(this,En)[En]()}updateOnlineStatus(){var e;((e=window.navigator.onLine)!=null?e:!0)?(this.emit("is-online"),this.wasOffline&&(this.emit("back-online"),this.info(this.i18n("connectedToInternet"),"success",3e3),this.wasOffline=!1)):(this.emit("is-offline"),this.info(this.i18n("noInternetConnection"),"error",0),this.wasOffline=!0)}getID(){return this.opts.id}use(e){if(typeof e!="function"){let l=`Expected a plugin class, but got ${e===null?"null":typeof e}. Please verify that the plugin was imported and spelled correctly.`;throw new TypeError(l)}for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];let s=new e(this,...i),o=s.id;if(!o)throw new Error("Your plugin must have an id");if(!s.type)throw new Error("Your plugin must have a type");let a=this.getPlugin(o);if(a){let l=`Already found a plugin named '${a.id}'. Tried to use: '${o}'.
Uppy plugins must have unique \`id\` options.`;throw new Error(l)}return e.VERSION&&this.log(`Using ${o} v${e.VERSION}`),s.type in U(this,Se)[Se]?U(this,Se)[Se][s.type].push(s):U(this,Se)[Se][s.type]=[s],s.install(),this.emit("plugin-added",s),this}getPlugin(e){for(let t of Object.values(U(this,Se)[Se])){let i=t.find(n=>n.id===e);if(i!=null)return i}}[Symbol.for("uppy test: getPlugins")](e){return U(this,Se)[Se][e]}iteratePlugins(e){Object.values(U(this,Se)[Se]).flat(1).forEach(e)}removePlugin(e){this.log(`Removing plugin ${e.id}`),this.emit("plugin-remove",e),e.uninstall&&e.uninstall();let t=U(this,Se)[Se][e.type],i=t.findIndex(o=>o.id===e.id);i!==-1&&t.splice(i,1);let n=this.getState(),s={plugins:j(v({},n.plugins),{[e.id]:void 0})};this.setState(s)}destroy(){this.log(`Closing Uppy instance ${this.opts.id}: removing all files and uninstalling plugins`),this.cancelAll(),U(this,wn)[wn](),this.iteratePlugins(e=>{this.removePlugin(e)}),typeof window<"u"&&window.removeEventListener&&(window.removeEventListener("online",U(this,at)[at]),window.removeEventListener("offline",U(this,at)[at]))}hideInfo(){let{info:e}=this.getState();this.setState({info:e.slice(1)}),this.emit("info-hidden")}info(e,t,i){t===void 0&&(t="info"),i===void 0&&(i=3e3);let n=typeof e=="object";this.setState({info:[...this.getState().info,{type:t,message:n?e.message:e,details:n?e.details:null}]}),setTimeout(()=>this.hideInfo(),i),this.emit("info-visible")}log(e,t){let{logger:i}=this.opts;switch(t){case"error":i.error(e);break;case"warning":i.warn(e);break;default:i.debug(e);break}}registerRequestClient(e,t){U(this,Tn)[Tn].set(e,t)}getRequestClientForFile(e){if(!e.remote)throw new Error(`Tried to get RequestClient for a non-remote file ${e.id}`);let t=U(this,Tn)[Tn].get(e.remote.requestClientId);if(t==null)throw new Error(`requestClientId "${e.remote.requestClientId}" not registered for file "${e.id}"`);return t}restore(e){return this.log(`Core: attempting to restore upload "${e}"`),this.getState().currentUploads[e]?U(this,Tt)[Tt](e):(U(this,pr)[pr](e),Promise.reject(new Error("Nonexistent upload")))}[Symbol.for("uppy test: createUpload")](){return U(this,Et)[Et](...arguments)}addResultData(e,t){if(!U(this,xl)[xl](e)){this.log(`Not setting result for an upload that has been removed: ${e}`);return}let{currentUploads:i}=this.getState(),n=j(v({},i[e]),{result:v(v({},i[e].result),t)});this.setState({currentUploads:j(v({},i),{[e]:n})})}upload(){return p(this,null,function*(){var e;(e=U(this,Se)[Se].uploader)!=null&&e.length||this.log("No uploader type plugins are used","warning");let{files:t}=this.getState();if(U(this,Cn)[Cn]().length>0){let s=yield U(this,kn)[kn]();if(!(this.getFiles().filter(a=>a.progress.uploadStarted==null).length>0))return this.emit("complete",s),s;({files:t}=this.getState())}let n=this.opts.onBeforeUpload(t);return n===!1?Promise.reject(new Error("Not starting the upload because onBeforeUpload returned false")):(n&&typeof n=="object"&&(t=n,this.setState({files:t})),Promise.resolve().then(()=>U(this,xe)[xe].validateMinNumberOfFiles(t)).catch(s=>{throw U(this,Ge)[Ge]([s]),s}).then(()=>{if(!U(this,wl)[wl](t))throw new Me(this.i18n("missingRequiredMetaField"))}).catch(s=>{throw s}).then(()=>p(this,null,function*(){let{currentUploads:s}=this.getState(),o=Object.values(s).flatMap(c=>c.fileIDs),a=[];Object.keys(t).forEach(c=>{let d=this.getFile(c);!d.progress.uploadStarted&&o.indexOf(c)===-1&&a.push(d.id)});let l=U(this,Et)[Et](a),u=yield U(this,Tt)[Tt](l);return this.emit("complete",u),u})).catch(s=>{throw this.emit("error",s),this.log(s,"error"),s}))})}};function _b(r){for(let s of r)s.isRestriction?this.emit("restriction-failed",s.file,s):this.emit("error",s,s.file),this.log(s,"warning");let e=r.filter(s=>s.isUserFacing),t=4,i=e.slice(0,t),n=e.slice(t);i.forEach(s=>{let{message:o,details:a=""}=s;this.info({message:o,details:a},"error",this.opts.infoTimeout)}),n.length>0&&this.info({message:this.i18n("additionalRestrictionsFailed",{count:n.length})})}function wb(r){let{missingFields:e,error:t}=U(this,xe)[xe].getMissingRequiredMetaFields(r);return e.length>0?(this.setFileState(r.id,{missingRequiredMetaFields:e}),this.log(t.message),this.emit("restriction-failed",r,t),!1):(e.length===0&&r.missingRequiredMetaFields&&this.setFileState(r.id,{missingRequiredMetaFields:[]}),!0)}function Sb(r){let e=!0;for(let t of Object.values(r))U(this,Fn)[Fn](t)||(e=!1);return e}function xb(r){let{allowNewUpload:e}=this.getState();if(e===!1){let t=new Me(this.i18n("noMoreFilesAllowed"),{file:r});throw U(this,Ge)[Ge]([t]),t}}function Pb(r){let e=r instanceof File?{name:r.name,type:r.type,size:r.size,data:r}:r,t=vn(e),i=bl(t,e),n=gt(i).extension,s=wo(e,this.getID()),o=e.meta||{};o.name=i,o.type=t;let a=Number.isFinite(e.data.size)?e.data.size:null;return{source:e.source||"",id:s,name:i,extension:n||"",meta:v(v({},this.getState().meta),o),type:t,data:e.data,progress:{percentage:0,bytesUploaded:!1,bytesTotal:a,uploadComplete:!1,uploadStarted:null},size:a,isGhost:!1,isRemote:e.isRemote||!1,remote:e.remote,preview:e.preview}}function kb(){this.opts.autoProceed&&!this.scheduledAutoProceed&&(this.scheduledAutoProceed=setTimeout(()=>{this.scheduledAutoProceed=null,this.upload().catch(r=>{r.isRestriction||this.log(r.stack||r.message||r)})},4))}function Eb(r){let{files:e}=this.getState(),t=v({},e),i=[],n=[];for(let a of r)try{var s;let l=U(this,Pl)[Pl](a),u=(s=e[l.id])==null?void 0:s.isGhost;if(u){let d=e[l.id];l=j(v({},d),{isGhost:!1,data:a.data}),this.log(`Replaced the blob in the restored ghost file: ${l.name}, ${l.id}`)}let c=this.opts.onBeforeFileAdded(l,t);if(!c&&this.checkIfFileAlreadyExists(l.id)){var o;throw new Me(this.i18n("noDuplicates",{fileName:(o=l.name)!=null?o:this.i18n("unnamed")}),{file:a})}if(c===!1&&!u)throw new Me("Cannot add the file because onBeforeFileAdded returned false.",{isUserFacing:!1,file:a});typeof c=="object"&&c!==null&&(l=c),U(this,xe)[xe].validateSingleFile(l),t[l.id]=l,i.push(l)}catch(l){n.push(l)}try{U(this,xe)[xe].validateAggregateRestrictions(Object.values(e),i)}catch(a){return n.push(a),{nextFilesState:e,validFilesToAdd:[],errors:n}}return{nextFilesState:t,validFilesToAdd:i,errors:n}}function Tb(){let{files:r}=this.getState();return Object.keys(r).filter(e=>r[e].error)}function Cb(){return p(this,null,function*(){let r=U(this,Cn)[Cn](),e=v({},this.getState().files);if(r.forEach(i=>{e[i]=j(v({},e[i]),{isPaused:!1,error:null})}),this.setState({files:e,error:null}),this.emit("retry-all",this.getFilesByIds(r)),r.length===0)return{successful:[],failed:[]};let t=U(this,Et)[Et](r,{forceAllowNewUpload:!0});return U(this,Tt)[Tt](t)})}function Fb(){let r=U(this,El)[El](),e=null;r!=null&&(e=Math.round(r*100),e>100?e=100:e<0&&(e=0)),this.emit("progress",e??0),this.setState({totalProgress:e??0})}function Ob(){let e=this.getFiles().filter(a=>a.progress.uploadStarted||a.progress.preprocess||a.progress.postprocess);if(e.length===0)return 0;if(e.every(a=>a.progress.uploadComplete))return 1;let t=a=>a.progress.bytesTotal!=null&&a.progress.bytesTotal!==0,i=e.filter(t),n=e.filter(a=>!t(a));if(i.every(a=>a.progress.uploadComplete)&&n.length>0&&!n.every(a=>a.progress.uploadComplete))return null;let s=i.reduce((a,l)=>{var u;return a+((u=l.progress.bytesTotal)!=null?u:0)},0),o=i.reduce((a,l)=>a+(l.progress.bytesUploaded||0),0);return s===0?0:o/s}function Ab(){let r=(i,n,s)=>{let o=i.message||"Unknown error";i.details&&(o+=` ${i.details}`),this.setState({error:o}),n!=null&&n.id in this.getState().files&&this.setFileState(n.id,{error:o,response:s})};this.on("error",r),this.on("upload-error",(i,n,s)=>{if(r(n,i,s),typeof n=="object"&&n.message){var o;this.log(n.message,"error");let a=new Error(this.i18n("failedToUpload",{file:(o=i?.name)!=null?o:""}));a.isUserFacing=!0,a.details=n.message,n.details&&(a.details+=` ${n.details}`),U(this,Ge)[Ge]([a])}else U(this,Ge)[Ge]([n])});let e=null;this.on("upload-stalled",(i,n)=>{let{message:s}=i,o=n.map(a=>a.meta.name).join(", ");e||(this.info({message:s,details:o},"warning",this.opts.infoTimeout),e=setTimeout(()=>{e=null},this.opts.infoTimeout)),this.log(`${s} ${o}`.trim(),"warning")}),this.on("upload",()=>{this.setState({error:null})});let t=i=>{let n=i.filter(o=>{let a=o!=null&&this.getFile(o.id);return a||this.log(`Not setting progress for a file that has been removed: ${o?.id}`),a}),s=Object.fromEntries(n.map(o=>[o.id,{progress:{uploadStarted:Date.now(),uploadComplete:!1,bytesUploaded:0,bytesTotal:o.size}}]));this.patchFilesState(s)};this.on("upload-start",t),this.on("upload-progress",U(this,kl)[kl]),this.on("upload-success",(i,n)=>{if(i==null||!this.getFile(i.id)){this.log(`Not setting progress for a file that has been removed: ${i?.id}`);return}let s=this.getFile(i.id).progress;this.setFileState(i.id,{progress:j(v({},s),{postprocess:U(this,Ct)[Ct].size>0?{mode:"indeterminate"}:void 0,uploadComplete:!0,percentage:100,bytesUploaded:s.bytesTotal}),response:n,uploadURL:n.uploadURL,isPaused:!1}),i.size==null&&this.setFileState(i.id,{size:n.bytesUploaded||s.bytesTotal}),U(this,Ft)[Ft]()}),this.on("preprocess-progress",(i,n)=>{if(i==null||!this.getFile(i.id)){this.log(`Not setting progress for a file that has been removed: ${i?.id}`);return}this.setFileState(i.id,{progress:j(v({},this.getFile(i.id).progress),{preprocess:n})})}),this.on("preprocess-complete",i=>{if(i==null||!this.getFile(i.id)){this.log(`Not setting progress for a file that has been removed: ${i?.id}`);return}let n=v({},this.getState().files);n[i.id]=j(v({},n[i.id]),{progress:v({},n[i.id].progress)}),delete n[i.id].progress.preprocess,this.setState({files:n})}),this.on("postprocess-progress",(i,n)=>{if(i==null||!this.getFile(i.id)){this.log(`Not setting progress for a file that has been removed: ${i?.id}`);return}this.setFileState(i.id,{progress:j(v({},this.getState().files[i.id].progress),{postprocess:n})})}),this.on("postprocess-complete",i=>{if(i==null||!this.getFile(i.id)){this.log(`Not setting progress for a file that has been removed: ${i?.id}`);return}let n=v({},this.getState().files);n[i.id]=j(v({},n[i.id]),{progress:v({},n[i.id].progress)}),delete n[i.id].progress.postprocess,this.setState({files:n})}),this.on("restored",()=>{U(this,Ft)[Ft]()}),this.on("dashboard:file-edit-complete",i=>{i&&U(this,Fn)[Fn](i)}),typeof window<"u"&&window.addEventListener&&(window.addEventListener("online",U(this,at)[at]),window.addEventListener("offline",U(this,at)[at]),setTimeout(U(this,at)[at],3e3))}function Rb(r,e){e===void 0&&(e={});let{forceAllowNewUpload:t=!1}=e,{allowNewUpload:i,currentUploads:n}=this.getState();if(!i&&!t)throw new Error("Cannot create a new upload: already uploading.");let s=$t();return this.emit("upload",s,this.getFilesByIds(r)),this.setState({allowNewUpload:this.opts.allowMultipleUploadBatches!==!1&&this.opts.allowMultipleUploads!==!1,currentUploads:j(v({},n),{[s]:{fileIDs:r,step:0,result:{}}})}),s}function Ib(r){let{currentUploads:e}=this.getState();return e[r]}function Ub(r){let e=v({},this.getState().currentUploads);delete e[r],this.setState({currentUploads:e})}function Db(r){return p(this,null,function*(){let e=()=>{let{currentUploads:s}=this.getState();return s[r]},t=e(),i=[...U(this,hr)[hr],...U(this,fr)[fr],...U(this,Ct)[Ct]];try{for(let s=t.step||0;s<i.length&&t;s++){let o=i[s];this.setState({currentUploads:j(v({},this.getState().currentUploads),{[r]:j(v({},t),{step:s})})});let{fileIDs:a}=t;yield o(a,r),t=e()}}catch(s){throw U(this,pr)[pr](r),s}if(t){t.fileIDs.forEach(l=>{let u=this.getFile(l);u&&u.progress.postprocess&&this.emit("postprocess-complete",u)});let s=t.fileIDs.map(l=>this.getFile(l)),o=s.filter(l=>!l.error),a=s.filter(l=>l.error);this.addResultData(r,{successful:o,failed:a,uploadID:r}),t=e()}let n;return t&&(n=t.result,U(this,pr)[pr](r)),n==null&&(this.log(`Not setting result for an upload that has been removed: ${r}`),n={successful:[],failed:[],uploadID:r}),n})}Po.VERSION=bb.version;var ko=Po;var Rn,V,hp,Lb,mr,lp,fp,pp,mp,Fl,Tl,Cl,Bb,An={},gp=[],Nb=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,In=Array.isArray;function yt(r,e){for(var t in e)r[t]=e[t];return r}function Ol(r){r&&r.parentNode&&r.parentNode.removeChild(r)}function h(r,e,t){var i,n,s,o={};for(s in e)s=="key"?i=e[s]:s=="ref"?n=e[s]:o[s]=e[s];if(arguments.length>2&&(o.children=arguments.length>3?Rn.call(arguments,2):t),typeof r=="function"&&r.defaultProps!=null)for(s in r.defaultProps)o[s]===void 0&&(o[s]=r.defaultProps[s]);return On(r,o,i,n,null)}function On(r,e,t,i,n){var s={type:r,props:e,key:t,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:n??++hp,__i:-1,__u:0};return n==null&&V.vnode!=null&&V.vnode(s),s}function Co(){return{current:null}}function Pe(r){return r.children}function ue(r,e){this.props=r,this.context=e}function ti(r,e){if(e==null)return r.__?ti(r.__,r.__i+1):null;for(var t;e<r.__k.length;e++)if((t=r.__k[e])!=null&&t.__e!=null)return t.__e;return typeof r.type=="function"?ti(r):null}function yp(r){var e,t;if((r=r.__)!=null&&r.__c!=null){for(r.__e=r.__c.base=null,e=0;e<r.__k.length;e++)if((t=r.__k[e])!=null&&t.__e!=null){r.__e=r.__c.base=t.__e;break}return yp(r)}}function up(r){(!r.__d&&(r.__d=!0)&&mr.push(r)&&!To.__r++||lp!=V.debounceRendering)&&((lp=V.debounceRendering)||fp)(To)}function To(){for(var r,e,t,i,n,s,o,a=1;mr.length;)mr.length>a&&mr.sort(pp),r=mr.shift(),a=mr.length,r.__d&&(t=void 0,n=(i=(e=r).__v).__e,s=[],o=[],e.__P&&((t=yt({},i)).__v=i.__v+1,V.vnode&&V.vnode(t),Al(e.__P,t,i,e.__n,e.__P.namespaceURI,32&i.__u?[n]:null,s,n??ti(i),!!(32&i.__u),o),t.__v=i.__v,t.__.__k[t.__i]=t,_p(s,t,o),t.__e!=n&&yp(t)));To.__r=0}function vp(r,e,t,i,n,s,o,a,l,u,c){var d,m,f,b,x,E,S=i&&i.__k||gp,F=e.length;for(l=jb(t,e,S,l,F),d=0;d<F;d++)(f=t.__k[d])!=null&&(m=f.__i==-1?An:S[f.__i]||An,f.__i=d,E=Al(r,f,m,n,s,o,a,l,u,c),b=f.__e,f.ref&&m.ref!=f.ref&&(m.ref&&Rl(m.ref,null,f),c.push(f.ref,f.__c||b,f)),x==null&&b!=null&&(x=b),4&f.__u||m.__k===f.__k?l=bp(f,l,r):typeof f.type=="function"&&E!==void 0?l=E:b&&(l=b.nextSibling),f.__u&=-7);return t.__e=x,l}function jb(r,e,t,i,n){var s,o,a,l,u,c=t.length,d=c,m=0;for(r.__k=new Array(n),s=0;s<n;s++)(o=e[s])!=null&&typeof o!="boolean"&&typeof o!="function"?(l=s+m,(o=r.__k[s]=typeof o=="string"||typeof o=="number"||typeof o=="bigint"||o.constructor==String?On(null,o,null,null,null):In(o)?On(Pe,{children:o},null,null,null):o.constructor==null&&o.__b>0?On(o.type,o.props,o.key,o.ref?o.ref:null,o.__v):o).__=r,o.__b=r.__b+1,a=null,(u=o.__i=Mb(o,t,l,d))!=-1&&(d--,(a=t[u])&&(a.__u|=2)),a==null||a.__v==null?(u==-1&&(n>c?m--:n<c&&m++),typeof o.type!="function"&&(o.__u|=4)):u!=l&&(u==l-1?m--:u==l+1?m++:(u>l?m--:m++,o.__u|=4))):r.__k[s]=null;if(d)for(s=0;s<c;s++)(a=t[s])!=null&&(2&a.__u)==0&&(a.__e==i&&(i=ti(a)),Sp(a,a));return i}function bp(r,e,t){var i,n;if(typeof r.type=="function"){for(i=r.__k,n=0;i&&n<i.length;n++)i[n]&&(i[n].__=r,e=bp(i[n],e,t));return e}r.__e!=e&&(e&&r.type&&!t.contains(e)&&(e=ti(r)),t.insertBefore(r.__e,e||null),e=r.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function ze(r,e){return e=e||[],r==null||typeof r=="boolean"||(In(r)?r.some(function(t){ze(t,e)}):e.push(r)),e}function Mb(r,e,t,i){var n,s,o=r.key,a=r.type,l=e[t];if(l===null&&r.key==null||l&&o==l.key&&a==l.type&&(2&l.__u)==0)return t;if(i>(l!=null&&(2&l.__u)==0?1:0))for(n=t-1,s=t+1;n>=0||s<e.length;){if(n>=0){if((l=e[n])&&(2&l.__u)==0&&o==l.key&&a==l.type)return n;n--}if(s<e.length){if((l=e[s])&&(2&l.__u)==0&&o==l.key&&a==l.type)return s;s++}}return-1}function cp(r,e,t){e[0]=="-"?r.setProperty(e,t??""):r[e]=t==null?"":typeof t!="number"||Nb.test(e)?t:t+"px"}function Eo(r,e,t,i,n){var s,o;e:if(e=="style")if(typeof t=="string")r.style.cssText=t;else{if(typeof i=="string"&&(r.style.cssText=i=""),i)for(e in i)t&&e in t||cp(r.style,e,"");if(t)for(e in t)i&&t[e]==i[e]||cp(r.style,e,t[e])}else if(e[0]=="o"&&e[1]=="n")s=e!=(e=e.replace(mp,"$1")),o=e.toLowerCase(),e=o in r||e=="onFocusOut"||e=="onFocusIn"?o.slice(2):e.slice(2),r.l||(r.l={}),r.l[e+s]=t,t?i?t.u=i.u:(t.u=Fl,r.addEventListener(e,s?Cl:Tl,s)):r.removeEventListener(e,s?Cl:Tl,s);else{if(n=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in r)try{r[e]=t??"";break e}catch{}typeof t=="function"||(t==null||t===!1&&e[4]!="-"?r.removeAttribute(e):r.setAttribute(e,e=="popover"&&t==1?"":t))}}function dp(r){return function(e){if(this.l){var t=this.l[e.type+r];if(e.t==null)e.t=Fl++;else if(e.t<t.u)return;return t(V.event?V.event(e):e)}}}function Al(r,e,t,i,n,s,o,a,l,u){var c,d,m,f,b,x,E,S,F,I,T,M,L,B,z,X,Oe,ie=e.type;if(e.constructor!=null)return null;128&t.__u&&(l=!!(32&t.__u),s=[a=e.__e=t.__e]),(c=V.__b)&&c(e);e:if(typeof ie=="function")try{if(S=e.props,F="prototype"in ie&&ie.prototype.render,I=(c=ie.contextType)&&i[c.__c],T=c?I?I.props.value:c.__:i,t.__c?E=(d=e.__c=t.__c).__=d.__E:(F?e.__c=d=new ie(S,T):(e.__c=d=new ue(S,T),d.constructor=ie,d.render=$b),I&&I.sub(d),d.props=S,d.state||(d.state={}),d.context=T,d.__n=i,m=d.__d=!0,d.__h=[],d._sb=[]),F&&d.__s==null&&(d.__s=d.state),F&&ie.getDerivedStateFromProps!=null&&(d.__s==d.state&&(d.__s=yt({},d.__s)),yt(d.__s,ie.getDerivedStateFromProps(S,d.__s))),f=d.props,b=d.state,d.__v=e,m)F&&ie.getDerivedStateFromProps==null&&d.componentWillMount!=null&&d.componentWillMount(),F&&d.componentDidMount!=null&&d.__h.push(d.componentDidMount);else{if(F&&ie.getDerivedStateFromProps==null&&S!==f&&d.componentWillReceiveProps!=null&&d.componentWillReceiveProps(S,T),!d.__e&&d.shouldComponentUpdate!=null&&d.shouldComponentUpdate(S,d.__s,T)===!1||e.__v==t.__v){for(e.__v!=t.__v&&(d.props=S,d.state=d.__s,d.__d=!1),e.__e=t.__e,e.__k=t.__k,e.__k.some(function(de){de&&(de.__=e)}),M=0;M<d._sb.length;M++)d.__h.push(d._sb[M]);d._sb=[],d.__h.length&&o.push(d);break e}d.componentWillUpdate!=null&&d.componentWillUpdate(S,d.__s,T),F&&d.componentDidUpdate!=null&&d.__h.push(function(){d.componentDidUpdate(f,b,x)})}if(d.context=T,d.props=S,d.__P=r,d.__e=!1,L=V.__r,B=0,F){for(d.state=d.__s,d.__d=!1,L&&L(e),c=d.render(d.props,d.state,d.context),z=0;z<d._sb.length;z++)d.__h.push(d._sb[z]);d._sb=[]}else do d.__d=!1,L&&L(e),c=d.render(d.props,d.state,d.context),d.state=d.__s;while(d.__d&&++B<25);d.state=d.__s,d.getChildContext!=null&&(i=yt(yt({},i),d.getChildContext())),F&&!m&&d.getSnapshotBeforeUpdate!=null&&(x=d.getSnapshotBeforeUpdate(f,b)),X=c,c!=null&&c.type===Pe&&c.key==null&&(X=wp(c.props.children)),a=vp(r,In(X)?X:[X],e,t,i,n,s,o,a,l,u),d.base=e.__e,e.__u&=-161,d.__h.length&&o.push(d),E&&(d.__E=d.__=null)}catch(de){if(e.__v=null,l||s!=null)if(de.then){for(e.__u|=l?160:128;a&&a.nodeType==8&&a.nextSibling;)a=a.nextSibling;s[s.indexOf(a)]=null,e.__e=a}else for(Oe=s.length;Oe--;)Ol(s[Oe]);else e.__e=t.__e,e.__k=t.__k;V.__e(de,e,t)}else s==null&&e.__v==t.__v?(e.__k=t.__k,e.__e=t.__e):a=e.__e=zb(t.__e,e,t,i,n,s,o,l,u);return(c=V.diffed)&&c(e),128&e.__u?void 0:a}function _p(r,e,t){for(var i=0;i<t.length;i++)Rl(t[i],t[++i],t[++i]);V.__c&&V.__c(e,r),r.some(function(n){try{r=n.__h,n.__h=[],r.some(function(s){s.call(n)})}catch(s){V.__e(s,n.__v)}})}function wp(r){return typeof r!="object"||r==null||r.__b&&r.__b>0?r:In(r)?r.map(wp):yt({},r)}function zb(r,e,t,i,n,s,o,a,l){var u,c,d,m,f,b,x,E=t.props,S=e.props,F=e.type;if(F=="svg"?n="http://www.w3.org/2000/svg":F=="math"?n="http://www.w3.org/1998/Math/MathML":n||(n="http://www.w3.org/1999/xhtml"),s!=null){for(u=0;u<s.length;u++)if((f=s[u])&&"setAttribute"in f==!!F&&(F?f.localName==F:f.nodeType==3)){r=f,s[u]=null;break}}if(r==null){if(F==null)return document.createTextNode(S);r=document.createElementNS(n,F,S.is&&S),a&&(V.__m&&V.__m(e,s),a=!1),s=null}if(F==null)E===S||a&&r.data==S||(r.data=S);else{if(s=s&&Rn.call(r.childNodes),E=t.props||An,!a&&s!=null)for(E={},u=0;u<r.attributes.length;u++)E[(f=r.attributes[u]).name]=f.value;for(u in E)if(f=E[u],u!="children"){if(u=="dangerouslySetInnerHTML")d=f;else if(!(u in S)){if(u=="value"&&"defaultValue"in S||u=="checked"&&"defaultChecked"in S)continue;Eo(r,u,null,f,n)}}for(u in S)f=S[u],u=="children"?m=f:u=="dangerouslySetInnerHTML"?c=f:u=="value"?b=f:u=="checked"?x=f:a&&typeof f!="function"||E[u]===f||Eo(r,u,f,E[u],n);if(c)a||d&&(c.__html==d.__html||c.__html==r.innerHTML)||(r.innerHTML=c.__html),e.__k=[];else if(d&&(r.innerHTML=""),vp(e.type=="template"?r.content:r,In(m)?m:[m],e,t,i,F=="foreignObject"?"http://www.w3.org/1999/xhtml":n,s,o,s?s[0]:t.__k&&ti(t,0),a,l),s!=null)for(u=s.length;u--;)Ol(s[u]);a||(u="value",F=="progress"&&b==null?r.removeAttribute("value"):b!=null&&(b!==r[u]||F=="progress"&&!b||F=="option"&&b!=E[u])&&Eo(r,u,b,E[u],n),u="checked",x!=null&&x!=r[u]&&Eo(r,u,x,E[u],n))}return r}function Rl(r,e,t){try{if(typeof r=="function"){var i=typeof r.__u=="function";i&&r.__u(),i&&e==null||(r.__u=r(e))}else r.current=e}catch(n){V.__e(n,t)}}function Sp(r,e,t){var i,n;if(V.unmount&&V.unmount(r),(i=r.ref)&&(i.current&&i.current!=r.__e||Rl(i,null,e)),(i=r.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(s){V.__e(s,e)}i.base=i.__P=null}if(i=r.__k)for(n=0;n<i.length;n++)i[n]&&Sp(i[n],e,t||typeof r.type!="function");t||Ol(r.__e),r.__c=r.__=r.__e=void 0}function $b(r,e,t){return this.constructor(r,t)}function xp(r,e,t){var i,n,s,o;e==document&&(e=document.documentElement),V.__&&V.__(r,e),n=(i=typeof t=="function")?null:t&&t.__k||e.__k,s=[],o=[],Al(e,r=(!i&&t||e).__k=h(Pe,null,[r]),n||An,An,e.namespaceURI,!i&&t?[t]:n?null:e.firstChild?Rn.call(e.childNodes):null,s,!i&&t?t:n?n.__e:e.firstChild,i,o),_p(s,r,o)}function Un(r,e,t){var i,n,s,o,a=yt({},r.props);for(s in r.type&&r.type.defaultProps&&(o=r.type.defaultProps),e)s=="key"?i=e[s]:s=="ref"?n=e[s]:a[s]=e[s]===void 0&&o!=null?o[s]:e[s];return arguments.length>2&&(a.children=arguments.length>3?Rn.call(arguments,2):t),On(r.type,a,i||r.key,n||r.ref,null)}Rn=gp.slice,V={__e:function(r,e,t,i){for(var n,s,o;e=e.__;)if((n=e.__c)&&!n.__)try{if((s=n.constructor)&&s.getDerivedStateFromError!=null&&(n.setState(s.getDerivedStateFromError(r)),o=n.__d),n.componentDidCatch!=null&&(n.componentDidCatch(r,i||{}),o=n.__d),o)return n.__E=n}catch(a){r=a}throw r}},hp=0,Lb=function(r){return r!=null&&r.constructor==null},ue.prototype.setState=function(r,e){var t;t=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=yt({},this.state),typeof r=="function"&&(r=r(yt({},t),this.props)),r&&yt(t,r),r!=null&&this.__v&&(e&&this._sb.push(e),up(this))},ue.prototype.forceUpdate=function(r){this.__v&&(this.__e=!0,r&&this.__h.push(r),up(this))},ue.prototype.render=Pe,mr=[],fp=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,pp=function(r,e){return r.__v.__b-e.__v.__b},To.__r=0,mp=/(PointerCapture)$|Capture$/i,Fl=0,Tl=dp(!1),Cl=dp(!0),Bb=0;var Dn,ce,Il,Pp,Ln=0,Rp=[],fe=V,kp=fe.__b,Ep=fe.__r,Tp=fe.diffed,Cp=fe.__c,Fp=fe.unmount,Op=fe.__;function Dl(r,e){fe.__h&&fe.__h(ce,r,Ln||e),Ln=0;var t=ce.__H||(ce.__H={__:[],__h:[]});return r>=t.__.length&&t.__.push({}),t.__[r]}function rt(r){return Ln=1,Ip(Dp,r)}function Ip(r,e,t){var i=Dl(Dn++,2);if(i.t=r,!i.__c&&(i.__=[t?t(e):Dp(void 0,e),function(a){var l=i.__N?i.__N[0]:i.__[0],u=i.t(l,a);l!==u&&(i.__N=[u,i.__[1]],i.__c.setState({}))}],i.__c=ce,!ce.__f)){var n=function(a,l,u){if(!i.__c.__H)return!0;var c=i.__c.__H.__.filter(function(m){return!!m.__c});if(c.every(function(m){return!m.__N}))return!s||s.call(this,a,l,u);var d=i.__c.props!==a;return c.forEach(function(m){if(m.__N){var f=m.__[0];m.__=m.__N,m.__N=void 0,f!==m.__[0]&&(d=!0)}}),s&&s.call(this,a,l,u)||d};ce.__f=!0;var s=ce.shouldComponentUpdate,o=ce.componentWillUpdate;ce.componentWillUpdate=function(a,l,u){if(this.__e){var c=s;s=void 0,n(a,l,u),s=c}o&&o.call(this,a,l,u)},ce.shouldComponentUpdate=n}return i.__N||i.__}function lt(r,e){var t=Dl(Dn++,3);!fe.__s&&Up(t.__H,e)&&(t.__=r,t.u=e,ce.__H.__h.push(t))}function qt(r){return Ln=5,Ht(function(){return{current:r}},[])}function Ht(r,e){var t=Dl(Dn++,7);return Up(t.__H,e)&&(t.__=r(),t.__H=e,t.__h=r),t.__}function Vt(r,e){return Ln=8,Ht(function(){return r},e)}function qb(){for(var r;r=Rp.shift();)if(r.__P&&r.__H)try{r.__H.__h.forEach(Fo),r.__H.__h.forEach(Ul),r.__H.__h=[]}catch(e){r.__H.__h=[],fe.__e(e,r.__v)}}fe.__b=function(r){ce=null,kp&&kp(r)},fe.__=function(r,e){r&&e.__k&&e.__k.__m&&(r.__m=e.__k.__m),Op&&Op(r,e)},fe.__r=function(r){Ep&&Ep(r),Dn=0;var e=(ce=r.__c).__H;e&&(Il===ce?(e.__h=[],ce.__h=[],e.__.forEach(function(t){t.__N&&(t.__=t.__N),t.u=t.__N=void 0})):(e.__h.forEach(Fo),e.__h.forEach(Ul),e.__h=[],Dn=0)),Il=ce},fe.diffed=function(r){Tp&&Tp(r);var e=r.__c;e&&e.__H&&(e.__H.__h.length&&(Rp.push(e)!==1&&Pp===fe.requestAnimationFrame||((Pp=fe.requestAnimationFrame)||Hb)(qb)),e.__H.__.forEach(function(t){t.u&&(t.__H=t.u),t.u=void 0})),Il=ce=null},fe.__c=function(r,e){e.some(function(t){try{t.__h.forEach(Fo),t.__h=t.__h.filter(function(i){return!i.__||Ul(i)})}catch(i){e.some(function(n){n.__h&&(n.__h=[])}),e=[],fe.__e(i,t.__v)}}),Cp&&Cp(r,e)},fe.unmount=function(r){Fp&&Fp(r);var e,t=r.__c;t&&t.__H&&(t.__H.__.forEach(function(i){try{Fo(i)}catch(n){e=n}}),t.__H=void 0,e&&fe.__e(e,t.__v))};var Ap=typeof requestAnimationFrame=="function";function Hb(r){var e,t=function(){clearTimeout(i),Ap&&cancelAnimationFrame(e),setTimeout(r)},i=setTimeout(t,35);Ap&&(e=requestAnimationFrame(t))}function Fo(r){var e=ce,t=r.__c;typeof t=="function"&&(r.__c=void 0,t()),ce=e}function Ul(r){var e=ce;r.__c=r.__(),ce=e}function Up(r,e){return!r||r.length!==e.length||e.some(function(t,i){return t!==r[i]})}function Dp(r,e){return typeof e=="function"?e(r):e}function Wb(r,e){for(var t in e)r[t]=e[t];return r}function Lp(r,e){for(var t in r)if(t!=="__source"&&!(t in e))return!0;for(var i in e)if(i!=="__source"&&r[i]!==e[i])return!0;return!1}function Bp(r,e){this.props=r,this.context=e}(Bp.prototype=new ue).isPureReactComponent=!0,Bp.prototype.shouldComponentUpdate=function(r,e){return Lp(this.props,r)||Lp(this.state,e)};var Np=V.__b;V.__b=function(r){r.type&&r.type.__f&&r.ref&&(r.props.ref=r.ref,r.ref=null),Np&&Np(r)};var iC=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;var Gb=V.__e;V.__e=function(r,e,t,i){if(r.then){for(var n,s=e;s=s.__;)if((n=s.__c)&&n.__c)return e.__e==null&&(e.__e=t.__e,e.__k=t.__k),n.__c(r,e)}Gb(r,e,t,i)};var jp=V.unmount;function Vp(r,e,t){return r&&(r.__c&&r.__c.__H&&(r.__c.__H.__.forEach(function(i){typeof i.__c=="function"&&i.__c()}),r.__c.__H=null),(r=Wb({},r)).__c!=null&&(r.__c.__P===t&&(r.__c.__P=e),r.__c.__e=!0,r.__c=null),r.__k=r.__k&&r.__k.map(function(i){return Vp(i,e,t)})),r}function Wp(r,e,t){return r&&t&&(r.__v=null,r.__k=r.__k&&r.__k.map(function(i){return Wp(i,e,t)}),r.__c&&r.__c.__P===e&&(r.__e&&t.appendChild(r.__e),r.__c.__e=!0,r.__c.__P=t)),r}function Ll(){this.__u=0,this.o=null,this.__b=null}function Gp(r){var e=r.__.__c;return e&&e.__a&&e.__a(r)}function Oo(){this.i=null,this.l=null}V.unmount=function(r){var e=r.__c;e&&e.__R&&e.__R(),e&&32&r.__u&&(r.type=null),jp&&jp(r)},(Ll.prototype=new ue).__c=function(r,e){var t=e.__c,i=this;i.o==null&&(i.o=[]),i.o.push(t);var n=Gp(i.__v),s=!1,o=function(){s||(s=!0,t.__R=null,n?n(a):a())};t.__R=o;var a=function(){if(!--i.__u){if(i.state.__a){var l=i.state.__a;i.__v.__k[0]=Wp(l,l.__c.__P,l.__c.__O)}var u;for(i.setState({__a:i.__b=null});u=i.o.pop();)u.forceUpdate()}};i.__u++||32&e.__u||i.setState({__a:i.__b=i.__v.__k[0]}),r.then(o,o)},Ll.prototype.componentWillUnmount=function(){this.o=[]},Ll.prototype.render=function(r,e){if(this.__b){if(this.__v.__k){var t=document.createElement("div"),i=this.__v.__k[0].__c;this.__v.__k[0]=Vp(this.__b,t,i.__O=i.__P)}this.__b=null}var n=e.__a&&h(Pe,null,r.fallback);return n&&(n.__u&=-33),[h(Pe,null,e.__a?null:r.children),n]};var Mp=function(r,e,t){if(++t[1]===t[0]&&r.l.delete(e),r.props.revealOrder&&(r.props.revealOrder[0]!=="t"||!r.l.size))for(t=r.i;t;){for(;t.length>3;)t.pop()();if(t[1]<t[0])break;r.i=t=t[2]}};(Oo.prototype=new ue).__a=function(r){var e=this,t=Gp(e.__v),i=e.l.get(r);return i[0]++,function(n){var s=function(){e.props.revealOrder?(i.push(n),Mp(e,r,i)):n()};t?t(s):s()}},Oo.prototype.render=function(r){this.i=null,this.l=new Map;var e=ze(r.children);r.revealOrder&&r.revealOrder[0]==="b"&&e.reverse();for(var t=e.length;t--;)this.l.set(e[t],this.i=[1,0,this.i]);return r.children},Oo.prototype.componentDidUpdate=Oo.prototype.componentDidMount=function(){var r=this;this.l.forEach(function(e,t){Mp(r,t,e)})};var Kb=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,Jb=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,Xb=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,Yb=/[A-Z0-9]/g,Qb=typeof document<"u",Zb=function(r){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(r)};function Bl(r,e,t){return e.__k==null&&(e.textContent=""),xp(r,e),typeof t=="function"&&t(),r?r.__c:null}ue.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(r){Object.defineProperty(ue.prototype,r,{configurable:!0,get:function(){return this["UNSAFE_"+r]},set:function(e){Object.defineProperty(this,r,{configurable:!0,writable:!0,value:e})}})});var zp=V.event;function e_(){}function t_(){return this.cancelBubble}function r_(){return this.defaultPrevented}V.event=function(r){return zp&&(r=zp(r)),r.persist=e_,r.isPropagationStopped=t_,r.isDefaultPrevented=r_,r.nativeEvent=r};var Kp,i_={enumerable:!1,configurable:!0,get:function(){return this.class}},$p=V.vnode;V.vnode=function(r){typeof r.type=="string"&&function(e){var t=e.props,i=e.type,n={},s=i.indexOf("-")===-1;for(var o in t){var a=t[o];if(!(o==="value"&&"defaultValue"in t&&a==null||Qb&&o==="children"&&i==="noscript"||o==="class"||o==="className")){var l=o.toLowerCase();o==="defaultValue"&&"value"in t&&t.value==null?o="value":o==="download"&&a===!0?a="":l==="translate"&&a==="no"?a=!1:l[0]==="o"&&l[1]==="n"?l==="ondoubleclick"?o="ondblclick":l!=="onchange"||i!=="input"&&i!=="textarea"||Zb(t.type)?l==="onfocus"?o="onfocusin":l==="onblur"?o="onfocusout":Xb.test(o)&&(o=l):l=o="oninput":s&&Jb.test(o)?o=o.replace(Yb,"-$&").toLowerCase():a===null&&(a=void 0),l==="oninput"&&n[o=l]&&(o="oninputCapture"),n[o]=a}}i=="select"&&n.multiple&&Array.isArray(n.value)&&(n.value=ze(t.children).forEach(function(u){u.props.selected=n.value.indexOf(u.props.value)!=-1})),i=="select"&&n.defaultValue!=null&&(n.value=ze(t.children).forEach(function(u){u.props.selected=n.multiple?n.defaultValue.indexOf(u.props.value)!=-1:n.defaultValue==u.props.value})),t.class&&!t.className?(n.class=t.class,Object.defineProperty(n,"className",i_)):(t.className&&!t.class||t.class&&t.className)&&(n.class=n.className=t.className),e.props=n}(r),r.$$typeof=Kb,$p&&$p(r)};var qp=V.__r;V.__r=function(r){qp&&qp(r),Kp=r.__c};var Hp=V.diffed;V.diffed=function(r){Hp&&Hp(r);var e=r.props,t=r.__e;t!=null&&r.type==="textarea"&&"value"in e&&e.value!==t.value&&(t.value=e.value==null?"":e.value),Kp=null};function Bn(r){return typeof r!="object"||r===null||!("nodeType"in r)?!1:r.nodeType===Node.ELEMENT_NODE}function n_(r,e){return e===void 0&&(e=document),typeof r=="string"?e.querySelector(r):Bn(r)?r:null}var Jp=n_;function s_(r){for(var e;r&&!r.dir;)r=r.parentNode;return(e=r)==null?void 0:e.dir}var Ao=s_;var Ot=class{constructor(e,t){this.uppy=e,this.opts=t??{}}getPluginState(){let{plugins:e}=this.uppy.getState();return e?.[this.id]||{}}setPluginState(e){let{plugins:t}=this.uppy.getState();this.uppy.setState({plugins:j(v({},t),{[this.id]:v(v({},t[this.id]),e)})})}setOptions(e){this.opts=v(v({},this.opts),e),this.setPluginState(void 0),this.i18nInit()}i18nInit(){let e=new Zr([this.defaultLocale,this.uppy.locale,this.opts.locale]);this.i18n=e.translate.bind(e),this.i18nArray=e.translateArray.bind(e),this.setPluginState(void 0)}addTarget(e){throw new Error("Extend the addTarget method to add your plugin to another plugin's target")}install(){}uninstall(){}update(e){}afterUpdate(){}};function Xp(r,e){if(!{}.hasOwnProperty.call(r,e))throw new TypeError("attempted to use private field on non-instance");return r}var o_=0;function a_(r){return"__private_"+o_+++"_"+r}function l_(r){let e=null,t;return function(){for(var i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return t=n,e||(e=Promise.resolve().then(()=>(e=null,r(...t)))),e}}var Nn=a_("updateUI"),Nl=class r extends Ot{constructor(){super(...arguments),Object.defineProperty(this,Nn,{writable:!0,value:void 0})}getTargetPlugin(e){let t;if(typeof e?.addTarget=="function")t=e,t instanceof r||console.warn(new Error("The provided plugin is not an instance of UIPlugin. This is an indication of a bug with the way Uppy is bundled.",{cause:{targetPlugin:t,UIPlugin:r}}));else if(typeof e=="function"){let i=e;this.uppy.iteratePlugins(n=>{n instanceof i&&(t=n)})}return t}mount(e,t){let i=t.id,n=Jp(e);if(n){this.isTargetDOMEl=!0;let a=document.createElement("div");return a.classList.add("uppy-Root"),Xp(this,Nn)[Nn]=l_(l=>{this.uppy.getPlugin(this.id)&&(Bl(this.render(l,a),a),this.afterUpdate())}),this.uppy.log(`Installing ${i} to a DOM element '${e}'`),this.opts.replaceTargetContent&&(n.innerHTML=""),Bl(this.render(this.uppy.getState(),a),a),this.el=a,n.appendChild(a),a.dir=this.opts.direction||Ao(a)||"ltr",this.onMount(),this.el}let s=this.getTargetPlugin(e);if(s)return this.uppy.log(`Installing ${i} to ${s.id}`),this.parent=s,this.el=s.addTarget(t),this.onMount(),this.el;this.uppy.log(`Not installing ${i}`);let o=`Invalid target option given to ${i}.`;throw typeof e=="function"?o+=" The given target is not a Plugin class. Please check that you're not specifying a React Component instead of a plugin. If you are using @uppy/* packages directly, make sure you have only 1 version of @uppy/core installed: run `npm ls @uppy/core` on the command line and verify that all the versions match and are deduped correctly.":o+="If you meant to target an HTML element, please make sure that the element exists. Check that the <script> tag initializing Uppy is right before the closing </body> tag at the end of the page. (see https://github.com/transloadit/uppy/issues/1042)\n\nIf you meant to target a plugin, please confirm that your `import` statements or `require` calls are correct.",new Error(o)}render(e,t){throw new Error("Extend the render method to add your plugin to a DOM element")}update(e){if(this.el!=null){var t,i;(t=(i=Xp(this,Nn))[Nn])==null||t.call(i,e)}}unmount(){if(this.isTargetDOMEl){var e;(e=this.el)==null||e.remove()}this.onUnmount()}onMount(){}onUnmount(){}},At=Nl;function ri(r){"@babel/helpers - typeof";return ri=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ri(r)}function Yp(r,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,c_(i.key),i)}}function u_(r,e,t){return e&&Yp(r.prototype,e),t&&Yp(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function c_(r){var e=d_(r,"string");return ri(e)=="symbol"?e:e+""}function d_(r,e){if(ri(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var i=t.call(r,e||"default");if(ri(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function h_(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function f_(r,e,t){return e=Mn(e),p_(r,Ml()?Reflect.construct(e,t||[],Mn(r).constructor):e.apply(r,t))}function p_(r,e){if(e&&(ri(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return m_(r)}function m_(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function g_(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&jn(r,e)}function jl(r){var e=typeof Map=="function"?new Map:void 0;return jl=function(i){if(i===null||!v_(i))return i;if(typeof i!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(i))return e.get(i);e.set(i,n)}function n(){return y_(i,arguments,Mn(this).constructor)}return n.prototype=Object.create(i.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),jn(n,i)},jl(r)}function y_(r,e,t){if(Ml())return Reflect.construct.apply(null,arguments);var i=[null];i.push.apply(i,e);var n=new(r.bind.apply(r,i));return t&&jn(n,t.prototype),n}function Ml(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ml=function(){return!!r})()}function v_(r){try{return Function.toString.call(r).indexOf("[native code]")!==-1}catch{return typeof r=="function"}}function jn(r,e){return jn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},jn(r,e)}function Mn(r){return Mn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Mn(r)}var b_=function(r){function e(t){var i,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;if(h_(this,e),i=f_(this,e,[t]),i.originalRequest=s,i.originalResponse=o,i.causingError=n,n!=null&&(t+=", caused by ".concat(n.toString())),s!=null){var a=s.getHeader("X-Request-ID")||"n/a",l=s.getMethod(),u=s.getURL(),c=o?o.getStatus():"n/a",d=o?o.getBody()||"":"n/a";t+=", originated from request (method: ".concat(l,", url: ").concat(u,", response code: ").concat(c,", response text: ").concat(d,", request id: ").concat(a,")")}return i.message=t,i}return g_(e,r),u_(e)}(jl(Error)),ii=b_;var __=!1;function Wt(r){__&&console.log(r)}function zn(r){"@babel/helpers - typeof";return zn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zn(r)}function w_(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function Qp(r,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,x_(i.key),i)}}function S_(r,e,t){return e&&Qp(r.prototype,e),t&&Qp(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function x_(r){var e=P_(r,"string");return zn(e)=="symbol"?e:e+""}function P_(r,e){if(zn(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var i=t.call(r,e||"default");if(zn(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var Zp=function(){function r(){w_(this,r)}return S_(r,[{key:"listAllUploads",value:function(){return Promise.resolve([])}},{key:"findUploadsByFingerprint",value:function(t){return Promise.resolve([])}},{key:"removeUpload",value:function(t){return Promise.resolve()}},{key:"addUpload",value:function(t,i){return Promise.resolve(null)}}])}();var sm="3.7.7",k_=sm,si=typeof Buffer=="function",em=typeof TextDecoder=="function"?new TextDecoder:void 0,tm=typeof TextEncoder=="function"?new TextEncoder:void 0,E_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",$n=Array.prototype.slice.call(E_),Ro=(r=>{let e={};return r.forEach((t,i)=>e[t]=i),e})($n),T_=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,ke=String.fromCharCode.bind(String),rm=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):r=>new Uint8Array(Array.prototype.slice.call(r,0)),om=r=>r.replace(/=/g,"").replace(/[+\/]/g,e=>e=="+"?"-":"_"),am=r=>r.replace(/[^A-Za-z0-9\+\/]/g,""),lm=r=>{let e,t,i,n,s="",o=r.length%3;for(let a=0;a<r.length;){if((t=r.charCodeAt(a++))>255||(i=r.charCodeAt(a++))>255||(n=r.charCodeAt(a++))>255)throw new TypeError("invalid character found");e=t<<16|i<<8|n,s+=$n[e>>18&63]+$n[e>>12&63]+$n[e>>6&63]+$n[e&63]}return o?s.slice(0,o-3)+"===".substring(o):s},ql=typeof btoa=="function"?r=>btoa(r):si?r=>Buffer.from(r,"binary").toString("base64"):lm,zl=si?r=>Buffer.from(r).toString("base64"):r=>{let t=[];for(let i=0,n=r.length;i<n;i+=4096)t.push(ke.apply(null,r.subarray(i,i+4096)));return ql(t.join(""))},Io=(r,e=!1)=>e?om(zl(r)):zl(r),C_=r=>{if(r.length<2){var e=r.charCodeAt(0);return e<128?r:e<2048?ke(192|e>>>6)+ke(128|e&63):ke(224|e>>>12&15)+ke(128|e>>>6&63)+ke(128|e&63)}else{var e=65536+(r.charCodeAt(0)-55296)*1024+(r.charCodeAt(1)-56320);return ke(240|e>>>18&7)+ke(128|e>>>12&63)+ke(128|e>>>6&63)+ke(128|e&63)}},F_=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,um=r=>r.replace(F_,C_),im=si?r=>Buffer.from(r,"utf8").toString("base64"):tm?r=>zl(tm.encode(r)):r=>ql(um(r)),ni=(r,e=!1)=>e?om(im(r)):im(r),nm=r=>ni(r,!0),O_=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,A_=r=>{switch(r.length){case 4:var e=(7&r.charCodeAt(0))<<18|(63&r.charCodeAt(1))<<12|(63&r.charCodeAt(2))<<6|63&r.charCodeAt(3),t=e-65536;return ke((t>>>10)+55296)+ke((t&1023)+56320);case 3:return ke((15&r.charCodeAt(0))<<12|(63&r.charCodeAt(1))<<6|63&r.charCodeAt(2));default:return ke((31&r.charCodeAt(0))<<6|63&r.charCodeAt(1))}},cm=r=>r.replace(O_,A_),dm=r=>{if(r=r.replace(/\s+/g,""),!T_.test(r))throw new TypeError("malformed base64.");r+="==".slice(2-(r.length&3));let e,t="",i,n;for(let s=0;s<r.length;)e=Ro[r.charAt(s++)]<<18|Ro[r.charAt(s++)]<<12|(i=Ro[r.charAt(s++)])<<6|(n=Ro[r.charAt(s++)]),t+=i===64?ke(e>>16&255):n===64?ke(e>>16&255,e>>8&255):ke(e>>16&255,e>>8&255,e&255);return t},Hl=typeof atob=="function"?r=>atob(am(r)):si?r=>Buffer.from(r,"base64").toString("binary"):dm,hm=si?r=>rm(Buffer.from(r,"base64")):r=>rm(Hl(r).split("").map(e=>e.charCodeAt(0))),fm=r=>hm(pm(r)),R_=si?r=>Buffer.from(r,"base64").toString("utf8"):em?r=>em.decode(hm(r)):r=>cm(Hl(r)),pm=r=>am(r.replace(/[-_]/g,e=>e=="-"?"+":"/")),$l=r=>R_(pm(r)),I_=r=>{if(typeof r!="string")return!1;let e=r.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(e)||!/[^\s0-9a-zA-Z\-_]/.test(e)},mm=r=>({value:r,enumerable:!1,writable:!0,configurable:!0}),gm=function(){let r=(e,t)=>Object.defineProperty(String.prototype,e,mm(t));r("fromBase64",function(){return $l(this)}),r("toBase64",function(e){return ni(this,e)}),r("toBase64URI",function(){return ni(this,!0)}),r("toBase64URL",function(){return ni(this,!0)}),r("toUint8Array",function(){return fm(this)})},ym=function(){let r=(e,t)=>Object.defineProperty(Uint8Array.prototype,e,mm(t));r("toBase64",function(e){return Io(this,e)}),r("toBase64URI",function(){return Io(this,!0)}),r("toBase64URL",function(){return Io(this,!0)})},U_=()=>{gm(),ym()},vm={version:sm,VERSION:k_,atob:Hl,atobPolyfill:dm,btoa:ql,btoaPolyfill:lm,fromBase64:$l,toBase64:ni,encode:ni,encodeURI:nm,encodeURL:nm,utob:um,btou:cm,decode:$l,isValid:I_,fromUint8Array:Io,toUint8Array:fm,extendString:gm,extendUint8Array:ym,extendBuiltins:U_};var Hm=re(Am());function Kl(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){var e=Math.random()*16|0,t=r==="x"?e:e&3|8;return t.toString(16)})}function Jl(){"use strict";Jl=function(){return e};var r,e={},t=Object.prototype,i=t.hasOwnProperty,n=Object.defineProperty||function(_,g,y){_[g]=y.value},s=typeof Symbol=="function"?Symbol:{},o=s.iterator||"@@iterator",a=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function u(_,g,y){return Object.defineProperty(_,g,{value:y,enumerable:!0,configurable:!0,writable:!0}),_[g]}try{u({},"")}catch{u=function(y,O,R){return y[O]=R}}function c(_,g,y,O){var R=g&&g.prototype instanceof S?g:S,A=Object.create(R.prototype),k=new qe(O||[]);return n(A,"_invoke",{value:Oe(_,y,k)}),A}function d(_,g,y){try{return{type:"normal",arg:_.call(g,y)}}catch(O){return{type:"throw",arg:O}}}e.wrap=c;var m="suspendedStart",f="suspendedYield",b="executing",x="completed",E={};function S(){}function F(){}function I(){}var T={};u(T,o,function(){return this});var M=Object.getPrototypeOf,L=M&&M(M(nt([])));L&&L!==t&&i.call(L,o)&&(T=L);var B=I.prototype=S.prototype=Object.create(T);function z(_){["next","throw","return"].forEach(function(g){u(_,g,function(y){return this._invoke(g,y)})})}function X(_,g){function y(R,A,k,w){var P=d(_[R],_,A);if(P.type!=="throw"){var C=P.arg,D=C.value;return D&&gr(D)=="object"&&i.call(D,"__await")?g.resolve(D.__await).then(function(N){y("next",N,k,w)},function(N){y("throw",N,k,w)}):g.resolve(D).then(function(N){C.value=N,k(C)},function(N){return y("throw",N,k,w)})}w(P.arg)}var O;n(this,"_invoke",{value:function(A,k){function w(){return new g(function(P,C){y(A,k,P,C)})}return O=O?O.then(w,w):w()}})}function Oe(_,g,y){var O=m;return function(R,A){if(O===b)throw Error("Generator is already running");if(O===x){if(R==="throw")throw A;return{value:r,done:!0}}for(y.method=R,y.arg=A;;){var k=y.delegate;if(k){var w=ie(k,y);if(w){if(w===E)continue;return w}}if(y.method==="next")y.sent=y._sent=y.arg;else if(y.method==="throw"){if(O===m)throw O=x,y.arg;y.dispatchException(y.arg)}else y.method==="return"&&y.abrupt("return",y.arg);O=b;var P=d(_,g,y);if(P.type==="normal"){if(O=y.done?x:f,P.arg===E)continue;return{value:P.arg,done:y.done}}P.type==="throw"&&(O=x,y.method="throw",y.arg=P.arg)}}}function ie(_,g){var y=g.method,O=_.iterator[y];if(O===r)return g.delegate=null,y==="throw"&&_.iterator.return&&(g.method="return",g.arg=r,ie(_,g),g.method==="throw")||y!=="return"&&(g.method="throw",g.arg=new TypeError("The iterator does not provide a '"+y+"' method")),E;var R=d(O,_.iterator,g.arg);if(R.type==="throw")return g.method="throw",g.arg=R.arg,g.delegate=null,E;var A=R.arg;return A?A.done?(g[_.resultName]=A.value,g.next=_.nextLoc,g.method!=="return"&&(g.method="next",g.arg=r),g.delegate=null,E):A:(g.method="throw",g.arg=new TypeError("iterator result is not an object"),g.delegate=null,E)}function de(_){var g={tryLoc:_[0]};1 in _&&(g.catchLoc=_[1]),2 in _&&(g.finallyLoc=_[2],g.afterLoc=_[3]),this.tryEntries.push(g)}function ve(_){var g=_.completion||{};g.type="normal",delete g.arg,_.completion=g}function qe(_){this.tryEntries=[{tryLoc:"root"}],_.forEach(de,this),this.reset(!0)}function nt(_){if(_||_===""){var g=_[o];if(g)return g.call(_);if(typeof _.next=="function")return _;if(!isNaN(_.length)){var y=-1,O=function R(){for(;++y<_.length;)if(i.call(_,y))return R.value=_[y],R.done=!1,R;return R.value=r,R.done=!0,R};return O.next=O}}throw new TypeError(gr(_)+" is not iterable")}return F.prototype=I,n(B,"constructor",{value:I,configurable:!0}),n(I,"constructor",{value:F,configurable:!0}),F.displayName=u(I,l,"GeneratorFunction"),e.isGeneratorFunction=function(_){var g=typeof _=="function"&&_.constructor;return!!g&&(g===F||(g.displayName||g.name)==="GeneratorFunction")},e.mark=function(_){return Object.setPrototypeOf?Object.setPrototypeOf(_,I):(_.__proto__=I,u(_,l,"GeneratorFunction")),_.prototype=Object.create(B),_},e.awrap=function(_){return{__await:_}},z(X.prototype),u(X.prototype,a,function(){return this}),e.AsyncIterator=X,e.async=function(_,g,y,O,R){R===void 0&&(R=Promise);var A=new X(c(_,g,y,O),R);return e.isGeneratorFunction(g)?A:A.next().then(function(k){return k.done?k.value:A.next()})},z(B),u(B,l,"Generator"),u(B,o,function(){return this}),u(B,"toString",function(){return"[object Generator]"}),e.keys=function(_){var g=Object(_),y=[];for(var O in g)y.push(O);return y.reverse(),function R(){for(;y.length;){var A=y.pop();if(A in g)return R.value=A,R.done=!1,R}return R.done=!0,R}},e.values=nt,qe.prototype={constructor:qe,reset:function(g){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(ve),!g)for(var y in this)y.charAt(0)==="t"&&i.call(this,y)&&!isNaN(+y.slice(1))&&(this[y]=r)},stop:function(){this.done=!0;var g=this.tryEntries[0].completion;if(g.type==="throw")throw g.arg;return this.rval},dispatchException:function(g){if(this.done)throw g;var y=this;function O(C,D){return k.type="throw",k.arg=g,y.next=C,D&&(y.method="next",y.arg=r),!!D}for(var R=this.tryEntries.length-1;R>=0;--R){var A=this.tryEntries[R],k=A.completion;if(A.tryLoc==="root")return O("end");if(A.tryLoc<=this.prev){var w=i.call(A,"catchLoc"),P=i.call(A,"finallyLoc");if(w&&P){if(this.prev<A.catchLoc)return O(A.catchLoc,!0);if(this.prev<A.finallyLoc)return O(A.finallyLoc)}else if(w){if(this.prev<A.catchLoc)return O(A.catchLoc,!0)}else{if(!P)throw Error("try statement without catch or finally");if(this.prev<A.finallyLoc)return O(A.finallyLoc)}}}},abrupt:function(g,y){for(var O=this.tryEntries.length-1;O>=0;--O){var R=this.tryEntries[O];if(R.tryLoc<=this.prev&&i.call(R,"finallyLoc")&&this.prev<R.finallyLoc){var A=R;break}}A&&(g==="break"||g==="continue")&&A.tryLoc<=y&&y<=A.finallyLoc&&(A=null);var k=A?A.completion:{};return k.type=g,k.arg=y,A?(this.method="next",this.next=A.finallyLoc,E):this.complete(k)},complete:function(g,y){if(g.type==="throw")throw g.arg;return g.type==="break"||g.type==="continue"?this.next=g.arg:g.type==="return"?(this.rval=this.arg=g.arg,this.method="return",this.next="end"):g.type==="normal"&&y&&(this.next=y),E},finish:function(g){for(var y=this.tryEntries.length-1;y>=0;--y){var O=this.tryEntries[y];if(O.finallyLoc===g)return this.complete(O.completion,O.afterLoc),ve(O),E}},catch:function(g){for(var y=this.tryEntries.length-1;y>=0;--y){var O=this.tryEntries[y];if(O.tryLoc===g){var R=O.completion;if(R.type==="throw"){var A=R.arg;ve(O)}return A}}throw Error("illegal catch attempt")},delegateYield:function(g,y,O){return this.delegate={iterator:nt(g),resultName:y,nextLoc:O},this.method==="next"&&(this.arg=r),E}},e}function Rm(r,e,t,i,n,s,o){try{var a=r[s](o),l=a.value}catch(u){t(u);return}a.done?e(l):Promise.resolve(l).then(i,n)}function W_(r){return function(){var e=this,t=arguments;return new Promise(function(i,n){var s=r.apply(e,t);function o(l){Rm(s,i,n,o,a,"next",l)}function a(l){Rm(s,i,n,o,a,"throw",l)}o(void 0)})}}function zm(r,e){return J_(r)||K_(r,e)||$m(r,e)||G_()}function G_(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function K_(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var i,n,s,o,a=[],l=!0,u=!1;try{if(s=(t=t.call(r)).next,e===0){if(Object(t)!==t)return;l=!1}else for(;!(l=(i=s.call(t)).done)&&(a.push(i.value),a.length!==e);l=!0);}catch(c){u=!0,n=c}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(u)throw n}}return a}}function J_(r){if(Array.isArray(r))return r}function gr(r){"@babel/helpers - typeof";return gr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gr(r)}function X_(r,e){var t=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=$m(r))||e&&r&&typeof r.length=="number"){t&&(r=t);var i=0,n=function(){};return{s:n,n:function(){return i>=r.length?{done:!0}:{done:!1,value:r[i++]}},e:function(u){throw u},f:n}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,a;return{s:function(){t=t.call(r)},n:function(){var u=t.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&t.return!=null&&t.return()}finally{if(o)throw a}}}}function $m(r,e){if(r){if(typeof r=="string")return Im(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Im(r,e)}}function Im(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=r[t];return i}function Um(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable})),t.push.apply(t,i)}return t}function oi(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Um(Object(t),!0).forEach(function(i){Y_(r,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Um(Object(t)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(t,i))})}return r}function Y_(r,e,t){return e=qm(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Q_(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function Dm(r,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,qm(i.key),i)}}function Z_(r,e,t){return e&&Dm(r.prototype,e),t&&Dm(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function qm(r){var e=ew(r,"string");return gr(e)=="symbol"?e:e+""}function ew(r,e){if(gr(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var i=t.call(r,e||"default");if(gr(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var Do="tus-v1",Lo="ietf-draft-03",qn="ietf-draft-05",tw={endpoint:null,uploadUrl:null,metadata:{},metadataForPartialUploads:{},fingerprint:null,uploadSize:null,onProgress:null,onChunkComplete:null,onSuccess:null,onError:null,onUploadUrlAvailable:null,overridePatchMethod:!1,headers:{},addRequestId:!1,onBeforeRequest:null,onAfterResponse:null,onShouldRetry:Wm,chunkSize:Number.POSITIVE_INFINITY,retryDelays:[0,1e3,3e3,5e3],parallelUploads:1,parallelUploadBoundaries:null,storeFingerprintForResuming:!0,removeFingerprintOnSuccess:!1,uploadLengthDeferred:!1,uploadDataDuringCreation:!1,urlStorage:null,fileReader:null,httpStack:null,protocol:Do},Vm=function(){function r(e,t){Q_(this,r),"resume"in t&&console.log("tus: The `resume` option has been removed in tus-js-client v2. Please use the URL storage API instead."),this.options=t,this.options.chunkSize=Number(this.options.chunkSize),this._urlStorage=this.options.urlStorage,this.file=e,this.url=null,this._req=null,this._fingerprint=null,this._urlStorageKey=null,this._offset=null,this._aborted=!1,this._size=null,this._source=null,this._retryAttempt=0,this._retryTimeout=null,this._offsetBeforeRetry=0,this._parallelUploads=null,this._parallelUploadUrls=null}return Z_(r,[{key:"findPreviousUploads",value:function(){var t=this;return this.options.fingerprint(this.file,this.options).then(function(i){return t._urlStorage.findUploadsByFingerprint(i)})}},{key:"resumeFromPreviousUpload",value:function(t){this.url=t.uploadUrl||null,this._parallelUploadUrls=t.parallelUploadUrls||null,this._urlStorageKey=t.urlStorageKey}},{key:"start",value:function(){var t=this,i=this.file;if(!i){this._emitError(new Error("tus: no file or stream to upload provided"));return}if(![Do,Lo,qn].includes(this.options.protocol)){this._emitError(new Error("tus: unsupported protocol ".concat(this.options.protocol)));return}if(!this.options.endpoint&&!this.options.uploadUrl&&!this.url){this._emitError(new Error("tus: neither an endpoint or an upload URL is provided"));return}var n=this.options.retryDelays;if(n!=null&&Object.prototype.toString.call(n)!=="[object Array]"){this._emitError(new Error("tus: the `retryDelays` option must either be an array or null"));return}if(this.options.parallelUploads>1)for(var s=0,o=["uploadUrl","uploadSize","uploadLengthDeferred"];s<o.length;s++){var a=o[s];if(this.options[a]){this._emitError(new Error("tus: cannot use the ".concat(a," option when parallelUploads is enabled")));return}}if(this.options.parallelUploadBoundaries){if(this.options.parallelUploads<=1){this._emitError(new Error("tus: cannot use the `parallelUploadBoundaries` option when `parallelUploads` is disabled"));return}if(this.options.parallelUploads!==this.options.parallelUploadBoundaries.length){this._emitError(new Error("tus: the `parallelUploadBoundaries` must have the same length as the value of `parallelUploads`"));return}}this.options.fingerprint(i,this.options).then(function(l){return l==null?Wt("No fingerprint was calculated meaning that the upload cannot be stored in the URL storage."):Wt("Calculated fingerprint: ".concat(l)),t._fingerprint=l,t._source?t._source:t.options.fileReader.openFile(i,t.options.chunkSize)}).then(function(l){if(t._source=l,t.options.uploadLengthDeferred)t._size=null;else if(t.options.uploadSize!=null){if(t._size=Number(t.options.uploadSize),Number.isNaN(t._size)){t._emitError(new Error("tus: cannot convert `uploadSize` option into a number"));return}}else if(t._size=t._source.size,t._size==null){t._emitError(new Error("tus: cannot automatically derive upload's size from input. Specify it manually using the `uploadSize` option or use the `uploadLengthDeferred` option"));return}t.options.parallelUploads>1||t._parallelUploadUrls!=null?t._startParallelUpload():t._startSingleUpload()}).catch(function(l){t._emitError(l)})}},{key:"_startParallelUpload",value:function(){var t,i=this,n=this._size,s=0;this._parallelUploads=[];var o=this._parallelUploadUrls!=null?this._parallelUploadUrls.length:this.options.parallelUploads,a=(t=this.options.parallelUploadBoundaries)!==null&&t!==void 0?t:iw(this._source.size,o);this._parallelUploadUrls&&a.forEach(function(c,d){c.uploadUrl=i._parallelUploadUrls[d]||null}),this._parallelUploadUrls=new Array(a.length);var l=a.map(function(c,d){var m=0;return i._source.slice(c.start,c.end).then(function(f){var b=f.value;return new Promise(function(x,E){var S=oi(oi({},i.options),{},{uploadUrl:c.uploadUrl||null,storeFingerprintForResuming:!1,removeFingerprintOnSuccess:!1,parallelUploads:1,parallelUploadBoundaries:null,metadata:i.options.metadataForPartialUploads,headers:oi(oi({},i.options.headers),{},{"Upload-Concat":"partial"}),onSuccess:x,onError:E,onProgress:function(T){s=s-m+T,m=T,i._emitProgress(s,n)},onUploadUrlAvailable:function(){i._parallelUploadUrls[d]=F.url,i._parallelUploadUrls.filter(function(T){return!!T}).length===a.length&&i._saveUploadInUrlStorage()}}),F=new r(b,S);F.start(),i._parallelUploads.push(F)})})}),u;Promise.all(l).then(function(){u=i._openRequest("POST",i.options.endpoint),u.setHeader("Upload-Concat","final;".concat(i._parallelUploadUrls.join(" ")));var c=Lm(i.options.metadata);return c!==""&&u.setHeader("Upload-Metadata",c),i._sendRequest(u,null)}).then(function(c){if(!ai(c.getStatus(),200)){i._emitHttpError(u,c,"tus: unexpected response while creating upload");return}var d=c.getHeader("Location");if(d==null){i._emitHttpError(u,c,"tus: invalid or missing Location header");return}i.url=Mm(i.options.endpoint,d),Wt("Created upload at ".concat(i.url)),i._emitSuccess(c)}).catch(function(c){i._emitError(c)})}},{key:"_startSingleUpload",value:function(){if(this._aborted=!1,this.url!=null){Wt("Resuming upload from previous URL: ".concat(this.url)),this._resumeUpload();return}if(this.options.uploadUrl!=null){Wt("Resuming upload from provided URL: ".concat(this.options.uploadUrl)),this.url=this.options.uploadUrl,this._resumeUpload();return}Wt("Creating a new upload"),this._createUpload()}},{key:"abort",value:function(t){var i=this;if(this._parallelUploads!=null){var n=X_(this._parallelUploads),s;try{for(n.s();!(s=n.n()).done;){var o=s.value;o.abort(t)}}catch(a){n.e(a)}finally{n.f()}}return this._req!==null&&this._req.abort(),this._aborted=!0,this._retryTimeout!=null&&(clearTimeout(this._retryTimeout),this._retryTimeout=null),!t||this.url==null?Promise.resolve():r.terminate(this.url,this.options).then(function(){return i._removeFromUrlStorage()})}},{key:"_emitHttpError",value:function(t,i,n,s){this._emitError(new ii(n,s,t,i))}},{key:"_emitError",value:function(t){var i=this;if(!this._aborted){if(this.options.retryDelays!=null){var n=this._offset!=null&&this._offset>this._offsetBeforeRetry;if(n&&(this._retryAttempt=0),jm(t,this._retryAttempt,this.options)){var s=this.options.retryDelays[this._retryAttempt++];this._offsetBeforeRetry=this._offset,this._retryTimeout=setTimeout(function(){i.start()},s);return}}if(typeof this.options.onError=="function")this.options.onError(t);else throw t}}},{key:"_emitSuccess",value:function(t){this.options.removeFingerprintOnSuccess&&this._removeFromUrlStorage(),typeof this.options.onSuccess=="function"&&this.options.onSuccess({lastResponse:t})}},{key:"_emitProgress",value:function(t,i){typeof this.options.onProgress=="function"&&this.options.onProgress(t,i)}},{key:"_emitChunkComplete",value:function(t,i,n){typeof this.options.onChunkComplete=="function"&&this.options.onChunkComplete(t,i,n)}},{key:"_createUpload",value:function(){var t=this;if(!this.options.endpoint){this._emitError(new Error("tus: unable to create upload because no endpoint is provided"));return}var i=this._openRequest("POST",this.options.endpoint);this.options.uploadLengthDeferred?i.setHeader("Upload-Defer-Length","1"):i.setHeader("Upload-Length","".concat(this._size));var n=Lm(this.options.metadata);n!==""&&i.setHeader("Upload-Metadata",n);var s;this.options.uploadDataDuringCreation&&!this.options.uploadLengthDeferred?(this._offset=0,s=this._addChunkToRequest(i)):((this.options.protocol===Lo||this.options.protocol===qn)&&i.setHeader("Upload-Complete","?0"),s=this._sendRequest(i,null)),s.then(function(o){if(!ai(o.getStatus(),200)){t._emitHttpError(i,o,"tus: unexpected response while creating upload");return}var a=o.getHeader("Location");if(a==null){t._emitHttpError(i,o,"tus: invalid or missing Location header");return}if(t.url=Mm(t.options.endpoint,a),Wt("Created upload at ".concat(t.url)),typeof t.options.onUploadUrlAvailable=="function"&&t.options.onUploadUrlAvailable(),t._size===0){t._emitSuccess(o),t._source.close();return}t._saveUploadInUrlStorage().then(function(){t.options.uploadDataDuringCreation?t._handleUploadResponse(i,o):(t._offset=0,t._performUpload())})}).catch(function(o){t._emitHttpError(i,null,"tus: failed to create upload",o)})}},{key:"_resumeUpload",value:function(){var t=this,i=this._openRequest("HEAD",this.url),n=this._sendRequest(i,null);n.then(function(s){var o=s.getStatus();if(!ai(o,200)){if(o===423){t._emitHttpError(i,s,"tus: upload is currently locked; retry later");return}if(ai(o,400)&&t._removeFromUrlStorage(),!t.options.endpoint){t._emitHttpError(i,s,"tus: unable to resume upload (new upload cannot be created without an endpoint)");return}t.url=null,t._createUpload();return}var a=Number.parseInt(s.getHeader("Upload-Offset"),10);if(Number.isNaN(a)){t._emitHttpError(i,s,"tus: invalid or missing offset value");return}var l=Number.parseInt(s.getHeader("Upload-Length"),10);if(Number.isNaN(l)&&!t.options.uploadLengthDeferred&&t.options.protocol===Do){t._emitHttpError(i,s,"tus: invalid or missing length value");return}typeof t.options.onUploadUrlAvailable=="function"&&t.options.onUploadUrlAvailable(),t._saveUploadInUrlStorage().then(function(){if(a===l){t._emitProgress(l,l),t._emitSuccess(s);return}t._offset=a,t._performUpload()})}).catch(function(s){t._emitHttpError(i,null,"tus: failed to resume upload",s)})}},{key:"_performUpload",value:function(){var t=this;if(!this._aborted){var i;this.options.overridePatchMethod?(i=this._openRequest("POST",this.url),i.setHeader("X-HTTP-Method-Override","PATCH")):i=this._openRequest("PATCH",this.url),i.setHeader("Upload-Offset","".concat(this._offset));var n=this._addChunkToRequest(i);n.then(function(s){if(!ai(s.getStatus(),200)){t._emitHttpError(i,s,"tus: unexpected response while uploading chunk");return}t._handleUploadResponse(i,s)}).catch(function(s){t._aborted||t._emitHttpError(i,null,"tus: failed to upload chunk at offset ".concat(t._offset),s)})}}},{key:"_addChunkToRequest",value:function(t){var i=this,n=this._offset,s=this._offset+this.options.chunkSize;return t.setProgressHandler(function(o){i._emitProgress(n+o,i._size)}),this.options.protocol===Do?t.setHeader("Content-Type","application/offset+octet-stream"):this.options.protocol===qn&&t.setHeader("Content-Type","application/partial-upload"),(s===Number.POSITIVE_INFINITY||s>this._size)&&!this.options.uploadLengthDeferred&&(s=this._size),this._source.slice(n,s).then(function(o){var a=o.value,l=o.done,u=a!=null&&a.size?a.size:0;i.options.uploadLengthDeferred&&l&&(i._size=i._offset+u,t.setHeader("Upload-Length","".concat(i._size)));var c=i._offset+u;return!i.options.uploadLengthDeferred&&l&&c!==i._size?Promise.reject(new Error("upload was configured with a size of ".concat(i._size," bytes, but the source is done after ").concat(c," bytes"))):a===null?i._sendRequest(t):((i.options.protocol===Lo||i.options.protocol===qn)&&t.setHeader("Upload-Complete",l?"?1":"?0"),i._emitProgress(i._offset,i._size),i._sendRequest(t,a))})}},{key:"_handleUploadResponse",value:function(t,i){var n=Number.parseInt(i.getHeader("Upload-Offset"),10);if(Number.isNaN(n)){this._emitHttpError(t,i,"tus: invalid or missing offset value");return}if(this._emitProgress(n,this._size),this._emitChunkComplete(n-this._offset,n,this._size),this._offset=n,n===this._size){this._emitSuccess(i),this._source.close();return}this._performUpload()}},{key:"_openRequest",value:function(t,i){var n=Bm(t,i,this.options);return this._req=n,n}},{key:"_removeFromUrlStorage",value:function(){var t=this;this._urlStorageKey&&(this._urlStorage.removeUpload(this._urlStorageKey).catch(function(i){t._emitError(i)}),this._urlStorageKey=null)}},{key:"_saveUploadInUrlStorage",value:function(){var t=this;if(!this.options.storeFingerprintForResuming||!this._fingerprint||this._urlStorageKey!==null)return Promise.resolve();var i={size:this._size,metadata:this.options.metadata,creationTime:new Date().toString()};return this._parallelUploads?i.parallelUploadUrls=this._parallelUploadUrls:i.uploadUrl=this.url,this._urlStorage.addUpload(this._fingerprint,i).then(function(n){t._urlStorageKey=n})}},{key:"_sendRequest",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return Nm(t,i,this.options)}}],[{key:"terminate",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=Bm("DELETE",t,i);return Nm(n,null,i).then(function(s){if(s.getStatus()!==204)throw new ii("tus: unexpected response while terminating upload",null,n,s)}).catch(function(s){if(s instanceof ii||(s=new ii("tus: failed to terminate upload",s,n,null)),!jm(s,0,i))throw s;var o=i.retryDelays[0],a=i.retryDelays.slice(1),l=oi(oi({},i),{},{retryDelays:a});return new Promise(function(u){return setTimeout(u,o)}).then(function(){return r.terminate(t,l)})})}}])}();function Lm(r){return Object.entries(r).map(function(e){var t=zm(e,2),i=t[0],n=t[1];return"".concat(i," ").concat(vm.encode(String(n)))}).join(",")}function ai(r,e){return r>=e&&r<e+100}function Bm(r,e,t){var i=t.httpStack.createRequest(r,e);t.protocol===Lo?i.setHeader("Upload-Draft-Interop-Version","5"):t.protocol===qn?i.setHeader("Upload-Draft-Interop-Version","6"):i.setHeader("Tus-Resumable","1.0.0");for(var n=t.headers||{},s=0,o=Object.entries(n);s<o.length;s++){var a=zm(o[s],2),l=a[0],u=a[1];i.setHeader(l,u)}if(t.addRequestId){var c=Kl();i.setHeader("X-Request-ID",c)}return i}function Nm(r,e,t){return Xl.apply(this,arguments)}function Xl(){return Xl=W_(Jl().mark(function r(e,t,i){var n;return Jl().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(typeof i.onBeforeRequest!="function"){o.next=3;break}return o.next=3,i.onBeforeRequest(e);case 3:return o.next=5,e.send(t);case 5:if(n=o.sent,typeof i.onAfterResponse!="function"){o.next=9;break}return o.next=9,i.onAfterResponse(e,n);case 9:return o.abrupt("return",n);case 10:case"end":return o.stop()}},r)})),Xl.apply(this,arguments)}function rw(){var r=!0;return typeof navigator<"u"&&navigator.onLine===!1&&(r=!1),r}function jm(r,e,t){return t.retryDelays==null||e>=t.retryDelays.length||r.originalRequest==null?!1:t&&typeof t.onShouldRetry=="function"?t.onShouldRetry(r,e,t):Wm(r)}function Wm(r){var e=r.originalResponse?r.originalResponse.getStatus():0;return(!ai(e,400)||e===409||e===423)&&rw()}function Mm(r,e){return new Hm.default(e,r).toString()}function iw(r,e){for(var t=Math.floor(r/e),i=[],n=0;n<e;n++)i.push({start:t*n,end:t*(n+1)});return i[e-1].end=r,i}Vm.defaultOptions=tw;var Bo=Vm;var nw=function(){return typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative"},No=nw;function Yl(r){return new Promise(function(e,t){var i=new XMLHttpRequest;i.responseType="blob",i.onload=function(){var n=i.response;e(n)},i.onerror=function(n){t(n)},i.open("GET",r),i.send()})}var sw=function(){return typeof window<"u"&&(typeof window.PhoneGap<"u"||typeof window.Cordova<"u"||typeof window.cordova<"u")},Gm=sw;function Ql(r){return new Promise(function(e,t){var i=new FileReader;i.onload=function(){var n=new Uint8Array(i.result);e({value:n})},i.onerror=function(n){t(n)},i.readAsArrayBuffer(r)})}function Hn(r){"@babel/helpers - typeof";return Hn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hn(r)}function ow(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function Km(r,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,lw(i.key),i)}}function aw(r,e,t){return e&&Km(r.prototype,e),t&&Km(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function lw(r){var e=uw(r,"string");return Hn(e)=="symbol"?e:e+""}function uw(r,e){if(Hn(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var i=t.call(r,e||"default");if(Hn(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var Zl=function(){function r(e){ow(this,r),this._file=e,this.size=e.size}return aw(r,[{key:"slice",value:function(t,i){if(Gm())return Ql(this._file.slice(t,i));var n=this._file.slice(t,i),s=i>=this.size;return Promise.resolve({value:n,done:s})}},{key:"close",value:function(){}}])}();function Vn(r){"@babel/helpers - typeof";return Vn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vn(r)}function cw(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function Jm(r,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,hw(i.key),i)}}function dw(r,e,t){return e&&Jm(r.prototype,e),t&&Jm(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function hw(r){var e=fw(r,"string");return Vn(e)=="symbol"?e:e+""}function fw(r,e){if(Vn(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var i=t.call(r,e||"default");if(Vn(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function Xm(r){return r===void 0?0:r.size!==void 0?r.size:r.length}function pw(r,e){if(r.concat)return r.concat(e);if(r instanceof Blob)return new Blob([r,e],{type:r.type});if(r.set){var t=new r.constructor(r.length+e.length);return t.set(r),t.set(e,r.length),t}throw new Error("Unknown data type")}var Ym=function(){function r(e){cw(this,r),this._buffer=void 0,this._bufferOffset=0,this._reader=e,this._done=!1}return dw(r,[{key:"slice",value:function(t,i){return t<this._bufferOffset?Promise.reject(new Error("Requested data is before the reader's current offset")):this._readUntilEnoughDataOrDone(t,i)}},{key:"_readUntilEnoughDataOrDone",value:function(t,i){var n=this,s=i<=this._bufferOffset+Xm(this._buffer);if(this._done||s){var o=this._getDataFromBuffer(t,i),a=o==null?this._done:!1;return Promise.resolve({value:o,done:a})}return this._reader.read().then(function(l){var u=l.value,c=l.done;return c?n._done=!0:n._buffer===void 0?n._buffer=u:n._buffer=pw(n._buffer,u),n._readUntilEnoughDataOrDone(t,i)})}},{key:"_getDataFromBuffer",value:function(t,i){t>this._bufferOffset&&(this._buffer=this._buffer.slice(t-this._bufferOffset),this._bufferOffset=t);var n=Xm(this._buffer)===0;return this._done&&n?null:this._buffer.slice(0,i-t)}},{key:"close",value:function(){this._reader.cancel&&this._reader.cancel()}}])}();function yr(r){"@babel/helpers - typeof";return yr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yr(r)}function eu(){"use strict";eu=function(){return e};var r,e={},t=Object.prototype,i=t.hasOwnProperty,n=Object.defineProperty||function(_,g,y){_[g]=y.value},s=typeof Symbol=="function"?Symbol:{},o=s.iterator||"@@iterator",a=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function u(_,g,y){return Object.defineProperty(_,g,{value:y,enumerable:!0,configurable:!0,writable:!0}),_[g]}try{u({},"")}catch{u=function(y,O,R){return y[O]=R}}function c(_,g,y,O){var R=g&&g.prototype instanceof S?g:S,A=Object.create(R.prototype),k=new qe(O||[]);return n(A,"_invoke",{value:Oe(_,y,k)}),A}function d(_,g,y){try{return{type:"normal",arg:_.call(g,y)}}catch(O){return{type:"throw",arg:O}}}e.wrap=c;var m="suspendedStart",f="suspendedYield",b="executing",x="completed",E={};function S(){}function F(){}function I(){}var T={};u(T,o,function(){return this});var M=Object.getPrototypeOf,L=M&&M(M(nt([])));L&&L!==t&&i.call(L,o)&&(T=L);var B=I.prototype=S.prototype=Object.create(T);function z(_){["next","throw","return"].forEach(function(g){u(_,g,function(y){return this._invoke(g,y)})})}function X(_,g){function y(R,A,k,w){var P=d(_[R],_,A);if(P.type!=="throw"){var C=P.arg,D=C.value;return D&&yr(D)=="object"&&i.call(D,"__await")?g.resolve(D.__await).then(function(N){y("next",N,k,w)},function(N){y("throw",N,k,w)}):g.resolve(D).then(function(N){C.value=N,k(C)},function(N){return y("throw",N,k,w)})}w(P.arg)}var O;n(this,"_invoke",{value:function(A,k){function w(){return new g(function(P,C){y(A,k,P,C)})}return O=O?O.then(w,w):w()}})}function Oe(_,g,y){var O=m;return function(R,A){if(O===b)throw Error("Generator is already running");if(O===x){if(R==="throw")throw A;return{value:r,done:!0}}for(y.method=R,y.arg=A;;){var k=y.delegate;if(k){var w=ie(k,y);if(w){if(w===E)continue;return w}}if(y.method==="next")y.sent=y._sent=y.arg;else if(y.method==="throw"){if(O===m)throw O=x,y.arg;y.dispatchException(y.arg)}else y.method==="return"&&y.abrupt("return",y.arg);O=b;var P=d(_,g,y);if(P.type==="normal"){if(O=y.done?x:f,P.arg===E)continue;return{value:P.arg,done:y.done}}P.type==="throw"&&(O=x,y.method="throw",y.arg=P.arg)}}}function ie(_,g){var y=g.method,O=_.iterator[y];if(O===r)return g.delegate=null,y==="throw"&&_.iterator.return&&(g.method="return",g.arg=r,ie(_,g),g.method==="throw")||y!=="return"&&(g.method="throw",g.arg=new TypeError("The iterator does not provide a '"+y+"' method")),E;var R=d(O,_.iterator,g.arg);if(R.type==="throw")return g.method="throw",g.arg=R.arg,g.delegate=null,E;var A=R.arg;return A?A.done?(g[_.resultName]=A.value,g.next=_.nextLoc,g.method!=="return"&&(g.method="next",g.arg=r),g.delegate=null,E):A:(g.method="throw",g.arg=new TypeError("iterator result is not an object"),g.delegate=null,E)}function de(_){var g={tryLoc:_[0]};1 in _&&(g.catchLoc=_[1]),2 in _&&(g.finallyLoc=_[2],g.afterLoc=_[3]),this.tryEntries.push(g)}function ve(_){var g=_.completion||{};g.type="normal",delete g.arg,_.completion=g}function qe(_){this.tryEntries=[{tryLoc:"root"}],_.forEach(de,this),this.reset(!0)}function nt(_){if(_||_===""){var g=_[o];if(g)return g.call(_);if(typeof _.next=="function")return _;if(!isNaN(_.length)){var y=-1,O=function R(){for(;++y<_.length;)if(i.call(_,y))return R.value=_[y],R.done=!1,R;return R.value=r,R.done=!0,R};return O.next=O}}throw new TypeError(yr(_)+" is not iterable")}return F.prototype=I,n(B,"constructor",{value:I,configurable:!0}),n(I,"constructor",{value:F,configurable:!0}),F.displayName=u(I,l,"GeneratorFunction"),e.isGeneratorFunction=function(_){var g=typeof _=="function"&&_.constructor;return!!g&&(g===F||(g.displayName||g.name)==="GeneratorFunction")},e.mark=function(_){return Object.setPrototypeOf?Object.setPrototypeOf(_,I):(_.__proto__=I,u(_,l,"GeneratorFunction")),_.prototype=Object.create(B),_},e.awrap=function(_){return{__await:_}},z(X.prototype),u(X.prototype,a,function(){return this}),e.AsyncIterator=X,e.async=function(_,g,y,O,R){R===void 0&&(R=Promise);var A=new X(c(_,g,y,O),R);return e.isGeneratorFunction(g)?A:A.next().then(function(k){return k.done?k.value:A.next()})},z(B),u(B,l,"Generator"),u(B,o,function(){return this}),u(B,"toString",function(){return"[object Generator]"}),e.keys=function(_){var g=Object(_),y=[];for(var O in g)y.push(O);return y.reverse(),function R(){for(;y.length;){var A=y.pop();if(A in g)return R.value=A,R.done=!1,R}return R.done=!0,R}},e.values=nt,qe.prototype={constructor:qe,reset:function(g){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(ve),!g)for(var y in this)y.charAt(0)==="t"&&i.call(this,y)&&!isNaN(+y.slice(1))&&(this[y]=r)},stop:function(){this.done=!0;var g=this.tryEntries[0].completion;if(g.type==="throw")throw g.arg;return this.rval},dispatchException:function(g){if(this.done)throw g;var y=this;function O(C,D){return k.type="throw",k.arg=g,y.next=C,D&&(y.method="next",y.arg=r),!!D}for(var R=this.tryEntries.length-1;R>=0;--R){var A=this.tryEntries[R],k=A.completion;if(A.tryLoc==="root")return O("end");if(A.tryLoc<=this.prev){var w=i.call(A,"catchLoc"),P=i.call(A,"finallyLoc");if(w&&P){if(this.prev<A.catchLoc)return O(A.catchLoc,!0);if(this.prev<A.finallyLoc)return O(A.finallyLoc)}else if(w){if(this.prev<A.catchLoc)return O(A.catchLoc,!0)}else{if(!P)throw Error("try statement without catch or finally");if(this.prev<A.finallyLoc)return O(A.finallyLoc)}}}},abrupt:function(g,y){for(var O=this.tryEntries.length-1;O>=0;--O){var R=this.tryEntries[O];if(R.tryLoc<=this.prev&&i.call(R,"finallyLoc")&&this.prev<R.finallyLoc){var A=R;break}}A&&(g==="break"||g==="continue")&&A.tryLoc<=y&&y<=A.finallyLoc&&(A=null);var k=A?A.completion:{};return k.type=g,k.arg=y,A?(this.method="next",this.next=A.finallyLoc,E):this.complete(k)},complete:function(g,y){if(g.type==="throw")throw g.arg;return g.type==="break"||g.type==="continue"?this.next=g.arg:g.type==="return"?(this.rval=this.arg=g.arg,this.method="return",this.next="end"):g.type==="normal"&&y&&(this.next=y),E},finish:function(g){for(var y=this.tryEntries.length-1;y>=0;--y){var O=this.tryEntries[y];if(O.finallyLoc===g)return this.complete(O.completion,O.afterLoc),ve(O),E}},catch:function(g){for(var y=this.tryEntries.length-1;y>=0;--y){var O=this.tryEntries[y];if(O.tryLoc===g){var R=O.completion;if(R.type==="throw"){var A=R.arg;ve(O)}return A}}throw Error("illegal catch attempt")},delegateYield:function(g,y,O){return this.delegate={iterator:nt(g),resultName:y,nextLoc:O},this.method==="next"&&(this.arg=r),E}},e}function Qm(r,e,t,i,n,s,o){try{var a=r[s](o),l=a.value}catch(u){t(u);return}a.done?e(l):Promise.resolve(l).then(i,n)}function mw(r){return function(){var e=this,t=arguments;return new Promise(function(i,n){var s=r.apply(e,t);function o(l){Qm(s,i,n,o,a,"next",l)}function a(l){Qm(s,i,n,o,a,"throw",l)}o(void 0)})}}function gw(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function Zm(r,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,vw(i.key),i)}}function yw(r,e,t){return e&&Zm(r.prototype,e),t&&Zm(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function vw(r){var e=bw(r,"string");return yr(e)=="symbol"?e:e+""}function bw(r,e){if(yr(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var i=t.call(r,e||"default");if(yr(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var eg=function(){function r(){gw(this,r)}return yw(r,[{key:"openFile",value:function(){var e=mw(eu().mark(function i(n,s){var o;return eu().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!(No()&&n&&typeof n.uri<"u")){l.next=11;break}return l.prev=1,l.next=4,Yl(n.uri);case 4:return o=l.sent,l.abrupt("return",new Zl(o));case 8:throw l.prev=8,l.t0=l.catch(1),new Error("tus: cannot fetch `file.uri` as Blob, make sure the uri is correct and accessible. ".concat(l.t0));case 11:if(!(typeof n.slice=="function"&&typeof n.size<"u")){l.next=13;break}return l.abrupt("return",Promise.resolve(new Zl(n)));case 13:if(typeof n.read!="function"){l.next=18;break}if(s=Number(s),Number.isFinite(s)){l.next=17;break}return l.abrupt("return",Promise.reject(new Error("cannot create source for stream without a finite value for the `chunkSize` option")));case 17:return l.abrupt("return",Promise.resolve(new Ym(n,s)));case 18:return l.abrupt("return",Promise.reject(new Error("source object may only be an instance of File, Blob, or Reader in this environment")));case 19:case"end":return l.stop()}},i,null,[[1,8]])}));function t(i,n){return e.apply(this,arguments)}return t}()}])}();function tu(r,e){return No()?Promise.resolve(_w(r,e)):Promise.resolve(["tus-br",r.name,r.type,r.size,r.lastModified,e.endpoint].join("-"))}function _w(r,e){var t=r.exif?ww(JSON.stringify(r.exif)):"noexif";return["tus-rn",r.name||"noname",r.size||"nosize",t,e.endpoint].join("/")}function ww(r){var e=0;if(r.length===0)return e;for(var t=0;t<r.length;t++){var i=r.charCodeAt(t);e=(e<<5)-e+i,e&=e}return e}function Wn(r){"@babel/helpers - typeof";return Wn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wn(r)}function ru(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function tg(r,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,Sw(i.key),i)}}function iu(r,e,t){return e&&tg(r.prototype,e),t&&tg(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function Sw(r){var e=xw(r,"string");return Wn(e)=="symbol"?e:e+""}function xw(r,e){if(Wn(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var i=t.call(r,e||"default");if(Wn(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var rg=function(){function r(){ru(this,r)}return iu(r,[{key:"createRequest",value:function(t,i){return new Pw(t,i)}},{key:"getName",value:function(){return"XHRHttpStack"}}])}();var Pw=function(){function r(e,t){ru(this,r),this._xhr=new XMLHttpRequest,this._xhr.open(e,t,!0),this._method=e,this._url=t,this._headers={}}return iu(r,[{key:"getMethod",value:function(){return this._method}},{key:"getURL",value:function(){return this._url}},{key:"setHeader",value:function(t,i){this._xhr.setRequestHeader(t,i),this._headers[t]=i}},{key:"getHeader",value:function(t){return this._headers[t]}},{key:"setProgressHandler",value:function(t){"upload"in this._xhr&&(this._xhr.upload.onprogress=function(i){i.lengthComputable&&t(i.loaded)})}},{key:"send",value:function(){var t=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return new Promise(function(n,s){t._xhr.onload=function(){n(new kw(t._xhr))},t._xhr.onerror=function(o){s(o)},t._xhr.send(i)})}},{key:"abort",value:function(){return this._xhr.abort(),Promise.resolve()}},{key:"getUnderlyingObject",value:function(){return this._xhr}}])}(),kw=function(){function r(e){ru(this,r),this._xhr=e}return iu(r,[{key:"getStatus",value:function(){return this._xhr.status}},{key:"getHeader",value:function(t){return this._xhr.getResponseHeader(t)}},{key:"getBody",value:function(){return this._xhr.responseText}},{key:"getUnderlyingObject",value:function(){return this._xhr}}])}();function Gn(r){"@babel/helpers - typeof";return Gn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gn(r)}function Ew(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function ig(r,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,Cw(i.key),i)}}function Tw(r,e,t){return e&&ig(r.prototype,e),t&&ig(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function Cw(r){var e=Fw(r,"string");return Gn(e)=="symbol"?e:e+""}function Fw(r,e){if(Gn(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var i=t.call(r,e||"default");if(Gn(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var su=!1;try{su="localStorage"in window,jo="tusSupport",nu=localStorage.getItem(jo),localStorage.setItem(jo,nu),nu===null&&localStorage.removeItem(jo)}catch(r){if(r.code===r.SECURITY_ERR||r.code===r.QUOTA_EXCEEDED_ERR)su=!1;else throw r}var jo,nu,ng=su,sg=function(){function r(){Ew(this,r)}return Tw(r,[{key:"findAllUploads",value:function(){var t=this._findEntries("tus::");return Promise.resolve(t)}},{key:"findUploadsByFingerprint",value:function(t){var i=this._findEntries("tus::".concat(t,"::"));return Promise.resolve(i)}},{key:"removeUpload",value:function(t){return localStorage.removeItem(t),Promise.resolve()}},{key:"addUpload",value:function(t,i){var n=Math.round(Math.random()*1e12),s="tus::".concat(t,"::").concat(n);return localStorage.setItem(s,JSON.stringify(i)),Promise.resolve(s)}},{key:"_findEntries",value:function(t){for(var i=[],n=0;n<localStorage.length;n++){var s=localStorage.key(n);if(s.indexOf(t)===0)try{var o=JSON.parse(localStorage.getItem(s));o.urlStorageKey=s,i.push(o)}catch{}}return i}}])}();function ui(r){"@babel/helpers - typeof";return ui=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ui(r)}function Ow(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function og(r,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,ug(i.key),i)}}function Aw(r,e,t){return e&&og(r.prototype,e),t&&og(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function Rw(r,e,t){return e=Mo(e),Iw(r,lg()?Reflect.construct(e,t||[],Mo(r).constructor):e.apply(r,t))}function Iw(r,e){if(e&&(ui(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Uw(r)}function Uw(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function lg(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(lg=function(){return!!r})()}function Mo(r){return Mo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Mo(r)}function Dw(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&ou(r,e)}function ou(r,e){return ou=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},ou(r,e)}function ag(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable})),t.push.apply(t,i)}return t}function li(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ag(Object(t),!0).forEach(function(i){Lw(r,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):ag(Object(t)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(t,i))})}return r}function Lw(r,e,t){return e=ug(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function ug(r){var e=Bw(r,"string");return ui(e)=="symbol"?e:e+""}function Bw(r,e){if(ui(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var i=t.call(r,e||"default");if(ui(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var zo=li(li({},Bo.defaultOptions),{},{httpStack:new rg,fileReader:new eg,urlStorage:ng?new sg:new Zp,fingerprint:tu}),cg=function(r){function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Ow(this,e),i=li(li({},zo),i),Rw(this,e,[t,i])}return Dw(e,r),Aw(e,null,[{key:"terminate",value:function(i){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return n=li(li({},zo),n),Bo.terminate(i,n)}}])}(Bo),lF=typeof XMLHttpRequest=="function"&&typeof Blob=="function"&&typeof Blob.prototype.slice=="function";function Rt(r,e){if(!{}.hasOwnProperty.call(r,e))throw new TypeError("attempted to use private field on non-instance");return r}var Nw=0;function hg(r){return"__private_"+Nw+++"_"+r}var Ie=hg("uppy"),Kn=hg("events"),$o=class{constructor(e){Object.defineProperty(this,Ie,{writable:!0,value:void 0}),Object.defineProperty(this,Kn,{writable:!0,value:[]}),Rt(this,Ie)[Ie]=e}on(e,t){return Rt(this,Kn)[Kn].push([e,t]),Rt(this,Ie)[Ie].on(e,t)}remove(){for(let[e,t]of Rt(this,Kn)[Kn].splice(0))Rt(this,Ie)[Ie].off(e,t)}onFilePause(e,t){this.on("upload-pause",(i,n)=>{e===i?.id&&t(n)})}onFileRemove(e,t){this.on("file-removed",i=>{e===i.id&&t(i.id)})}onPause(e,t){this.on("upload-pause",(i,n)=>{e===i?.id&&t(n)})}onRetry(e,t){this.on("upload-retry",i=>{e===i?.id&&t()})}onRetryAll(e,t){this.on("retry-all",()=>{Rt(this,Ie)[Ie].getFile(e)&&t()})}onPauseAll(e,t){this.on("pause-all",()=>{Rt(this,Ie)[Ie].getFile(e)&&t()})}onCancelAll(e,t){var i=this;this.on("cancel-all",function(){Rt(i,Ie)[Ie].getFile(e)&&t(...arguments)})}onResumeAll(e,t){this.on("resume-all",()=>{Rt(this,Ie)[Ie].getFile(e)&&t()})}};var au=class extends Error{constructor(e,t){t===void 0&&(t=null),super("This looks like a network error, the endpoint might be blocked by an internet provider or a firewall."),this.cause=e,this.isNetworkError=!0,this.request=t}},fg=au;function jw(r){return r?r.readyState!==0&&r.readyState!==4||r.status===0:!1}var pg=jw;function $(r,e){if(!{}.hasOwnProperty.call(r,e))throw new TypeError("attempted to use private field on non-instance");return r}var Mw=0;function $e(r){return"__private_"+Mw+++"_"+r}function zw(r){return new Error("Cancelled",{cause:r})}function mg(r){if(r!=null){var e;let t=()=>this.abort(r.reason);r.addEventListener("abort",t,{once:!0});let i=()=>{r.removeEventListener("abort",t)};(e=this.then)==null||e.call(this,i,i)}return this}var Je=$e("activeRequests"),De=$e("queuedHandlers"),Ke=$e("paused"),vr=$e("pauseTimer"),Ue=$e("downLimit"),br=$e("upperLimit"),It=$e("rateLimitingTimer"),Jn=$e("call"),Ut=$e("queueNext"),cu=$e("next"),lu=$e("queue"),du=$e("dequeue"),uu=$e("resume"),_r=$e("increaseLimit"),ci=class{constructor(e){Object.defineProperty(this,du,{value:Ww}),Object.defineProperty(this,lu,{value:Vw}),Object.defineProperty(this,cu,{value:Hw}),Object.defineProperty(this,Ut,{value:qw}),Object.defineProperty(this,Jn,{value:$w}),Object.defineProperty(this,Je,{writable:!0,value:0}),Object.defineProperty(this,De,{writable:!0,value:[]}),Object.defineProperty(this,Ke,{writable:!0,value:!1}),Object.defineProperty(this,vr,{writable:!0,value:void 0}),Object.defineProperty(this,Ue,{writable:!0,value:1}),Object.defineProperty(this,br,{writable:!0,value:void 0}),Object.defineProperty(this,It,{writable:!0,value:void 0}),Object.defineProperty(this,uu,{writable:!0,value:()=>this.resume()}),Object.defineProperty(this,_r,{writable:!0,value:()=>{if($(this,Ke)[Ke]){$(this,It)[It]=setTimeout($(this,_r)[_r],0);return}$(this,Ue)[Ue]=this.limit,this.limit=Math.ceil(($(this,br)[br]+$(this,Ue)[Ue])/2);for(let t=$(this,Ue)[Ue];t<=this.limit;t++)$(this,Ut)[Ut]();$(this,br)[br]-$(this,Ue)[Ue]>3?$(this,It)[It]=setTimeout($(this,_r)[_r],2e3):$(this,Ue)[Ue]=Math.floor($(this,Ue)[Ue]/2)}}),typeof e!="number"||e===0?this.limit=1/0:this.limit=e}run(e,t){return!$(this,Ke)[Ke]&&$(this,Je)[Je]<this.limit?$(this,Jn)[Jn](e):$(this,lu)[lu](e,t)}wrapSyncFunction(e,t){var i=this;return function(){for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];let a=i.run(()=>(e(...s),queueMicrotask(()=>a.done()),()=>{}),t);return{abortOn:mg,abort(){a.abort()}}}}wrapPromiseFunction(e,t){var i=this;return function(){for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];let a,l=new Promise((u,c)=>{a=i.run(()=>{let d,m;try{m=Promise.resolve(e(...s))}catch(f){m=Promise.reject(f)}return m.then(f=>{d?c(d):(a.done(),u(f))},f=>{d?c(d):(a.done(),c(f))}),f=>{d=zw(f)}},t)});return l.abort=u=>{a.abort(u)},l.abortOn=mg,l}}resume(){$(this,Ke)[Ke]=!1,clearTimeout($(this,vr)[vr]);for(let e=0;e<this.limit;e++)$(this,Ut)[Ut]()}pause(e){e===void 0&&(e=null),$(this,Ke)[Ke]=!0,clearTimeout($(this,vr)[vr]),e!=null&&($(this,vr)[vr]=setTimeout($(this,uu)[uu],e))}rateLimit(e){clearTimeout($(this,It)[It]),this.pause(e),this.limit>1&&Number.isFinite(this.limit)&&($(this,br)[br]=this.limit-1,this.limit=$(this,Ue)[Ue],$(this,It)[It]=setTimeout($(this,_r)[_r],e))}get isPaused(){return $(this,Ke)[Ke]}};function $w(r){$(this,Je)[Je]+=1;let e=!1,t;try{t=r()}catch(i){throw $(this,Je)[Je]-=1,i}return{abort:i=>{e||(e=!0,$(this,Je)[Je]-=1,t?.(i),$(this,Ut)[Ut]())},done:()=>{e||(e=!0,$(this,Je)[Je]-=1,$(this,Ut)[Ut]())}}}function qw(){queueMicrotask(()=>$(this,cu)[cu]())}function Hw(){if($(this,Ke)[Ke]||$(this,Je)[Je]>=this.limit||$(this,De)[De].length===0)return;let r=$(this,De)[De].shift();if(r==null)throw new Error("Invariant violation: next is null");let e=$(this,Jn)[Jn](r.fn);r.abort=e.abort,r.done=e.done}function Vw(r,e){let t={fn:r,priority:e?.priority||0,abort:()=>{$(this,du)[du](t)},done:()=>{throw new Error("Cannot mark a queued request as done: this indicates a bug")}},i=$(this,De)[De].findIndex(n=>t.priority>n.priority);return i===-1?$(this,De)[De].push(t):$(this,De)[De].splice(i,0,t),t}function Ww(r){let e=$(this,De)[De].indexOf(r);e!==-1&&$(this,De)[De].splice(e,1)}var hF=Symbol("__queue");function Xn(r,e){return Object.prototype.hasOwnProperty.call(r,e)}function gg(r){let e=t=>"error"in t&&!!t.error;return r.filter(t=>!e(t))}function yg(r){return r.filter(e=>{var t;return!((t=e.progress)!=null&&t.uploadStarted)||!e.isRestored})}function hu(r,e){return r===!0?Object.keys(e):Array.isArray(r)?r:[]}function Gw(){return typeof window<"u"&&(typeof window.PhoneGap<"u"||typeof window.Cordova<"u"||typeof window.cordova<"u")}function Kw(){return typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative"}function fu(r){return(e,t)=>{if(Gw()||Kw())return zo.fingerprint(e,t);let i=["tus",r.id,t.endpoint].join("-");return Promise.resolve(i)}}function wr(r,e){if(!{}.hasOwnProperty.call(r,e))throw new TypeError("attempted to use private field on non-instance");return r}var Jw=0;function es(r){return"__private_"+Jw+++"_"+r}var Xw={version:"4.2.2"},vg={endpoint:"",uploadUrl:null,metadata:{},uploadSize:null,onProgress:null,onChunkComplete:null,onSuccess:null,onError:null,overridePatchMethod:!1,headers:{},addRequestId:!1,chunkSize:1/0,retryDelays:[100,1e3,3e3,5e3],parallelUploads:1,removeFingerprintOnSuccess:!1,uploadLengthDeferred:!1,uploadDataDuringCreation:!1},Yw={limit:20,retryDelays:vg.retryDelays,withCredentials:!1,allowedMetaFields:!0},Qn=es("retryDelayIterator"),mu=es("uploadLocalFile"),gu=es("getCompanionClientArgs"),pu=es("uploadFiles"),Yn=es("handleUpload"),Zn=class extends Ot{constructor(e,t){var i,n;if(super(e,v(v({},Yw),t)),Object.defineProperty(this,pu,{value:e1}),Object.defineProperty(this,gu,{value:Zw}),Object.defineProperty(this,mu,{value:Qw}),Object.defineProperty(this,Qn,{writable:!0,value:void 0}),Object.defineProperty(this,Yn,{writable:!0,value:s=>p(this,null,function*(){if(s.length===0){this.uppy.log("[Tus] No files to upload");return}this.opts.limit===0&&this.uppy.log("[Tus] When uploading multiple files at once, consider setting the `limit` option (to `10` for example), to limit the number of concurrent uploads, which helps prevent memory and network issues: https://uppy.io/docs/tus/#limit-0","warning"),this.uppy.log("[Tus] Uploading...");let o=this.uppy.getFilesByIds(s);yield wr(this,pu)[pu](o)})}),this.type="uploader",this.id=this.opts.id||"Tus",t?.allowedMetaFields===void 0&&"metaFields"in this.opts)throw new Error("The `metaFields` option has been renamed to `allowedMetaFields`.");if("autoRetry"in t)throw new Error("The `autoRetry` option was deprecated and has been removed.");this.requests=(i=this.opts.rateLimitedQueue)!=null?i:new ci(this.opts.limit),wr(this,Qn)[Qn]=(n=this.opts.retryDelays)==null?void 0:n.values(),this.uploaders=Object.create(null),this.uploaderEvents=Object.create(null)}resetUploaderReferences(e,t){let i=this.uploaders[e];i&&(i.abort(),t!=null&&t.abort&&i.abort(!0),this.uploaders[e]=null),this.uploaderEvents[e]&&(this.uploaderEvents[e].remove(),this.uploaderEvents[e]=null)}onReceiveUploadUrl(e,t){let i=this.uppy.getFile(e.id);i&&(!i.tus||i.tus.uploadUrl!==t)&&(this.uppy.log("[Tus] Storing upload url"),this.uppy.setFileState(i.id,{tus:j(v({},i.tus),{uploadUrl:t})}))}install(){this.uppy.setState({capabilities:j(v({},this.uppy.getState().capabilities),{resumableUploads:!0})}),this.uppy.addUploader(wr(this,Yn)[Yn])}uninstall(){this.uppy.setState({capabilities:j(v({},this.uppy.getState().capabilities),{resumableUploads:!1})}),this.uppy.removeUploader(wr(this,Yn)[Yn])}};function Qw(r){return this.resetUploaderReferences(r.id),new Promise((e,t)=>{let i,n,s,o=v(v({},this.opts),r.tus||{});typeof o.headers=="function"&&(o.headers=o.headers(r));let E=o,{onShouldRetry:a,onBeforeRequest:l}=E,u=Lr(E,["onShouldRetry","onBeforeRequest"]),c=v(v({},vg),u);c.fingerprint=fu(r),c.onBeforeRequest=S=>p(this,null,function*(){let F=S.getUnderlyingObject();F.withCredentials=!!o.withCredentials;let I;if(typeof l=="function"&&(I=l(S,r)),Xn(i,"shouldBeRequeued")){if(!i.shouldBeRequeued)return Promise.reject();let T,M=new Promise(L=>{T=L});i=this.requests.run(()=>(r.isPaused&&i.abort(),T(),()=>{})),yield Promise.all([M,I]);return}return I}),c.onError=S=>{var F;this.uppy.log(S);let I=S.originalRequest!=null?S.originalRequest.getUnderlyingObject():null;pg(I)&&(S=new fg(S,I)),this.resetUploaderReferences(r.id),(F=i)==null||F.abort(),typeof o.onError=="function"&&o.onError(S),t(S)},c.onProgress=(S,F)=>{var I;this.onReceiveUploadUrl(r,s.url),typeof o.onProgress=="function"&&o.onProgress(S,F);let T=this.uppy.getFile(r.id);this.uppy.emit("upload-progress",T,{uploadStarted:(I=T.progress.uploadStarted)!=null?I:0,bytesUploaded:S,bytesTotal:F})},c.onSuccess=S=>{var F;let I={uploadURL:(F=s.url)!=null?F:void 0,status:200,body:{xhr:S.lastResponse.getUnderlyingObject()}};if(this.uppy.emit("upload-success",this.uppy.getFile(r.id),I),this.resetUploaderReferences(r.id),i.done(),s.url){let{name:T}=s.file;this.uppy.log(`Download ${T} from ${s.url}`)}typeof o.onSuccess=="function"&&o.onSuccess(S),e(s)};let d=S=>{var F;let I=S==null||(F=S.originalResponse)==null?void 0:F.getStatus();if(I===429){if(!this.requests.isPaused){var T;let M=(T=wr(this,Qn)[Qn])==null?void 0:T.next();if(M==null||M.done)return!1;this.requests.rateLimit(M.value)}}else{if(I!=null&&I>=400&&I<500&&I!==409&&I!==423)return!1;typeof navigator<"u"&&navigator.onLine===!1&&(this.requests.isPaused||(this.requests.pause(),window.addEventListener("online",()=>{this.requests.resume()},{once:!0})))}return i.abort(),i={shouldBeRequeued:!0,abort(){this.shouldBeRequeued=!1},done(){throw new Error("Cannot mark a queued request as done: this indicates a bug")},fn(){throw new Error("Cannot run a queued request: this indicates a bug")}},!0};a!=null?c.onShouldRetry=(S,F)=>a(S,F,o,d):c.onShouldRetry=d;let m=(S,F,I)=>{Xn(S,F)&&!Xn(S,I)&&(S[I]=S[F])},f={};hu(o.allowedMetaFields,r.meta).forEach(S=>{f[S]=String(r.meta[S])}),m(f,"type","filetype"),m(f,"name","filename"),c.metadata=f,s=new cg(r.data,c),this.uploaders[r.id]=s;let x=new $o(this.uppy);this.uploaderEvents[r.id]=x,n=()=>(r.isPaused||s.start(),()=>{}),s.findPreviousUploads().then(S=>{let F=S[0];F&&(this.uppy.log(`[Tus] Resuming upload of ${r.id} started at ${F.creationTime}`),s.resumeFromPreviousUpload(F)),i=this.requests.run(n)}),x.onFileRemove(r.id,S=>{i.abort(),this.resetUploaderReferences(r.id,{abort:!!s.url}),e(`upload ${S} was removed`)}),x.onPause(r.id,S=>{i.abort(),S?s.abort():i=this.requests.run(n)}),x.onPauseAll(r.id,()=>{i.abort(),s.abort()}),x.onCancelAll(r.id,()=>{i.abort(),this.resetUploaderReferences(r.id,{abort:!!s.url}),e(`upload ${r.id} was canceled`)}),x.onResumeAll(r.id,()=>{i.abort(),r.error&&s.abort(),i=this.requests.run(n)})}).catch(e=>{throw this.uppy.emit("upload-error",r,e),e})}function Zw(r){var e;let t=v({},this.opts);return r.tus&&Object.assign(t,r.tus),typeof t.headers=="function"&&(t.headers=t.headers(r)),j(v({},(e=r.remote)==null?void 0:e.body),{endpoint:t.endpoint,uploadUrl:t.uploadUrl,protocol:"tus",size:r.data.size,headers:t.headers,metadata:r.meta})}function e1(r){return p(this,null,function*(){let e=gg(r),t=yg(e);this.uppy.emit("upload-start",t),yield Promise.allSettled(e.map(i=>{if(i.isRemote){let n=()=>this.requests,s=new AbortController,o=l=>{l.id===i.id&&s.abort()};this.uppy.on("file-removed",o);let a=this.uppy.getRequestClientForFile(i).uploadRemoteFile(i,wr(this,gu)[gu](i),{signal:s.signal,getQueue:n});return this.requests.wrapSyncFunction(()=>{this.uppy.off("file-removed",o)},{priority:-1})(),a}return wr(this,mu)[mu](i)}))})}Zn.VERSION=Xw.version;function qo(r,e,t,i){return t===0||r===e?r:i===0?e:r+(e-r)*2**(-i/t)}var Xe={STATE_ERROR:"error",STATE_WAITING:"waiting",STATE_PREPROCESSING:"preprocessing",STATE_UPLOADING:"uploading",STATE_POSTPROCESSING:"postprocessing",STATE_COMPLETE:"complete"};var xu=re(Le(),1);function ts(r){let e=[],t="indeterminate",i;for(let{progress:s}of Object.values(r)){let{preprocess:o,postprocess:a}=s;i==null&&(o||a)&&({mode:t,message:i}=o||a),o?.mode==="determinate"&&e.push(o.value),a?.mode==="determinate"&&e.push(a.value)}let n=e.reduce((s,o)=>s+o/e.length,0);return{mode:t,message:i,value:n}}var _u=re(Le(),1),bu=re(bn(),1);function yu(r){let e=Math.floor(r/3600)%24,t=Math.floor(r/60)%60,i=Math.floor(r%60);return{hours:e,minutes:t,seconds:i}}function vu(r){let e=yu(r),t=e.hours===0?"":`${e.hours}h`,i=e.minutes===0?"":`${e.hours===0?e.minutes:` ${e.minutes.toString(10).padStart(2,"0")}`}m`,n=e.hours!==0?"":`${e.minutes===0?e.seconds:` ${e.seconds.toString(10).padStart(2,"0")}`}s`;return`${t}${i}${n}`}var t1="\xB7",bg=()=>` ${t1} `;function _g(r){let{newFiles:e,isUploadStarted:t,recoveredState:i,i18n:n,uploadState:s,isSomeGhost:o,startUpload:a}=r,l=(0,_u.default)("uppy-u-reset","uppy-c-btn","uppy-StatusBar-actionBtn","uppy-StatusBar-actionBtn--upload",{"uppy-c-btn-primary":s===Xe.STATE_WAITING},{"uppy-StatusBar-actionBtn--disabled":o}),u=e&&t&&!i?n("uploadXNewFiles",{smart_count:e}):n("uploadXFiles",{smart_count:e});return h("button",{type:"button",className:l,"aria-label":n("uploadXFiles",{smart_count:e}),onClick:a,disabled:o,"data-uppy-super-focusable":!0},u)}function wg(r){let{i18n:e,uppy:t}=r;return h("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-StatusBar-actionBtn uppy-StatusBar-actionBtn--retry","aria-label":e("retryUpload"),onClick:()=>t.retryAll().catch(()=>{}),"data-uppy-super-focusable":!0,"data-cy":"retry"},h("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"8",height:"10",viewBox:"0 0 8 10"},h("path",{d:"M4 2.408a2.75 2.75 0 1 0 2.75 2.75.626.626 0 0 1 1.25.018v.023a4 4 0 1 1-4-4.041V.25a.25.25 0 0 1 .389-.208l2.299 1.533a.25.25 0 0 1 0 .416l-2.3 1.533A.25.25 0 0 1 4 3.316v-.908z"})),e("retry"))}function Sg(r){let{i18n:e,uppy:t}=r;return h("button",{type:"button",className:"uppy-u-reset uppy-StatusBar-actionCircleBtn",title:e("cancel"),"aria-label":e("cancel"),onClick:()=>t.cancelAll(),"data-cy":"cancel","data-uppy-super-focusable":!0},h("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"16",height:"16",viewBox:"0 0 16 16"},h("g",{fill:"none",fillRule:"evenodd"},h("circle",{fill:"#888",cx:"8",cy:"8",r:"8"}),h("path",{fill:"#FFF",d:"M9.283 8l2.567 2.567-1.283 1.283L8 9.283 5.433 11.85 4.15 10.567 6.717 8 4.15 5.433 5.433 4.15 8 6.717l2.567-2.567 1.283 1.283z"}))))}function xg(r){let{isAllPaused:e,i18n:t,isAllComplete:i,resumableUploads:n,uppy:s}=r,o=t(e?"resume":"pause");function a(){if(!i){if(!n){s.cancelAll();return}if(e){s.resumeAll();return}s.pauseAll()}}return h("button",{title:o,"aria-label":o,className:"uppy-u-reset uppy-StatusBar-actionCircleBtn",type:"button",onClick:a,"data-cy":"togglePauseResume","data-uppy-super-focusable":!0},h("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"16",height:"16",viewBox:"0 0 16 16"},h("g",{fill:"none",fillRule:"evenodd"},h("circle",{fill:"#888",cx:"8",cy:"8",r:"8"}),h("path",{fill:"#FFF",d:e?"M6 4.25L11.5 8 6 11.75z":"M5 4.5h2v7H5v-7zm4 0h2v7H9v-7z"}))))}function Pg(r){let{i18n:e,doneButtonHandler:t}=r;return h("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-StatusBar-actionBtn uppy-StatusBar-actionBtn--done",onClick:t,"data-uppy-super-focusable":!0},e("done"))}function kg(){return h("svg",{className:"uppy-StatusBar-spinner","aria-hidden":"true",focusable:"false",width:"14",height:"14"},h("path",{d:"M13.983 6.547c-.12-2.509-1.64-4.893-3.939-5.936-2.48-1.127-5.488-.656-7.556 1.094C.524 3.367-.398 6.048.162 8.562c.556 2.495 2.46 4.52 4.94 5.183 2.932.784 5.61-.602 7.256-3.015-1.493 1.993-3.745 3.309-6.298 2.868-2.514-.434-4.578-2.349-5.153-4.84a6.226 6.226 0 0 1 2.98-6.778C6.34.586 9.74 1.1 11.373 3.493c.407.596.693 1.282.842 1.988.127.598.073 1.197.161 1.794.078.525.543 1.257 1.15.864.525-.341.49-1.05.456-1.592-.007-.15.02.3 0 0",fillRule:"evenodd"}))}function Eg(r){let{progress:e}=r,{value:t,mode:i,message:n}=e;return h("div",{className:"uppy-StatusBar-content"},h(kg,null),i==="determinate"?`${Math.round(t*100)}% \xB7 `:"",n)}function r1(r){let{numUploads:e,complete:t,totalUploadedSize:i,totalSize:n,totalETA:s,i18n:o}=r,a=e>1,l=(0,bu.default)(i);return h("div",{className:"uppy-StatusBar-statusSecondary"},a&&o("filesUploadedOfTotal",{complete:t,smart_count:e}),h("span",{className:"uppy-StatusBar-additionalInfo"},a&&bg(),n!=null?o("dataUploadedOfTotal",{complete:l,total:(0,bu.default)(n)}):o("dataUploadedOfUnknown",{complete:l}),bg(),s!=null&&o("xTimeLeft",{time:vu(s)})))}function Tg(r){let{i18n:e,complete:t,numUploads:i}=r;return h("div",{className:"uppy-StatusBar-statusSecondary"},e("filesUploadedOfTotal",{complete:t,smart_count:i}))}function i1(r){let{i18n:e,newFiles:t,startUpload:i}=r,n=(0,_u.default)("uppy-u-reset","uppy-c-btn","uppy-StatusBar-actionBtn","uppy-StatusBar-actionBtn--uploadNewlyAdded");return h("div",{className:"uppy-StatusBar-statusSecondary"},h("div",{className:"uppy-StatusBar-statusSecondaryHint"},e("xMoreFilesAdded",{smart_count:t})),h("button",{type:"button",className:n,"aria-label":e("uploadXFiles",{smart_count:t}),onClick:i},e("upload")))}function Cg(r){let{i18n:e,supportsUploadProgress:t,totalProgress:i,showProgressDetails:n,isUploadStarted:s,isAllComplete:o,isAllPaused:a,newFiles:l,numUploads:u,complete:c,totalUploadedSize:d,totalSize:m,totalETA:f,startUpload:b}=r,x=l&&s;if(!s||o)return null;let E=e(a?"paused":"uploading");function S(){return!a&&!x&&n?t?h(r1,{numUploads:u,complete:c,totalUploadedSize:d,totalSize:m,totalETA:f,i18n:e}):h(Tg,{i18n:e,complete:c,numUploads:u}):null}return h("div",{className:"uppy-StatusBar-content","aria-label":E,title:E},a?null:h(kg,null),h("div",{className:"uppy-StatusBar-status"},h("div",{className:"uppy-StatusBar-statusPrimary"},t&&i!==0?`${E}: ${i}%`:E),S(),x?h(i1,{i18n:e,newFiles:l,startUpload:b}):null))}function Fg(r){let{i18n:e}=r;return h("div",{className:"uppy-StatusBar-content",role:"status",title:e("complete")},h("div",{className:"uppy-StatusBar-status"},h("div",{className:"uppy-StatusBar-statusPrimary"},h("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-StatusBar-statusIndicator uppy-c-icon",width:"15",height:"11",viewBox:"0 0 15 11"},h("path",{d:"M.414 5.843L1.627 4.63l3.472 3.472L13.202 0l1.212 1.213L5.1 10.528z"})),e("complete"))))}function Og(r){let{error:e,i18n:t,complete:i,numUploads:n}=r;function s(){let o=`${t("uploadFailed")} 

 ${e}`;alert(o)}return h("div",{className:"uppy-StatusBar-content",title:t("uploadFailed")},h("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-StatusBar-statusIndicator uppy-c-icon",width:"11",height:"11",viewBox:"0 0 11 11"},h("path",{d:"M4.278 5.5L0 1.222 1.222 0 5.5 4.278 9.778 0 11 1.222 6.722 5.5 11 9.778 9.778 11 5.5 6.722 1.222 11 0 9.778z"})),h("div",{className:"uppy-StatusBar-status"},h("div",{className:"uppy-StatusBar-statusPrimary"},t("uploadFailed"),h("button",{className:"uppy-u-reset uppy-StatusBar-details","aria-label":t("showErrorDetails"),"data-microtip-position":"top-right","data-microtip-size":"medium",onClick:s,type:"button"},"?")),h(Tg,{i18n:t,complete:i,numUploads:n})))}var{STATE_ERROR:Ag,STATE_WAITING:n1,STATE_PREPROCESSING:wu,STATE_UPLOADING:Vo,STATE_POSTPROCESSING:Su,STATE_COMPLETE:Wo}=Xe;function Pu(r){let{newFiles:e,allowNewUpload:t,isUploadInProgress:i,isAllPaused:n,resumableUploads:s,error:o,hideUploadButton:a=void 0,hidePauseResumeButton:l=!1,hideCancelButton:u=!1,hideRetryButton:c=!1,recoveredState:d,uploadState:m,totalProgress:f,files:b,supportsUploadProgress:x,hideAfterFinish:E=!1,isSomeGhost:S,doneButtonHandler:F=void 0,isUploadStarted:I,i18n:T,startUpload:M,uppy:L,isAllComplete:B,showProgressDetails:z=void 0,numUploads:X,complete:Oe,totalSize:ie,totalETA:de,totalUploadedSize:ve}=r;function qe(){switch(m){case Su:case wu:{let Y=ts(b);return Y.mode==="determinate"?Y.value*100:f}case Ag:return null;case Vo:return x?f:null;default:return f}}function nt(){switch(m){case Su:case wu:{let{mode:Y}=ts(b);return Y==="indeterminate"}case Vo:return!x;default:return!1}}let _=qe(),g=_??100,y=!o&&e&&(!i&&!n||d)&&t&&!a,O=!u&&m!==n1&&m!==Wo,R=s&&!l&&m===Vo,A=o&&!B&&!c,k=F&&m===Wo,w=(0,xu.default)("uppy-StatusBar-progress",{"is-indeterminate":nt()}),P=(0,xu.default)("uppy-StatusBar",`is-${m}`,{"has-ghosts":S}),C=(()=>{switch(m){case wu:case Su:return h(Eg,{progress:ts(b)});case Wo:return h(Fg,{i18n:T});case Ag:return h(Og,{error:o,i18n:T,numUploads:X,complete:Oe});case Vo:return h(Cg,{i18n:T,supportsUploadProgress:x,totalProgress:f,showProgressDetails:z,isUploadStarted:I,isAllComplete:B,isAllPaused:n,newFiles:e,numUploads:X,complete:Oe,totalUploadedSize:ve,totalSize:ie,totalETA:de,startUpload:M});default:return null}})();return!(y||A||R||O||k)&&!C||m===Wo&&E?null:h("div",{className:P},h("div",{className:w,style:{width:`${g}%`},role:"progressbar","aria-label":`${g}%`,"aria-valuetext":`${g}%`,"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":_}),C,h("div",{className:"uppy-StatusBar-actions"},y?h(_g,{newFiles:e,isUploadStarted:I,recoveredState:d,i18n:T,isSomeGhost:S,startUpload:M,uploadState:m}):null,A?h(wg,{i18n:T,uppy:L}):null,R?h(xg,{isAllPaused:n,i18n:T,isAllComplete:B,resumableUploads:s,uppy:L}):null,O?h(Sg,{i18n:T,uppy:L}):null,k?h(Pg,{i18n:T,doneButtonHandler:F}):null))}var Rg={strings:{uploading:"Uploading",complete:"Complete",uploadFailed:"Upload failed",paused:"Paused",retry:"Retry",cancel:"Cancel",pause:"Pause",resume:"Resume",done:"Done",filesUploadedOfTotal:{0:"%{complete} of %{smart_count} file uploaded",1:"%{complete} of %{smart_count} files uploaded"},dataUploadedOfTotal:"%{complete} of %{total}",dataUploadedOfUnknown:"%{complete} of unknown",xTimeLeft:"%{time} left",uploadXFiles:{0:"Upload %{smart_count} file",1:"Upload %{smart_count} files"},uploadXNewFiles:{0:"Upload +%{smart_count} file",1:"Upload +%{smart_count} files"},upload:"Upload",retryUpload:"Retry upload",xMoreFilesAdded:{0:"%{smart_count} more file added",1:"%{smart_count} more files added"},showErrorDetails:"Show error details"}};function oe(r,e){if(!{}.hasOwnProperty.call(r,e))throw new TypeError("attempted to use private field on non-instance");return r}var s1=0;function hi(r){return"__private_"+s1+++"_"+r}var o1={version:"4.1.3"},a1=2e3,l1=2e3;function u1(r,e,t,i){if(r)return Xe.STATE_ERROR;if(e)return Xe.STATE_COMPLETE;if(t)return Xe.STATE_WAITING;let n=Xe.STATE_WAITING,s=Object.keys(i);for(let o=0;o<s.length;o++){let{progress:a}=i[s[o]];if(a.uploadStarted&&!a.uploadComplete)return Xe.STATE_UPLOADING;a.preprocess&&(n=Xe.STATE_PREPROCESSING),a.postprocess&&n!==Xe.STATE_PREPROCESSING&&(n=Xe.STATE_POSTPROCESSING)}return n}var c1={hideUploadButton:!1,hideRetryButton:!1,hidePauseResumeButton:!1,hideCancelButton:!1,showProgressDetails:!1,hideAfterFinish:!0,doneButtonHandler:null},it=hi("lastUpdateTime"),ut=hi("previousUploadedBytes"),Dt=hi("previousSpeed"),Ye=hi("previousETA"),ku=hi("computeSmoothETA"),rs=hi("onUploadStart"),di=class extends At{constructor(e,t){super(e,v(v({},c1),t)),Object.defineProperty(this,ku,{value:d1}),Object.defineProperty(this,it,{writable:!0,value:void 0}),Object.defineProperty(this,ut,{writable:!0,value:void 0}),Object.defineProperty(this,Dt,{writable:!0,value:void 0}),Object.defineProperty(this,Ye,{writable:!0,value:void 0}),this.startUpload=()=>this.uppy.upload().catch(()=>{}),Object.defineProperty(this,rs,{writable:!0,value:()=>{let{recoveredState:i}=this.uppy.getState();if(oe(this,Dt)[Dt]=null,oe(this,Ye)[Ye]=null,i){oe(this,ut)[ut]=Object.values(i.files).reduce((n,s)=>{let{progress:o}=s;return n+o.bytesUploaded},0),this.uppy.emit("restore-confirmed");return}oe(this,it)[it]=performance.now(),oe(this,ut)[ut]=0}}),this.id=this.opts.id||"StatusBar",this.title="StatusBar",this.type="progressindicator",this.defaultLocale=Rg,this.i18nInit(),this.render=this.render.bind(this),this.install=this.install.bind(this)}render(e){let{capabilities:t,files:i,allowNewUpload:n,totalProgress:s,error:o,recoveredState:a}=e,{newFiles:l,startedFiles:u,completeFiles:c,isUploadStarted:d,isAllComplete:m,isAllPaused:f,isUploadInProgress:b,isSomeGhost:x}=this.uppy.getObjectOfFilesPerState(),E=a?Object.values(i):l,S=!!t.resumableUploads,F=t.uploadProgress!==!1,I=null,T=0;u.every(L=>L.progress.bytesTotal!=null&&L.progress.bytesTotal!==0)?(I=0,u.forEach(L=>{I+=L.progress.bytesTotal||0,T+=L.progress.bytesUploaded||0})):u.forEach(L=>{T+=L.progress.bytesUploaded||0});let M=oe(this,ku)[ku]({uploaded:T,total:I});return Pu({error:o,uploadState:u1(o,m,a,e.files||{}),allowNewUpload:n,totalProgress:s,totalSize:I,totalUploadedSize:T,isAllComplete:!1,isAllPaused:f,isUploadStarted:d,isUploadInProgress:b,isSomeGhost:x,recoveredState:a,complete:c.length,newFiles:E.length,numUploads:u.length,totalETA:M,files:i,i18n:this.i18n,uppy:this.uppy,startUpload:this.startUpload,doneButtonHandler:this.opts.doneButtonHandler,resumableUploads:S,supportsUploadProgress:F,showProgressDetails:this.opts.showProgressDetails,hideUploadButton:this.opts.hideUploadButton,hideRetryButton:this.opts.hideRetryButton,hidePauseResumeButton:this.opts.hidePauseResumeButton,hideCancelButton:this.opts.hideCancelButton,hideAfterFinish:this.opts.hideAfterFinish})}onMount(){let e=this.el;Ao(e)||(e.dir="ltr")}install(){let{target:e}=this.opts;e&&this.mount(e,this),this.uppy.on("upload",oe(this,rs)[rs]),oe(this,it)[it]=performance.now(),oe(this,ut)[ut]=this.uppy.getFiles().reduce((t,i)=>t+i.progress.bytesUploaded,0)}uninstall(){this.unmount(),this.uppy.off("upload",oe(this,rs)[rs])}};function d1(r){var e,t;if(r.total==null||r.total===0)return null;let i=r.total-r.uploaded;if(i<=0)return null;(t=(e=oe(this,it))[it])!=null||(e[it]=performance.now());let n=performance.now()-oe(this,it)[it];if(n===0){var s;return Math.round(((s=oe(this,Ye)[Ye])!=null?s:0)/100)/10}let o=r.uploaded-oe(this,ut)[ut];if(oe(this,ut)[ut]=r.uploaded,o<=0){var a;return Math.round(((a=oe(this,Ye)[Ye])!=null?a:0)/100)/10}let l=o/n,u=oe(this,Dt)[Dt]==null?l:qo(l,oe(this,Dt)[Dt],a1,n);oe(this,Dt)[Dt]=u;let c=i/u,d=Math.max(oe(this,Ye)[Ye]-n,0),m=oe(this,Ye)[Ye]==null?c:qo(c,d,l1,n);return oe(this,Ye)[Ye]=m,oe(this,it)[it]=performance.now(),Math.round(m/100)/10}di.VERSION=o1.version;var Ig=300,Go=class extends ue{constructor(){super(...arguments),this.ref=Co()}componentWillEnter(e){this.ref.current.style.opacity="1",this.ref.current.style.transform="none",setTimeout(e,Ig)}componentWillLeave(e){this.ref.current.style.opacity="0",this.ref.current.style.transform="translateY(350%)",setTimeout(e,Ig)}render(){let{children:e}=this.props;return h("div",{className:"uppy-Informer-animated",ref:this.ref},e)}};function h1(r,e){return Object.assign(r,e)}function f1(r,e){var t;return(t=r?.key)!=null?t:e}function p1(r,e){let t=r._ptgLinkedRefs||(r._ptgLinkedRefs={});return t[e]||(t[e]=i=>{r.refs[e]=i})}function is(r){let e={};for(let t=0;t<r.length;t++)if(r[t]!=null){let i=f1(r[t],t.toString(36));e[i]=r[t]}return e}function m1(r,e){r=r||{},e=e||{};let t=o=>e.hasOwnProperty(o)?e[o]:r[o],i={},n=[];for(let o in r)e.hasOwnProperty(o)?n.length&&(i[o]=n,n=[]):n.push(o);let s={};for(let o in e){if(i.hasOwnProperty(o))for(let a=0;a<i[o].length;a++){let l=i[o][a];s[i[o][a]]=t(l)}s[o]=t(o)}for(let o=0;o<n.length;o++)s[n[o]]=t(n[o]);return s}var g1=r=>r,y1=(()=>{class r extends ue{constructor(t,i){super(t,i),this.refs={},this.state={children:is(ze(ze(this.props.children))||[])},this.performAppear=this.performAppear.bind(this),this.performEnter=this.performEnter.bind(this),this.performLeave=this.performLeave.bind(this)}componentWillMount(){this.currentlyTransitioningKeys={},this.keysToAbortLeave=[],this.keysToEnter=[],this.keysToLeave=[]}componentDidMount(){let t=this.state.children;for(let i in t)t[i]&&this.performAppear(i)}componentWillReceiveProps(t){let i=is(ze(t.children)||[]),n=this.state.children;this.setState(o=>({children:m1(o.children,i)}));let s;for(s in i)if(i.hasOwnProperty(s)){let o=n&&n.hasOwnProperty(s);i[s]&&o&&this.currentlyTransitioningKeys[s]?(this.keysToEnter.push(s),this.keysToAbortLeave.push(s)):i[s]&&!o&&!this.currentlyTransitioningKeys[s]&&this.keysToEnter.push(s)}for(s in n)if(n.hasOwnProperty(s)){let o=i&&i.hasOwnProperty(s);n[s]&&!o&&!this.currentlyTransitioningKeys[s]&&this.keysToLeave.push(s)}}componentDidUpdate(){let{keysToEnter:t}=this;this.keysToEnter=[],t.forEach(this.performEnter);let{keysToLeave:i}=this;this.keysToLeave=[],i.forEach(this.performLeave)}_finishAbort(t){let i=this.keysToAbortLeave.indexOf(t);i!==-1&&this.keysToAbortLeave.splice(i,1)}performAppear(t){this.currentlyTransitioningKeys[t]=!0;let i=this.refs[t];i!=null&&i.componentWillAppear?i.componentWillAppear(this._handleDoneAppearing.bind(this,t)):this._handleDoneAppearing(t)}_handleDoneAppearing(t){let i=this.refs[t];i!=null&&i.componentDidAppear&&i.componentDidAppear(),delete this.currentlyTransitioningKeys[t],this._finishAbort(t);let n=is(ze(this.props.children)||[]);(!n||!n.hasOwnProperty(t))&&this.performLeave(t)}performEnter(t){this.currentlyTransitioningKeys[t]=!0;let i=this.refs[t];i!=null&&i.componentWillEnter?i.componentWillEnter(this._handleDoneEntering.bind(this,t)):this._handleDoneEntering(t)}_handleDoneEntering(t){let i=this.refs[t];i!=null&&i.componentDidEnter&&i.componentDidEnter(),delete this.currentlyTransitioningKeys[t],this._finishAbort(t);let n=is(ze(this.props.children)||[]);(!n||!n.hasOwnProperty(t))&&this.performLeave(t)}performLeave(t){if(this.keysToAbortLeave.indexOf(t)!==-1)return;this.currentlyTransitioningKeys[t]=!0;let n=this.refs[t];n!=null&&n.componentWillLeave?n.componentWillLeave(this._handleDoneLeaving.bind(this,t)):this._handleDoneLeaving(t)}_handleDoneLeaving(t){if(this.keysToAbortLeave.indexOf(t)!==-1)return;let n=this.refs[t];n!=null&&n.componentDidLeave&&n.componentDidLeave(),delete this.currentlyTransitioningKeys[t];let s=is(ze(this.props.children)||[]);if(s&&s.hasOwnProperty(t))this.performEnter(t);else{let o=h1({},this.state.children);delete o[t],this.setState({children:o})}}render(t,i){let E=t,{childFactory:n,transitionLeave:s,transitionName:o,transitionAppear:a,transitionEnter:l,transitionLeaveTimeout:u,transitionEnterTimeout:c,transitionAppearTimeout:d,component:m}=E,f=Lr(E,["childFactory","transitionLeave","transitionName","transitionAppear","transitionEnter","transitionLeaveTimeout","transitionEnterTimeout","transitionAppearTimeout","component"]),{children:b}=i,x=Object.entries(b).map(S=>{let[F,I]=S;if(!I)return;let T=p1(this,F);return Un(n(I),{ref:T,key:F})}).filter(Boolean);return h(m,f,x)}}return r.defaultProps={component:"span",childFactory:g1},r})(),Ug=y1;var v1={version:"4.2.1"},Sr=class extends At{constructor(e,t){super(e,t),this.render=i=>h("div",{className:"uppy uppy-Informer"},h(Ug,null,i.info.map(n=>h(Go,{key:n.message},h("p",{role:"alert"},n.message," ",n.details&&h("span",{"aria-label":n.details,"data-microtip-position":"top-left","data-microtip-size":"medium",role:"tooltip",onClick:()=>alert(`${n.message} 

 ${n.details}`)},"?")))))),this.type="progressindicator",this.id=this.opts.id||"Informer",this.title="Informer"}install(){let{target:e}=this.opts;e&&this.mount(e,this)}};Sr.VERSION=v1.version;var b1=/^data:([^/]+\/[^,;]+(?:[^,]*?))(;base64)?,([\s\S]*)$/;function _1(r,e,t){var i,n;let s=b1.exec(r),o=(i=(n=e.mimeType)!=null?n:s?.[1])!=null?i:"plain/text",a;if(s?.[2]!=null){let l=atob(decodeURIComponent(s[3])),u=new Uint8Array(l.length);for(let c=0;c<l.length;c++)u[c]=l.charCodeAt(c);a=[u]}else s?.[3]!=null&&(a=[decodeURIComponent(s[3])]);return t?new File(a,e.name||"",{type:o}):new Blob(a,{type:o})}var Dg=_1;function Ko(r){return r.startsWith("blob:")}function Jo(r){return r?/^[^/]+\/(jpe?g|gif|png|svg|svg\+xml|bmp|webp|avif)$/.test(r):!1}function ee(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}var Hg=typeof self<"u"?self:global,as=typeof navigator<"u",w1=as&&typeof HTMLImageElement>"u",Lg=!(typeof global>"u"||typeof process>"u"||!process.versions||!process.versions.node),Vg=Hg.Buffer,Wg=!!Vg,S1=r=>r!==void 0;function Gg(r){return r===void 0||(r instanceof Map?r.size===0:Object.values(r).filter(S1).length===0)}function ye(r){let e=new Error(r);throw delete e.stack,e}function Bg(r){let e=function(t){let i=0;return t.ifd0.enabled&&(i+=1024),t.exif.enabled&&(i+=2048),t.makerNote&&(i+=2048),t.userComment&&(i+=1024),t.gps.enabled&&(i+=512),t.interop.enabled&&(i+=100),t.ifd1.enabled&&(i+=1024),i+2048}(r);return r.jfif.enabled&&(e+=50),r.xmp.enabled&&(e+=2e4),r.iptc.enabled&&(e+=14e3),r.icc.enabled&&(e+=6e3),e}var Eu=r=>String.fromCharCode.apply(null,r),Ng=typeof TextDecoder<"u"?new TextDecoder("utf-8"):void 0,Pr=class r{static from(e,t){return e instanceof this&&e.le===t?e:new r(e,void 0,void 0,t)}constructor(e,t=0,i,n){if(typeof n=="boolean"&&(this.le=n),Array.isArray(e)&&(e=new Uint8Array(e)),e===0)this.byteOffset=0,this.byteLength=0;else if(e instanceof ArrayBuffer){i===void 0&&(i=e.byteLength-t);let s=new DataView(e,t,i);this._swapDataView(s)}else if(e instanceof Uint8Array||e instanceof DataView||e instanceof r){i===void 0&&(i=e.byteLength-t),(t+=e.byteOffset)+i>e.byteOffset+e.byteLength&&ye("Creating view outside of available memory in ArrayBuffer");let s=new DataView(e.buffer,t,i);this._swapDataView(s)}else if(typeof e=="number"){let s=new DataView(new ArrayBuffer(e));this._swapDataView(s)}else ye("Invalid input argument for BufferView: "+e)}_swapArrayBuffer(e){this._swapDataView(new DataView(e))}_swapBuffer(e){this._swapDataView(new DataView(e.buffer,e.byteOffset,e.byteLength))}_swapDataView(e){this.dataView=e,this.buffer=e.buffer,this.byteOffset=e.byteOffset,this.byteLength=e.byteLength}_lengthToEnd(e){return this.byteLength-e}set(e,t,i=r){return e instanceof DataView||e instanceof r?e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer&&(e=new Uint8Array(e)),e instanceof Uint8Array||ye("BufferView.set(): Invalid data argument."),this.toUint8().set(e,t),new i(this,t,e.byteLength)}subarray(e,t){return t=t||this._lengthToEnd(e),new r(this,e,t)}toUint8(){return new Uint8Array(this.buffer,this.byteOffset,this.byteLength)}getUint8Array(e,t){return new Uint8Array(this.buffer,this.byteOffset+e,t)}getString(e=0,t=this.byteLength){return n=this.getUint8Array(e,t),Ng?Ng.decode(n):Wg?Buffer.from(n).toString("utf8"):decodeURIComponent(escape(Eu(n)));var n}getLatin1String(e=0,t=this.byteLength){let i=this.getUint8Array(e,t);return Eu(i)}getUnicodeString(e=0,t=this.byteLength){let i=[];for(let n=0;n<t&&e+n<this.byteLength;n+=2)i.push(this.getUint16(e+n));return Eu(i)}getInt8(e){return this.dataView.getInt8(e)}getUint8(e){return this.dataView.getUint8(e)}getInt16(e,t=this.le){return this.dataView.getInt16(e,t)}getInt32(e,t=this.le){return this.dataView.getInt32(e,t)}getUint16(e,t=this.le){return this.dataView.getUint16(e,t)}getUint32(e,t=this.le){return this.dataView.getUint32(e,t)}getFloat32(e,t=this.le){return this.dataView.getFloat32(e,t)}getFloat64(e,t=this.le){return this.dataView.getFloat64(e,t)}getFloat(e,t=this.le){return this.dataView.getFloat32(e,t)}getDouble(e,t=this.le){return this.dataView.getFloat64(e,t)}getUintBytes(e,t,i){switch(t){case 1:return this.getUint8(e,i);case 2:return this.getUint16(e,i);case 4:return this.getUint32(e,i);case 8:return this.getUint64&&this.getUint64(e,i)}}getUint(e,t,i){switch(t){case 8:return this.getUint8(e,i);case 16:return this.getUint16(e,i);case 32:return this.getUint32(e,i);case 64:return this.getUint64&&this.getUint64(e,i)}}toString(e){return this.dataView.toString(e,this.constructor.name)}ensureChunk(){}};function Cu(r,e){ye(`${r} '${e}' was not loaded, try using full build of exifr.`)}var ls=class extends Map{constructor(e){super(),this.kind=e}get(e,t){return this.has(e)||Cu(this.kind,e),t&&(e in t||function(i,n){ye(`Unknown ${i} '${n}'.`)}(this.kind,e),t[e].enabled||Cu(this.kind,e)),super.get(e)}keyList(){return Array.from(this.keys())}},ea=new ls("file parser"),Qe=new ls("segment parser"),ds=new ls("file reader"),x1=Hg.fetch;function jg(r,e){return(t=r).startsWith("data:")||t.length>1e4?Ou(r,e,"base64"):Lg&&r.includes("://")?Fu(r,e,"url",Xo):Lg?Ou(r,e,"fs"):as?Fu(r,e,"url",Xo):void ye("Invalid input argument");var t}function Fu(r,e,t,i){return p(this,null,function*(){return ds.has(t)?Ou(r,e,t):i?function(n,s){return p(this,null,function*(){let o=yield s(n);return new Pr(o)})}(r,i):void ye(`Parser ${t} is not loaded`)})}function Ou(r,e,t){return p(this,null,function*(){let i=new(ds.get(t))(r,e);return yield i.read(),i})}var Xo=r=>x1(r).then(e=>e.arrayBuffer()),us=r=>new Promise((e,t)=>{let i=new FileReader;i.onloadend=()=>e(i.result||new ArrayBuffer),i.onerror=t,i.readAsArrayBuffer(r)}),Au=class extends Map{get tagKeys(){return this.allKeys||(this.allKeys=Array.from(this.keys())),this.allKeys}get tagValues(){return this.allValues||(this.allValues=Array.from(this.values())),this.allValues}};function Kg(r,e,t){let i=new Au;for(let[n,s]of t)i.set(n,s);if(Array.isArray(e))for(let n of e)r.set(n,i);else r.set(e,i);return i}function Jg(r,e,t){let i,n=r.get(e);for(i of t)n.set(i[0],i[1])}var hs=new Map,Lu=new Map,Bu=new Map,fi=["chunked","firstChunkSize","firstChunkSizeNode","firstChunkSizeBrowser","chunkSize","chunkLimit"],ta=["jfif","xmp","icc","iptc","ihdr"],cs=["tiff",...ta],pe=["ifd0","ifd1","exif","gps","interop"],pi=[...cs,...pe],mi=["makerNote","userComment"],ra=["translateKeys","translateValues","reviveValues","multiSegment"],gi=[...ra,"sanitize","mergeOutput","silentErrors"],Yo=class{get translate(){return this.translateKeys||this.translateValues||this.reviveValues}},xr=class extends Yo{get needed(){return this.enabled||this.deps.size>0}constructor(e,t,i,n){if(super(),ee(this,"enabled",!1),ee(this,"skip",new Set),ee(this,"pick",new Set),ee(this,"deps",new Set),ee(this,"translateKeys",!1),ee(this,"translateValues",!1),ee(this,"reviveValues",!1),this.key=e,this.enabled=t,this.parse=this.enabled,this.applyInheritables(n),this.canBeFiltered=pe.includes(e),this.canBeFiltered&&(this.dict=hs.get(e)),i!==void 0)if(Array.isArray(i))this.parse=this.enabled=!0,this.canBeFiltered&&i.length>0&&this.translateTagSet(i,this.pick);else if(typeof i=="object"){if(this.enabled=!0,this.parse=i.parse!==!1,this.canBeFiltered){let{pick:s,skip:o}=i;s&&s.length>0&&this.translateTagSet(s,this.pick),o&&o.length>0&&this.translateTagSet(o,this.skip)}this.applyInheritables(i)}else i===!0||i===!1?this.parse=this.enabled=i:ye(`Invalid options argument: ${i}`)}applyInheritables(e){let t,i;for(t of ra)i=e[t],i!==void 0&&(this[t]=i)}translateTagSet(e,t){if(this.dict){let i,n,{tagKeys:s,tagValues:o}=this.dict;for(i of e)typeof i=="string"?(n=o.indexOf(i),n===-1&&(n=s.indexOf(Number(i))),n!==-1&&t.add(Number(s[n]))):t.add(i)}else for(let i of e)t.add(i)}finalizeFilters(){!this.enabled&&this.deps.size>0?(this.enabled=!0,Qo(this.pick,this.deps)):this.enabled&&this.pick.size>0&&Qo(this.pick,this.deps)}},Be={jfif:!1,tiff:!0,xmp:!1,icc:!1,iptc:!1,ifd0:!0,ifd1:!1,exif:!0,gps:!0,interop:!1,ihdr:void 0,makerNote:!1,userComment:!1,multiSegment:!1,skip:[],pick:[],translateKeys:!0,translateValues:!0,reviveValues:!0,sanitize:!0,mergeOutput:!0,silentErrors:!0,chunked:!0,firstChunkSize:void 0,firstChunkSizeNode:512,firstChunkSizeBrowser:65536,chunkSize:65536,chunkLimit:5},Mg=new Map,kr=class extends Yo{static useCached(e){let t=Mg.get(e);return t!==void 0||(t=new this(e),Mg.set(e,t)),t}constructor(e){super(),e===!0?this.setupFromTrue():e===void 0?this.setupFromUndefined():Array.isArray(e)?this.setupFromArray(e):typeof e=="object"?this.setupFromObject(e):ye(`Invalid options argument ${e}`),this.firstChunkSize===void 0&&(this.firstChunkSize=as?this.firstChunkSizeBrowser:this.firstChunkSizeNode),this.mergeOutput&&(this.ifd1.enabled=!1),this.filterNestedSegmentTags(),this.traverseTiffDependencyTree(),this.checkLoadedPlugins()}setupFromUndefined(){let e;for(e of fi)this[e]=Be[e];for(e of gi)this[e]=Be[e];for(e of mi)this[e]=Be[e];for(e of pi)this[e]=new xr(e,Be[e],void 0,this)}setupFromTrue(){let e;for(e of fi)this[e]=Be[e];for(e of gi)this[e]=Be[e];for(e of mi)this[e]=!0;for(e of pi)this[e]=new xr(e,!0,void 0,this)}setupFromArray(e){let t;for(t of fi)this[t]=Be[t];for(t of gi)this[t]=Be[t];for(t of mi)this[t]=Be[t];for(t of pi)this[t]=new xr(t,!1,void 0,this);this.setupGlobalFilters(e,void 0,pe)}setupFromObject(e){let t;for(t of(pe.ifd0=pe.ifd0||pe.image,pe.ifd1=pe.ifd1||pe.thumbnail,Object.assign(this,e),fi))this[t]=Tu(e[t],Be[t]);for(t of gi)this[t]=Tu(e[t],Be[t]);for(t of mi)this[t]=Tu(e[t],Be[t]);for(t of cs)this[t]=new xr(t,Be[t],e[t],this);for(t of pe)this[t]=new xr(t,Be[t],e[t],this.tiff);this.setupGlobalFilters(e.pick,e.skip,pe,pi),e.tiff===!0?this.batchEnableWithBool(pe,!0):e.tiff===!1?this.batchEnableWithUserValue(pe,e):Array.isArray(e.tiff)?this.setupGlobalFilters(e.tiff,void 0,pe):typeof e.tiff=="object"&&this.setupGlobalFilters(e.tiff.pick,e.tiff.skip,pe)}batchEnableWithBool(e,t){for(let i of e)this[i].enabled=t}batchEnableWithUserValue(e,t){for(let i of e){let n=t[i];this[i].enabled=n!==!1&&n!==void 0}}setupGlobalFilters(e,t,i,n=i){if(e&&e.length){for(let o of n)this[o].enabled=!1;let s=zg(e,i);for(let[o,a]of s)Qo(this[o].pick,a),this[o].enabled=!0}else if(t&&t.length){let s=zg(t,i);for(let[o,a]of s)Qo(this[o].skip,a)}}filterNestedSegmentTags(){let{ifd0:e,exif:t,xmp:i,iptc:n,icc:s}=this;this.makerNote?t.deps.add(37500):t.skip.add(37500),this.userComment?t.deps.add(37510):t.skip.add(37510),i.enabled||e.skip.add(700),n.enabled||e.skip.add(33723),s.enabled||e.skip.add(34675)}traverseTiffDependencyTree(){let{ifd0:e,exif:t,gps:i,interop:n}=this;n.needed&&(t.deps.add(40965),e.deps.add(40965)),t.needed&&e.deps.add(34665),i.needed&&e.deps.add(34853),this.tiff.enabled=pe.some(s=>this[s].enabled===!0)||this.makerNote||this.userComment;for(let s of pe)this[s].finalizeFilters()}get onlyTiff(){return!ta.map(e=>this[e].enabled).some(e=>e===!0)&&this.tiff.enabled}checkLoadedPlugins(){for(let e of cs)this[e].enabled&&!Qe.has(e)&&Cu("segment parser",e)}};function zg(r,e){let t,i,n,s,o=[];for(n of e){for(s of(t=hs.get(n),i=[],t))(r.includes(s[0])||r.includes(s[1]))&&i.push(s[0]);i.length&&o.push([n,i])}return o}function Tu(r,e){return r!==void 0?r:e!==void 0?e:void 0}function Qo(r,e){for(let t of e)r.add(t)}ee(kr,"default",Be);var yi=class{constructor(e){ee(this,"parsers",{}),ee(this,"output",{}),ee(this,"errors",[]),ee(this,"pushToErrors",t=>this.errors.push(t)),this.options=kr.useCached(e)}read(e){return p(this,null,function*(){this.file=yield function(t,i){return typeof t=="string"?jg(t,i):as&&!w1&&t instanceof HTMLImageElement?jg(t.src,i):t instanceof Uint8Array||t instanceof ArrayBuffer||t instanceof DataView?new Pr(t):as&&t instanceof Blob?Fu(t,i,"blob",us):void ye("Invalid input argument")}(e,this.options)})}setup(){if(this.fileParser)return;let{file:e}=this,t=e.getUint16(0);for(let[i,n]of ea)if(n.canHandle(e,t))return this.fileParser=new n(this.options,this.file,this.parsers),e[i]=!0;this.file.close&&this.file.close(),ye("Unknown file format")}parse(){return p(this,null,function*(){let{output:e,errors:t}=this;return this.setup(),this.options.silentErrors?(yield this.executeParsers().catch(this.pushToErrors),t.push(...this.fileParser.errors)):yield this.executeParsers(),this.file.close&&this.file.close(),this.options.silentErrors&&t.length>0&&(e.errors=t),Gg(i=e)?void 0:i;var i})}executeParsers(){return p(this,null,function*(){let{output:e}=this;yield this.fileParser.parse();let t=Object.values(this.parsers).map(i=>p(this,null,function*(){let n=yield i.parse();i.assignToOutput(e,n)}));this.options.silentErrors&&(t=t.map(i=>i.catch(this.pushToErrors))),yield Promise.all(t)})}extractThumbnail(){return p(this,null,function*(){this.setup();let{options:e,file:t}=this,i=Qe.get("tiff",e);var n;if(t.tiff?n={start:0,type:"tiff"}:t.jpeg&&(n=yield this.fileParser.getOrFindSegment("tiff")),n===void 0)return;let s=yield this.fileParser.ensureSegmentChunk(n),o=this.parsers.tiff=new i(s,e,t),a=yield o.extractThumbnail();return t.close&&t.close(),a})}};function Xg(r,e){return p(this,null,function*(){let t=new yi(e);return yield t.read(r),t.parse()})}var P1=Object.freeze({__proto__:null,parse:Xg,Exifr:yi,fileParsers:ea,segmentParsers:Qe,fileReaders:ds,tagKeys:hs,tagValues:Lu,tagRevivers:Bu,createDictionary:Kg,extendDictionary:Jg,fetchUrlAsArrayBuffer:Xo,readBlobAsArrayBuffer:us,chunkedProps:fi,otherSegments:ta,segments:cs,tiffBlocks:pe,segmentsAndBlocks:pi,tiffExtractables:mi,inheritables:ra,allFormatters:gi,Options:kr}),Gt=class{static findPosition(e,t){let i=e.getUint16(t+2)+2,n=typeof this.headerLength=="function"?this.headerLength(e,t,i):this.headerLength,s=t+n,o=i-n;return{offset:t,length:i,headerLength:n,start:s,size:o,end:s+o}}static parse(e,t={}){return new this(e,new kr({[this.type]:t}),e).parse()}normalizeInput(e){return e instanceof Pr?e:new Pr(e)}constructor(e,t={},i){ee(this,"errors",[]),ee(this,"raw",new Map),ee(this,"handleError",n=>{if(!this.options.silentErrors)throw n;this.errors.push(n.message)}),this.chunk=this.normalizeInput(e),this.file=i,this.type=this.constructor.type,this.globalOptions=this.options=t,this.localOptions=t[this.type],this.canTranslate=this.localOptions&&this.localOptions.translate}translate(){this.canTranslate&&(this.translated=this.translateBlock(this.raw,this.type))}get output(){return this.translated?this.translated:this.raw?Object.fromEntries(this.raw):void 0}translateBlock(e,t){let i=Bu.get(t),n=Lu.get(t),s=hs.get(t),o=this.options[t],a=o.reviveValues&&!!i,l=o.translateValues&&!!n,u=o.translateKeys&&!!s,c={};for(let[d,m]of e)a&&i.has(d)?m=i.get(d)(m):l&&n.has(d)&&(m=this.translateValue(m,n.get(d))),u&&s.has(d)&&(d=s.get(d)||d),c[d]=m;return c}translateValue(e,t){return t[e]||t.DEFAULT||e}assignToOutput(e,t){this.assignObjectToOutput(e,this.constructor.type,t)}assignObjectToOutput(e,t,i){if(this.globalOptions.mergeOutput)return Object.assign(e,i);e[t]?Object.assign(e[t],i):e[t]=i}};ee(Gt,"headerLength",4),ee(Gt,"type",void 0),ee(Gt,"multiSegment",!1),ee(Gt,"canHandle",()=>!1);function k1(r){return r===192||r===194||r===196||r===219||r===221||r===218||r===254}function E1(r){return r>=224&&r<=239}function T1(r,e,t){for(let[i,n]of Qe)if(n.canHandle(r,e,t))return i}var Zo=class extends class{constructor(e,t,i){ee(this,"errors",[]),ee(this,"ensureSegmentChunk",n=>p(this,null,function*(){let s=n.start,o=n.size||65536;if(this.file.chunked)if(this.file.available(s,o))n.chunk=this.file.subarray(s,o);else try{n.chunk=yield this.file.readChunk(s,o)}catch(a){ye(`Couldn't read segment: ${JSON.stringify(n)}. ${a.message}`)}else this.file.byteLength>s+o?n.chunk=this.file.subarray(s,o):n.size===void 0?n.chunk=this.file.subarray(s):ye("Segment unreachable: "+JSON.stringify(n));return n.chunk})),this.extendOptions&&this.extendOptions(e),this.options=e,this.file=t,this.parsers=i}injectSegment(e,t){this.options[e].enabled&&this.createParser(e,t)}createParser(e,t){let i=new(Qe.get(e))(t,this.options,this.file);return this.parsers[e]=i}createParsers(e){for(let t of e){let{type:i,chunk:n}=t,s=this.options[i];if(s&&s.enabled){let o=this.parsers[i];o&&o.append||o||this.createParser(i,n)}}}readSegments(e){return p(this,null,function*(){let t=e.map(this.ensureSegmentChunk);yield Promise.all(t)})}}{constructor(...e){super(...e),ee(this,"appSegments",[]),ee(this,"jpegSegments",[]),ee(this,"unknownSegments",[])}static canHandle(e,t){return t===65496}parse(){return p(this,null,function*(){yield this.findAppSegments(),yield this.readSegments(this.appSegments),this.mergeMultiSegments(),this.createParsers(this.mergedAppSegments||this.appSegments)})}setupSegmentFinderArgs(e){e===!0?(this.findAll=!0,this.wanted=new Set(Qe.keyList())):(e=e===void 0?Qe.keyList().filter(t=>this.options[t].enabled):e.filter(t=>this.options[t].enabled&&Qe.has(t)),this.findAll=!1,this.remaining=new Set(e),this.wanted=new Set(e)),this.unfinishedMultiSegment=!1}findAppSegments(e=0,t){return p(this,null,function*(){this.setupSegmentFinderArgs(t);let{file:i,findAll:n,wanted:s,remaining:o}=this;if(!n&&this.file.chunked&&(n=Array.from(s).some(a=>{let l=Qe.get(a),u=this.options[a];return l.multiSegment&&u.multiSegment}),n&&(yield this.file.readWhole())),e=this.findAppSegmentsInRange(e,i.byteLength),!this.options.onlyTiff&&i.chunked){let a=!1;for(;o.size>0&&!a&&(i.canReadNextChunk||this.unfinishedMultiSegment);){let{nextChunkOffset:l}=i,u=this.appSegments.some(c=>!this.file.available(c.offset||c.start,c.length||c.size));if(a=e>l&&!u?!(yield i.readNextChunk(e)):!(yield i.readNextChunk(l)),(e=this.findAppSegmentsInRange(e,i.byteLength))===void 0)return}}})}findAppSegmentsInRange(e,t){t-=2;let i,n,s,o,a,l,{file:u,findAll:c,wanted:d,remaining:m,options:f}=this;for(;e<t;e++)if(u.getUint8(e)===255){if(i=u.getUint8(e+1),E1(i)){if(n=u.getUint16(e+2),s=T1(u,e,n),s&&d.has(s)&&(o=Qe.get(s),a=o.findPosition(u,e),l=f[s],a.type=s,this.appSegments.push(a),!c&&(o.multiSegment&&l.multiSegment?(this.unfinishedMultiSegment=a.chunkNumber<a.chunkCount,this.unfinishedMultiSegment||m.delete(s)):m.delete(s),m.size===0)))break;f.recordUnknownSegments&&(a=Gt.findPosition(u,e),a.marker=i,this.unknownSegments.push(a)),e+=n+1}else if(k1(i)){if(n=u.getUint16(e+2),i===218&&f.stopAfterSos!==!1)return;f.recordJpegSegments&&this.jpegSegments.push({offset:e,length:n,marker:i}),e+=n+1}}return e}mergeMultiSegments(){if(!this.appSegments.some(t=>t.multiSegment))return;let e=function(t,i){let n,s,o,a=new Map;for(let l=0;l<t.length;l++)n=t[l],s=n[i],a.has(s)?o=a.get(s):a.set(s,o=[]),o.push(n);return Array.from(a)}(this.appSegments,"type");this.mergedAppSegments=e.map(([t,i])=>{let n=Qe.get(t,this.options);return n.handleMultiSegments?{type:t,chunk:n.handleMultiSegments(i)}:i[0]})}getSegment(e){return this.appSegments.find(t=>t.type===e)}getOrFindSegment(e){return p(this,null,function*(){let t=this.getSegment(e);return t===void 0&&(yield this.findAppSegments(0,[e]),t=this.getSegment(e)),t})}};ee(Zo,"type","jpeg"),ea.set("jpeg",Zo);var C1=[void 0,1,1,2,4,8,1,1,2,4,8,4,8,4],Ru=class extends Gt{parseHeader(){var e=this.chunk.getUint16();e===18761?this.le=!0:e===19789&&(this.le=!1),this.chunk.le=this.le,this.headerParsed=!0}parseTags(e,t,i=new Map){let{pick:n,skip:s}=this.options[t];n=new Set(n);let o=n.size>0,a=s.size===0,l=this.chunk.getUint16(e);e+=2;for(let u=0;u<l;u++){let c=this.chunk.getUint16(e);if(o){if(n.has(c)&&(i.set(c,this.parseTag(e,c,t)),n.delete(c),n.size===0))break}else!a&&s.has(c)||i.set(c,this.parseTag(e,c,t));e+=12}return i}parseTag(e,t,i){let{chunk:n}=this,s=n.getUint16(e+2),o=n.getUint32(e+4),a=C1[s];if(a*o<=4?e+=8:e=n.getUint32(e+8),(s<1||s>13)&&ye(`Invalid TIFF value type. block: ${i.toUpperCase()}, tag: ${t.toString(16)}, type: ${s}, offset ${e}`),e>n.byteLength&&ye(`Invalid TIFF value offset. block: ${i.toUpperCase()}, tag: ${t.toString(16)}, type: ${s}, offset ${e} is outside of chunk size ${n.byteLength}`),s===1)return n.getUint8Array(e,o);if(s===2)return(l=function(u){for(;u.endsWith("\0");)u=u.slice(0,-1);return u}(l=n.getString(e,o)).trim())===""?void 0:l;var l;if(s===7)return n.getUint8Array(e,o);if(o===1)return this.parseTagValue(s,e);{let u=new(function(d){switch(d){case 1:return Uint8Array;case 3:return Uint16Array;case 4:return Uint32Array;case 5:return Array;case 6:return Int8Array;case 8:return Int16Array;case 9:return Int32Array;case 10:return Array;case 11:return Float32Array;case 12:return Float64Array;default:return Array}}(s))(o),c=a;for(let d=0;d<o;d++)u[d]=this.parseTagValue(s,e),e+=c;return u}}parseTagValue(e,t){let{chunk:i}=this;switch(e){case 1:return i.getUint8(t);case 3:return i.getUint16(t);case 4:return i.getUint32(t);case 5:return i.getUint32(t)/i.getUint32(t+4);case 6:return i.getInt8(t);case 8:return i.getInt16(t);case 9:return i.getInt32(t);case 10:return i.getInt32(t)/i.getInt32(t+4);case 11:return i.getFloat(t);case 12:return i.getDouble(t);case 13:return i.getUint32(t);default:ye(`Invalid tiff type ${e}`)}}},os=class extends Ru{static canHandle(e,t){return e.getUint8(t+1)===225&&e.getUint32(t+4)===1165519206&&e.getUint16(t+8)===0}parse(){return p(this,null,function*(){this.parseHeader();let{options:e}=this;return e.ifd0.enabled&&(yield this.parseIfd0Block()),e.exif.enabled&&(yield this.safeParse("parseExifBlock")),e.gps.enabled&&(yield this.safeParse("parseGpsBlock")),e.interop.enabled&&(yield this.safeParse("parseInteropBlock")),e.ifd1.enabled&&(yield this.safeParse("parseThumbnailBlock")),this.createOutput()})}safeParse(e){let t=this[e]();return t.catch!==void 0&&(t=t.catch(this.handleError)),t}findIfd0Offset(){this.ifd0Offset===void 0&&(this.ifd0Offset=this.chunk.getUint32(4))}findIfd1Offset(){if(this.ifd1Offset===void 0){this.findIfd0Offset();let e=this.chunk.getUint16(this.ifd0Offset),t=this.ifd0Offset+2+12*e;this.ifd1Offset=this.chunk.getUint32(t)}}parseBlock(e,t){let i=new Map;return this[t]=i,this.parseTags(e,t,i),i}parseIfd0Block(){return p(this,null,function*(){if(this.ifd0)return;let{file:e}=this;this.findIfd0Offset(),this.ifd0Offset<8&&ye("Malformed EXIF data"),!e.chunked&&this.ifd0Offset>e.byteLength&&ye(`IFD0 offset points to outside of file.
this.ifd0Offset: ${this.ifd0Offset}, file.byteLength: ${e.byteLength}`),e.tiff&&(yield e.ensureChunk(this.ifd0Offset,Bg(this.options)));let t=this.parseBlock(this.ifd0Offset,"ifd0");return t.size!==0?(this.exifOffset=t.get(34665),this.interopOffset=t.get(40965),this.gpsOffset=t.get(34853),this.xmp=t.get(700),this.iptc=t.get(33723),this.icc=t.get(34675),this.options.sanitize&&(t.delete(34665),t.delete(40965),t.delete(34853),t.delete(700),t.delete(33723),t.delete(34675)),t):void 0})}parseExifBlock(){return p(this,null,function*(){if(this.exif||(this.ifd0||(yield this.parseIfd0Block()),this.exifOffset===void 0))return;this.file.tiff&&(yield this.file.ensureChunk(this.exifOffset,Bg(this.options)));let e=this.parseBlock(this.exifOffset,"exif");return this.interopOffset||(this.interopOffset=e.get(40965)),this.makerNote=e.get(37500),this.userComment=e.get(37510),this.options.sanitize&&(e.delete(40965),e.delete(37500),e.delete(37510)),this.unpack(e,41728),this.unpack(e,41729),e})}unpack(e,t){let i=e.get(t);i&&i.length===1&&e.set(t,i[0])}parseGpsBlock(){return p(this,null,function*(){if(this.gps||(this.ifd0||(yield this.parseIfd0Block()),this.gpsOffset===void 0))return;let e=this.parseBlock(this.gpsOffset,"gps");return e&&e.has(2)&&e.has(4)&&(e.set("latitude",$g(...e.get(2),e.get(1))),e.set("longitude",$g(...e.get(4),e.get(3)))),e})}parseInteropBlock(){return p(this,null,function*(){if(!this.interop&&(this.ifd0||(yield this.parseIfd0Block()),this.interopOffset!==void 0||this.exif||(yield this.parseExifBlock()),this.interopOffset!==void 0))return this.parseBlock(this.interopOffset,"interop")})}parseThumbnailBlock(e=!1){return p(this,null,function*(){if(!this.ifd1&&!this.ifd1Parsed&&(!this.options.mergeOutput||e))return this.findIfd1Offset(),this.ifd1Offset>0&&(this.parseBlock(this.ifd1Offset,"ifd1"),this.ifd1Parsed=!0),this.ifd1})}extractThumbnail(){return p(this,null,function*(){if(this.headerParsed||this.parseHeader(),this.ifd1Parsed||(yield this.parseThumbnailBlock(!0)),this.ifd1===void 0)return;let e=this.ifd1.get(513),t=this.ifd1.get(514);return this.chunk.getUint8Array(e,t)})}get image(){return this.ifd0}get thumbnail(){return this.ifd1}createOutput(){let e,t,i,n={};for(t of pe)if(e=this[t],!Gg(e))if(i=this.canTranslate?this.translateBlock(e,t):Object.fromEntries(e),this.options.mergeOutput){if(t==="ifd1")continue;Object.assign(n,i)}else n[t]=i;return this.makerNote&&(n.makerNote=this.makerNote),this.userComment&&(n.userComment=this.userComment),n}assignToOutput(e,t){if(this.globalOptions.mergeOutput)Object.assign(e,t);else for(let[i,n]of Object.entries(t))this.assignObjectToOutput(e,i,n)}};function $g(r,e,t,i){var n=r+e/60+t/3600;return i!=="S"&&i!=="W"||(n*=-1),n}ee(os,"type","tiff"),ee(os,"headerLength",10),Qe.set("tiff",os);var y2=Object.freeze({__proto__:null,default:P1,Exifr:yi,fileParsers:ea,segmentParsers:Qe,fileReaders:ds,tagKeys:hs,tagValues:Lu,tagRevivers:Bu,createDictionary:Kg,extendDictionary:Jg,fetchUrlAsArrayBuffer:Xo,readBlobAsArrayBuffer:us,chunkedProps:fi,otherSegments:ta,segments:cs,tiffBlocks:pe,segmentsAndBlocks:pi,tiffExtractables:mi,inheritables:ra,allFormatters:gi,Options:kr,parse:Xg}),Nu={ifd0:!1,ifd1:!1,exif:!1,gps:!1,interop:!1,sanitize:!1,reviveValues:!0,translateKeys:!1,translateValues:!1,mergeOutput:!1},v2=Object.assign({},Nu,{firstChunkSize:4e4,gps:[1,2,3,4]});var b2=Object.assign({},Nu,{tiff:!1,ifd1:!0,mergeOutput:!1});var F1=Object.assign({},Nu,{firstChunkSize:4e4,ifd0:[274]});function O1(r){return p(this,null,function*(){let e=new yi(F1);yield e.read(r);let t=yield e.parse();if(t&&t.ifd0)return t.ifd0[274]})}var A1=Object.freeze({1:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:0,rad:0},2:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:0,rad:0},3:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:180,rad:180*Math.PI/180},4:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:180,rad:180*Math.PI/180},5:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:90,rad:90*Math.PI/180},6:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:90,rad:90*Math.PI/180},7:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:270,rad:270*Math.PI/180},8:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:270,rad:270*Math.PI/180}}),ns=!0,ss=!0;if(typeof navigator=="object"){let r=navigator.userAgent;if(r.includes("iPad")||r.includes("iPhone")){let e=r.match(/OS (\d+)_(\d+)/);if(e){let[,t,i]=e;ns=Number(t)+.1*Number(i)<13.4,ss=!1}}else if(r.includes("OS X 10")){let[,e]=r.match(/OS X 10[_.](\d+)/);ns=ss=Number(e)<15}if(r.includes("Chrome/")){let[,e]=r.match(/Chrome\/(\d+)/);ns=ss=Number(e)<81}else if(r.includes("Firefox/")){let[,e]=r.match(/Firefox\/(\d+)/);ns=ss=Number(e)<77}}function Yg(r){return p(this,null,function*(){let e=yield O1(r);return Object.assign({canvas:ns,css:ss},A1[e])})}var Iu=class extends Pr{constructor(...e){super(...e),ee(this,"ranges",new Uu),this.byteLength!==0&&this.ranges.add(0,this.byteLength)}_tryExtend(e,t,i){if(e===0&&this.byteLength===0&&i){let n=new DataView(i.buffer||i,i.byteOffset,i.byteLength);this._swapDataView(n)}else{let n=e+t;if(n>this.byteLength){let{dataView:s}=this._extend(n);this._swapDataView(s)}}}_extend(e){let t;t=Wg?Vg.allocUnsafe(e):new Uint8Array(e);let i=new DataView(t.buffer,t.byteOffset,t.byteLength);return t.set(new Uint8Array(this.buffer,this.byteOffset,this.byteLength),0),{uintView:t,dataView:i}}subarray(e,t,i=!1){return t=t||this._lengthToEnd(e),i&&this._tryExtend(e,t),this.ranges.add(e,t),super.subarray(e,t)}set(e,t,i=!1){i&&this._tryExtend(t,e.byteLength,e);let n=super.set(e,t);return this.ranges.add(t,n.byteLength),n}ensureChunk(e,t){return p(this,null,function*(){this.chunked&&(this.ranges.available(e,t)||(yield this.readChunk(e,t)))})}available(e,t){return this.ranges.available(e,t)}},Uu=class{constructor(){ee(this,"list",[])}get length(){return this.list.length}add(e,t,i=0){let n=e+t,s=this.list.filter(o=>qg(e,o.offset,n)||qg(e,o.end,n));if(s.length>0){e=Math.min(e,...s.map(a=>a.offset)),n=Math.max(n,...s.map(a=>a.end)),t=n-e;let o=s.shift();o.offset=e,o.length=t,o.end=n,this.list=this.list.filter(a=>!s.includes(a))}else this.list.push({offset:e,length:t,end:n})}available(e,t){let i=e+t;return this.list.some(n=>n.offset<=e&&i<=n.end)}};function qg(r,e,t){return r<=e&&e<=t}var Du=class extends Iu{constructor(e,t){super(0),ee(this,"chunksRead",0),this.input=e,this.options=t}readWhole(){return p(this,null,function*(){this.chunked=!1,yield this.readChunk(this.nextChunkOffset)})}readChunked(){return p(this,null,function*(){this.chunked=!0,yield this.readChunk(0,this.options.firstChunkSize)})}readNextChunk(){return p(this,arguments,function*(e=this.nextChunkOffset){if(this.fullyRead)return this.chunksRead++,!1;let t=this.options.chunkSize,i=yield this.readChunk(e,t);return!!i&&i.byteLength===t})}readChunk(e,t){return p(this,null,function*(){if(this.chunksRead++,(t=this.safeWrapAddress(e,t))!==0)return this._readChunk(e,t)})}safeWrapAddress(e,t){return this.size!==void 0&&e+t>this.size?Math.max(0,this.size-e):t}get nextChunkOffset(){if(this.ranges.list.length!==0)return this.ranges.list[0].length}get canReadNextChunk(){return this.chunksRead<this.options.chunkLimit}get fullyRead(){return this.size!==void 0&&this.nextChunkOffset===this.size}read(){return this.options.chunked?this.readChunked():this.readWhole()}close(){}};ds.set("blob",class extends Du{readWhole(){return p(this,null,function*(){this.chunked=!1;let r=yield us(this.input);this._swapArrayBuffer(r)})}readChunked(){return this.chunked=!0,this.size=this.input.size,super.readChunked()}_readChunk(r,e){return p(this,null,function*(){let t=e?r+e:void 0,i=this.input.slice(r,t),n=yield us(i);return this.set(n,r,!0)})}});var Qg={strings:{generatingThumbnails:"Generating thumbnails..."}};var R1={version:"4.1.1"};function I1(r,e,t){try{r.getContext("2d").getImageData(0,0,1,1)}catch(i){if(i.code===18)return Promise.reject(new Error("cannot read image, probably an svg with external resources"))}return r.toBlob?new Promise(i=>{r.toBlob(i,e,t)}).then(i=>{if(i===null)throw new Error("cannot read image, probably an svg with external resources");return i}):Promise.resolve().then(()=>Dg(r.toDataURL(e,t),{})).then(i=>{if(i===null)throw new Error("could not extract blob, probably an old browser");return i})}function U1(r,e){let t=r.width,i=r.height;(e.deg===90||e.deg===270)&&(t=r.height,i=r.width);let n=document.createElement("canvas");n.width=t,n.height=i;let s=n.getContext("2d");return s.translate(t/2,i/2),e.canvas&&(s.rotate(e.rad),s.scale(e.scaleX,e.scaleY)),s.drawImage(r,-r.width/2,-r.height/2,r.width,r.height),n}function D1(r){let e=r.width/r.height,t=5e6,i=4096,n=Math.floor(Math.sqrt(t*e)),s=Math.floor(t/Math.sqrt(t*e));if(n>i&&(n=i,s=Math.round(n/e)),s>i&&(s=i,n=Math.round(e*s)),r.width>n){let o=document.createElement("canvas");return o.width=n,o.height=s,o.getContext("2d").drawImage(r,0,0,n,s),o}return r}var L1={thumbnailWidth:null,thumbnailHeight:null,thumbnailType:"image/jpeg",waitForThumbnailsBeforeUpload:!1,lazy:!1},Kt=class extends At{constructor(e,t){if(super(e,v(v({},L1),t)),this.onFileAdded=i=>{!i.preview&&i.data&&Jo(i.type)&&!i.isRemote&&this.addToQueue(i.id)},this.onCancelRequest=i=>{let n=this.queue.indexOf(i.id);n!==-1&&this.queue.splice(n,1)},this.onFileRemoved=i=>{let n=this.queue.indexOf(i.id);n!==-1&&this.queue.splice(n,1),i.preview&&Ko(i.preview)&&URL.revokeObjectURL(i.preview)},this.onRestored=()=>{this.uppy.getFiles().filter(n=>n.isRestored).forEach(n=>{(!n.preview||Ko(n.preview))&&this.addToQueue(n.id)})},this.onAllFilesRemoved=()=>{this.queue=[]},this.waitUntilAllProcessed=i=>{i.forEach(s=>{let o=this.uppy.getFile(s);this.uppy.emit("preprocess-progress",o,{mode:"indeterminate",message:this.i18n("generatingThumbnails")})});let n=()=>{i.forEach(s=>{let o=this.uppy.getFile(s);this.uppy.emit("preprocess-complete",o)})};return new Promise(s=>{this.queueProcessing?this.uppy.once("thumbnail:all-generated",()=>{n(),s()}):(n(),s())})},this.type="modifier",this.id=this.opts.id||"ThumbnailGenerator",this.title="Thumbnail Generator",this.queue=[],this.queueProcessing=!1,this.defaultThumbnailDimension=200,this.thumbnailType=this.opts.thumbnailType,this.defaultLocale=Qg,this.i18nInit(),this.opts.lazy&&this.opts.waitForThumbnailsBeforeUpload)throw new Error("ThumbnailGenerator: The `lazy` and `waitForThumbnailsBeforeUpload` options are mutually exclusive. Please ensure at most one of them is set to `true`.")}createThumbnail(e,t,i){let n=URL.createObjectURL(e.data),s=new Promise((a,l)=>{let u=new Image;u.src=n,u.addEventListener("load",()=>{URL.revokeObjectURL(n),a(u)}),u.addEventListener("error",c=>{URL.revokeObjectURL(n),l(c.error||new Error("Could not create thumbnail"))})}),o=Yg(e.data).catch(()=>1);return Promise.all([s,o]).then(a=>{let[l,u]=a,c=this.getProportionalDimensions(l,t,i,u.deg),d=U1(l,u),m=this.resizeImage(d,c.width,c.height);return I1(m,this.thumbnailType,80)}).then(a=>URL.createObjectURL(a))}getProportionalDimensions(e,t,i,n){let s=e.width/e.height;return(n===90||n===270)&&(s=e.height/e.width),t!=null?{width:t,height:Math.round(t/s)}:i!=null?{width:Math.round(i*s),height:i}:{width:this.defaultThumbnailDimension,height:Math.round(this.defaultThumbnailDimension/s)}}resizeImage(e,t,i){let n=D1(e),s=Math.ceil(Math.log2(n.width/t));s<1&&(s=1);let o=t*2**(s-1),a=i*2**(s-1),l=2;for(;s--;){let u=document.createElement("canvas");u.width=o,u.height=a,u.getContext("2d").drawImage(n,0,0,o,a),n=u,o=Math.round(o/l),a=Math.round(a/l)}return n}setPreviewURL(e,t){this.uppy.setFileState(e,{preview:t})}addToQueue(e){this.queue.push(e),this.queueProcessing===!1&&this.processQueue()}processQueue(){if(this.queueProcessing=!0,this.queue.length>0){let e=this.uppy.getFile(this.queue.shift());return e?this.requestThumbnail(e).catch(()=>{}).then(()=>this.processQueue()):(this.uppy.log("[ThumbnailGenerator] file was removed before a thumbnail could be generated, but not removed from the queue. This is probably a bug","error"),Promise.resolve())}return this.queueProcessing=!1,this.uppy.log("[ThumbnailGenerator] Emptied thumbnail queue"),this.uppy.emit("thumbnail:all-generated"),Promise.resolve()}requestThumbnail(e){return Jo(e.type)&&!e.isRemote?this.createThumbnail(e,this.opts.thumbnailWidth,this.opts.thumbnailHeight).then(t=>{this.setPreviewURL(e.id,t),this.uppy.log(`[ThumbnailGenerator] Generated thumbnail for ${e.id}`),this.uppy.emit("thumbnail:generated",this.uppy.getFile(e.id),t)}).catch(t=>{this.uppy.log(`[ThumbnailGenerator] Failed thumbnail for ${e.id}:`,"warning"),this.uppy.log(t,"warning"),this.uppy.emit("thumbnail:error",this.uppy.getFile(e.id),t)}):Promise.resolve()}install(){this.uppy.on("file-removed",this.onFileRemoved),this.uppy.on("cancel-all",this.onAllFilesRemoved),this.opts.lazy?(this.uppy.on("thumbnail:request",this.onFileAdded),this.uppy.on("thumbnail:cancel",this.onCancelRequest)):(this.uppy.on("thumbnail:request",this.onFileAdded),this.uppy.on("file-added",this.onFileAdded),this.uppy.on("restored",this.onRestored)),this.opts.waitForThumbnailsBeforeUpload&&this.uppy.addPreProcessor(this.waitUntilAllProcessed)}uninstall(){this.uppy.off("file-removed",this.onFileRemoved),this.uppy.off("cancel-all",this.onAllFilesRemoved),this.opts.lazy?(this.uppy.off("thumbnail:request",this.onFileAdded),this.uppy.off("thumbnail:cancel",this.onCancelRequest)):(this.uppy.off("thumbnail:request",this.onFileAdded),this.uppy.off("file-added",this.onFileAdded),this.uppy.off("restored",this.onRestored)),this.opts.waitForThumbnailsBeforeUpload&&this.uppy.removePreProcessor(this.waitUntilAllProcessed)}};Kt.VERSION=R1.version;function B1(r){if(typeof r=="string"){let e=document.querySelectorAll(r);return e.length===0?null:Array.from(e)}return typeof r=="object"&&Bn(r)?[r]:null}var ju=B1;var Jt=Array.from;function ia(r,e,t,i){let{onSuccess:n}=i;r.readEntries(s=>{let o=[...e,...s];s.length?queueMicrotask(()=>{ia(r,o,t,{onSuccess:n})}):n(o)},s=>{t(s),n(e)})}function Zg(r,e){return r==null?r:{kind:r.isFile?"file":r.isDirectory?"directory":void 0,name:r.name,getFile(){return new Promise((i,n)=>r.file(i,n))},values(){return As(this,null,function*(){let i=r.createReader(),n=yield new Br(new Promise(s=>{ia(i,[],e,{onSuccess:o=>s(o.map(a=>Zg(a,e)))})}));yield*Rs(n)})},isSameEntry:void 0}}function ey(r,e,t){try{return t===void 0&&(t=void 0),function(){return As(this,null,function*(){let i=()=>`${e}/${r.name}`;if(r.kind==="file"){let l=yield new Br(r.getFile());l!=null?(l.relativePath=e?i():null,yield l):t!=null&&(yield t)}else if(r.kind==="directory")try{for(var n=Is(r.values()),s,o,a;s=!(o=yield new Br(n.next())).done;s=!1){let l=o.value;yield*Rs(ey(l,e?i():r.name))}}catch{a=[o]}finally{try{s&&(o=n.return)&&(yield new Br(o.call(n)))}finally{if(a)throw a[0]}}else t!=null&&(yield t)})}()}catch(i){return Promise.reject(i)}}function Mu(r,e){return As(this,null,function*(){let t=yield new Br(Promise.all(Array.from(r.items,i=>p(null,null,function*(){let n;return n??(n=Zg(typeof i.getAsEntry=="function"?i.getAsEntry():i.webkitGetAsEntry(),e)),{fileSystemHandle:n,lastResortFile:i.getAsFile()}}))));for(let{lastResortFile:i,fileSystemHandle:n}of t)if(n!=null)try{yield*Rs(ey(n,"",i))}catch(s){i!=null?yield i:e(s)}else i!=null&&(yield i)})}function zu(r){let e=Jt(r.files);return Promise.resolve(e)}function $u(r,e){return p(this,null,function*(){var t;let i=(t=e?.logDropError)!=null?t:Function.prototype;try{let l=[];try{for(var n=Is(Mu(r,i)),s,o,a;s=!(o=yield n.next()).done;s=!1){let u=o.value;l.push(u)}}catch{a=[o]}finally{try{s&&(o=n.return)&&(yield o.call(n))}finally{if(a)throw a[0]}}return l}catch{return zu(r)}})}var by=re(Le(),1);function fs(r){return j(v({},r),{type:r.mimeType,extension:r.name?gt(r.name).extension:null})}function N1(){return h("svg",{width:"26",height:"26",viewBox:"0 0 26 26",xmlns:"http://www.w3.org/2000/svg"},h("g",{fill:"none","fill-rule":"evenodd"},h("circle",{fill:"#FFF",cx:"13",cy:"13",r:"13"}),h("path",{d:"M21.64 13.205c0-.639-.057-1.252-.164-1.841H13v3.481h4.844a4.14 4.14 0 01-1.796 2.716v2.259h2.908c1.702-1.567 2.684-3.875 2.684-6.615z",fill:"#4285F4","fill-rule":"nonzero"}),h("path",{d:"M13 22c2.43 0 4.467-.806 5.956-2.18l-2.908-2.259c-.806.54-1.837.86-3.048.86-2.344 0-4.328-1.584-5.036-3.711H4.957v2.332A8.997 8.997 0 0013 22z",fill:"#34A853","fill-rule":"nonzero"}),h("path",{d:"M7.964 14.71A5.41 5.41 0 017.682 13c0-.593.102-1.17.282-1.71V8.958H4.957A8.996 8.996 0 004 13c0 1.452.348 2.827.957 4.042l3.007-2.332z",fill:"#FBBC05","fill-rule":"nonzero"}),h("path",{d:"M13 7.58c1.321 0 2.508.454 3.44 1.345l2.582-2.58C17.463 4.891 15.426 4 13 4a8.997 8.997 0 00-8.043 4.958l3.007 2.332C8.672 9.163 10.656 7.58 13 7.58z",fill:"#EA4335","fill-rule":"nonzero"}),h("path",{d:"M4 4h18v18H4z"})))}function j1(r){let{pluginName:e,i18n:t,onAuth:i}=r,n=e==="Google Drive",s=Vt(o=>{o.preventDefault(),i()},[i]);return h("form",{onSubmit:s},n?h("button",{type:"submit",className:"uppy-u-reset uppy-c-btn uppy-c-btn-primary uppy-Provider-authBtn uppy-Provider-btn-google","data-uppy-super-focusable":!0},h(N1,null),t("signInWithGoogle")):h("button",{type:"submit",className:"uppy-u-reset uppy-c-btn uppy-c-btn-primary uppy-Provider-authBtn","data-uppy-super-focusable":!0},t("authenticateWith",{pluginName:e})))}var M1=r=>{let{pluginName:e,i18n:t,onAuth:i}=r;return h(j1,{pluginName:e,i18n:t,onAuth:i})};function na(r){let{loading:e,pluginName:t,pluginIcon:i,i18n:n,handleAuth:s,renderForm:o=M1}=r;return h("div",{className:"uppy-Provider-auth"},h("div",{className:"uppy-Provider-authIcon"},i()),h("div",{className:"uppy-Provider-authTitle"},n("authenticateWithTitle",{pluginName:t})),o({pluginName:t,i18n:n,loading:e,onAuth:s}))}var ty=re(Le(),1);function qu(r){let{i18n:e,logout:t,username:i}=r;return h(Pe,null,i&&h("span",{className:"uppy-ProviderBrowser-user",key:"username"},i),h("button",{type:"button",onClick:t,className:"uppy-u-reset uppy-c-btn uppy-ProviderBrowser-userLogout",key:"logout"},e("logOut")))}function Hu(r){let{openFolder:e,title:t,breadcrumbsIcon:i,breadcrumbs:n,i18n:s}=r;return h("div",{className:"uppy-Provider-breadcrumbs"},h("div",{className:"uppy-Provider-breadcrumbsIcon"},i),n.map((o,a)=>{var l;return h(Pe,null,h("button",{key:o.id,type:"button",className:"uppy-u-reset uppy-c-btn",onClick:()=>e(o.id)},o.type==="root"?t:(l=o.data.name)!=null?l:s("unnamed")),n.length===a+1?"":" / ")}))}function Vu(r){return h("div",{className:"uppy-ProviderBrowser-header"},h("div",{className:(0,ty.default)("uppy-ProviderBrowser-headerBar",!r.showBreadcrumbs&&"uppy-ProviderBrowser-headerBar--simple")},r.showBreadcrumbs&&h(Hu,{openFolder:r.openFolder,breadcrumbs:r.breadcrumbs,breadcrumbsIcon:r.pluginIcon&&r.pluginIcon(),title:r.title,i18n:r.i18n}),h(qu,{logout:r.logout,username:r.username,i18n:r.i18n})))}function Wu(){return Wu=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},Wu.apply(null,arguments)}var z1={position:"relative",width:"100%",minHeight:"100%"},$1={position:"absolute",top:0,left:0,width:"100%",overflow:"visible"},Gu=class extends ue{constructor(e){super(e),this.handleScroll=()=>{this.setState({offset:this.base.scrollTop})},this.handleResize=()=>{this.resize()},this.focusElement=null,this.state={offset:0,height:0}}componentDidMount(){this.resize(),window.addEventListener("resize",this.handleResize)}componentWillUpdate(){this.base.contains(document.activeElement)&&(this.focusElement=document.activeElement)}componentDidUpdate(){this.focusElement&&this.focusElement.parentNode&&document.activeElement!==this.focusElement&&this.focusElement.focus(),this.focusElement=null,this.resize()}componentWillUnmount(){window.removeEventListener("resize",this.handleResize)}resize(){let{height:e}=this.state;e!==this.base.offsetHeight&&this.setState({height:this.base.offsetHeight})}render(e){let x=e,{data:t,rowHeight:i,renderRow:n,overscanCount:s=10}=x,o=Lr(x,["data","rowHeight","renderRow","overscanCount"]),{offset:a,height:l}=this.state,u=Math.floor(a/i),c=Math.floor(l/i);s&&(u=Math.max(0,u-u%s),c+=s);let d=u+c+4,m=t.slice(u,d),f=j(v({},z1),{height:t.length*i}),b=j(v({},$1),{top:u*i});return h("div",Wu({onScroll:this.handleScroll},o),h("div",{role:"presentation",style:f},h("div",{role:"presentation",style:b},m.map(n))))}},sa=Gu;var ry=re(Le(),1);function q1(){return h("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:11,height:14.5,viewBox:"0 0 44 58"},h("path",{d:"M27.437.517a1 1 0 0 0-.094.03H4.25C2.037.548.217 2.368.217 4.58v48.405c0 2.212 1.82 4.03 4.03 4.03H39.03c2.21 0 4.03-1.818 4.03-4.03V15.61a1 1 0 0 0-.03-.28 1 1 0 0 0 0-.093 1 1 0 0 0-.03-.032 1 1 0 0 0 0-.03 1 1 0 0 0-.032-.063 1 1 0 0 0-.03-.063 1 1 0 0 0-.032 0 1 1 0 0 0-.03-.063 1 1 0 0 0-.032-.03 1 1 0 0 0-.03-.063 1 1 0 0 0-.063-.062l-14.593-14a1 1 0 0 0-.062-.062A1 1 0 0 0 28 .708a1 1 0 0 0-.374-.157 1 1 0 0 0-.156 0 1 1 0 0 0-.03-.03l-.003-.003zM4.25 2.547h22.218v9.97c0 2.21 1.82 4.03 4.03 4.03h10.564v36.438a2.02 2.02 0 0 1-2.032 2.032H4.25c-1.13 0-2.032-.9-2.032-2.032V4.58c0-1.13.902-2.032 2.03-2.032zm24.218 1.345l10.375 9.937.75.718H30.5c-1.13 0-2.032-.9-2.032-2.03V3.89z"}))}function H1(){return h("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",style:{minWidth:16,marginRight:3},viewBox:"0 0 276.157 276.157"},h("path",{d:"M273.08 101.378c-3.3-4.65-8.86-7.32-15.254-7.32h-24.34V67.59c0-10.2-8.3-18.5-18.5-18.5h-85.322c-3.63 0-9.295-2.875-11.436-5.805l-6.386-8.735c-4.982-6.814-15.104-11.954-23.546-11.954H58.73c-9.292 0-18.638 6.608-21.737 15.372l-2.033 5.752c-.958 2.71-4.72 5.37-7.596 5.37H18.5C8.3 49.09 0 57.39 0 67.59v167.07c0 .886.16 1.73.443 2.52.152 3.306 1.18 6.424 3.053 9.064 3.3 4.652 8.86 7.32 15.255 7.32h188.487c11.395 0 23.27-8.425 27.035-19.18l40.677-116.188c2.11-6.035 1.43-12.164-1.87-16.816zM18.5 64.088h8.864c9.295 0 18.64-6.607 21.738-15.37l2.032-5.75c.96-2.712 4.722-5.373 7.597-5.373h29.565c3.63 0 9.295 2.876 11.437 5.806l6.386 8.735c4.982 6.815 15.104 11.954 23.546 11.954h85.322c1.898 0 3.5 1.602 3.5 3.5v26.47H69.34c-11.395 0-23.27 8.423-27.035 19.178L15 191.23V67.59c0-1.898 1.603-3.5 3.5-3.5zm242.29 49.15l-40.676 116.188c-1.674 4.78-7.812 9.135-12.877 9.135H18.75c-1.447 0-2.576-.372-3.02-.997-.442-.625-.422-1.814.057-3.18l40.677-116.19c1.674-4.78 7.812-9.134 12.877-9.134h188.487c1.448 0 2.577.372 3.02.997.443.625.423 1.814-.056 3.18z"}))}function V1(){return h("svg",{"aria-hidden":"true",focusable:"false",style:{width:16,marginRight:4},viewBox:"0 0 58 58"},h("path",{d:"M36.537 28.156l-11-7a1.005 1.005 0 0 0-1.02-.033C24.2 21.3 24 21.635 24 22v14a1 1 0 0 0 1.537.844l11-7a1.002 1.002 0 0 0 0-1.688zM26 34.18V23.82L34.137 29 26 34.18z"}),h("path",{d:"M57 6H1a1 1 0 0 0-1 1v44a1 1 0 0 0 1 1h56a1 1 0 0 0 1-1V7a1 1 0 0 0-1-1zM10 28H2v-9h8v9zm-8 2h8v9H2v-9zm10 10V8h34v42H12V40zm44-12h-8v-9h8v9zm-8 2h8v9h-8v-9zm8-22v9h-8V8h8zM2 8h8v9H2V8zm0 42v-9h8v9H2zm54 0h-8v-9h8v9z"}))}function vi(r){let{itemIconString:e,alt:t=void 0}=r;if(e===null)return null;switch(e){case"file":return h(q1,null);case"folder":return h(H1,null);case"video":return h(V1,null);default:return h("img",{src:e,alt:t,referrerPolicy:"no-referrer",loading:"lazy",width:16,height:16})}}function W1(r){var e,t;let{file:i,toggleCheckbox:n,className:s,isDisabled:o,restrictionError:a,showTitles:l,children:u=null,i18n:c}=r;return h("li",{className:s,title:o&&a?a:void 0},h("input",{type:"checkbox",className:"uppy-u-reset uppy-ProviderBrowserItem-checkbox uppy-ProviderBrowserItem-checkbox--grid",onChange:n,name:"listitem",id:i.id,checked:i.status==="checked",disabled:o,"data-uppy-super-focusable":!0}),h("label",{htmlFor:i.id,"aria-label":(e=i.data.name)!=null?e:c("unnamed"),className:"uppy-u-reset uppy-ProviderBrowserItem-inner"},h(vi,{itemIconString:i.data.thumbnail||i.data.icon}),l&&((t=i.data.name)!=null?t:c("unnamed")),u))}var Ku=W1;function Ju(r){var e,t,i;let{file:n,openFolder:s,className:o,isDisabled:a,restrictionError:l,toggleCheckbox:u,showTitles:c,i18n:d}=r;return h("li",{className:o,title:n.status!=="checked"&&l?l:void 0},h("input",{type:"checkbox",className:"uppy-u-reset uppy-ProviderBrowserItem-checkbox",onChange:u,name:"listitem",id:n.id,checked:n.status==="checked","aria-label":n.data.isFolder?d("allFilesFromFolderNamed",{name:(e=n.data.name)!=null?e:d("unnamed")}):null,disabled:a,"data-uppy-super-focusable":!0}),n.data.isFolder?h("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-ProviderBrowserItem-inner",onClick:()=>s(n.id),"aria-label":d("openFolderNamed",{name:(t=n.data.name)!=null?t:d("unnamed")})},h("div",{className:"uppy-ProviderBrowserItem-iconWrap"},h(vi,{itemIconString:n.data.icon})),c&&n.data.name?h("span",null,n.data.name):d("unnamed")):h("label",{htmlFor:n.id,className:"uppy-u-reset uppy-ProviderBrowserItem-inner"},h("div",{className:"uppy-ProviderBrowserItem-iconWrap"},h(vi,{itemIconString:n.data.icon})),c&&((i=n.data.name)!=null?i:d("unnamed"))))}function Xu(r){let{viewType:e,toggleCheckbox:t,showTitles:i,i18n:n,openFolder:s,file:o,utmSource:a}=r,l=o.type==="folder"?null:o.restrictionError,u=!!l&&o.status!=="checked",c={file:o,openFolder:s,toggleCheckbox:t,utmSource:a,i18n:n,viewType:e,showTitles:i,className:(0,ry.default)("uppy-ProviderBrowserItem",{"uppy-ProviderBrowserItem--disabled":u},{"uppy-ProviderBrowserItem--noPreview":o.data.icon==="video"},{"uppy-ProviderBrowserItem--is-checked":o.status==="checked"},{"uppy-ProviderBrowserItem--is-partial":o.status==="partial"}),isDisabled:u,restrictionError:l};switch(e){case"grid":return h(Ku,c);case"list":return h(Ju,c);case"unsplash":return h(Ku,c,h("a",{href:`${o.data.author.url}?utm_source=${a}&utm_medium=referral`,target:"_blank",rel:"noopener noreferrer",className:"uppy-ProviderBrowserItem-author",tabIndex:-1},o.data.author.name));default:throw new Error(`There is no such type ${e}`)}}function G1(r){let{displayedPartialTree:e,viewType:t,toggleCheckbox:i,handleScroll:n,showTitles:s,i18n:o,isLoading:a,openFolder:l,noResultsLabel:u,virtualList:c,utmSource:d}=r,[m,f]=rt(!1);if(lt(()=>{let x=S=>{S.key==="Shift"&&f(!1)},E=S=>{S.key==="Shift"&&f(!0)};return document.addEventListener("keyup",x),document.addEventListener("keydown",E),()=>{document.removeEventListener("keyup",x),document.removeEventListener("keydown",E)}},[]),a)return h("div",{className:"uppy-Provider-loading"},typeof a=="string"?a:o("loading"));if(e.length===0)return h("div",{className:"uppy-Provider-empty"},u);let b=x=>h(Xu,{viewType:t,toggleCheckbox:E=>{var S;E.stopPropagation(),E.preventDefault(),(S=document.getSelection())==null||S.removeAllRanges(),i(x,m)},showTitles:s,i18n:o,openFolder:l,file:x,utmSource:d});return c?h("div",{className:"uppy-ProviderBrowser-body"},h("ul",{className:"uppy-ProviderBrowser-list"},h(sa,{data:e,renderRow:b,rowHeight:31}))):h("div",{className:"uppy-ProviderBrowser-body"},h("ul",{className:"uppy-ProviderBrowser-list",onScroll:n,role:"listbox",tabIndex:-1},e.map(b)))}var oa=G1;var K1=(r,e,t,i,n)=>{let s=e.filter(f=>f.isFolder===!0),o=e.filter(f=>f.isFolder===!1),a=t.type==="folder"&&t.status==="checked",l=s.map(f=>({type:"folder",id:f.requestPath,cached:!1,nextPagePath:null,status:a?"checked":"unchecked",parentId:t.id,data:f})),u=o.map(f=>{let b=n(f);return{type:"file",id:f.requestPath,restrictionError:b,status:a&&!b?"checked":"unchecked",parentId:t.id,data:f}}),c=j(v({},t),{cached:!0,nextPagePath:i});return[...r.map(f=>f.id===c.id?c:f),...l,...u]},iy=K1;var J1=(r,e,t,i,n)=>{let s=r.find(b=>b.id===e),o=t.filter(b=>b.isFolder===!0),a=t.filter(b=>b.isFolder===!1),l=j(v({},s),{nextPagePath:i}),u=r.map(b=>b.id===l.id?l:b),c=l.type==="folder"&&l.status==="checked",d=o.map(b=>({type:"folder",id:b.requestPath,cached:!1,nextPagePath:null,status:c?"checked":"unchecked",parentId:l.id,data:b})),m=a.map(b=>{let x=n(b);return{type:"file",id:b.requestPath,restrictionError:x,status:c&&!x?"checked":"unchecked",parentId:l.id,data:b}});return[...u,...d,...m]},ny=J1;var X1=r=>r.map(e=>v({},e)),aa=X1;var Yu=(r,e,t)=>{r.filter(n=>n.type!=="root"&&n.parentId===e).forEach(n=>{n.status=t&&!(n.type==="file"&&n.restrictionError)?"checked":"unchecked",Yu(r,n.id,t)})},Qu=(r,e)=>{let t=r.find(o=>o.id===e);if(t.type==="root")return;let i=r.filter(o=>o.type!=="root"&&o.parentId===t.id&&!(o.type==="file"&&o.restrictionError)),n=i.every(o=>o.status==="checked"),s=i.every(o=>o.status==="unchecked");n?t.status="checked":s?t.status="unchecked":t.status="partial",Qu(r,t.parentId)},Y1=(r,e)=>{let t=aa(r);if(e.length>=2){let i=t.filter(n=>n.type!=="root"&&e.includes(n.id));i.forEach(n=>{n.type==="file"?n.status=n.restrictionError?"unchecked":"checked":n.status="checked"}),i.forEach(n=>{Yu(t,n.id,!0)}),Qu(t,i[0].parentId)}else{let i=t.find(n=>n.id===e[0]);i.status=i.status==="checked"?"unchecked":"checked",Yu(t,i.id,i.status==="checked"),Qu(t,i.parentId)}return t},sy=Y1;var ec=re(ay(),1);var ms=class extends Error{constructor(e){super(e),this.name="TimeoutError"}},tc=class extends Error{constructor(e){super(),this.name="AbortError",this.message=e}},ly=r=>globalThis.DOMException===void 0?new tc(r):new DOMException(r),uy=r=>{let e=r.reason===void 0?ly("This operation was aborted."):r.reason;return e instanceof Error?e:ly(e)};function rc(r,e){let{milliseconds:t,fallback:i,message:n,customTimers:s={setTimeout,clearTimeout}}=e,o,a,u=new Promise((c,d)=>{if(typeof t!="number"||Math.sign(t)!==1)throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${t}\``);if(e.signal){let{signal:f}=e;f.aborted&&d(uy(f)),a=()=>{d(uy(f))},f.addEventListener("abort",a,{once:!0})}if(t===Number.POSITIVE_INFINITY){r.then(c,d);return}let m=new ms;o=s.setTimeout.call(void 0,()=>{if(i){try{c(i())}catch(f){d(f)}return}typeof r.cancel=="function"&&r.cancel(),n===!1?c():n instanceof Error?d(n):(m.message=n??`Promise timed out after ${t} milliseconds`,d(m))},t),p(null,null,function*(){try{c(yield r)}catch(f){d(f)}})}).finally(()=>{u.clear(),a&&e.signal&&e.signal.removeEventListener("abort",a)});return u.clear=()=>{s.clearTimeout.call(void 0,o),o=void 0},u}function ic(r,e,t){let i=0,n=r.length;for(;n>0;){let s=Math.trunc(n/2),o=i+s;t(r[o],e)<=0?(i=++o,n-=s+1):n=s}return i}var ua=class{#e=[];enqueue(e,t){t=v({priority:0},t);let i={priority:t.priority,id:t.id,run:e};if(this.size===0||this.#e[this.size-1].priority>=t.priority){this.#e.push(i);return}let n=ic(this.#e,i,(s,o)=>o.priority-s.priority);this.#e.splice(n,0,i)}setPriority(e,t){let i=this.#e.findIndex(s=>s.id===e);if(i===-1)throw new ReferenceError(`No promise function with the id "${e}" exists in the queue.`);let[n]=this.#e.splice(i,1);this.enqueue(n.run,{priority:t,id:e})}dequeue(){return this.#e.shift()?.run}filter(e){return this.#e.filter(t=>t.priority===e.priority).map(t=>t.run)}get size(){return this.#e.length}};var ca=class extends ec.default{#e;#o;#s=0;#f;#a;#p=0;#r;#l;#t;#m;#i=0;#u;#n;#g;#b=1n;timeout;constructor(e){if(super(),e=v({carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:ua},e),!(typeof e.intervalCap=="number"&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${e.intervalCap?.toString()??""}\` (${typeof e.intervalCap})`);if(e.interval===void 0||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${e.interval?.toString()??""}\` (${typeof e.interval})`);this.#e=e.carryoverConcurrencyCount,this.#o=e.intervalCap===Number.POSITIVE_INFINITY||e.interval===0,this.#f=e.intervalCap,this.#a=e.interval,this.#t=new e.queueClass,this.#m=e.queueClass,this.concurrency=e.concurrency,this.timeout=e.timeout,this.#g=e.throwOnTimeout===!0,this.#n=e.autoStart===!1}get#_(){return this.#o||this.#s<this.#f}get#w(){return this.#i<this.#u}#S(){this.#i--,this.#c(),this.emit("next")}#x(){this.#v(),this.#y(),this.#l=void 0}get#P(){let e=Date.now();if(this.#r===void 0){let t=this.#p-e;if(t<0)this.#s=this.#e?this.#i:0;else return this.#l===void 0&&(this.#l=setTimeout(()=>{this.#x()},t)),!0}return!1}#c(){if(this.#t.size===0)return this.#r&&clearInterval(this.#r),this.#r=void 0,this.emit("empty"),this.#i===0&&this.emit("idle"),!1;if(!this.#n){let e=!this.#P;if(this.#_&&this.#w){let t=this.#t.dequeue();return t?(this.emit("active"),t(),e&&this.#y(),!0):!1}}return!1}#y(){this.#o||this.#r!==void 0||(this.#r=setInterval(()=>{this.#v()},this.#a),this.#p=Date.now()+this.#a)}#v(){this.#s===0&&this.#i===0&&this.#r&&(clearInterval(this.#r),this.#r=void 0),this.#s=this.#e?this.#i:0,this.#d()}#d(){for(;this.#c(););}get concurrency(){return this.#u}set concurrency(e){if(!(typeof e=="number"&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this.#u=e,this.#d()}#k(e){return p(this,null,function*(){return new Promise((t,i)=>{e.addEventListener("abort",()=>{i(e.reason)},{once:!0})})})}setPriority(e,t){this.#t.setPriority(e,t)}add(i){return p(this,arguments,function*(e,t={}){return t.id??=(this.#b++).toString(),t=v({timeout:this.timeout,throwOnTimeout:this.#g},t),new Promise((n,s)=>{this.#t.enqueue(()=>p(this,null,function*(){this.#i++,this.#s++;try{t.signal?.throwIfAborted();let o=e({signal:t.signal});t.timeout&&(o=rc(Promise.resolve(o),{milliseconds:t.timeout})),t.signal&&(o=Promise.race([o,this.#k(t.signal)]));let a=yield o;n(a),this.emit("completed",a)}catch(o){if(o instanceof ms&&!t.throwOnTimeout){n();return}s(o),this.emit("error",o)}finally{this.#S()}}),t),this.emit("add"),this.#c()})})}addAll(e,t){return p(this,null,function*(){return Promise.all(e.map(i=>p(this,null,function*(){return this.add(i,t)})))})}start(){return this.#n?(this.#n=!1,this.#d(),this):this}pause(){this.#n=!0}clear(){this.#t=new this.#m}onEmpty(){return p(this,null,function*(){this.#t.size!==0&&(yield this.#h("empty"))})}onSizeLessThan(e){return p(this,null,function*(){this.#t.size<e||(yield this.#h("next",()=>this.#t.size<e))})}onIdle(){return p(this,null,function*(){this.#i===0&&this.#t.size===0||(yield this.#h("idle"))})}#h(e,t){return p(this,null,function*(){return new Promise(i=>{let n=()=>{t&&!t()||(this.off(e,n),i())};this.on(e,n)})})}get size(){return this.#t.size}sizeBy(e){return this.#t.filter(e).length}get pending(){return this.#i}get isPaused(){return this.#n}};var cy=(r,e,t,i,n)=>p(null,null,function*(){let s=[],o=t.cached?t.nextPagePath:t.id;for(;o;){let d=yield i(o);s=s.concat(d.items),o=d.nextPagePath}let a=s.filter(d=>d.isFolder===!0),l=s.filter(d=>d.isFolder===!1),u=a.map(d=>({type:"folder",id:d.requestPath,cached:!1,nextPagePath:null,status:"checked",parentId:t.id,data:d})),c=l.map(d=>{let m=n(d);return{type:"file",id:d.requestPath,restrictionError:m,status:m?"unchecked":"checked",parentId:t.id,data:d}});t.cached=!0,t.nextPagePath=null,e.push(...c,...u),u.forEach(d=>p(null,null,function*(){r.add(()=>cy(r,e,d,i,n))}))}),eS=(r,e,t,i)=>p(null,null,function*(){let n=new ca({concurrency:6}),s=aa(r);return s.filter(a=>a.type==="folder"&&a.status==="checked"&&(a.cached===!1||a.nextPagePath)).forEach(a=>{n.add(()=>cy(n,s,a,e,t))}),n.on("completed",()=>{let a=s.filter(l=>l.type==="file"&&l.status==="checked").length;i(a)}),yield n.onIdle(),s}),dy=eS;var Er={afterOpenFolder:iy,afterScrollFolder:ny,afterToggleCheckbox:sy,afterFill:dy};var tS=r=>{let{scrollHeight:e,scrollTop:t,offsetHeight:i}=r.target;return e-(t+i)<50},da=tS;var rS=r=>e=>{if(!e.isAuthError){if(e.name==="AbortError"){r.log("Aborting request","warning");return}r.log(e,"error"),e.name==="UserFacingApiError"&&r.info({message:r.i18n("companionError"),details:r.i18n(e.message)},"warning",5e3)}},Lt=rS;var iS=(r,e,t,i)=>{let n=e.findIndex(s=>s.id===i);if(n!==-1&&t){let s=e.findIndex(a=>a.id===r);return e.slice(Math.min(n,s),Math.max(n,s)+1).map(a=>a.id)}return[r]},ha=iS;function nS(r){let{searchString:e,setSearchString:t,submitSearchString:i,wrapperClassName:n,inputClassName:s,inputLabel:o,clearSearchLabel:a="",showButton:l=!1,buttonLabel:u="",buttonCSSClassName:c=""}=r,d=b=>{t(b.target.value)},m=Vt(b=>{b.preventDefault(),i()},[i]),[f]=rt(()=>{let b=document.createElement("form");return b.setAttribute("tabindex","-1"),b.id=$t(),b});return lt(()=>(document.body.appendChild(f),f.addEventListener("submit",m),()=>{f.removeEventListener("submit",m),document.body.removeChild(f)}),[f,m]),h("section",{className:n},h("input",{className:`uppy-u-reset ${s}`,type:"search","aria-label":o,placeholder:o,value:e,onInput:d,form:f.id,"data-uppy-super-focusable":!0}),!l&&h("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon uppy-ProviderBrowser-searchFilterIcon",width:"12",height:"12",viewBox:"0 0 12 12"},h("path",{d:"M8.638 7.99l3.172 3.172a.492.492 0 1 1-.697.697L7.91 8.656a4.977 4.977 0 0 1-2.983.983C2.206 9.639 0 7.481 0 4.819 0 2.158 2.206 0 4.927 0c2.721 0 4.927 2.158 4.927 4.82a4.74 4.74 0 0 1-1.216 3.17zm-3.71.685c2.176 0 3.94-1.726 3.94-3.856 0-2.129-1.764-3.855-3.94-3.855C2.75.964.984 2.69.984 4.819c0 2.13 1.765 3.856 3.942 3.856z"})),!l&&e&&h("button",{className:"uppy-u-reset uppy-ProviderBrowser-searchFilterReset",type:"button","aria-label":a,title:a,onClick:()=>t("")},h("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",viewBox:"0 0 19 19"},h("path",{d:"M17.318 17.232L9.94 9.854 9.586 9.5l-.354.354-7.378 7.378h.707l-.62-.62v.706L9.318 9.94l.354-.354-.354-.354L1.94 1.854v.707l.62-.62h-.706l7.378 7.378.354.354.354-.354 7.378-7.378h-.707l.622.62v-.706L9.854 9.232l-.354.354.354.354 7.378 7.378.708-.707-7.38-7.378v.708l7.38-7.38.353-.353-.353-.353-.622-.622-.353-.353-.354.352-7.378 7.38h.708L2.56 1.23 2.208.88l-.353.353-.622.62-.353.355.352.353 7.38 7.38v-.708l-7.38 7.38-.353.353.352.353.622.622.353.353.354-.353 7.38-7.38h-.708l7.38 7.38z"}))),l&&h("button",{className:`uppy-u-reset uppy-c-btn uppy-c-btn-primary ${c}`,type:"submit",form:f.id},u))}var bi=nS;var fy=re(Le(),1);var sS=r=>r.filter(t=>t.type==="file"&&t.status==="checked"?!0:t.type==="folder"&&t.status==="checked"?!r.some(n=>n.type!=="root"&&n.parentId===t.id):!1).length,hy=sS;function gs(r){let{cancelSelection:e,donePicking:t,i18n:i,partialTree:n,validateAggregateRestrictions:s}=r,o=Ht(()=>s(n),[n,s]),a=Ht(()=>hy(n),[n]);return a===0?null:h("div",{className:"uppy-ProviderBrowser-footer"},h("div",{className:"uppy-ProviderBrowser-footer-buttons"},h("button",{className:(0,fy.default)("uppy-u-reset uppy-c-btn uppy-c-btn-primary",{"uppy-c-btn--disabled":o}),disabled:!!o,onClick:t,type:"button"},i("selectX",{smart_count:a})),h("button",{className:"uppy-u-reset uppy-c-btn uppy-c-btn-link",onClick:e,type:"button"},i("cancel"))),o&&h("div",{className:"uppy-ProviderBrowser-footer-error"},o))}var oS=(r,e,t)=>{var i,n;return{id:r.id,source:e.id,name:r.name||r.id,type:r.mimeType,isRemote:!0,data:r,preview:r.thumbnail||void 0,meta:{authorName:(i=r.author)==null?void 0:i.name,authorUrl:(n=r.author)==null?void 0:n.url,relativePath:r.relDirPath||null,absolutePath:r.absDirPath},body:{fileId:r.id},remote:{companionUrl:e.opts.companionUrl,url:`${t.fileUrl(r.requestPath)}`,body:{fileId:r.id},providerName:t.name,provider:t.provider,requestClientId:t.provider}}},py=oS;var aS=(r,e,t)=>{let i=r.map(o=>py(o,e,t)),n=[],s=[];i.forEach(o=>{e.uppy.checkIfFileAlreadyExists(wo(o,e.uppy.getID()))?s.push(o):n.push(o)}),n.length>0&&e.uppy.info(e.uppy.i18n("addedNumFiles",{numFiles:n.length})),s.length>0&&e.uppy.info(`Not adding ${s.length} files because they already exist`),e.uppy.addFiles(n)},fa=aS;var my=(r,e,t)=>{let i=e===null?"null":e;if(t[i])return t[i];let n=r.find(o=>o.id===e);if(n.type==="root")return[];let s=[...my(r,n.parentId,t),n];return t[i]=s,s},lS=r=>{let e=Object.create(null);return r.filter(n=>n.type==="file"&&n.status==="checked").map(n=>{let s=my(r,n.id,e),o=s.findIndex(c=>c.type==="folder"&&c.status==="checked"),a=s.slice(o),l=`/${s.map(c=>c.data.name).join("/")}`,u=a.length===1?void 0:a.map(c=>c.data.name).join("/");return j(v({},n.data),{absDirPath:l,relDirPath:u})})},pa=lS;var uS=(r,e)=>{let t=r.find(n=>n.id===e),i=[];for(;i=[t,...i],t.type!=="root";){let n=t.parentId;t=r.find(s=>s.id===n)}return i},gy=uS;function Xt(r,e){if(!{}.hasOwnProperty.call(r,e))throw new TypeError("attempted to use private field on non-instance");return r}var cS=0;function vy(r){return"__private_"+cS+++"_"+r}var dS={version:"4.4.4"};function vs(){return h("svg",{"aria-hidden":"true",focusable:"false",width:"30",height:"30",viewBox:"0 0 30 30"},h("path",{d:"M15 30c8.284 0 15-6.716 15-15 0-8.284-6.716-15-15-15C6.716 0 0 6.716 0 15c0 8.284 6.716 15 15 15zm4.258-12.676v6.846h-8.426v-6.846H5.204l9.82-12.364 9.82 12.364H19.26z"}))}var yy=r=>({authenticated:void 0,partialTree:[{type:"root",id:r,cached:!1,nextPagePath:null}],currentFolderId:r,searchString:"",didFirstRender:!1,username:null,loading:!1}),Tr=vy("abortController"),ct=vy("withAbort"),ys=class{constructor(e,t){Object.defineProperty(this,ct,{value:hS}),this.isHandlingScroll=!1,this.lastCheckbox=null,Object.defineProperty(this,Tr,{writable:!0,value:void 0}),this.validateSingleFile=n=>{let s=fs(n);return this.plugin.uppy.validateSingleFile(s)},this.getDisplayedPartialTree=()=>{let{partialTree:n,currentFolderId:s,searchString:o}=this.plugin.getPluginState(),a=n.filter(u=>u.type!=="root"&&u.parentId===s);return o===""?a:a.filter(u=>{var c;return((c=u.data.name)!=null?c:this.plugin.uppy.i18n("unnamed")).toLowerCase().indexOf(o.toLowerCase())!==-1})},this.validateAggregateRestrictions=n=>{let o=n.filter(a=>a.type==="file"&&a.status==="checked").map(a=>a.data);return this.plugin.uppy.validateAggregateRestrictions(o)},this.plugin=e,this.provider=t.provider;let i={viewType:"list",showTitles:!0,showFilter:!0,showBreadcrumbs:!0,loadAllFiles:!1,virtualList:!1};this.opts=v(v({},i),t),this.openFolder=this.openFolder.bind(this),this.logout=this.logout.bind(this),this.handleAuth=this.handleAuth.bind(this),this.handleScroll=this.handleScroll.bind(this),this.resetPluginState=this.resetPluginState.bind(this),this.donePicking=this.donePicking.bind(this),this.render=this.render.bind(this),this.cancelSelection=this.cancelSelection.bind(this),this.toggleCheckbox=this.toggleCheckbox.bind(this),this.resetPluginState(),this.plugin.uppy.on("dashboard:close-panel",this.resetPluginState),this.plugin.uppy.registerRequestClient(this.provider.provider,this.provider)}resetPluginState(){this.plugin.setPluginState(yy(this.plugin.rootFolderId))}tearDown(){}setLoading(e){this.plugin.setPluginState({loading:e})}cancelSelection(){let{partialTree:e}=this.plugin.getPluginState(),t=e.map(i=>i.type==="root"?i:j(v({},i),{status:"unchecked"}));this.plugin.setPluginState({partialTree:t})}openFolder(e){return p(this,null,function*(){this.lastCheckbox=null;let{partialTree:t}=this.plugin.getPluginState(),i=t.find(n=>n.id===e);if(i.cached){this.plugin.setPluginState({currentFolderId:e,searchString:""});return}this.setLoading(!0),yield Xt(this,ct)[ct](n=>p(this,null,function*(){let s=e,o=[];do{let{username:l,nextPagePath:u,items:c}=yield this.provider.list(s,{signal:n});this.plugin.setPluginState({username:l}),s=u,o=o.concat(c),this.setLoading(this.plugin.uppy.i18n("loadedXFiles",{numFiles:o.length}))}while(this.opts.loadAllFiles&&s);let a=Er.afterOpenFolder(t,o,i,s,this.validateSingleFile);this.plugin.setPluginState({partialTree:a,currentFolderId:e,searchString:""})})).catch(Lt(this.plugin.uppy)),this.setLoading(!1)})}logout(){return p(this,null,function*(){yield Xt(this,ct)[ct](e=>p(this,null,function*(){let t=yield this.provider.logout({signal:e});if(t.ok){if(!t.revoked){let i=this.plugin.uppy.i18n("companionUnauthorizeHint",{provider:this.plugin.title,url:t.manual_revoke_url});this.plugin.uppy.info(i,"info",7e3)}this.plugin.setPluginState(j(v({},yy(this.plugin.rootFolderId)),{authenticated:!1}))}})).catch(Lt(this.plugin.uppy))})}handleAuth(e){return p(this,null,function*(){yield Xt(this,ct)[ct](t=>p(this,null,function*(){this.setLoading(!0),yield this.provider.login({authFormData:e,signal:t}),this.plugin.setPluginState({authenticated:!0}),yield Promise.all([this.provider.fetchPreAuthToken(),this.openFolder(this.plugin.rootFolderId)])})).catch(Lt(this.plugin.uppy)),this.setLoading(!1)})}handleScroll(e){return p(this,null,function*(){let{partialTree:t,currentFolderId:i}=this.plugin.getPluginState(),n=t.find(s=>s.id===i);da(e)&&!this.isHandlingScroll&&n.nextPagePath&&(this.isHandlingScroll=!0,yield Xt(this,ct)[ct](s=>p(this,null,function*(){let{nextPagePath:o,items:a}=yield this.provider.list(n.nextPagePath,{signal:s}),l=Er.afterScrollFolder(t,i,a,o,this.validateSingleFile);this.plugin.setPluginState({partialTree:l})})).catch(Lt(this.plugin.uppy)),this.isHandlingScroll=!1)})}donePicking(){return p(this,null,function*(){let{partialTree:e}=this.plugin.getPluginState();this.setLoading(!0),yield Xt(this,ct)[ct](t=>p(this,null,function*(){let i=yield Er.afterFill(e,o=>this.provider.list(o,{signal:t}),this.validateSingleFile,o=>{this.setLoading(this.plugin.uppy.i18n("addedNumFiles",{numFiles:o}))});if(this.validateAggregateRestrictions(i)){this.plugin.setPluginState({partialTree:i});return}let s=pa(i);fa(s,this.plugin,this.provider),this.resetPluginState()})).catch(Lt(this.plugin.uppy)),this.setLoading(!1)})}toggleCheckbox(e,t){let{partialTree:i}=this.plugin.getPluginState(),n=ha(e.id,this.getDisplayedPartialTree(),t,this.lastCheckbox),s=Er.afterToggleCheckbox(i,n);this.plugin.setPluginState({partialTree:s}),this.lastCheckbox=e.id}render(e,t){t===void 0&&(t={});let{didFirstRender:i}=this.plugin.getPluginState(),{i18n:n}=this.plugin.uppy;i||(this.plugin.setPluginState({didFirstRender:!0}),this.provider.fetchPreAuthToken(),this.openFolder(this.plugin.rootFolderId));let s=v(v({},this.opts),t),{authenticated:o,loading:a}=this.plugin.getPluginState(),l=this.plugin.icon||vs;if(o===!1)return h(na,{pluginName:this.plugin.title,pluginIcon:l,handleAuth:this.handleAuth,i18n:this.plugin.uppy.i18n,renderForm:s.renderAuthForm,loading:a});let{partialTree:u,currentFolderId:c,username:d,searchString:m}=this.plugin.getPluginState(),f=gy(u,c);return h("div",{className:(0,by.default)("uppy-ProviderBrowser",`uppy-ProviderBrowser-viewType--${s.viewType}`)},h(Vu,{showBreadcrumbs:s.showBreadcrumbs,openFolder:this.openFolder,breadcrumbs:f,pluginIcon:l,title:this.plugin.title,logout:this.logout,username:d,i18n:n}),s.showFilter&&h(bi,{searchString:m,setSearchString:b=>{this.plugin.setPluginState({searchString:b})},submitSearchString:()=>{},inputLabel:n("filter"),clearSearchLabel:n("resetFilter"),wrapperClassName:"uppy-ProviderBrowser-searchFilter",inputClassName:"uppy-ProviderBrowser-searchFilterInput"}),h(oa,{toggleCheckbox:this.toggleCheckbox,displayedPartialTree:this.getDisplayedPartialTree(),openFolder:this.openFolder,virtualList:s.virtualList,noResultsLabel:n("noFilesFound"),handleScroll:this.handleScroll,viewType:s.viewType,showTitles:s.showTitles,i18n:this.plugin.uppy.i18n,isLoading:a,utmSource:"Companion"}),h(gs,{partialTree:u,donePicking:this.donePicking,cancelSelection:this.cancelSelection,i18n:n,validateAggregateRestrictions:this.validateAggregateRestrictions}))}};function hS(r){return p(this,null,function*(){var e;(e=Xt(this,Tr)[Tr])==null||e.abort();let t=new AbortController;Xt(this,Tr)[Tr]=t;let i=()=>{t.abort()};try{this.plugin.uppy.on("dashboard:close-panel",i),this.plugin.uppy.on("cancel-all",i),yield r(t.signal)}finally{this.plugin.uppy.off("dashboard:close-panel",i),this.plugin.uppy.off("cancel-all",i),Xt(this,Tr)[Tr]=void 0}})}ys.VERSION=dS.version;var _y=re(Le(),1);var fS={version:"4.4.4"},pS={loading:!1,searchString:"",partialTree:[{type:"root",id:null,cached:!1,nextPagePath:null}],currentFolderId:null,isInputMode:!0},mS={viewType:"grid",showTitles:!0,showFilter:!0,utmSource:"Companion"},_i=class{constructor(e,t){this.isHandlingScroll=!1,this.lastCheckbox=null,this.validateSingleFile=i=>{let n=fs(i);return this.plugin.uppy.validateSingleFile(n)},this.getDisplayedPartialTree=()=>{let{partialTree:i}=this.plugin.getPluginState();return i.filter(n=>n.type!=="root")},this.setSearchString=i=>{this.plugin.setPluginState({searchString:i}),i===""&&this.plugin.setPluginState({partialTree:[]})},this.validateAggregateRestrictions=i=>{let s=i.filter(o=>o.type==="file"&&o.status==="checked").map(o=>o.data);return this.plugin.uppy.validateAggregateRestrictions(s)},this.plugin=e,this.provider=t.provider,this.opts=v(v({},mS),t),this.setSearchString=this.setSearchString.bind(this),this.search=this.search.bind(this),this.resetPluginState=this.resetPluginState.bind(this),this.handleScroll=this.handleScroll.bind(this),this.donePicking=this.donePicking.bind(this),this.cancelSelection=this.cancelSelection.bind(this),this.toggleCheckbox=this.toggleCheckbox.bind(this),this.render=this.render.bind(this),this.resetPluginState(),this.plugin.uppy.on("dashboard:close-panel",this.resetPluginState),this.plugin.uppy.registerRequestClient(this.provider.provider,this.provider)}tearDown(){}setLoading(e){this.plugin.setPluginState({loading:e})}resetPluginState(){this.plugin.setPluginState(pS)}cancelSelection(){let{partialTree:e}=this.plugin.getPluginState(),t=e.map(i=>i.type==="root"?i:j(v({},i),{status:"unchecked"}));this.plugin.setPluginState({partialTree:t})}search(){return p(this,null,function*(){let{searchString:e}=this.plugin.getPluginState();if(e!==""){this.setLoading(!0);try{let t=yield this.provider.search(e),i=[{type:"root",id:null,cached:!1,nextPagePath:t.nextPageQuery},...t.items.map(n=>({type:"file",id:n.requestPath,status:"unchecked",parentId:null,data:n}))];this.plugin.setPluginState({partialTree:i,isInputMode:!1})}catch(t){Lt(this.plugin.uppy)(t)}this.setLoading(!1)}})}handleScroll(e){return p(this,null,function*(){let{partialTree:t,searchString:i}=this.plugin.getPluginState(),n=t.find(s=>s.type==="root");if(da(e)&&!this.isHandlingScroll&&n.nextPagePath){this.isHandlingScroll=!0;try{let s=yield this.provider.search(i,n.nextPagePath),o=j(v({},n),{nextPagePath:s.nextPageQuery}),a=t.filter(u=>u.type!=="root"),l=[o,...a,...s.items.map(u=>({type:"file",id:u.requestPath,status:"unchecked",parentId:null,data:u}))];this.plugin.setPluginState({partialTree:l})}catch(s){Lt(this.plugin.uppy)(s)}this.isHandlingScroll=!1}})}donePicking(){return p(this,null,function*(){let{partialTree:e}=this.plugin.getPluginState(),t=pa(e);fa(t,this.plugin,this.provider),this.resetPluginState()})}toggleCheckbox(e,t){let{partialTree:i}=this.plugin.getPluginState(),n=ha(e.id,this.getDisplayedPartialTree(),t,this.lastCheckbox),s=Er.afterToggleCheckbox(i,n);this.plugin.setPluginState({partialTree:s}),this.lastCheckbox=e.id}render(e,t){t===void 0&&(t={});let{isInputMode:i,searchString:n,loading:s,partialTree:o}=this.plugin.getPluginState(),{i18n:a}=this.plugin.uppy,l=v(v({},this.opts),t);return i?h(bi,{searchString:n,setSearchString:this.setSearchString,submitSearchString:this.search,inputLabel:a("enterTextToSearch"),buttonLabel:a("searchImages"),wrapperClassName:"uppy-SearchProvider",inputClassName:"uppy-c-textInput uppy-SearchProvider-input",showButton:!0,buttonCSSClassName:"uppy-SearchProvider-searchButton"}):h("div",{className:(0,_y.default)("uppy-ProviderBrowser",`uppy-ProviderBrowser-viewType--${l.viewType}`)},l.showFilter&&h(bi,{searchString:n,setSearchString:this.setSearchString,submitSearchString:this.search,inputLabel:a("search"),clearSearchLabel:a("resetSearch"),wrapperClassName:"uppy-ProviderBrowser-searchFilter",inputClassName:"uppy-ProviderBrowser-searchFilterInput"}),h(oa,{toggleCheckbox:this.toggleCheckbox,displayedPartialTree:this.getDisplayedPartialTree(),handleScroll:this.handleScroll,openFolder:()=>p(this,null,function*(){}),noResultsLabel:a("noSearchResults"),viewType:l.viewType,showTitles:l.showTitles,isLoading:s,i18n:a,virtualList:!1,utmSource:this.opts.utmSource}),h(gs,{partialTree:o,donePicking:this.donePicking,cancelSelection:this.cancelSelection,i18n:a,validateAggregateRestrictions:this.validateAggregateRestrictions}))}};_i.VERSION=fS.version;var wy=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function gS(r,e){return!!(r===e||wy(r)&&wy(e))}function yS(r,e){if(r.length!==e.length)return!1;for(var t=0;t<r.length;t++)if(!gS(r[t],e[t]))return!1;return!0}function nc(r,e){e===void 0&&(e=yS);var t=null;function i(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];if(t&&t.lastThis===this&&e(n,t.lastArgs))return t.lastResult;var o=r.apply(this,n);return t={lastResult:o,lastArgs:n,lastThis:this},o}return i.clear=function(){t=null},i}var ma=['a[href]:not([tabindex^="-"]):not([inert]):not([aria-hidden])','area[href]:not([tabindex^="-"]):not([inert]):not([aria-hidden])',"input:not([disabled]):not([inert]):not([aria-hidden])","select:not([disabled]):not([inert]):not([aria-hidden])","textarea:not([disabled]):not([inert]):not([aria-hidden])","button:not([disabled]):not([inert]):not([aria-hidden])",'iframe:not([tabindex^="-"]):not([inert]):not([aria-hidden])','object:not([tabindex^="-"]):not([inert]):not([aria-hidden])','embed:not([tabindex^="-"]):not([inert]):not([aria-hidden])','[contenteditable]:not([tabindex^="-"]):not([inert]):not([aria-hidden])','[tabindex]:not([tabindex^="-"]):not([inert]):not([aria-hidden])'];function bs(r,e){if(e){let t=r.querySelector(`[data-uppy-paneltype="${e}"]`);if(t)return t}return r}function Sy(r,e){let t=e[0];t&&(t.focus(),r.preventDefault())}function vS(r,e){let t=e[e.length-1];t&&(t.focus(),r.preventDefault())}function bS(r){return r.contains(document.activeElement)}function sc(r,e,t){let i=bs(t,e),n=Jt(i.querySelectorAll(ma)),s=n.indexOf(document.activeElement);bS(i)?r.shiftKey&&s===0?vS(r,n):!r.shiftKey&&s===n.length-1&&Sy(r,n):Sy(r,n)}function xy(r,e,t){e===null||sc(r,e,t)}var Py=re(ml(),1);function oc(){let r=!1;return(0,Py.default)((t,i)=>{let n=bs(t,i),s=n.contains(document.activeElement);if(s&&r)return;let o=n.querySelector("[data-uppy-super-focusable]");if(!(s&&!o))if(o)o.focus({preventScroll:!0}),r=!0;else{let a=n.querySelector(ma);a?.focus({preventScroll:!0}),r=!1}},260)}var $y=re(Le(),1);function ac(){let r=document.body;return!(!("draggable"in r)||!("ondragstart"in r&&"ondrop"in r)||!("FormData"in window)||!("FileReader"in window))}var Cy=re(Le(),1);function ky(r,e){if(r===e)return!0;if(!r||!e)return!1;let t=Object.keys(r),i=Object.keys(e),n=t.length;if(i.length!==n)return!1;for(let s=0;s<n;s++){let o=t[s];if(r[o]!==e[o]||!Object.prototype.hasOwnProperty.call(e,o))return!1}return!0}function wS(){return h("svg",{"aria-hidden":"true",focusable:"false",width:"25",height:"25",viewBox:"0 0 25 25"},h("g",{fill:"#686DE0",fillRule:"evenodd"},h("path",{d:"M5 7v10h15V7H5zm0-1h15a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1z",fillRule:"nonzero"}),h("path",{d:"M6.35 17.172l4.994-5.026a.5.5 0 0 1 .707 0l2.16 2.16 3.505-3.505a.5.5 0 0 1 .707 0l2.336 2.31-.707.72-1.983-1.97-3.505 3.505a.5.5 0 0 1-.707 0l-2.16-2.159-3.938 3.939-1.409.026z",fillRule:"nonzero"}),h("circle",{cx:"7.5",cy:"9.5",r:"1.5"})))}function SS(){return h("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25"},h("path",{d:"M9.5 18.64c0 1.14-1.145 2-2.5 2s-2.5-.86-2.5-2c0-1.14 1.145-2 2.5-2 .557 0 1.079.145 1.5.396V7.25a.5.5 0 0 1 .379-.485l9-2.25A.5.5 0 0 1 18.5 5v11.64c0 1.14-1.145 2-2.5 2s-2.5-.86-2.5-2c0-1.14 1.145-2 2.5-2 .557 0 1.079.145 1.5.396V8.67l-8 2v7.97zm8-11v-2l-8 2v2l8-2zM7 19.64c.855 0 1.5-.484 1.5-1s-.645-1-1.5-1-1.5.484-1.5 1 .645 1 1.5 1zm9-2c.855 0 1.5-.484 1.5-1s-.645-1-1.5-1-1.5.484-1.5 1 .645 1 1.5 1z",fill:"#049BCF",fillRule:"nonzero"}))}function xS(){return h("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25"},h("path",{d:"M16 11.834l4.486-2.691A1 1 0 0 1 22 10v6a1 1 0 0 1-1.514.857L16 14.167V17a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V9a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v2.834zM15 9H5v8h10V9zm1 4l5 3v-6l-5 3z",fill:"#19AF67",fillRule:"nonzero"}))}function PS(){return h("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25"},h("path",{d:"M9.766 8.295c-.691-1.843-.539-3.401.747-3.726 1.643-.414 2.505.938 2.39 3.299-.039.79-.194 1.662-.537 3.148.324.49.66.967 1.055 1.51.17.231.382.488.629.757 1.866-.128 3.653.114 4.918.655 1.487.635 2.192 1.685 1.614 2.84-.566 1.133-1.839 1.084-3.416.249-1.141-.604-2.457-1.634-3.51-2.707a13.467 13.467 0 0 0-2.238.426c-1.392 4.051-4.534 6.453-5.707 4.572-.986-1.58 1.38-4.206 4.914-5.375.097-.322.185-.656.264-1.001.08-.353.306-1.31.407-1.737-.678-1.059-1.2-2.031-1.53-2.91zm2.098 4.87c-.033.144-.068.287-.104.427l.033-.01-.012.038a14.065 14.065 0 0 1 1.02-.197l-.032-.033.052-.004a7.902 7.902 0 0 1-.208-.271c-.197-.27-.38-.526-.555-.775l-.006.028-.002-.003c-.076.323-.148.632-.186.8zm5.77 2.978c1.143.605 1.832.632 2.054.187.26-.519-.087-1.034-1.113-1.473-.911-.39-2.175-.608-3.55-.608.845.766 1.787 1.459 2.609 1.894zM6.559 18.789c.14.223.693.16 1.425-.413.827-.648 1.61-1.747 2.208-3.206-2.563 1.064-4.102 2.867-3.633 3.62zm5.345-10.97c.088-1.793-.351-2.48-1.146-2.28-.473.119-.564 1.05-.056 2.405.213.566.52 1.188.908 1.859.18-.858.268-1.453.294-1.984z",fill:"#E2514A",fillRule:"nonzero"}))}function kS(){return h("svg",{"aria-hidden":"true",focusable:"false",width:"25",height:"25",viewBox:"0 0 25 25"},h("path",{d:"M10.45 2.05h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5V2.55a.5.5 0 0 1 .5-.5zm2.05 1.024h1.05a.5.5 0 0 1 .5.5V3.6a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5v-.001zM10.45 0h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5V.5a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-2.05 3.074h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-2.05 1.024h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm-2.05 1.025h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-1.656 3.074l-.82 5.946c.52.302 1.174.458 1.976.458.803 0 1.455-.156 1.975-.458l-.82-5.946h-2.311zm0-1.025h2.312c.512 0 .946.378 1.015.885l.82 5.946c.056.412-.142.817-.501 1.026-.686.398-1.515.597-2.49.597-.974 0-1.804-.199-2.49-.597a1.025 1.025 0 0 1-.5-1.026l.819-5.946c.07-.507.503-.885 1.015-.885zm.545 6.6a.5.5 0 0 1-.397-.561l.143-.999a.5.5 0 0 1 .495-.429h.74a.5.5 0 0 1 .495.43l.143.998a.5.5 0 0 1-.397.561c-.404.08-.819.08-1.222 0z",fill:"#00C469",fillRule:"nonzero"}))}function ES(){return h("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25"},h("g",{fill:"#A7AFB7",fillRule:"nonzero"},h("path",{d:"M5.5 22a.5.5 0 0 1-.5-.5v-18a.5.5 0 0 1 .5-.5h10.719a.5.5 0 0 1 .367.16l3.281 3.556a.5.5 0 0 1 .133.339V21.5a.5.5 0 0 1-.5.5h-14zm.5-1h13V7.25L16 4H6v17z"}),h("path",{d:"M15 4v3a1 1 0 0 0 1 1h3V7h-3V4h-1z"})))}function TS(){return h("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25"},h("path",{d:"M4.5 7h13a.5.5 0 1 1 0 1h-13a.5.5 0 0 1 0-1zm0 3h15a.5.5 0 1 1 0 1h-15a.5.5 0 1 1 0-1zm0 3h15a.5.5 0 1 1 0 1h-15a.5.5 0 1 1 0-1zm0 3h10a.5.5 0 1 1 0 1h-10a.5.5 0 1 1 0-1z",fill:"#5A5E69",fillRule:"nonzero"}))}function Cr(r){let e={color:"#838999",icon:ES()};if(!r)return e;let t=r.split("/")[0],i=r.split("/")[1];return t==="text"?{color:"#5a5e69",icon:TS()}:t==="image"?{color:"#686de0",icon:wS()}:t==="audio"?{color:"#068dbb",icon:SS()}:t==="video"?{color:"#19af67",icon:xS()}:t==="application"&&i==="pdf"?{color:"#e25149",icon:PS()}:t==="application"&&["zip","x-7z-compressed","x-zip-compressed","x-rar-compressed","x-tar","x-gzip","x-apple-diskimage"].indexOf(i)!==-1?{color:"#00C469",icon:kS()}:e}function _s(r){let{file:e}=r;if(e.preview)return h("img",{draggable:!1,className:"uppy-Dashboard-Item-previewImg",alt:e.name,src:e.preview});let{color:t,icon:i}=Cr(e.type);return h("div",{className:"uppy-Dashboard-Item-previewIconWrap"},h("span",{className:"uppy-Dashboard-Item-previewIcon",style:{color:t}},i),h("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-Dashboard-Item-previewIconBg",width:"58",height:"76",viewBox:"0 0 58 76"},h("rect",{fill:"#FFF",width:"58",height:"76",rx:"3",fillRule:"evenodd"})))}var CS=(r,e)=>(typeof e=="function"?e():e).filter(n=>n.id===r)[0].name;function ws(r){let{file:e,toggleFileCard:t,i18n:i,metaFields:n}=r,{missingRequiredMetaFields:s}=e;if(!(s!=null&&s.length))return null;let o=s.map(a=>CS(a,n)).join(", ");return h("div",{className:"uppy-Dashboard-Item-errorMessage"},i("missingRequiredMetaFields",{smart_count:s.length,fields:o})," ",h("button",{type:"button",class:"uppy-u-reset uppy-Dashboard-Item-errorMessageBtn",onClick:()=>t(!0,e.id)},i("editFile")))}function lc(r){let{file:e,i18n:t,toggleFileCard:i,metaFields:n,showLinkToFileUploadResult:s}=r,a=e.preview?"rgba(255, 255, 255, 0.5)":Cr(e.type).color;return h("div",{className:"uppy-Dashboard-Item-previewInnerWrap",style:{backgroundColor:a}},s&&e.uploadURL&&h("a",{className:"uppy-Dashboard-Item-previewLink",href:e.uploadURL,rel:"noreferrer noopener",target:"_blank","aria-label":e.meta.name},h("span",{hidden:!0},e.meta.name)),h(_s,{file:e}),h(ws,{file:e,i18n:t,toggleFileCard:i,metaFields:n}))}function FS(r){if(!r.isUploaded){if(r.error&&!r.hideRetryButton){r.uppy.retryUpload(r.file.id);return}r.resumableUploads&&!r.hidePauseResumeButton?r.uppy.pauseResume(r.file.id):r.individualCancellation&&!r.hideCancelButton&&r.uppy.removeFile(r.file.id)}}function Ey(r){return r.isUploaded?r.i18n("uploadComplete"):r.error?r.i18n("retryUpload"):r.resumableUploads?r.file.isPaused?r.i18n("resumeUpload"):r.i18n("pauseUpload"):r.individualCancellation?r.i18n("cancelUpload"):""}function uc(r){return h("div",{className:"uppy-Dashboard-Item-progress"},h("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-progressIndicator",type:"button","aria-label":Ey(r),title:Ey(r),onClick:()=>FS(r)},r.children))}function ga(r){let{children:e}=r;return h("svg",{"aria-hidden":"true",focusable:"false",width:"70",height:"70",viewBox:"0 0 36 36",className:"uppy-c-icon uppy-Dashboard-Item-progressIcon--circle"},e)}function cc(r){let{progress:e}=r,t=2*Math.PI*15;return h("g",null,h("circle",{className:"uppy-Dashboard-Item-progressIcon--bg",r:"15",cx:"18",cy:"18","stroke-width":"2",fill:"none"}),h("circle",{className:"uppy-Dashboard-Item-progressIcon--progress",r:"15",cx:"18",cy:"18",transform:"rotate(-90, 18, 18)",fill:"none","stroke-width":"2","stroke-dasharray":t,"stroke-dashoffset":t-t/100*e}))}function dc(r){return!r.file.progress.uploadStarted||r.file.progress.percentage===void 0?null:r.isUploaded?h("div",{className:"uppy-Dashboard-Item-progress"},h("div",{className:"uppy-Dashboard-Item-progressIndicator"},h(ga,null,h("circle",{r:"15",cx:"18",cy:"18",fill:"#1bb240"}),h("polygon",{className:"uppy-Dashboard-Item-progressIcon--check",transform:"translate(2, 3)",points:"14 22.5 7 15.2457065 8.99985857 13.1732815 14 18.3547104 22.9729883 9 25 11.1005634"})))):r.recoveredState?null:r.error&&!r.hideRetryButton?h(uc,r,h("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon uppy-Dashboard-Item-progressIcon--retry",width:"28",height:"31",viewBox:"0 0 16 19"},h("path",{d:"M16 11a8 8 0 1 1-8-8v2a6 6 0 1 0 6 6h2z"}),h("path",{d:"M7.9 3H10v2H7.9z"}),h("path",{d:"M8.536.5l3.535 3.536-1.414 1.414L7.12 1.914z"}),h("path",{d:"M10.657 2.621l1.414 1.415L8.536 7.57 7.12 6.157z"}))):r.resumableUploads&&!r.hidePauseResumeButton?h(uc,r,h(ga,null,h(cc,{progress:r.file.progress.percentage}),r.file.isPaused?h("polygon",{className:"uppy-Dashboard-Item-progressIcon--play",transform:"translate(3, 3)",points:"12 20 12 10 20 15"}):h("g",{className:"uppy-Dashboard-Item-progressIcon--pause",transform:"translate(14.5, 13)"},h("rect",{x:"0",y:"0",width:"2",height:"10",rx:"0"}),h("rect",{x:"5",y:"0",width:"2",height:"10",rx:"0"})))):!r.resumableUploads&&r.individualCancellation&&!r.hideCancelButton?h(uc,r,h(ga,null,h(cc,{progress:r.file.progress.percentage}),h("polygon",{className:"cancel",transform:"translate(2, 2)",points:"19.8856516 11.0625 16 14.9481516 12.1019737 11.0625 11.0625 12.1143484 14.9481516 16 11.0625 19.8980263 12.1019737 20.9375 16 17.0518484 19.8856516 20.9375 20.9375 19.8980263 17.0518484 16 20.9375 12"}))):h("div",{className:"uppy-Dashboard-Item-progress"},h("div",{className:"uppy-Dashboard-Item-progressIndicator"},h(ga,null,h(cc,{progress:r.file.progress.percentage}))))}var Ty=re(bn(),1);var hc="...";function ya(r,e){if(e===0)return"";if(r.length<=e)return r;if(e<=hc.length+1)return`${r.slice(0,e-1)}\u2026`;let t=e-hc.length,i=Math.ceil(t/2),n=Math.floor(t/2);return r.slice(0,i)+hc+r.slice(-n)}var OS=r=>{let{author:e,name:t}=r.file.meta;function i(){return r.isSingleFile&&r.containerHeight>=350?90:r.containerWidth<=352?35:r.containerWidth<=576?60:e?20:30}return h("div",{className:"uppy-Dashboard-Item-name",title:t},ya(t,i()))},AS=r=>{var e;let{author:t}=r.file.meta,i=(e=r.file.remote)==null?void 0:e.providerName,n="\xB7";return t?h("div",{className:"uppy-Dashboard-Item-author"},h("a",{href:`${t.url}?utm_source=Companion&utm_medium=referral`,target:"_blank",rel:"noopener noreferrer"},ya(t.name,13)),i?h(Fragment,null,` ${n} `,i,` ${n} `):null):null},RS=r=>r.file.size&&h("div",{className:"uppy-Dashboard-Item-statusSize"},(0,Ty.default)(r.file.size)),IS=r=>r.file.isGhost&&h("span",null," \u2022 ",h("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-reSelect",type:"button",onClick:()=>r.toggleAddFilesPanel(!0)},r.i18n("reSelect"))),US=r=>{let{file:e,onClick:t}=r;return e.error?h("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-errorDetails","aria-label":e.error,"data-microtip-position":"bottom","data-microtip-size":"medium",onClick:t,type:"button"},"?"):null};function fc(r){let{file:e,i18n:t,toggleFileCard:i,metaFields:n,toggleAddFilesPanel:s,isSingleFile:o,containerHeight:a,containerWidth:l}=r;return h("div",{className:"uppy-Dashboard-Item-fileInfo","data-uppy-file-source":e.source},h("div",{className:"uppy-Dashboard-Item-fileName"},OS({file:e,isSingleFile:o,containerHeight:a,containerWidth:l}),h(US,{file:e,onClick:()=>alert(e.error)})),h("div",{className:"uppy-Dashboard-Item-status"},AS({file:e}),RS({file:e}),IS({file:e,toggleAddFilesPanel:s,i18n:t})),h(ws,{file:e,i18n:t,toggleFileCard:i,metaFields:n}))}function pc(r,e){return e===void 0&&(e="Copy the URL below"),new Promise(t=>{let i=document.createElement("textarea");i.setAttribute("style",{position:"fixed",top:0,left:0,width:"2em",height:"2em",padding:0,border:"none",outline:"none",boxShadow:"none",background:"transparent"}),i.value=r,document.body.appendChild(i),i.select();let n=()=>{document.body.removeChild(i),window.prompt(e,r),t()};try{return document.execCommand("copy")?(document.body.removeChild(i),t()):n()}catch{return document.body.removeChild(i),n()}})}function DS(r){let{file:e,uploadInProgressOrComplete:t,metaFields:i,canEditFile:n,i18n:s,onClick:o}=r;return!t&&i&&i.length>0||!t&&n(e)?h("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-action uppy-Dashboard-Item-action--edit",type:"button","aria-label":s("editFileWithFilename",{file:e.meta.name}),title:s("editFileWithFilename",{file:e.meta.name}),onClick:()=>o()},h("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"14",height:"14",viewBox:"0 0 14 14"},h("g",{fillRule:"evenodd"},h("path",{d:"M1.5 10.793h2.793A1 1 0 0 0 5 10.5L11.5 4a1 1 0 0 0 0-1.414L9.707.793a1 1 0 0 0-1.414 0l-6.5 6.5A1 1 0 0 0 1.5 8v2.793zm1-1V8L9 1.5l1.793 1.793-6.5 6.5H2.5z",fillRule:"nonzero"}),h("rect",{x:"1",y:"12.293",width:"11",height:"1",rx:".5"}),h("path",{fillRule:"nonzero",d:"M6.793 2.5L9.5 5.207l.707-.707L7.5 1.793z"})))):null}function LS(r){let{i18n:e,onClick:t,file:i}=r;return h("button",{className:"uppy-u-reset uppy-Dashboard-Item-action uppy-Dashboard-Item-action--remove",type:"button","aria-label":e("removeFile",{file:i.meta.name}),title:e("removeFile",{file:i.meta.name}),onClick:()=>t()},h("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"18",height:"18",viewBox:"0 0 18 18"},h("path",{d:"M9 0C4.034 0 0 4.034 0 9s4.034 9 9 9 9-4.034 9-9-4.034-9-9-9z"}),h("path",{fill:"#FFF",d:"M13 12.222l-.778.778L9 9.778 5.778 13 5 12.222 8.222 9 5 5.778 5.778 5 9 8.222 12.222 5l.778.778L9.778 9z"})))}function BS(r){let{file:e,uppy:t,i18n:i}=r,n=s=>{pc(e.uploadURL,i("copyLinkToClipboardFallback")).then(()=>{t.log("Link copied to clipboard."),t.info(i("copyLinkToClipboardSuccess"),"info",3e3)}).catch(t.log).then(()=>s.target.focus({preventScroll:!0}))};return h("button",{className:"uppy-u-reset uppy-Dashboard-Item-action uppy-Dashboard-Item-action--copyLink",type:"button","aria-label":i("copyLink"),title:i("copyLink"),onClick:s=>n(s)},h("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"14",height:"14",viewBox:"0 0 14 12"},h("path",{d:"M7.94 7.703a2.613 2.613 0 0 1-.626 2.681l-.852.851a2.597 2.597 0 0 1-1.849.766A2.616 2.616 0 0 1 2.764 7.54l.852-.852a2.596 2.596 0 0 1 2.69-.625L5.267 7.099a1.44 1.44 0 0 0-.833.407l-.852.851a1.458 1.458 0 0 0 1.03 2.486c.39 0 .755-.152 1.03-.426l.852-.852c.231-.231.363-.522.406-.824l1.04-1.038zm4.295-5.937A2.596 2.596 0 0 0 10.387 1c-.698 0-1.355.272-1.849.766l-.852.851a2.614 2.614 0 0 0-.624 2.688l1.036-1.036c.041-.304.173-.6.407-.833l.852-.852c.275-.275.64-.426 1.03-.426a1.458 1.458 0 0 1 1.03 2.486l-.852.851a1.442 1.442 0 0 1-.824.406l-1.04 1.04a2.596 2.596 0 0 0 2.683-.628l.851-.85a2.616 2.616 0 0 0 0-3.697zm-6.88 6.883a.577.577 0 0 0 .82 0l3.474-3.474a.579.579 0 1 0-.819-.82L5.355 7.83a.579.579 0 0 0 0 .819z"})))}function mc(r){let{uppy:e,file:t,uploadInProgressOrComplete:i,canEditFile:n,metaFields:s,showLinkToFileUploadResult:o,showRemoveButton:a,i18n:l,toggleFileCard:u,openFileEditor:c}=r;return h("div",{className:"uppy-Dashboard-Item-actionWrapper"},h(DS,{i18n:l,file:t,uploadInProgressOrComplete:i,canEditFile:n,metaFields:s,onClick:()=>{s&&s.length>0?u(!0,t.id):c(t)}}),o&&t.uploadURL?h(BS,{file:t,uppy:e,i18n:l}):null,a?h(LS,{i18n:l,file:t,onClick:()=>e.removeFile(t.id)}):null)}var va=class extends ue{componentDidMount(){let{file:e}=this.props;e.preview||this.props.handleRequestThumbnail(e)}shouldComponentUpdate(e){return!ky(this.props,e)}componentDidUpdate(){let{file:e}=this.props;e.preview||this.props.handleRequestThumbnail(e)}componentWillUnmount(){let{file:e}=this.props;e.preview||this.props.handleCancelThumbnail(e)}render(){let{file:e}=this.props,t=e.progress.preprocess||e.progress.postprocess,i=!!e.progress.uploadComplete&&!t&&!e.error,n=!!e.progress.uploadStarted||!!t,s=e.progress.uploadStarted&&!e.progress.uploadComplete||t,o=e.error||!1,{isGhost:a}=e,l=(this.props.individualCancellation||!s)&&!i;i&&this.props.showRemoveButtonAfterComplete&&(l=!0);let u=(0,Cy.default)({"uppy-Dashboard-Item":!0,"is-inprogress":s&&!this.props.recoveredState,"is-processing":t,"is-complete":i,"is-error":!!o,"is-resumable":this.props.resumableUploads,"is-noIndividualCancellation":!this.props.individualCancellation,"is-ghost":a});return h("div",{className:u,id:`uppy_${e.id}`,role:this.props.role},h("div",{className:"uppy-Dashboard-Item-preview"},h(lc,{file:e,showLinkToFileUploadResult:this.props.showLinkToFileUploadResult,i18n:this.props.i18n,toggleFileCard:this.props.toggleFileCard,metaFields:this.props.metaFields}),h(dc,{uppy:this.props.uppy,file:e,error:o,isUploaded:i,hideRetryButton:this.props.hideRetryButton,hideCancelButton:this.props.hideCancelButton,hidePauseResumeButton:this.props.hidePauseResumeButton,recoveredState:this.props.recoveredState,resumableUploads:this.props.resumableUploads,individualCancellation:this.props.individualCancellation,i18n:this.props.i18n})),h("div",{className:"uppy-Dashboard-Item-fileInfoAndButtons"},h(fc,{file:e,containerWidth:this.props.containerWidth,containerHeight:this.props.containerHeight,i18n:this.props.i18n,toggleAddFilesPanel:this.props.toggleAddFilesPanel,toggleFileCard:this.props.toggleFileCard,metaFields:this.props.metaFields,isSingleFile:this.props.isSingleFile}),h(mc,{file:e,metaFields:this.props.metaFields,showLinkToFileUploadResult:this.props.showLinkToFileUploadResult,showRemoveButton:l,canEditFile:this.props.canEditFile,uploadInProgressOrComplete:n,toggleFileCard:this.props.toggleFileCard,openFileEditor:this.props.openFileEditor,uppy:this.props.uppy,i18n:this.props.i18n})))}};function NS(r,e){let t=[],i=[];return r.forEach(n=>{i.length<e?i.push(n):(t.push(i),i=[n])}),i.length&&t.push(i),t}function gc(r){let{id:e,i18n:t,uppy:i,files:n,resumableUploads:s,hideRetryButton:o,hidePauseResumeButton:a,hideCancelButton:l,showLinkToFileUploadResult:u,showRemoveButtonAfterComplete:c,metaFields:d,isSingleFile:m,toggleFileCard:f,handleRequestThumbnail:b,handleCancelThumbnail:x,recoveredState:E,individualCancellation:S,itemsPerRow:F,openFileEditor:I,canEditFile:T,toggleAddFilesPanel:M,containerWidth:L,containerHeight:B}=r,z=F===1?71:200,X=Ht(()=>{let ie=(ve,qe)=>Number(n[qe].isGhost)-Number(n[ve].isGhost),de=Object.keys(n);return E&&de.sort(ie),NS(de,F)},[n,F,E]),Oe=ie=>h("div",{class:"uppy-Dashboard-filesInner",role:"presentation",key:ie[0]},ie.map(de=>h(va,{key:de,uppy:i,id:e,i18n:t,resumableUploads:s,individualCancellation:S,hideRetryButton:o,hidePauseResumeButton:a,hideCancelButton:l,showLinkToFileUploadResult:u,showRemoveButtonAfterComplete:c,metaFields:d,recoveredState:E,isSingleFile:m,containerWidth:L,containerHeight:B,toggleFileCard:f,handleRequestThumbnail:b,handleCancelThumbnail:x,role:"listitem",openFileEditor:I,canEditFile:T,toggleAddFilesPanel:M,file:n[de]})));return m?h("div",{class:"uppy-Dashboard-files"},Oe(X[0])):h(sa,{class:"uppy-Dashboard-files",role:"list",data:X,renderRow:Oe,rowHeight:z})}var yc=class extends ue{constructor(){super(...arguments),this.fileInput=null,this.folderInput=null,this.mobilePhotoFileInput=null,this.mobileVideoFileInput=null,this.triggerFileInputClick=()=>{var e;(e=this.fileInput)==null||e.click()},this.triggerFolderInputClick=()=>{var e;(e=this.folderInput)==null||e.click()},this.triggerVideoCameraInputClick=()=>{var e;(e=this.mobileVideoFileInput)==null||e.click()},this.triggerPhotoCameraInputClick=()=>{var e;(e=this.mobilePhotoFileInput)==null||e.click()},this.onFileInputChange=e=>{this.props.handleInputChange(e),e.currentTarget.value=""},this.renderHiddenInput=(e,t)=>{var i;return h("input",{className:"uppy-Dashboard-input",hidden:!0,"aria-hidden":"true",tabIndex:-1,webkitdirectory:e,type:"file",name:"files[]",multiple:this.props.maxNumberOfFiles!==1,onChange:this.onFileInputChange,accept:(i=this.props.allowedFileTypes)==null?void 0:i.join(", "),ref:t})},this.renderHiddenCameraInput=(e,t,i)=>{let s={photo:"image/*",video:"video/*"}[e];return h("input",{className:"uppy-Dashboard-input",hidden:!0,"aria-hidden":"true",tabIndex:-1,type:"file",name:`camera-${e}`,onChange:this.onFileInputChange,capture:t,accept:s,ref:i})},this.renderMyDeviceAcquirer=()=>h("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":"MyDevice"},h("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-uppy-super-focusable":!0,onClick:this.triggerFileInputClick},h("div",{className:"uppy-DashboardTab-inner"},h("svg",{className:"uppy-DashboardTab-iconMyDevice","aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32"},h("path",{d:"M8.45 22.087l-1.305-6.674h17.678l-1.572 6.674H8.45zm4.975-12.412l1.083 1.765a.823.823 0 00.715.386h7.951V13.5H8.587V9.675h4.838zM26.043 13.5h-1.195v-2.598c0-.463-.336-.75-.798-.75h-8.356l-1.082-1.766A.823.823 0 0013.897 8H7.728c-.462 0-.815.256-.815.718V13.5h-.956a.97.97 0 00-.746.37.972.972 0 00-.19.81l1.724 8.565c.095.44.484.755.933.755H24c.44 0 .824-.3.929-.727l2.043-8.568a.972.972 0 00-.176-.825.967.967 0 00-.753-.38z",fill:"currentcolor","fill-rule":"evenodd"}))),h("div",{className:"uppy-DashboardTab-name"},this.props.i18n("myDevice")))),this.renderPhotoCamera=()=>h("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":"MobilePhotoCamera"},h("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-uppy-super-focusable":!0,onClick:this.triggerPhotoCameraInputClick},h("div",{className:"uppy-DashboardTab-inner"},h("svg",{"aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32"},h("path",{d:"M23.5 9.5c1.417 0 2.5 1.083 2.5 2.5v9.167c0 1.416-1.083 2.5-2.5 2.5h-15c-1.417 0-2.5-1.084-2.5-2.5V12c0-1.417 1.083-2.5 2.5-2.5h2.917l1.416-2.167C13 7.167 13.25 7 13.5 7h5c.25 0 .5.167.667.333L20.583 9.5H23.5zM16 11.417a4.706 4.706 0 00-4.75 4.75 4.704 4.704 0 004.75 4.75 4.703 4.703 0 004.75-4.75c0-2.663-2.09-4.75-4.75-4.75zm0 7.825c-1.744 0-3.076-1.332-3.076-3.074 0-1.745 1.333-3.077 3.076-3.077 1.744 0 3.074 1.333 3.074 3.076s-1.33 3.075-3.074 3.075z",fill:"#02B383","fill-rule":"nonzero"}))),h("div",{className:"uppy-DashboardTab-name"},this.props.i18n("takePictureBtn")))),this.renderVideoCamera=()=>h("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":"MobileVideoCamera"},h("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-uppy-super-focusable":!0,onClick:this.triggerVideoCameraInputClick},h("div",{className:"uppy-DashboardTab-inner"},h("svg",{"aria-hidden":"true",width:"32",height:"32",viewBox:"0 0 32 32"},h("path",{fill:"#FF675E",fillRule:"nonzero",d:"m21.254 14.277 2.941-2.588c.797-.313 1.243.818 1.09 1.554-.01 2.094.02 4.189-.017 6.282-.126.915-1.145 1.08-1.58.34l-2.434-2.142c-.192.287-.504 1.305-.738.468-.104-1.293-.028-2.596-.05-3.894.047-.312.381.823.426 1.069.063-.384.206-.744.362-1.09zm-12.939-3.73c3.858.013 7.717-.025 11.574.02.912.129 1.492 1.237 1.351 2.217-.019 2.412.04 4.83-.03 7.239-.17 1.025-1.166 1.59-2.029 1.429-3.705-.012-7.41.025-11.114-.019-.913-.129-1.492-1.237-1.352-2.217.018-2.404-.036-4.813.029-7.214.136-.82.83-1.473 1.571-1.454z "}))),h("div",{className:"uppy-DashboardTab-name"},this.props.i18n("recordVideoBtn")))),this.renderBrowseButton=(e,t)=>{let i=this.props.acquirers.length;return h("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-Dashboard-browse",onClick:t,"data-uppy-super-focusable":i===0},e)},this.renderDropPasteBrowseTagline=e=>{let t=this.renderBrowseButton(this.props.i18n("browseFiles"),this.triggerFileInputClick),i=this.renderBrowseButton(this.props.i18n("browseFolders"),this.triggerFolderInputClick),n=this.props.fileManagerSelectionType,s=n.charAt(0).toUpperCase()+n.slice(1);return h("div",{class:"uppy-Dashboard-AddFiles-title"},this.props.disableLocalFiles?this.props.i18n("importFiles"):e>0?this.props.i18nArray(`dropPasteImport${s}`,{browseFiles:t,browseFolders:i,browse:t}):this.props.i18nArray(`dropPaste${s}`,{browseFiles:t,browseFolders:i,browse:t}))},this.renderAcquirer=e=>{var t;return h("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":e.id},h("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-cy":e.id,"aria-controls":`uppy-DashboardContent-panel--${e.id}`,"aria-selected":((t=this.props.activePickerPanel)==null?void 0:t.id)===e.id,"data-uppy-super-focusable":!0,onClick:()=>this.props.showPanel(e.id)},h("div",{className:"uppy-DashboardTab-inner"},e.icon()),h("div",{className:"uppy-DashboardTab-name"},e.name)))},this.renderAcquirers=e=>{let t=[...e],i=t.splice(e.length-2,e.length);return h(Pe,null,t.map(n=>this.renderAcquirer(n)),h("span",{role:"presentation",style:{"white-space":"nowrap"}},i.map(n=>this.renderAcquirer(n))))},this.renderSourcesList=(e,t)=>{let{showNativePhotoCameraButton:i,showNativeVideoCameraButton:n}=this.props,s=[],o="myDevice";t||s.push({key:o,elements:this.renderMyDeviceAcquirer()}),i&&s.push({key:"nativePhotoCameraButton",elements:this.renderPhotoCamera()}),n&&s.push({key:"nativePhotoCameraButton",elements:this.renderVideoCamera()}),s.push(...e.map(c=>({key:c.id,elements:this.renderAcquirer(c)}))),s.length===1&&s[0].key===o&&(s=[]);let l=[...s],u=l.splice(s.length-2,s.length);return h(Pe,null,this.renderDropPasteBrowseTagline(s.length),h("div",{className:"uppy-Dashboard-AddFiles-list",role:"tablist"},l.map(c=>{let{key:d,elements:m}=c;return h(Pe,{key:d},m)}),h("span",{role:"presentation",style:{"white-space":"nowrap"}},u.map(c=>{let{key:d,elements:m}=c;return h(Pe,{key:d},m)}))))}}[Symbol.for("uppy test: disable unused locale key warning")](){this.props.i18nArray("dropPasteBoth"),this.props.i18nArray("dropPasteFiles"),this.props.i18nArray("dropPasteFolders"),this.props.i18nArray("dropPasteImportBoth"),this.props.i18nArray("dropPasteImportFiles"),this.props.i18nArray("dropPasteImportFolders")}renderPoweredByUppy(){let{i18nArray:e}=this.props,t=h("span",null,h("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon uppy-Dashboard-poweredByIcon",width:"11",height:"11",viewBox:"0 0 11 11"},h("path",{d:"M7.365 10.5l-.01-4.045h2.612L5.5.806l-4.467 5.65h2.604l.01 4.044h3.718z",fillRule:"evenodd"})),h("span",{className:"uppy-Dashboard-poweredByUppy"},"Uppy")),i=e("poweredBy",{uppy:t});return h("a",{tabIndex:-1,href:"https://uppy.io",rel:"noreferrer noopener",target:"_blank",className:"uppy-Dashboard-poweredBy"},i)}render(){let{showNativePhotoCameraButton:e,showNativeVideoCameraButton:t,nativeCameraFacingMode:i}=this.props;return h("div",{className:"uppy-Dashboard-AddFiles"},this.renderHiddenInput(!1,n=>{this.fileInput=n}),this.renderHiddenInput(!0,n=>{this.folderInput=n}),e&&this.renderHiddenCameraInput("photo",i,n=>{this.mobilePhotoFileInput=n}),t&&this.renderHiddenCameraInput("video",i,n=>{this.mobileVideoFileInput=n}),this.renderSourcesList(this.props.acquirers,this.props.disableLocalFiles),h("div",{className:"uppy-Dashboard-AddFiles-info"},this.props.note&&h("div",{className:"uppy-Dashboard-note"},this.props.note),this.props.proudlyDisplayPoweredByUppy&&this.renderPoweredByUppy()))}},ba=yc;var Fy=re(Le(),1);var jS=r=>h("div",{className:(0,Fy.default)("uppy-Dashboard-AddFilesPanel",r.className),"data-uppy-panelType":"AddFiles","aria-hidden":!r.showAddFilesPanel},h("div",{className:"uppy-DashboardContent-bar"},h("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":"1"},r.i18n("addingMoreFiles")),h("button",{className:"uppy-DashboardContent-back",type:"button",onClick:()=>r.toggleAddFilesPanel(!1)},r.i18n("back"))),h(ba,r)),Oy=jS;var Ay=re(Le(),1);function MS(r){let{tagName:e}=r.target;if(e==="INPUT"||e==="TEXTAREA"){r.stopPropagation();return}r.preventDefault(),r.stopPropagation()}var _t=MS;function zS(r){let{activePickerPanel:e,className:t,hideAllPanels:i,i18n:n,state:s,uppy:o}=r,a=qt(null);return h("div",{className:(0,Ay.default)("uppy-DashboardContent-panel",t),role:"tabpanel","data-uppy-panelType":"PickerPanel",id:`uppy-DashboardContent-panel--${e.id}`,onDragOver:_t,onDragLeave:_t,onDrop:_t,onPaste:_t},h("div",{className:"uppy-DashboardContent-bar"},h("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":"1"},n("importFrom",{name:e.name})),h("button",{className:"uppy-DashboardContent-back",type:"button",onClick:i},n("cancel"))),h("div",{ref:a,className:"uppy-DashboardContent-panelBody"},o.getPlugin(e.id).render(s,a.current)))}var Ry=zS;var Iy=re(Le(),1);function $S(r){let e=r.files[r.fileCardFor],t=()=>{r.uppy.emit("file-editor:cancel",e),r.closeFileEditor()};return h("div",{className:(0,Iy.default)("uppy-DashboardContent-panel",r.className),role:"tabpanel","data-uppy-panelType":"FileEditor",id:"uppy-DashboardContent-panel--editor"},h("div",{className:"uppy-DashboardContent-bar"},h("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":"1"},r.i18nArray("editing",{file:h("span",{className:"uppy-DashboardContent-titleFile"},e.meta?e.meta.name:e.name)})),h("button",{className:"uppy-DashboardContent-back",type:"button",onClick:t},r.i18n("cancel")),h("button",{className:"uppy-DashboardContent-save",type:"button",onClick:r.saveFileEditor},r.i18n("save"))),h("div",{className:"uppy-DashboardContent-panelBody"},r.editors.map(i=>r.uppy.getPlugin(i.id).render(r.state))))}var Uy=$S;var wt={STATE_ERROR:"error",STATE_WAITING:"waiting",STATE_PREPROCESSING:"preprocessing",STATE_UPLOADING:"uploading",STATE_POSTPROCESSING:"postprocessing",STATE_COMPLETE:"complete",STATE_PAUSED:"paused"};function qS(r,e,t,i){if(i===void 0&&(i={}),r)return wt.STATE_ERROR;if(e)return wt.STATE_COMPLETE;if(t)return wt.STATE_PAUSED;let n=wt.STATE_WAITING,s=Object.keys(i);for(let o=0;o<s.length;o++){let{progress:a}=i[s[o]];if(a.uploadStarted&&!a.uploadComplete)return wt.STATE_UPLOADING;a.preprocess&&n!==wt.STATE_UPLOADING&&(n=wt.STATE_PREPROCESSING),a.postprocess&&n!==wt.STATE_UPLOADING&&n!==wt.STATE_PREPROCESSING&&(n=wt.STATE_POSTPROCESSING)}return n}function HS(r){let{files:e,i18n:t,isAllComplete:i,isAllErrored:n,isAllPaused:s,inProgressNotPausedFiles:o,newFiles:a,processingFiles:l}=r;switch(qS(n,i,s,e)){case"uploading":return t("uploadingXFiles",{smart_count:o.length});case"preprocessing":case"postprocessing":return t("processingXFiles",{smart_count:l.length});case"paused":return t("uploadPaused");case"waiting":return t("xFilesSelected",{smart_count:a.length});case"complete":return t("uploadComplete");case"error":return t("error");default:}}function VS(r){let{i18n:e,isAllComplete:t,hideCancelButton:i,maxNumberOfFiles:n,toggleAddFilesPanel:s,uppy:o}=r,{allowNewUpload:a}=r;return a&&n&&(a=r.totalFileCount<r.maxNumberOfFiles),h("div",{className:"uppy-DashboardContent-bar"},!t&&!i?h("button",{className:"uppy-DashboardContent-back",type:"button",onClick:()=>o.cancelAll()},e("cancel")):h("div",null),h("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":"1"},h(HS,r)),a?h("button",{className:"uppy-DashboardContent-addMore",type:"button","aria-label":e("addMoreFiles"),title:e("addMoreFiles"),onClick:()=>s(!0)},h("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"15",height:"15",viewBox:"0 0 15 15"},h("path",{d:"M8 6.5h6a.5.5 0 0 1 .5.5v.5a.5.5 0 0 1-.5.5H8v6a.5.5 0 0 1-.5.5H7a.5.5 0 0 1-.5-.5V8h-6a.5.5 0 0 1-.5-.5V7a.5.5 0 0 1 .5-.5h6v-6A.5.5 0 0 1 7 0h.5a.5.5 0 0 1 .5.5v6z"})),h("span",{className:"uppy-DashboardContent-addMoreCaption"},e("addMore"))):h("div",null))}var Dy=VS;var Ly=re(Le(),1);function vc(r){let{computedMetaFields:e,requiredMetaFields:t,updateMeta:i,form:n,formState:s}=r,o={text:"uppy-u-reset uppy-c-textInput uppy-Dashboard-FileCard-input"};return e.map(a=>{let l=`uppy-Dashboard-FileCard-input-${a.id}`,u=t.includes(a.id);return h("fieldset",{key:a.id,className:"uppy-Dashboard-FileCard-fieldset"},h("label",{className:"uppy-Dashboard-FileCard-label",htmlFor:l},a.name),a.render!==void 0?a.render({value:s[a.id],onChange:c=>i(c,a.id),fieldCSSClasses:o,required:u,form:n.id},h):h("input",{className:o.text,id:l,form:n.id,type:a.type||"text",required:u,value:s[a.id],placeholder:a.placeholder,onInput:c=>i(c.target.value,a.id),"data-uppy-super-focusable":!0}))})}function bc(r){var e;let{files:t,fileCardFor:i,toggleFileCard:n,saveFileCard:s,metaFields:o,requiredMetaFields:a,openFileEditor:l,i18n:u,i18nArray:c,className:d,canEditFile:m}=r,f=()=>typeof o=="function"?o(t[i]):o,b=t[i],x=(e=f())!=null?e:[],E=m(b),S={};x.forEach(z=>{var X;S[z.id]=(X=b.meta[z.id])!=null?X:""});let[F,I]=rt(S),T=Vt(z=>{z.preventDefault(),s(F,i)},[s,F,i]),M=(z,X)=>{I(j(v({},F),{[X]:z}))},L=()=>{n(!1)},[B]=rt(()=>{let z=document.createElement("form");return z.setAttribute("tabindex","-1"),z.id=$t(),z});return lt(()=>(document.body.appendChild(B),B.addEventListener("submit",T),()=>{B.removeEventListener("submit",T),document.body.removeChild(B)}),[B,T]),h("div",{className:(0,Ly.default)("uppy-Dashboard-FileCard",d),"data-uppy-panelType":"FileCard",onDragOver:_t,onDragLeave:_t,onDrop:_t,onPaste:_t},h("div",{className:"uppy-DashboardContent-bar"},h("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":"1"},c("editing",{file:h("span",{className:"uppy-DashboardContent-titleFile"},b.meta?b.meta.name:b.name)})),h("button",{className:"uppy-DashboardContent-back",type:"button",form:B.id,title:u("finishEditingFile"),onClick:L},u("cancel"))),h("div",{className:"uppy-Dashboard-FileCard-inner"},h("div",{className:"uppy-Dashboard-FileCard-preview",style:{backgroundColor:Cr(b.type).color}},h(_s,{file:b}),E&&h("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-Dashboard-FileCard-edit",onClick:z=>{T(z),l(b)}},u("editImage"))),h("div",{className:"uppy-Dashboard-FileCard-info"},h(vc,{computedMetaFields:x,requiredMetaFields:a,updateMeta:M,form:B,formState:F})),h("div",{className:"uppy-Dashboard-FileCard-actions"},h("button",{className:"uppy-u-reset uppy-c-btn uppy-c-btn-primary uppy-Dashboard-FileCard-actionsBtn",type:"submit",form:B.id},u("saveChanges")),h("button",{className:"uppy-u-reset uppy-c-btn uppy-c-btn-link uppy-Dashboard-FileCard-actionsBtn",type:"button",onClick:L,form:B.id},u("cancel")))))}var Ny=re(Le(),1),wi="uppy-transition-slideDownUp",By=250;function WS(r){let{children:e}=r,[t,i]=rt(null),[n,s]=rt(""),o=qt(),a=qt(),l=qt(),u=()=>{s(`${wi}-enter`),cancelAnimationFrame(l.current),clearTimeout(a.current),a.current=void 0,l.current=requestAnimationFrame(()=>{s(`${wi}-enter ${wi}-enter-active`),o.current=setTimeout(()=>{s("")},By)})},c=()=>{s(`${wi}-leave`),cancelAnimationFrame(l.current),clearTimeout(o.current),o.current=void 0,l.current=requestAnimationFrame(()=>{s(`${wi}-leave ${wi}-leave-active`),a.current=setTimeout(()=>{i(null),s("")},By)})};return lt(()=>{let d=ze(e)[0];t!==d&&(d&&!t?u():t&&!d&&!a.current&&c(),i(d))},[e,t]),lt(()=>()=>{clearTimeout(o.current),clearTimeout(a.current),cancelAnimationFrame(l.current)},[]),t?Un(t,{className:(0,Ny.default)(n,t.props.className)}):null}var Ss=WS;function Si(){return Si=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},Si.apply(null,arguments)}var jy=900,My=700,_c=576,zy=330;function wc(r){let e=r.totalFileCount===0,t=r.totalFileCount===1,i=r.containerWidth>_c,n=r.containerHeight>zy,s=(0,$y.default)({"uppy-Dashboard":!0,"uppy-Dashboard--isDisabled":r.disabled,"uppy-Dashboard--animateOpenClose":r.animateOpenClose,"uppy-Dashboard--isClosing":r.isClosing,"uppy-Dashboard--isDraggingOver":r.isDraggingOver,"uppy-Dashboard--modal":!r.inline,"uppy-size--md":r.containerWidth>_c,"uppy-size--lg":r.containerWidth>My,"uppy-size--xl":r.containerWidth>jy,"uppy-size--height-md":r.containerHeight>zy,"uppy-Dashboard--isAddFilesPanelVisible":r.showAddFilesPanel,"uppy-Dashboard--isInnerWrapVisible":r.areInsidesReadyToBeVisible,"uppy-Dashboard--singleFile":r.singleFileFullScreen&&t&&n}),o=1;r.containerWidth>jy?o=5:r.containerWidth>My?o=4:r.containerWidth>_c&&(o=3);let a=r.showSelectedFiles&&!e,l=r.recoveredState?Object.keys(r.recoveredState.files).length:null,u=r.files?Object.keys(r.files).filter(m=>r.files[m].isGhost).length:0,c=()=>u>0?r.i18n("recoveredXFiles",{smart_count:u}):r.i18n("recoveredAllFiles");return h("div",{className:s,"data-uppy-theme":r.theme,"data-uppy-num-acquirers":r.acquirers.length,"data-uppy-drag-drop-supported":!r.disableLocalFiles&&ac(),"aria-hidden":r.inline?"false":r.isHidden,"aria-disabled":r.disabled,"aria-label":r.inline?r.i18n("dashboardTitle"):r.i18n("dashboardWindowTitle"),onPaste:r.handlePaste,onDragOver:r.handleDragOver,onDragLeave:r.handleDragLeave,onDrop:r.handleDrop},h("div",{"aria-hidden":"true",className:"uppy-Dashboard-overlay",tabIndex:-1,onClick:r.handleClickOutside}),h("div",{className:"uppy-Dashboard-inner","aria-modal":!r.inline&&"true",role:r.inline?void 0:"dialog",style:{width:r.inline&&r.width?r.width:"",height:r.inline&&r.height?r.height:""}},r.inline?null:h("button",{className:"uppy-u-reset uppy-Dashboard-close",type:"button","aria-label":r.i18n("closeModal"),title:r.i18n("closeModal"),onClick:r.closeModal},h("span",{"aria-hidden":"true"},"\xD7")),h("div",{className:"uppy-Dashboard-innerWrap"},h("div",{className:"uppy-Dashboard-dropFilesHereHint"},r.i18n("dropHint")),a&&h(Dy,r),l&&h("div",{className:"uppy-Dashboard-serviceMsg"},h("svg",{className:"uppy-Dashboard-serviceMsg-icon","aria-hidden":"true",focusable:"false",width:"21",height:"16",viewBox:"0 0 24 19"},h("g",{transform:"translate(0 -1)",fill:"none",fillRule:"evenodd"},h("path",{d:"M12.857 1.43l10.234 17.056A1 1 0 0122.234 20H1.766a1 1 0 01-.857-1.514L11.143 1.429a1 1 0 011.714 0z",fill:"#FFD300"}),h("path",{fill:"#000",d:"M11 6h2l-.3 8h-1.4z"}),h("circle",{fill:"#000",cx:"12",cy:"17",r:"1"}))),h("strong",{className:"uppy-Dashboard-serviceMsg-title"},r.i18n("sessionRestored")),h("div",{className:"uppy-Dashboard-serviceMsg-text"},c())),a?h(gc,{id:r.id,i18n:r.i18n,uppy:r.uppy,files:r.files,resumableUploads:r.resumableUploads,hideRetryButton:r.hideRetryButton,hidePauseResumeButton:r.hidePauseResumeButton,hideCancelButton:r.hideCancelButton,showLinkToFileUploadResult:r.showLinkToFileUploadResult,showRemoveButtonAfterComplete:r.showRemoveButtonAfterComplete,metaFields:r.metaFields,toggleFileCard:r.toggleFileCard,handleRequestThumbnail:r.handleRequestThumbnail,handleCancelThumbnail:r.handleCancelThumbnail,recoveredState:r.recoveredState,individualCancellation:r.individualCancellation,openFileEditor:r.openFileEditor,canEditFile:r.canEditFile,toggleAddFilesPanel:r.toggleAddFilesPanel,isSingleFile:t,itemsPerRow:o,containerWidth:r.containerWidth,containerHeight:r.containerHeight}):h(ba,{i18n:r.i18n,i18nArray:r.i18nArray,acquirers:r.acquirers,handleInputChange:r.handleInputChange,maxNumberOfFiles:r.maxNumberOfFiles,allowedFileTypes:r.allowedFileTypes,showNativePhotoCameraButton:r.showNativePhotoCameraButton,showNativeVideoCameraButton:r.showNativeVideoCameraButton,nativeCameraFacingMode:r.nativeCameraFacingMode,showPanel:r.showPanel,activePickerPanel:r.activePickerPanel,disableLocalFiles:r.disableLocalFiles,fileManagerSelectionType:r.fileManagerSelectionType,note:r.note,proudlyDisplayPoweredByUppy:r.proudlyDisplayPoweredByUppy}),h(Ss,null,r.showAddFilesPanel?h(Oy,Si({key:"AddFiles"},r,{isSizeMD:i})):null),h(Ss,null,r.fileCardFor?h(bc,Si({key:"FileCard"},r)):null),h(Ss,null,r.activePickerPanel?h(Ry,Si({key:"Picker"},r)):null),h(Ss,null,r.showFileEditor?h(Uy,Si({key:"Editor"},r)):null),h("div",{className:"uppy-Dashboard-progressindicators"},r.progressindicators.map(m=>r.uppy.getPlugin(m.id).render(r.state))))))}var qy={strings:{closeModal:"Close Modal",addMoreFiles:"Add more files",addingMoreFiles:"Adding more files",importFrom:"Import from %{name}",dashboardWindowTitle:"Uppy Dashboard Window (Press escape to close)",dashboardTitle:"Uppy Dashboard",copyLinkToClipboardSuccess:"Link copied to clipboard.",copyLinkToClipboardFallback:"Copy the URL below",copyLink:"Copy link",back:"Back",removeFile:"Remove file",editFile:"Edit file",editImage:"Edit image",editing:"Editing %{file}",error:"Error",finishEditingFile:"Finish editing file",saveChanges:"Save changes",myDevice:"My Device",dropHint:"Drop your files here",uploadComplete:"Upload complete",uploadPaused:"Upload paused",resumeUpload:"Resume upload",pauseUpload:"Pause upload",retryUpload:"Retry upload",cancelUpload:"Cancel upload",xFilesSelected:{0:"%{smart_count} file selected",1:"%{smart_count} files selected"},uploadingXFiles:{0:"Uploading %{smart_count} file",1:"Uploading %{smart_count} files"},processingXFiles:{0:"Processing %{smart_count} file",1:"Processing %{smart_count} files"},poweredBy:"Powered by %{uppy}",addMore:"Add more",editFileWithFilename:"Edit file %{file}",save:"Save",cancel:"Cancel",dropPasteFiles:"Drop files here or %{browseFiles}",dropPasteFolders:"Drop files here or %{browseFolders}",dropPasteBoth:"Drop files here, %{browseFiles} or %{browseFolders}",dropPasteImportFiles:"Drop files here, %{browseFiles} or import from:",dropPasteImportFolders:"Drop files here, %{browseFolders} or import from:",dropPasteImportBoth:"Drop files here, %{browseFiles}, %{browseFolders} or import from:",importFiles:"Import files from:",browseFiles:"browse files",browseFolders:"browse folders",recoveredXFiles:{0:"We could not fully recover 1 file. Please re-select it and resume the upload.",1:"We could not fully recover %{smart_count} files. Please re-select them and resume the upload."},recoveredAllFiles:"We restored all files. You can now resume the upload.",sessionRestored:"Session restored",reSelect:"Re-select",missingRequiredMetaFields:{0:"Missing required meta field: %{fields}.",1:"Missing required meta fields: %{fields}."},takePictureBtn:"Take Picture",recordVideoBtn:"Record Video"}};function Z(r,e){if(!{}.hasOwnProperty.call(r,e))throw new TypeError("attempted to use private field on non-instance");return r}var GS=0;function Ee(r){return"__private_"+GS+++"_"+r}var KS={version:"4.3.4"},Sc=nc.default||nc,Hy=9,JS=27;function Vy(){let r={};return r.promise=new Promise((e,t)=>{r.resolve=e,r.reject=t}),r}var XS={target:"body",metaFields:[],thumbnailWidth:280,thumbnailType:"image/jpeg",waitForThumbnailsBeforeUpload:!1,defaultPickerIcon:vs,showLinkToFileUploadResult:!1,showProgressDetails:!1,hideUploadButton:!1,hideCancelButton:!1,hideRetryButton:!1,hidePauseResumeButton:!1,hideProgressAfterFinish:!1,note:null,singleFileFullScreen:!0,disableStatusBar:!1,disableInformer:!1,disableThumbnailGenerator:!1,fileManagerSelectionType:"files",proudlyDisplayPoweredByUppy:!0,showSelectedFiles:!0,showRemoveButtonAfterComplete:!1,showNativePhotoCameraButton:!1,showNativeVideoCameraButton:!1,theme:"light",autoOpen:null,disabled:!1,disableLocalFiles:!1,nativeCameraFacingMode:"",onDragLeave:()=>{},onDragOver:()=>{},onDrop:()=>{},plugins:[],doneButtonHandler:void 0,onRequestCloseModal:null,inline:!1,animateOpenClose:!0,browserBackButtonClose:!1,closeAfterFinish:!1,closeModalOnClickOutside:!1,disablePageScrollWhenModalOpen:!0,trigger:null,width:750,height:550},Fr=Ee("disabledNodes"),Bt=Ee("generateLargeThumbnailIfSingleFile"),xs=Ee("openFileEditorWhenFilesAdded"),Or=Ee("attachRenderFunctionToTarget"),xc=Ee("isTargetSupported"),Pc=Ee("getAcquirers"),kc=Ee("getProgressIndicators"),Nt=Ee("getEditors"),Ec=Ee("addSpecifiedPluginsFromOptions"),Tc=Ee("autoDiscoverPlugins"),Ar=Ee("addSupportedPluginIfNoTarget"),Ps=Ee("getStatusBarOpts"),ks=Ee("getThumbnailGeneratorOpts"),Cc=Ee("getInformerOpts"),Es=Ee("getStatusBarId"),Ts=Ee("getThumbnailGeneratorId"),Fc=Ee("getInformerId"),xi=class extends At{constructor(e,t){var i,n,s;let o=(i=t?.autoOpen)!=null?i:null;super(e,j(v(v({},XS),t),{autoOpen:o})),Object.defineProperty(this,Fc,{value:rx}),Object.defineProperty(this,Ts,{value:tx}),Object.defineProperty(this,Es,{value:ex}),Object.defineProperty(this,Cc,{value:ZS}),Object.defineProperty(this,ks,{value:QS}),Object.defineProperty(this,Ps,{value:YS}),Object.defineProperty(this,Fr,{writable:!0,value:void 0}),this.modalName=`uppy-Dashboard-${$t()}`,this.superFocus=oc(),this.ifFocusedOnUppyRecently=!1,this.removeTarget=a=>{let u=this.getPluginState().targets.filter(c=>c.id!==a.id);this.setPluginState({targets:u})},this.addTarget=a=>{let l=a.id||a.constructor.name,u=a.title||l,c=a.type;if(c!=="acquirer"&&c!=="progressindicator"&&c!=="editor")return this.uppy.log("Dashboard: can only be targeted by plugins of types: acquirer, progressindicator, editor","error"),null;let d={id:l,name:u,type:c},f=this.getPluginState().targets.slice();return f.push(d),this.setPluginState({targets:f}),this.el},this.hideAllPanels=()=>{var a;let l=this.getPluginState(),u={activePickerPanel:void 0,showAddFilesPanel:!1,activeOverlayType:null,fileCardFor:null,showFileEditor:!1};l.activePickerPanel===u.activePickerPanel&&l.showAddFilesPanel===u.showAddFilesPanel&&l.showFileEditor===u.showFileEditor&&l.activeOverlayType===u.activeOverlayType||(this.setPluginState(u),this.uppy.emit("dashboard:close-panel",(a=l.activePickerPanel)==null?void 0:a.id))},this.showPanel=a=>{let{targets:l}=this.getPluginState(),u=l.find(c=>c.type==="acquirer"&&c.id===a);this.setPluginState({activePickerPanel:u,activeOverlayType:"PickerPanel"}),this.uppy.emit("dashboard:show-panel",a)},this.canEditFile=a=>{let{targets:l}=this.getPluginState();return Z(this,Nt)[Nt](l).some(c=>this.uppy.getPlugin(c.id).canEditFile(a))},this.openFileEditor=a=>{let{targets:l}=this.getPluginState(),u=Z(this,Nt)[Nt](l);this.setPluginState({showFileEditor:!0,fileCardFor:a.id||null,activeOverlayType:"FileEditor"}),u.forEach(c=>{this.uppy.getPlugin(c.id).selectFile(a)})},this.closeFileEditor=()=>{let{metaFields:a}=this.getPluginState();a&&a.length>0?this.setPluginState({showFileEditor:!1,activeOverlayType:"FileCard"}):this.setPluginState({showFileEditor:!1,fileCardFor:null,activeOverlayType:"AddFiles"})},this.saveFileEditor=()=>{let{targets:a}=this.getPluginState();Z(this,Nt)[Nt](a).forEach(u=>{this.uppy.getPlugin(u.id).save()}),this.closeFileEditor()},this.openModal=()=>{let{promise:a,resolve:l}=Vy();if(this.savedScrollPosition=window.pageYOffset,this.savedActiveElement=document.activeElement,this.opts.disablePageScrollWhenModalOpen&&document.body.classList.add("uppy-Dashboard-isFixed"),this.opts.animateOpenClose&&this.getPluginState().isClosing){let u=()=>{this.setPluginState({isHidden:!1}),this.el.removeEventListener("animationend",u,!1),l()};this.el.addEventListener("animationend",u,!1)}else this.setPluginState({isHidden:!1}),l();return this.opts.browserBackButtonClose&&this.updateBrowserHistory(),document.addEventListener("keydown",this.handleKeyDownInModal),this.uppy.emit("dashboard:modal-open"),a},this.closeModal=a=>{var l;let u=(l=a?.manualClose)!=null?l:!0,{isHidden:c,isClosing:d}=this.getPluginState();if(c||d)return;let{promise:m,resolve:f}=Vy();if(this.opts.disablePageScrollWhenModalOpen&&document.body.classList.remove("uppy-Dashboard-isFixed"),this.opts.animateOpenClose){this.setPluginState({isClosing:!0});let x=()=>{this.setPluginState({isHidden:!0,isClosing:!1}),this.superFocus.cancel(),this.savedActiveElement.focus(),this.el.removeEventListener("animationend",x,!1),f()};this.el.addEventListener("animationend",x,!1)}else this.setPluginState({isHidden:!0}),this.superFocus.cancel(),this.savedActiveElement.focus(),f();if(document.removeEventListener("keydown",this.handleKeyDownInModal),u&&this.opts.browserBackButtonClose){var b;(b=history.state)!=null&&b[this.modalName]&&history.back()}return this.uppy.emit("dashboard:modal-closed"),m},this.isModalOpen=()=>!this.getPluginState().isHidden||!1,this.requestCloseModal=()=>this.opts.onRequestCloseModal?this.opts.onRequestCloseModal():this.closeModal(),this.setDarkModeCapability=a=>{let{capabilities:l}=this.uppy.getState();this.uppy.setState({capabilities:j(v({},l),{darkMode:a})})},this.handleSystemDarkModeChange=a=>{let l=a.matches;this.uppy.log(`[Dashboard] Dark mode is ${l?"on":"off"}`),this.setDarkModeCapability(l)},this.toggleFileCard=(a,l)=>{let u=this.uppy.getFile(l);a?this.uppy.emit("dashboard:file-edit-start",u):this.uppy.emit("dashboard:file-edit-complete",u),this.setPluginState({fileCardFor:a?l:null,activeOverlayType:a?"FileCard":null})},this.toggleAddFilesPanel=a=>{this.setPluginState({showAddFilesPanel:a,activeOverlayType:a?"AddFiles":null})},this.addFiles=a=>{let l=a.map(u=>({source:this.id,name:u.name,type:u.type,data:u,meta:{relativePath:u.relativePath||u.webkitRelativePath||null}}));try{this.uppy.addFiles(l)}catch(u){this.uppy.log(u)}},this.startListeningToResize=()=>{this.resizeObserver=new ResizeObserver(a=>{let l=a[0],{width:u,height:c}=l.contentRect;this.setPluginState({containerWidth:u,containerHeight:c,areInsidesReadyToBeVisible:!0})}),this.resizeObserver.observe(this.el.querySelector(".uppy-Dashboard-inner")),this.makeDashboardInsidesVisibleAnywayTimeout=setTimeout(()=>{let a=this.getPluginState(),l=!this.opts.inline&&a.isHidden;!a.areInsidesReadyToBeVisible&&!l&&(this.uppy.log("[Dashboard] resize event didn\u2019t fire on time: defaulted to mobile layout","warning"),this.setPluginState({areInsidesReadyToBeVisible:!0}))},1e3)},this.stopListeningToResize=()=>{this.resizeObserver.disconnect(),clearTimeout(this.makeDashboardInsidesVisibleAnywayTimeout)},this.recordIfFocusedOnUppyRecently=a=>{this.el.contains(a.target)?this.ifFocusedOnUppyRecently=!0:(this.ifFocusedOnUppyRecently=!1,this.superFocus.cancel())},this.disableInteractiveElements=a=>{var l;let u=["a[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])",'[role="button"]:not([disabled])'],c=(l=Z(this,Fr)[Fr])!=null?l:Jt(this.el.querySelectorAll(u)).filter(d=>!d.classList.contains("uppy-Dashboard-close"));for(let d of c)d.tagName==="A"?d.setAttribute("aria-disabled",a):d.disabled=a;a?Z(this,Fr)[Fr]=c:Z(this,Fr)[Fr]=null,this.dashboardIsDisabled=a},this.updateBrowserHistory=()=>{var a;(a=history.state)!=null&&a[this.modalName]||history.pushState(j(v({},history.state),{[this.modalName]:!0}),""),window.addEventListener("popstate",this.handlePopState,!1)},this.handlePopState=a=>{var l;this.isModalOpen()&&(!a.state||!a.state[this.modalName])&&this.closeModal({manualClose:!1}),!this.isModalOpen()&&(l=a.state)!=null&&l[this.modalName]&&history.back()},this.handleKeyDownInModal=a=>{a.keyCode===JS&&this.requestCloseModal(),a.keyCode===Hy&&sc(a,this.getPluginState().activeOverlayType,this.el)},this.handleClickOutside=()=>{this.opts.closeModalOnClickOutside&&this.requestCloseModal()},this.handlePaste=a=>{this.uppy.iteratePlugins(u=>{u.type==="acquirer"&&(u.handleRootPaste==null||u.handleRootPaste(a))});let l=Jt(a.clipboardData.files);l.length>0&&(this.uppy.log("[Dashboard] Files pasted"),this.addFiles(l))},this.handleInputChange=a=>{a.preventDefault();let l=Jt(a.currentTarget.files||[]);l.length>0&&(this.uppy.log("[Dashboard] Files selected through input"),this.addFiles(l))},this.handleDragOver=a=>{a.preventDefault(),a.stopPropagation();let l=()=>{let m=!0;return this.uppy.iteratePlugins(f=>{f.canHandleRootDrop!=null&&f.canHandleRootDrop(a)&&(m=!0)}),m},u=()=>{let{types:m}=a.dataTransfer;return m.some(f=>f==="Files")},c=l(),d=u();if(!c&&!d||this.opts.disabled||this.opts.disableLocalFiles&&(d||!c)||!this.uppy.getState().allowNewUpload){a.dataTransfer.dropEffect="none";return}a.dataTransfer.dropEffect="copy",this.setPluginState({isDraggingOver:!0}),this.opts.onDragOver(a)},this.handleDragLeave=a=>{a.preventDefault(),a.stopPropagation(),this.setPluginState({isDraggingOver:!1}),this.opts.onDragLeave(a)},this.handleDrop=a=>p(this,null,function*(){a.preventDefault(),a.stopPropagation(),this.setPluginState({isDraggingOver:!1}),this.uppy.iteratePlugins(d=>{d.type==="acquirer"&&(d.handleRootDrop==null||d.handleRootDrop(a))});let l=!1,u=d=>{this.uppy.log(d,"error"),l||(this.uppy.info(d.message,"error"),l=!0)};this.uppy.log("[Dashboard] Processing dropped files");let c=yield $u(a.dataTransfer,{logDropError:u});c.length>0&&(this.uppy.log("[Dashboard] Files dropped"),this.addFiles(c)),this.opts.onDrop(a)}),this.handleRequestThumbnail=a=>{this.opts.waitForThumbnailsBeforeUpload||this.uppy.emit("thumbnail:request",a)},this.handleCancelThumbnail=a=>{this.opts.waitForThumbnailsBeforeUpload||this.uppy.emit("thumbnail:cancel",a)},this.handleKeyDownInInline=a=>{a.keyCode===Hy&&xy(a,this.getPluginState().activeOverlayType,this.el)},this.handlePasteOnBody=a=>{this.el.contains(document.activeElement)&&this.handlePaste(a)},this.handleComplete=a=>{let{failed:l}=a;this.opts.closeAfterFinish&&!(l!=null&&l.length)&&this.requestCloseModal()},this.handleCancelRestore=()=>{this.uppy.emit("restore-canceled")},Object.defineProperty(this,Bt,{writable:!0,value:()=>{if(this.opts.disableThumbnailGenerator)return;let a=600,l=this.uppy.getFiles();if(l.length===1){let u=this.uppy.getPlugin(`${this.id}:ThumbnailGenerator`);u?.setOptions({thumbnailWidth:a});let c=j(v({},l[0]),{preview:void 0});u?.requestThumbnail(c).then(()=>{u?.setOptions({thumbnailWidth:this.opts.thumbnailWidth})})}}}),Object.defineProperty(this,xs,{writable:!0,value:a=>{let l=a[0],{metaFields:u}=this.getPluginState(),c=u&&u.length>0,d=this.canEditFile(l);c&&this.opts.autoOpen==="metaEditor"?this.toggleFileCard(!0,l.id):d&&this.opts.autoOpen==="imageEditor"&&this.openFileEditor(l)}}),this.initEvents=()=>{if(this.opts.trigger&&!this.opts.inline){let a=ju(this.opts.trigger);a?a.forEach(l=>l.addEventListener("click",this.openModal)):this.uppy.log("Dashboard modal trigger not found. Make sure `trigger` is set in Dashboard options, unless you are planning to call `dashboard.openModal()` method yourself","warning")}this.startListeningToResize(),document.addEventListener("paste",this.handlePasteOnBody),this.uppy.on("plugin-added",Z(this,Ar)[Ar]),this.uppy.on("plugin-remove",this.removeTarget),this.uppy.on("file-added",this.hideAllPanels),this.uppy.on("dashboard:modal-closed",this.hideAllPanels),this.uppy.on("complete",this.handleComplete),this.uppy.on("files-added",Z(this,Bt)[Bt]),this.uppy.on("file-removed",Z(this,Bt)[Bt]),document.addEventListener("focus",this.recordIfFocusedOnUppyRecently,!0),document.addEventListener("click",this.recordIfFocusedOnUppyRecently,!0),this.opts.inline&&this.el.addEventListener("keydown",this.handleKeyDownInInline),this.opts.autoOpen&&this.uppy.on("files-added",Z(this,xs)[xs])},this.removeEvents=()=>{let a=ju(this.opts.trigger);!this.opts.inline&&a&&a.forEach(l=>l.removeEventListener("click",this.openModal)),this.stopListeningToResize(),document.removeEventListener("paste",this.handlePasteOnBody),window.removeEventListener("popstate",this.handlePopState,!1),this.uppy.off("plugin-added",Z(this,Ar)[Ar]),this.uppy.off("plugin-remove",this.removeTarget),this.uppy.off("file-added",this.hideAllPanels),this.uppy.off("dashboard:modal-closed",this.hideAllPanels),this.uppy.off("complete",this.handleComplete),this.uppy.off("files-added",Z(this,Bt)[Bt]),this.uppy.off("file-removed",Z(this,Bt)[Bt]),document.removeEventListener("focus",this.recordIfFocusedOnUppyRecently),document.removeEventListener("click",this.recordIfFocusedOnUppyRecently),this.opts.inline&&this.el.removeEventListener("keydown",this.handleKeyDownInInline),this.opts.autoOpen&&this.uppy.off("files-added",Z(this,xs)[xs])},this.superFocusOnEachUpdate=()=>{let a=this.el.contains(document.activeElement),l=document.activeElement===document.body||document.activeElement===null,u=this.uppy.getState().info.length===0,c=!this.opts.inline;u&&(c||a||l&&this.ifFocusedOnUppyRecently)?this.superFocus(this.el,this.getPluginState().activeOverlayType):this.superFocus.cancel()},this.afterUpdate=()=>{if(this.opts.disabled&&!this.dashboardIsDisabled){this.disableInteractiveElements(!0);return}!this.opts.disabled&&this.dashboardIsDisabled&&this.disableInteractiveElements(!1),this.superFocusOnEachUpdate()},this.saveFileCard=(a,l)=>{this.uppy.setFileMeta(l,a),this.toggleFileCard(!1,l)},Object.defineProperty(this,Or,{writable:!0,value:a=>{let l=this.uppy.getPlugin(a.id);return j(v({},a),{icon:l.icon||this.opts.defaultPickerIcon,render:l.render})}}),Object.defineProperty(this,xc,{writable:!0,value:a=>{let l=this.uppy.getPlugin(a.id);return typeof l.isSupported!="function"?!0:l.isSupported()}}),Object.defineProperty(this,Pc,{writable:!0,value:Sc(a=>a.filter(l=>l.type==="acquirer"&&Z(this,xc)[xc](l)).map(Z(this,Or)[Or]))}),Object.defineProperty(this,kc,{writable:!0,value:Sc(a=>a.filter(l=>l.type==="progressindicator").map(Z(this,Or)[Or]))}),Object.defineProperty(this,Nt,{writable:!0,value:Sc(a=>a.filter(l=>l.type==="editor").map(Z(this,Or)[Or]))}),this.render=a=>{let l=this.getPluginState(),{files:u,capabilities:c,allowNewUpload:d}=a,{newFiles:m,uploadStartedFiles:f,completeFiles:b,erroredFiles:x,inProgressFiles:E,inProgressNotPausedFiles:S,processingFiles:F,isUploadStarted:I,isAllComplete:T,isAllPaused:M}=this.uppy.getObjectOfFilesPerState(),L=Z(this,Pc)[Pc](l.targets),B=Z(this,kc)[kc](l.targets),z=Z(this,Nt)[Nt](l.targets),X;return this.opts.theme==="auto"?X=c.darkMode?"dark":"light":X=this.opts.theme,["files","folders","both"].indexOf(this.opts.fileManagerSelectionType)<0&&(this.opts.fileManagerSelectionType="files",console.warn(`Unsupported option for "fileManagerSelectionType". Using default of "${this.opts.fileManagerSelectionType}".`)),wc({state:a,isHidden:l.isHidden,files:u,newFiles:m,uploadStartedFiles:f,completeFiles:b,erroredFiles:x,inProgressFiles:E,inProgressNotPausedFiles:S,processingFiles:F,isUploadStarted:I,isAllComplete:T,isAllPaused:M,totalFileCount:Object.keys(u).length,totalProgress:a.totalProgress,allowNewUpload:d,acquirers:L,theme:X,disabled:this.opts.disabled,disableLocalFiles:this.opts.disableLocalFiles,direction:this.opts.direction,activePickerPanel:l.activePickerPanel,showFileEditor:l.showFileEditor,saveFileEditor:this.saveFileEditor,closeFileEditor:this.closeFileEditor,disableInteractiveElements:this.disableInteractiveElements,animateOpenClose:this.opts.animateOpenClose,isClosing:l.isClosing,progressindicators:B,editors:z,autoProceed:this.uppy.opts.autoProceed,id:this.id,closeModal:this.requestCloseModal,handleClickOutside:this.handleClickOutside,handleInputChange:this.handleInputChange,handlePaste:this.handlePaste,inline:this.opts.inline,showPanel:this.showPanel,hideAllPanels:this.hideAllPanels,i18n:this.i18n,i18nArray:this.i18nArray,uppy:this.uppy,note:this.opts.note,recoveredState:a.recoveredState,metaFields:l.metaFields,resumableUploads:c.resumableUploads||!1,individualCancellation:c.individualCancellation,isMobileDevice:c.isMobileDevice,fileCardFor:l.fileCardFor,toggleFileCard:this.toggleFileCard,toggleAddFilesPanel:this.toggleAddFilesPanel,showAddFilesPanel:l.showAddFilesPanel,saveFileCard:this.saveFileCard,openFileEditor:this.openFileEditor,canEditFile:this.canEditFile,width:this.opts.width,height:this.opts.height,showLinkToFileUploadResult:this.opts.showLinkToFileUploadResult,fileManagerSelectionType:this.opts.fileManagerSelectionType,proudlyDisplayPoweredByUppy:this.opts.proudlyDisplayPoweredByUppy,hideCancelButton:this.opts.hideCancelButton,hideRetryButton:this.opts.hideRetryButton,hidePauseResumeButton:this.opts.hidePauseResumeButton,showRemoveButtonAfterComplete:this.opts.showRemoveButtonAfterComplete,containerWidth:l.containerWidth,containerHeight:l.containerHeight,areInsidesReadyToBeVisible:l.areInsidesReadyToBeVisible,parentElement:this.el,allowedFileTypes:this.uppy.opts.restrictions.allowedFileTypes,maxNumberOfFiles:this.uppy.opts.restrictions.maxNumberOfFiles,requiredMetaFields:this.uppy.opts.restrictions.requiredMetaFields,showSelectedFiles:this.opts.showSelectedFiles,showNativePhotoCameraButton:this.opts.showNativePhotoCameraButton,showNativeVideoCameraButton:this.opts.showNativeVideoCameraButton,nativeCameraFacingMode:this.opts.nativeCameraFacingMode,singleFileFullScreen:this.opts.singleFileFullScreen,handleCancelRestore:this.handleCancelRestore,handleRequestThumbnail:this.handleRequestThumbnail,handleCancelThumbnail:this.handleCancelThumbnail,isDraggingOver:l.isDraggingOver,handleDragOver:this.handleDragOver,handleDragLeave:this.handleDragLeave,handleDrop:this.handleDrop})},Object.defineProperty(this,Ec,{writable:!0,value:()=>{let{plugins:a}=this.opts;a.forEach(l=>{let u=this.uppy.getPlugin(l);u?u.mount(this,u):this.uppy.log(`[Uppy] Dashboard could not find plugin '${l}', make sure to uppy.use() the plugins you are specifying`,"warning")})}}),Object.defineProperty(this,Tc,{writable:!0,value:()=>{this.uppy.iteratePlugins(Z(this,Ar)[Ar])}}),Object.defineProperty(this,Ar,{writable:!0,value:a=>{var l;let u=["acquirer","editor"];a&&!((l=a.opts)!=null&&l.target)&&u.includes(a.type)&&(this.getPluginState().targets.some(d=>a.id===d.id)||a.mount(this,a))}}),this.install=()=>{this.setPluginState({isHidden:!0,fileCardFor:null,activeOverlayType:null,showAddFilesPanel:!1,activePickerPanel:void 0,showFileEditor:!1,metaFields:this.opts.metaFields,targets:[],areInsidesReadyToBeVisible:!1,isDraggingOver:!1});let{inline:a,closeAfterFinish:l}=this.opts;if(a&&l)throw new Error("[Dashboard] `closeAfterFinish: true` cannot be used on an inline Dashboard, because an inline Dashboard cannot be closed at all. Either set `inline: false`, or disable the `closeAfterFinish` option.");let{allowMultipleUploads:u,allowMultipleUploadBatches:c}=this.uppy.opts;(u||c)&&l&&this.uppy.log("[Dashboard] When using `closeAfterFinish`, we recommended setting the `allowMultipleUploadBatches` option to `false` in the Uppy constructor. See https://uppy.io/docs/uppy/#allowMultipleUploads-true","warning");let{target:d}=this.opts;d&&this.mount(d,this),this.opts.disableStatusBar||this.uppy.use(di,v({id:Z(this,Es)[Es](),target:this},Z(this,Ps)[Ps]())),this.opts.disableInformer||this.uppy.use(Sr,v({id:Z(this,Fc)[Fc](),target:this},Z(this,Cc)[Cc]())),this.opts.disableThumbnailGenerator||this.uppy.use(Kt,v({id:Z(this,Ts)[Ts]()},Z(this,ks)[ks]())),this.darkModeMediaQuery=typeof window<"u"&&window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)"):null;let m=this.darkModeMediaQuery?this.darkModeMediaQuery.matches:!1;if(this.uppy.log(`[Dashboard] Dark mode is ${m?"on":"off"}`),this.setDarkModeCapability(m),this.opts.theme==="auto"){var f;(f=this.darkModeMediaQuery)==null||f.addListener(this.handleSystemDarkModeChange)}Z(this,Ec)[Ec](),Z(this,Tc)[Tc](),this.initEvents()},this.uninstall=()=>{if(!this.opts.disableInformer){let u=this.uppy.getPlugin(`${this.id}:Informer`);u&&this.uppy.removePlugin(u)}if(!this.opts.disableStatusBar){let u=this.uppy.getPlugin(`${this.id}:StatusBar`);u&&this.uppy.removePlugin(u)}if(!this.opts.disableThumbnailGenerator){let u=this.uppy.getPlugin(`${this.id}:ThumbnailGenerator`);u&&this.uppy.removePlugin(u)}let{plugins:a}=this.opts;if(a.forEach(u=>{let c=this.uppy.getPlugin(u);c&&c.unmount()}),this.opts.theme==="auto"){var l;(l=this.darkModeMediaQuery)==null||l.removeListener(this.handleSystemDarkModeChange)}this.opts.disablePageScrollWhenModalOpen&&document.body.classList.remove("uppy-Dashboard-isFixed"),this.unmount(),this.removeEvents()},this.id=this.opts.id||"Dashboard",this.title="Dashboard",this.type="orchestrator",this.defaultLocale=qy,this.opts.doneButtonHandler===void 0&&(this.opts.doneButtonHandler=()=>{this.uppy.clear(),this.requestCloseModal()}),(s=(n=this.opts).onRequestCloseModal)!=null||(n.onRequestCloseModal=()=>this.closeModal()),this.i18nInit()}setOptions(e){var t,i;super.setOptions(e),(t=this.uppy.getPlugin(Z(this,Es)[Es]()))==null||t.setOptions(Z(this,Ps)[Ps]()),(i=this.uppy.getPlugin(Z(this,Ts)[Ts]()))==null||i.setOptions(Z(this,ks)[ks]())}};function YS(){let{hideUploadButton:r,hideRetryButton:e,hidePauseResumeButton:t,hideCancelButton:i,showProgressDetails:n,hideProgressAfterFinish:s,locale:o,doneButtonHandler:a}=this.opts;return{hideUploadButton:r,hideRetryButton:e,hidePauseResumeButton:t,hideCancelButton:i,showProgressDetails:n,hideAfterFinish:s,locale:o,doneButtonHandler:a}}function QS(){let{thumbnailWidth:r,thumbnailHeight:e,thumbnailType:t,waitForThumbnailsBeforeUpload:i}=this.opts;return{thumbnailWidth:r,thumbnailHeight:e,thumbnailType:t,waitForThumbnailsBeforeUpload:i,lazy:!i}}function ZS(){return{}}function ex(){return`${this.id}:StatusBar`}function tx(){return`${this.id}:ThumbnailGenerator`}function rx(){return`${this.id}:Informer`}xi.VERSION=KS.version;function Cs(r,e=0){return ix(r)?Number(r):arguments.length===2?e:0}function ix(r){return!isNaN(parseFloat(r))&&!isNaN(Number(r))}function Wy(r){return r instanceof Bi?r.nativeElement:r}var Oc;try{Oc=typeof Intl<"u"&&Intl.v8BreakIterator}catch{Oc=!1}var _a=(()=>{class r{_platformId=W(gd);isBrowser=this._platformId?jd(this._platformId):typeof document=="object"&&!!document;EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent);TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent);BLINK=this.isBrowser&&!!(window.chrome||Oc)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT;WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT;IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window);FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent);ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT;SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT;constructor(){}static \u0275fac=function(i){return new(i||r)};static \u0275prov=St({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var nx=new Yt("cdk-dir-doc",{providedIn:"root",factory:sx});function sx(){return W(js)}var ox=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function ax(r){let e=r?.toLowerCase()||"";return e==="auto"&&typeof navigator<"u"&&navigator?.language?ox.test(navigator.language)?"rtl":"ltr":e==="rtl"?"rtl":"ltr"}var Gy=(()=>{class r{get value(){return this.valueSignal()}valueSignal=Ae("ltr");change=new Sd;constructor(){let t=W(nx,{optional:!0});if(t){let i=t.body?t.body.dir:null,n=t.documentElement?t.documentElement.dir:null;this.valueSignal.set(ax(i||n||"ltr"))}}ngOnDestroy(){this.change.complete()}static \u0275fac=function(i){return new(i||r)};static \u0275prov=St({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var dt=function(r){return r[r.NORMAL=0]="NORMAL",r[r.NEGATED=1]="NEGATED",r[r.INVERTED=2]="INVERTED",r}(dt||{}),wa,Rr;function Ky(){if(Rr==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return Rr=!1,Rr;if("scrollBehavior"in document.documentElement.style)Rr=!0;else{let r=Element.prototype.scrollTo;r?Rr=!/\{\s*\[native code\]\s*\}/.test(r.toString()):Rr=!1}}return Rr}function Pi(){if(typeof document!="object"||!document)return dt.NORMAL;if(wa==null){let r=document.createElement("div"),e=r.style;r.dir="rtl",e.width="1px",e.overflow="auto",e.visibility="hidden",e.pointerEvents="none",e.position="absolute";let t=document.createElement("div"),i=t.style;i.width="2px",i.height="1px",r.appendChild(t),document.body.appendChild(r),wa=dt.NORMAL,r.scrollLeft===0&&(r.scrollLeft=1,wa=r.scrollLeft===0?dt.NEGATED:dt.INVERTED),r.remove()}return wa}var Ac=(()=>{class r{static \u0275fac=function(i){return new(i||r)};static \u0275mod=Ni({type:r});static \u0275inj=Di({})}return r})();var Sa=class{};function Jy(r){return r&&typeof r.connect=="function"&&!(r instanceof id)}var xa=class extends Sa{_data;constructor(e){super(),this._data=e}connect(){return Us(this._data)?this._data:Ii(this._data)}disconnect(){}},Fs=function(r){return r[r.REPLACED=0]="REPLACED",r[r.INSERTED=1]="INSERTED",r[r.MOVED=2]="MOVED",r[r.REMOVED=3]="REMOVED",r}(Fs||{}),Rc=new Yt("_ViewRepeater"),Pa=class{viewCacheSize=20;_viewCache=[];applyChanges(e,t,i,n,s){e.forEachOperation((o,a,l)=>{let u,c;if(o.previousIndex==null){let d=()=>i(o,a,l);u=this._insertView(d,l,t,n(o)),c=u?Fs.INSERTED:Fs.REPLACED}else l==null?(this._detachAndCacheView(a,t),c=Fs.REMOVED):(u=this._moveView(a,l,t,n(o)),c=Fs.MOVED);s&&s({context:u?.context,operation:c,record:o})})}detach(){for(let e of this._viewCache)e.destroy();this._viewCache=[]}_insertView(e,t,i,n){let s=this._insertViewFromCache(t,i);if(s){s.context.$implicit=n;return}let o=e();return i.createEmbeddedView(o.templateRef,o.context,o.index)}_detachAndCacheView(e,t){let i=t.detach(e);this._maybeCacheView(i,t)}_moveView(e,t,i,n){let s=i.get(e);return i.move(s,t),s.context.$implicit=n,s}_maybeCacheView(e,t){if(this._viewCache.length<this.viewCacheSize)this._viewCache.push(e);else{let i=t.indexOf(e);i===-1?e.destroy():t.remove(i)}}_insertViewFromCache(e,t){let i=this._viewCache.pop();return i&&t.insert(i,e),i||null}};var lx=["contentWrapper"],ux=["*"],Zy=new Yt("VIRTUAL_SCROLL_STRATEGY"),Ic=class{_scrolledIndexChange=new st;scrolledIndexChange=this._scrolledIndexChange.pipe(ad());_viewport=null;_itemSize;_minBufferPx;_maxBufferPx;constructor(e,t,i){this._itemSize=e,this._minBufferPx=t,this._maxBufferPx=i}attach(e){this._viewport=e,this._updateTotalContentSize(),this._updateRenderedRange()}detach(){this._scrolledIndexChange.complete(),this._viewport=null}updateItemAndBufferSize(e,t,i){i<t,this._itemSize=e,this._minBufferPx=t,this._maxBufferPx=i,this._updateTotalContentSize(),this._updateRenderedRange()}onContentScrolled(){this._updateRenderedRange()}onDataLengthChanged(){this._updateTotalContentSize(),this._updateRenderedRange()}onContentRendered(){}onRenderedOffsetChanged(){}scrollToIndex(e,t){this._viewport&&this._viewport.scrollToOffset(e*this._itemSize,t)}_updateTotalContentSize(){this._viewport&&this._viewport.setTotalContentSize(this._viewport.getDataLength()*this._itemSize)}_updateRenderedRange(){if(!this._viewport)return;let e=this._viewport.getRenderedRange(),t={start:e.start,end:e.end},i=this._viewport.getViewportSize(),n=this._viewport.getDataLength(),s=this._viewport.measureScrollOffset(),o=this._itemSize>0?s/this._itemSize:0;if(t.end>n){let l=Math.ceil(i/this._itemSize),u=Math.max(0,Math.min(o,n-l));o!=u&&(o=u,s=u*this._itemSize,t.start=Math.floor(o)),t.end=Math.max(0,Math.min(n,t.start+l))}let a=s-t.start*this._itemSize;if(a<this._minBufferPx&&t.start!=0){let l=Math.ceil((this._maxBufferPx-a)/this._itemSize);t.start=Math.max(0,t.start-l),t.end=Math.min(n,Math.ceil(o+(i+this._minBufferPx)/this._itemSize))}else{let l=t.end*this._itemSize-(s+i);if(l<this._minBufferPx&&t.end!=n){let u=Math.ceil((this._maxBufferPx-l)/this._itemSize);u>0&&(t.end=Math.min(n,t.end+u),t.start=Math.max(0,Math.floor(o-this._minBufferPx/this._itemSize)))}}this._viewport.setRenderedRange(t),this._viewport.setRenderedContentOffset(this._itemSize*t.start),this._scrolledIndexChange.next(Math.floor(o))}};function cx(r){return r._scrollStrategy}var ev=(()=>{class r{get itemSize(){return this._itemSize}set itemSize(t){this._itemSize=Cs(t)}_itemSize=20;get minBufferPx(){return this._minBufferPx}set minBufferPx(t){this._minBufferPx=Cs(t)}_minBufferPx=100;get maxBufferPx(){return this._maxBufferPx}set maxBufferPx(t){this._maxBufferPx=Cs(t)}_maxBufferPx=200;_scrollStrategy=new Ic(this.itemSize,this.minBufferPx,this.maxBufferPx);ngOnChanges(){this._scrollStrategy.updateItemAndBufferSize(this.itemSize,this.minBufferPx,this.maxBufferPx)}static \u0275fac=function(i){return new(i||r)};static \u0275dir=Mr({type:r,selectors:[["cdk-virtual-scroll-viewport","itemSize",""]],inputs:{itemSize:"itemSize",minBufferPx:"minBufferPx",maxBufferPx:"maxBufferPx"},features:[qi([{provide:Zy,useFactory:cx,deps:[dd(()=>r)]}]),md]})}return r})(),dx=20,hx=(()=>{class r{_ngZone=W(ji);_platform=W(_a);_renderer=W(Ia).createRenderer(null,null);_cleanupGlobalListener;constructor(){}_scrolled=new st;_scrolledCount=0;scrollContainers=new Map;register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){let i=this.scrollContainers.get(t);i&&(i.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=dx){return this._platform.isBrowser?new Ri(i=>{this._cleanupGlobalListener||(this._cleanupGlobalListener=this._ngZone.runOutsideAngular(()=>this._renderer.listen("document","scroll",()=>this._scrolled.next())));let n=t>0?this._scrolled.pipe(Ds(t)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{n.unsubscribe(),this._scrolledCount--,this._scrolledCount||(this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0)}}):Ii()}ngOnDestroy(){this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0,this.scrollContainers.forEach((t,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(t,i){let n=this.getAncestorScrollContainers(t);return this.scrolled(i).pipe(Ui(s=>!s||n.indexOf(s)>-1))}getAncestorScrollContainers(t){let i=[];return this.scrollContainers.forEach((n,s)=>{this._scrollableContainsElement(s,t)&&i.push(s)}),i}_scrollableContainsElement(t,i){let n=Wy(i),s=t.getElementRef().nativeElement;do if(n==s)return!0;while(n=n.parentElement);return!1}static \u0275fac=function(i){return new(i||r)};static \u0275prov=St({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),tv=(()=>{class r{elementRef=W(Bi);scrollDispatcher=W(hx);ngZone=W(ji);dir=W(Gy,{optional:!0});_scrollElement=this.elementRef.nativeElement;_destroyed=new st;_renderer=W(bd);_cleanupScroll;_elementScrolled=new st;constructor(){}ngOnInit(){this._cleanupScroll=this.ngZone.runOutsideAngular(()=>this._renderer.listen(this._scrollElement,"scroll",t=>this._elementScrolled.next(t))),this.scrollDispatcher.register(this)}ngOnDestroy(){this._cleanupScroll?.(),this._elementScrolled.complete(),this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(t){let i=this.elementRef.nativeElement,n=this.dir&&this.dir.value=="rtl";t.left==null&&(t.left=n?t.end:t.start),t.right==null&&(t.right=n?t.start:t.end),t.bottom!=null&&(t.top=i.scrollHeight-i.clientHeight-t.bottom),n&&Pi()!=dt.NORMAL?(t.left!=null&&(t.right=i.scrollWidth-i.clientWidth-t.left),Pi()==dt.INVERTED?t.left=t.right:Pi()==dt.NEGATED&&(t.left=t.right?-t.right:t.right)):t.right!=null&&(t.left=i.scrollWidth-i.clientWidth-t.right),this._applyScrollToOptions(t)}_applyScrollToOptions(t){let i=this.elementRef.nativeElement;Ky()?i.scrollTo(t):(t.top!=null&&(i.scrollTop=t.top),t.left!=null&&(i.scrollLeft=t.left))}measureScrollOffset(t){let i="left",n="right",s=this.elementRef.nativeElement;if(t=="top")return s.scrollTop;if(t=="bottom")return s.scrollHeight-s.clientHeight-s.scrollTop;let o=this.dir&&this.dir.value=="rtl";return t=="start"?t=o?n:i:t=="end"&&(t=o?i:n),o&&Pi()==dt.INVERTED?t==i?s.scrollWidth-s.clientWidth-s.scrollLeft:s.scrollLeft:o&&Pi()==dt.NEGATED?t==i?s.scrollLeft+s.scrollWidth-s.clientWidth:-s.scrollLeft:t==i?s.scrollLeft:s.scrollWidth-s.clientWidth-s.scrollLeft}static \u0275fac=function(i){return new(i||r)};static \u0275dir=Mr({type:r,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]})}return r})(),fx=20,px=(()=>{class r{_platform=W(_a);_listeners;_viewportSize;_change=new st;_document=W(js,{optional:!0});constructor(){let t=W(ji),i=W(Ia).createRenderer(null,null);t.runOutsideAngular(()=>{if(this._platform.isBrowser){let n=s=>this._change.next(s);this._listeners=[i.listen("window","resize",n),i.listen("window","orientationchange",n)]}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){this._listeners?.forEach(t=>t()),this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){let t=this.getViewportScrollPosition(),{width:i,height:n}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+n,right:t.left+i,height:n,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let t=this._document,i=this._getWindow(),n=t.documentElement,s=n.getBoundingClientRect(),o=-s.top||t.body.scrollTop||i.scrollY||n.scrollTop||0,a=-s.left||t.body.scrollLeft||i.scrollX||n.scrollLeft||0;return{top:o,left:a}}change(t=fx){return t>0?this._change.pipe(Ds(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}static \u0275fac=function(i){return new(i||r)};static \u0275prov=St({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),Xy=new Yt("VIRTUAL_SCROLLABLE"),mx=(()=>{class r extends tv{constructor(){super()}measureViewportSize(t){let i=this.elementRef.nativeElement;return t==="horizontal"?i.clientWidth:i.clientHeight}static \u0275fac=function(i){return new(i||r)};static \u0275dir=Mr({type:r,features:[Ua]})}return r})();function gx(r,e){return r.start==e.start&&r.end==e.end}var yx=typeof requestAnimationFrame<"u"?od:sd,ki=(()=>{class r extends mx{elementRef=W(Bi);_changeDetectorRef=W(Dd);_scrollStrategy=W(Zy,{optional:!0});scrollable=W(Xy,{optional:!0});_platform=W(_a);_detachedSubject=new st;_renderedRangeSubject=new st;get orientation(){return this._orientation}set orientation(t){this._orientation!==t&&(this._orientation=t,this._calculateSpacerSize())}_orientation="vertical";appendOnly=!1;scrolledIndexChange=new Ri(t=>this._scrollStrategy.scrolledIndexChange.subscribe(i=>Promise.resolve().then(()=>this.ngZone.run(()=>t.next(i)))));_contentWrapper;renderedRangeStream=this._renderedRangeSubject;_totalContentSize=0;_totalContentWidth=Ae("");_totalContentHeight=Ae("");_renderedContentTransform;_renderedRange={start:0,end:0};_dataLength=0;_viewportSize=0;_forOf;_renderedContentOffset=0;_renderedContentOffsetNeedsRewrite=!1;_isChangeDetectionPending=!1;_runAfterChangeDetection=[];_viewportChanges=rd.EMPTY;_injector=W(Ns);_isDestroyed=!1;constructor(){super();let t=W(px);this._scrollStrategy,this._viewportChanges=t.change().subscribe(()=>{this.checkViewportSize()}),this.scrollable||(this.elementRef.nativeElement.classList.add("cdk-virtual-scrollable"),this.scrollable=this)}ngOnInit(){this._platform.isBrowser&&(this.scrollable===this&&super.ngOnInit(),this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._measureViewportSize(),this._scrollStrategy.attach(this),this.scrollable.elementScrolled().pipe(Aa(null),Ds(0,yx),Nr(this._destroyed)).subscribe(()=>this._scrollStrategy.onContentScrolled()),this._markChangeDetectionNeeded()})))}ngOnDestroy(){this.detach(),this._scrollStrategy.detach(),this._renderedRangeSubject.complete(),this._detachedSubject.complete(),this._viewportChanges.unsubscribe(),this._isDestroyed=!0,super.ngOnDestroy()}attach(t){this._forOf,this.ngZone.runOutsideAngular(()=>{this._forOf=t,this._forOf.dataStream.pipe(Nr(this._detachedSubject)).subscribe(i=>{let n=i.length;n!==this._dataLength&&(this._dataLength=n,this._scrollStrategy.onDataLengthChanged()),this._doChangeDetection()})})}detach(){this._forOf=null,this._detachedSubject.next()}getDataLength(){return this._dataLength}getViewportSize(){return this._viewportSize}getRenderedRange(){return this._renderedRange}measureBoundingClientRectWithScrollOffset(t){return this.getElementRef().nativeElement.getBoundingClientRect()[t]}setTotalContentSize(t){this._totalContentSize!==t&&(this._totalContentSize=t,this._calculateSpacerSize(),this._markChangeDetectionNeeded())}setRenderedRange(t){gx(this._renderedRange,t)||(this.appendOnly&&(t={start:0,end:Math.max(this._renderedRange.end,t.end)}),this._renderedRangeSubject.next(this._renderedRange=t),this._markChangeDetectionNeeded(()=>this._scrollStrategy.onContentRendered()))}getOffsetToRenderedContentStart(){return this._renderedContentOffsetNeedsRewrite?null:this._renderedContentOffset}setRenderedContentOffset(t,i="to-start"){t=this.appendOnly&&i==="to-start"?0:t;let n=this.dir&&this.dir.value=="rtl",s=this.orientation=="horizontal",o=s?"X":"Y",l=`translate${o}(${Number((s&&n?-1:1)*t)}px)`;this._renderedContentOffset=t,i==="to-end"&&(l+=` translate${o}(-100%)`,this._renderedContentOffsetNeedsRewrite=!0),this._renderedContentTransform!=l&&(this._renderedContentTransform=l,this._markChangeDetectionNeeded(()=>{this._renderedContentOffsetNeedsRewrite?(this._renderedContentOffset-=this.measureRenderedContentSize(),this._renderedContentOffsetNeedsRewrite=!1,this.setRenderedContentOffset(this._renderedContentOffset)):this._scrollStrategy.onRenderedOffsetChanged()}))}scrollToOffset(t,i="auto"){let n={behavior:i};this.orientation==="horizontal"?n.start=t:n.top=t,this.scrollable.scrollTo(n)}scrollToIndex(t,i="auto"){this._scrollStrategy.scrollToIndex(t,i)}measureScrollOffset(t){let i;return this.scrollable==this?i=n=>super.measureScrollOffset(n):i=n=>this.scrollable.measureScrollOffset(n),Math.max(0,i(t??(this.orientation==="horizontal"?"start":"top"))-this.measureViewportOffset())}measureViewportOffset(t){let i,n="left",s="right",o=this.dir?.value=="rtl";t=="start"?i=o?s:n:t=="end"?i=o?n:s:t?i=t:i=this.orientation==="horizontal"?"left":"top";let a=this.scrollable.measureBoundingClientRectWithScrollOffset(i);return this.elementRef.nativeElement.getBoundingClientRect()[i]-a}measureRenderedContentSize(){let t=this._contentWrapper.nativeElement;return this.orientation==="horizontal"?t.offsetWidth:t.offsetHeight}measureRangeSize(t){return this._forOf?this._forOf.measureRangeSize(t,this.orientation):0}checkViewportSize(){this._measureViewportSize(),this._scrollStrategy.onDataLengthChanged()}_measureViewportSize(){this._viewportSize=this.scrollable.measureViewportSize(this.orientation)}_markChangeDetectionNeeded(t){t&&this._runAfterChangeDetection.push(t),this._isChangeDetectionPending||(this._isChangeDetectionPending=!0,this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._doChangeDetection()})))}_doChangeDetection(){this._isDestroyed||this.ngZone.run(()=>{this._changeDetectorRef.markForCheck(),this._contentWrapper.nativeElement.style.transform=this._renderedContentTransform,xd(()=>{this._isChangeDetectionPending=!1;let t=this._runAfterChangeDetection;this._runAfterChangeDetection=[];for(let i of t)i()},{injector:this._injector})})}_calculateSpacerSize(){this._totalContentHeight.set(this.orientation==="horizontal"?"":`${this._totalContentSize}px`),this._totalContentWidth.set(this.orientation==="horizontal"?`${this._totalContentSize}px`:"")}static \u0275fac=function(i){return new(i||r)};static \u0275cmp=jr({type:r,selectors:[["cdk-virtual-scroll-viewport"]],viewQuery:function(i,n){if(i&1&&Cd(lx,7),i&2){let s;Fd(s=Od())&&(n._contentWrapper=s.first)}},hostAttrs:[1,"cdk-virtual-scroll-viewport"],hostVars:4,hostBindings:function(i,n){i&2&&Id("cdk-virtual-scroll-orientation-horizontal",n.orientation==="horizontal")("cdk-virtual-scroll-orientation-vertical",n.orientation!=="horizontal")},inputs:{orientation:"orientation",appendOnly:[2,"appendOnly","appendOnly",Bd]},outputs:{scrolledIndexChange:"scrolledIndexChange"},features:[qi([{provide:tv,useFactory:(t,i)=>t||i,deps:[[new pd,new fd(Xy)],r]}]),Ua],ngContentSelectors:ux,decls:4,vars:4,consts:[["contentWrapper",""],[1,"cdk-virtual-scroll-content-wrapper"],[1,"cdk-virtual-scroll-spacer"]],template:function(i,n){i&1&&(Ed(),ge(0,"div",1,0),Td(2),_e(),ot(3,"div",2)),i&2&&(We(3),Rd("width",n._totalContentWidth())("height",n._totalContentHeight()))},styles:[`cdk-virtual-scroll-viewport{display:block;position:relative;transform:translateZ(0)}.cdk-virtual-scrollable{overflow:auto;will-change:scroll-position;contain:strict}.cdk-virtual-scroll-content-wrapper{position:absolute;top:0;left:0;contain:content}[dir=rtl] .cdk-virtual-scroll-content-wrapper{right:0;left:auto}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper{min-height:100%}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-left:0;padding-right:0;margin-left:0;margin-right:0;border-left-width:0;border-right-width:0;outline:none}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper{min-width:100%}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-top:0;padding-bottom:0;margin-top:0;margin-bottom:0;border-top-width:0;border-bottom-width:0;outline:none}.cdk-virtual-scroll-spacer{height:1px;transform-origin:0 0;flex:0 0 auto}[dir=rtl] .cdk-virtual-scroll-spacer{transform-origin:100% 0}
`],encapsulation:2,changeDetection:0})}return r})();function Yy(r,e,t){let i=t;if(!i.getBoundingClientRect)return 0;let n=i.getBoundingClientRect();return r==="horizontal"?e==="start"?n.left:n.right:e==="start"?n.top:n.bottom}var rv=(()=>{class r{_viewContainerRef=W(_d);_template=W(vd);_differs=W(Ld);_viewRepeater=W(Rc);_viewport=W(ki,{skipSelf:!0});viewChange=new st;_dataSourceChanges=new st;get cdkVirtualForOf(){return this._cdkVirtualForOf}set cdkVirtualForOf(t){this._cdkVirtualForOf=t,Jy(t)?this._dataSourceChanges.next(t):this._dataSourceChanges.next(new xa(Us(t)?t:Array.from(t||[])))}_cdkVirtualForOf;get cdkVirtualForTrackBy(){return this._cdkVirtualForTrackBy}set cdkVirtualForTrackBy(t){this._needsUpdate=!0,this._cdkVirtualForTrackBy=t?(i,n)=>t(i+(this._renderedRange?this._renderedRange.start:0),n):void 0}_cdkVirtualForTrackBy;set cdkVirtualForTemplate(t){t&&(this._needsUpdate=!0,this._template=t)}get cdkVirtualForTemplateCacheSize(){return this._viewRepeater.viewCacheSize}set cdkVirtualForTemplateCacheSize(t){this._viewRepeater.viewCacheSize=Cs(t)}dataStream=this._dataSourceChanges.pipe(Aa(null),ld(),cd(([t,i])=>this._changeDataSource(t,i)),ud(1));_differ=null;_data;_renderedItems;_renderedRange;_needsUpdate=!1;_destroyed=new st;constructor(){let t=W(ji);this.dataStream.subscribe(i=>{this._data=i,this._onRenderedDataChange()}),this._viewport.renderedRangeStream.pipe(Nr(this._destroyed)).subscribe(i=>{this._renderedRange=i,this.viewChange.observers.length&&t.run(()=>this.viewChange.next(this._renderedRange)),this._onRenderedDataChange()}),this._viewport.attach(this)}measureRangeSize(t,i){if(t.start>=t.end)return 0;t.start<this._renderedRange.start||t.end>this._renderedRange.end;let n=t.start-this._renderedRange.start,s=t.end-t.start,o,a;for(let l=0;l<s;l++){let u=this._viewContainerRef.get(l+n);if(u&&u.rootNodes.length){o=a=u.rootNodes[0];break}}for(let l=s-1;l>-1;l--){let u=this._viewContainerRef.get(l+n);if(u&&u.rootNodes.length){a=u.rootNodes[u.rootNodes.length-1];break}}return o&&a?Yy(i,"end",a)-Yy(i,"start",o):0}ngDoCheck(){if(this._differ&&this._needsUpdate){let t=this._differ.diff(this._renderedItems);t?this._applyChanges(t):this._updateContext(),this._needsUpdate=!1}}ngOnDestroy(){this._viewport.detach(),this._dataSourceChanges.next(void 0),this._dataSourceChanges.complete(),this.viewChange.complete(),this._destroyed.next(),this._destroyed.complete(),this._viewRepeater.detach()}_onRenderedDataChange(){this._renderedRange&&(this._renderedItems=this._data.slice(this._renderedRange.start,this._renderedRange.end),this._differ||(this._differ=this._differs.find(this._renderedItems).create((t,i)=>this.cdkVirtualForTrackBy?this.cdkVirtualForTrackBy(t,i):i)),this._needsUpdate=!0)}_changeDataSource(t,i){return t&&t.disconnect(this),this._needsUpdate=!0,i?i.connect(this):Ii()}_updateContext(){let t=this._data.length,i=this._viewContainerRef.length;for(;i--;){let n=this._viewContainerRef.get(i);n.context.index=this._renderedRange.start+i,n.context.count=t,this._updateComputedContextProperties(n.context),n.detectChanges()}}_applyChanges(t){this._viewRepeater.applyChanges(t,this._viewContainerRef,(s,o,a)=>this._getEmbeddedViewArgs(s,a),s=>s.item),t.forEachIdentityChange(s=>{let o=this._viewContainerRef.get(s.currentIndex);o.context.$implicit=s.item});let i=this._data.length,n=this._viewContainerRef.length;for(;n--;){let s=this._viewContainerRef.get(n);s.context.index=this._renderedRange.start+n,s.context.count=i,this._updateComputedContextProperties(s.context)}}_updateComputedContextProperties(t){t.first=t.index===0,t.last=t.index===t.count-1,t.even=t.index%2===0,t.odd=!t.even}_getEmbeddedViewArgs(t,i){return{templateRef:this._template,context:{$implicit:t.item,cdkVirtualForOf:this._cdkVirtualForOf,index:-1,count:-1,first:!1,last:!1,odd:!1,even:!1},index:i}}static ngTemplateContextGuard(t,i){return!0}static \u0275fac=function(i){return new(i||r)};static \u0275dir=Mr({type:r,selectors:[["","cdkVirtualFor","","cdkVirtualForOf",""]],inputs:{cdkVirtualForOf:"cdkVirtualForOf",cdkVirtualForTrackBy:"cdkVirtualForTrackBy",cdkVirtualForTemplate:"cdkVirtualForTemplate",cdkVirtualForTemplateCacheSize:"cdkVirtualForTemplateCacheSize"},features:[qi([{provide:Rc,useClass:Pa}])]})}return r})();var Qy=(()=>{class r{static \u0275fac=function(i){return new(i||r)};static \u0275mod=Ni({type:r});static \u0275inj=Di({})}return r})(),iv=(()=>{class r{static \u0275fac=function(i){return new(i||r)};static \u0275mod=Ni({type:r});static \u0275inj=Di({imports:[Ac,Qy,Ac,Qy]})}return r})();var nv={strings:{},pluralize(r){return r===1?0:1}};nv.strings={addBulkFilesFailed:{0:"Das Hinzuf\xFCgen einer Datei ist aufgrund eines internen Fehlers fehlgeschlagen",1:"Das Hinzuf\xFCgen von %{smart_count} Dateien ist aufgrund eines internen Fehlers fehlgeschlagen"},addingMoreFiles:"Dateien hinzuf\xFCgen",addMore:"Mehr hinzuf\xFCgen",addMoreFiles:"Dateien hinzuf\xFCgen",allFilesFromFolderNamed:"Alle Dateien vom Ordner %{name}",allowAccessDescription:"Um Bilder oder Videos mit Ihrer Kamera aufzunehmen, erlauben Sie dieser Website bitte den Zugriff auf Ihre Kamera.",allowAccessTitle:"Bitte erlauben Sie Zugriff auf Ihre Kamera",aspectRatioLandscape:"Zuschneiden auf Querformat (16:9)",aspectRatioPortrait:"Zuschneiden auf Hochformat (9:16)",aspectRatioSquare:"Zuschneiden auf Quadrat",authenticateWith:"Mit %{pluginName} verbinden",authenticateWithTitle:"Bitte authentifizieren Sie sich mit %{pluginName}, um Dateien auszuw\xE4hlen",back:"Zur\xFCck",backToSearch:"Zur\xFCck zur Suche",browse:"durchsuchen",browseFiles:"Dateien durchsuchen",browseFolders:"Ordner durchsuchen",cancel:"Abbrechen",cancelUpload:"Hochladen abbrechen",chooseFiles:"Dateien ausw\xE4hlen",closeModal:"Fenster schlie\xDFen",companionError:"Verbindung zu Companion fehlgeschlagen",companionUnauthorizeHint:"Um die Autorisierung f\xFCr Ihr %{provider} Konto aufzuheben, gehen Sie bitte zu %{url}",complete:"Fertig",connectedToInternet:"Mit dem Internet verbunden",copyLink:"Link kopieren",copyLinkToClipboardFallback:"Untenstehende URL kopieren",copyLinkToClipboardSuccess:"Link in die Zwischenablage kopiert",creatingAssembly:"Das Hochladen wird vorbereiten...",creatingAssemblyFailed:"Transloadit: Assembly konnte nicht erstellt werden",dashboardTitle:"Hochladen von Dateien",dashboardWindowTitle:"Hochladen von Dateien (ESC dr\xFCcken zum Schlie\xDFen)",dataUploadedOfTotal:"%{complete} von %{total}",discardRecordedFile:"Aufgenommene Datei verwerfen",done:"Abgeschlossen",dropHereOr:"Dateien hier ablegen oder %{browse}",dropHint:"Dateien hier ablegen",dropPasteBoth:"Dateien hier ablegen/einf\xFCgen, %{browseFiles} oder %{browseFolders}",dropPasteFiles:"Dateien hier ablegen/einf\xFCgen oder %{browseFiles}",dropPasteFolders:"Dateien hier ablegen/einf\xFCgen oder %{browseFolders}",dropPasteImportBoth:"Dateien hier ablegen/einf\xFCgen, %{browse} oder von folgenden Quellen importieren:",dropPasteImportFiles:"Dateien hier ablegen/einf\xFCgen, %{browseFiles} oder von folgenden Quellen importieren:",dropPasteImportFolders:"Dateien hier ablegen/einf\xFCgen, %{browseFolders} oder von folgenden Quellen importieren:",editFile:"Datei bearbeiten",editImage:"Bild bearbeiten",editFileWithFilename:"Datei %{file} bearbeiten",editing:"%{file} bearbeiten",emptyFolderAdded:"Keine Dateien hinzugef\xFCgt, da der Ordner leer war",encoding:"Kodieren...",enterCorrectUrl:"Falsche URL: Bitte stellen Sie sicher, dass Sie einen direkten Link zu einer Datei eingeben",enterTextToSearch:"Text zum Suchen von Bildern eingeben",enterUrlToImport:"URL zum Importieren einer Datei eingeben",exceedsSize:"Datei %{file} ist gr\xF6\xDFer als die maximal erlaubte Dateigr\xF6\xDFe von %{size}",failedToFetch:"Companion konnte diese URL nicht verarbeiten - stellen Sie bitte sicher, dass sie korrekt ist",failedToUpload:"Fehler beim Hochladen der Datei %{file}",filesUploadedOfTotal:{0:"%{complete} von %{smart_count} Datei hochgeladen",1:"%{complete} von %{smart_count} Dateien hochgeladen"},filter:"Filter",finishEditingFile:"Bearbeitung beenden",flipHorizontal:"Horizontal spiegeln",folderAdded:{0:"Eine Datei von %{folder} hinzugef\xFCgt",1:"%{smart_count} Dateien von %{folder} hinzugef\xFCgt"},folderAlreadyAdded:'Der Ordner "%{folder}" wurde bereits hinzugef\xFCgt',generatingThumbnails:"Erstellen von Miniaturansichten...",import:"Importieren",importFiles:"Importiere Dateien von:",importFrom:"Importieren von %{name}",inferiorSize:"Diese Datei ist kleiner als die minimal erlaubte Dateigr\xF6\xDFe von %{size}",loading:"Laden...",logOut:"Abmelden",micDisabled:"Zugriff auf Mikrofon von Benutzer abgelehnt",missingRequiredMetaField:"Fehlende erforderliche Meta-Felder",missingRequiredMetaFieldOnFile:"Fehlende erforderliche Meta-Felder in %{fileName}",missingRequiredMetaFields:{0:"Fehlendes erforderliches Meta-Feld: %{fields}.",1:"Fehlende erforderliche Meta-Felder: %{fields}."},myDevice:"Mein Ger\xE4t",noCameraDescription:"Bitte Kamera anschlie\xDFen, um Bilder oder Videos aufzunehmen",noCameraTitle:"Kamera nicht verf\xFCgbar",noDuplicates:"Datei '%{fileName}' existiert bereits und kann nicht erneut hinzugef\xFCgt werden",noFilesFound:"Sie haben hier keine Dateien oder Ordner",noInternetConnection:"Keine Internetverbindung",noMoreFilesAllowed:"W\xE4hrend der Upload l\xE4uft, k\xF6nnen keine weiteren Dateien hinzugef\xFCgt werden",openFolderNamed:"Ordner %{name} \xF6ffnen",pause:"Pausieren",paused:"Pausiert",pauseUpload:"Hochladen pausieren",pluginNameBox:"Box",pluginNameCamera:"Kamera",pluginNameDropbox:"Dropbox",pluginNameFacebook:"Facebook",pluginNameGoogleDrive:"Google Drive",pluginNameInstagram:"Instagram",pluginNameOneDrive:"OneDrive",pluginNameZoom:"Zoom",poweredBy:"Powered by %{uppy}",processingXFiles:{0:"Eine Datei verarbeiten",1:"%{smart_count} Dateien verarbeiten"},recording:"Aufnahme",recordingLength:"Aufnahmedauer %{recording_length}",recordingStoppedMaxSize:"Die Aufnahme wurde gestoppt, weil die Dateigr\xF6\xDFe das Limit \xFCberschritten hat",recordVideoBtn:"Video aufnehmen",recoveredAllFiles:"Wir haben alle Dateien wiederhergestellt. Sie k\xF6nnen mit dem Hochladen fortfahren.",recoveredXFiles:{0:"Wir konnten eine Datei nicht vollst\xE4ndig wiederherstellen. Bitte w\xE4hlen Sie sie erneut aus und fahren Sie dann mit dem Hochladen fort.",1:"Wir konnten %{smart_count} Dateien nicht vollst\xE4ndig wiederherstellen. Bitte w\xE4hlen Sie sie erneut aus und fahren Sie dann mit dem Hochladen fort."},removeFile:"Datei entfernen",reSelect:"Erneut ausw\xE4hlen",resetFilter:"Filter zur\xFCcksetzen",resume:"Fortsetzen",resumeUpload:"Hochladen fortsetzen",retry:"Erneut versuchen",retryUpload:"Hochladen erneut versuchen",revert:"R\xFCckg\xE4ngig machen",rotate:"Drehen",save:"Speichern",saveChanges:"\xC4nderungen speichern",searchImages:"Suche nach Bildern",selectX:{0:"W\xE4hlen Sie %{smart_count}",1:"W\xE4hlen Sie %{smart_count}"},sessionRestored:"",smile:"Bitte l\xE4cheln!",startCapturing:"Bildschirmaufnahme starten",startRecording:"Videoaufnahme starten",stopCapturing:"Bildschirmaufnahme stoppen",stopRecording:"Videoaufnahme stoppen",streamActive:"Stream aktiv",streamPassive:"Stream passiv",submitRecordedFile:"Aufgezeichnete Datei verwenden",takePicture:"Ein Foto aufnehmen",takePictureBtn:"Foto aufnehmen",timedOut:"Upload f\xFCr %{seconds} Sekunden stehen geblieben, breche ab.",upload:"Hochladen",uploadComplete:"Hochladen abgeschlossen",uploadFailed:"Hochladen fehlgeschlagen",uploading:"Wird hochgeladen",uploadingXFiles:{0:"Eine Datei wird hochgeladen",1:"%{smart_count} Dateien werden hochgeladen"},uploadPaused:"Hochladen pausiert",uploadXFiles:{0:"Eine Datei hochladen",1:"%{smart_count} Dateien hochladen"},uploadXNewFiles:{0:"+%{smart_count} Datei hochladen",1:"+%{smart_count} Dateien hochladen"},xFilesSelected:{0:"Eine Datei ausgew\xE4hlt",1:"%{smart_count} Dateien ausgew\xE4hlt"},xMoreFilesAdded:{0:"Eine weitere Datei hinzugef\xFCgt",1:"%{smart_count} weitere Dateien hinzugef\xFCgt"},xTimeLeft:"%{time} verbleibend",youCanOnlyUploadFileTypes:"Sie k\xF6nnen nur folgende Dateitypen hochladen: %{types}",youCanOnlyUploadX:{0:"Sie k\xF6nnen nur eine Datei hochladen",1:"Sie k\xF6nnen nur %{smart_count} Dateien hochladen"},youHaveToAtLeastSelectX:{0:"Sie m\xFCssen mindestens eine Datei ausw\xE4hlen",1:"Sie m\xFCssen mindestens %{smart_count} Dateien ausw\xE4hlen"},zoomIn:"Vergr\xF6\xDFern",zoomOut:"Verkleinern"};var sv=nv;var Lc=re(bn(),1),uv=re(ov(),1);var av={strings:{compressingImages:"Compressing images...",compressedX:"Saved %{size} by compressing images"}};function lv(r,e){if(!{}.hasOwnProperty.call(r,e))throw new TypeError("attempted to use private field on non-instance");return r}var bx=0;function _x(r){return"__private_"+bx+++"_"+r}var wx={quality:.6,limit:10},Os=_x("RateLimitedQueue"),ka=class extends Ot{constructor(e,t){super(e,v(v({},wx),t)),Object.defineProperty(this,Os,{writable:!0,value:void 0}),this.id=this.opts.id||"Compressor",this.type="modifier",this.defaultLocale=av,lv(this,Os)[Os]=new ci(this.opts.limit),this.i18nInit(),this.prepareUpload=this.prepareUpload.bind(this),this.compress=this.compress.bind(this)}compress(e){return new Promise((t,i)=>{new uv.default(e,j(v({},this.opts),{success:t,error:i}))})}prepareUpload(e){return p(this,null,function*(){let t=0,i=[],n=lv(this,Os)[Os].wrapPromiseFunction(o=>p(this,null,function*(){try{let a=yield this.compress(o.data),l=o.data.size-a.size;this.uppy.log(`[Image Compressor] Image ${o.id} compressed by ${(0,Lc.default)(l)}`),t+=l;let{name:u,type:c,size:d}=a,m=gt(u),b=`${gt(o.meta.name).name}.${m.extension}`;this.uppy.setFileState(o.id,j(v(v(v(v({},u&&{name:u}),m.extension&&{extension:m.extension}),c&&{type:c}),d&&{size:d}),{data:a,meta:j(v({},o.meta),{type:c,name:b})})),i.push(o)}catch(a){this.uppy.log(`[Image Compressor] Failed to compress ${o.id}:`,"warning"),this.uppy.log(a,"warning")}})),s=e.map(o=>{var a;let l=this.uppy.getFile(o);return this.uppy.emit("preprocess-progress",l,{mode:"indeterminate",message:this.i18n("compressingImages")}),l.isRemote||(l.data.type||(l.data=l.data.slice(0,l.data.size,l.type)),!((a=l.type)!=null&&a.startsWith("image/")))?Promise.resolve():n(l)});yield Promise.all(s),this.uppy.emit("compressor:complete",i),t>1024&&this.uppy.info(this.i18n("compressedX",{size:(0,Lc.default)(t)}),"info");for(let o of e){let a=this.uppy.getFile(o);this.uppy.emit("preprocess-complete",a)}})}install(){this.uppy.addPreProcessor(this.prepareUpload)}uninstall(){this.uppy.removePreProcessor(this.prepareUpload)}};var cv=(()=>{class r{static \u0275fac=function(i){return new(i||r)};static \u0275cmp=jr({type:r,selectors:[["lib-loading-indicator"]],decls:5,vars:0,consts:[[1,"flex","items-center","justify-center","min-h-screen","bg-ivory"],[1,"flex","flex-col","items-center","gap-4"],[1,"relative","w-20","h-20"],["xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 24 24",1,"absolute","w-14","h-14","text-sage-green","inset-1/2","-translate-x-1/2","-translate-y-1/2","animate-bounce"],["d",`M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 
             6.5 3.5 5 5.5 5c1.54 0 3.04.99 
             3.57 2.36h1.87C13.46 5.99 14.96 5 
             16.5 5 18.5 5 20 6.5 20 8.5c0 
             3.78-3.4 6.86-8.55 11.54L12 21.35z`]],template:function(i,n){i&1&&(ge(0,"div",0)(1,"div",1)(2,"div",2),Li(),ge(3,"svg",3),ot(4,"path",4),_e()()()())},dependencies:[$s],encapsulation:2})}return r})();var Sx=["uppyContainer"],Bc=r=>[r],xx=r=>({"animate-spin":r}),Px=(r,e)=>e.id;function kx(r,e){r&1&&ot(0,"lib-loading-indicator")}function Ex(r,e){if(r&1){let t=Ms();ge(0,"div",7)(1,"button",14),zs("click",function(){Ls(t);let n=Mt(2);return Bs(n.triggerUppySelector())}),$i(2," Fotos ausw\xE4hlen "),_e()()}}function Tx(r,e){r&1&&(ge(0,"div",9)(1,"div",15),Li(),ge(2,"svg",16),ot(3,"circle",17)(4,"path",18),_e(),hd(),ge(5,"span"),$i(6,"Galerie wird geladen..."),_e()()())}function Cx(r,e){if(r&1&&(ge(0,"div")(1,"div",20),ot(2,"img",21),_e()()),r&2){let t=e.$implicit;We(2),jt("src",t.signedUrl,yd)}}function Fx(r,e){if(r&1&&(ge(0,"cdk-virtual-scroll-viewport",10,1),wd(2,Cx,3,1,"div",19),_e()),r&2){let t,i=Mt(2);jt("itemSize",i.imgHeight()),We(2),jt("cdkVirtualForOf",(t=i.supabaseService.imageMeta.value())==null?null:t.data)("cdkVirtualForTrackBy",i.trackByFn)}}function Ox(r,e){if(r&1){let t=Ms();Li(),ge(0,"svg",26),zs("click",function(){Ls(t);let n=Mt(3);return Bs(n.supabaseService.imageMeta.reload())}),ot(1,"path",27),_e()}if(r&2){let t=Mt(3);jt("ngClass",Hi(1,xx,t.supabaseService.imageMeta.isLoading()))}}function Ax(r,e){r&1&&ot(0,"div",23)}function Rx(r,e){if(r&1){let t=Ms();ge(0,"button",22),zs("click",function(){let n=Ls(t).$implicit,s=Mt(2);return Bs(s.activeTab.set(n))}),ot(1,"div",23),ge(2,"span",24),$i(3),_e(),Mi(4,Ox,2,3,":svg:svg",25)(5,Ax,1,0,"div",23),_e()}if(r&2){let t=e.$implicit,i=Mt(2);jt("ngClass",Hi(3,Bc,i.activeTab().id===t.id?"border-gold":"border-transparent")),We(3),La(t.name),We(),zi(t.hideIcon?5:4)}}function Ix(r,e){if(r&1&&(ge(0,"div",2)(1,"div",3)(2,"h1",4),$i(3),_e()(),ge(4,"div",5)(5,"div",6,0),Mi(7,Ex,3,0,"div",7),_e(),ge(8,"div",8),Mi(9,Tx,7,0,"div",9)(10,Fx,3,3,"cdk-virtual-scroll-viewport",10),_e()(),ge(11,"div",11)(12,"div",12),Pd(13,Rx,6,5,"button",13,Px),_e()()()),r&2){let t,i=Mt();We(3),La((t=i.supabaseService.mandatoryMeta.value())==null?null:t.header_name),We(2),jt("ngClass",Hi(5,Bc,i.activeTab().id==="upload"?"flex":"hidden")),We(2),zi(i.showFileButton()?7:-1),We(),jt("ngClass",Hi(7,Bc,i.activeTab().id==="gallery"?"z-10":"-z-50")),We(),zi(i.supabaseService.imageMeta.isLoading()?9:10),We(4),kd(i.tabs())}}var Ux="thumbnail_",dv=(()=>{class r{route=W(Md);supabaseService=W(af);tabs=Ae([{id:"upload",name:"Hochladen",hideIcon:!0},{id:"gallery",name:"Galerie",hideIcon:!1}]);activeTab=Ae(this.tabs()[0]);activeTab$=cr(this.activeTab);galleryContainer=ja(ki);galleryContainer$=cr(this.galleryContainer);uppyContainer=ja("uppyContainer");uppyContainer$=cr(this.uppyContainer);uppyReadyToLoad=Na(()=>{let t=this.uppyContainer(),i=this.supabaseService.anonUser.value();return t?.nativeElement!==void 0&&i?.session?.access_token!==void 0});uppyReadyToLoad$=cr(this.uppyReadyToLoad);uppy=Ae(void 0);imgHeight=Ae(200);showFileButton=Ae(!0);trackByFn(t,i){return i.signedUrl}triggerUppySelector(){document.querySelector("[data-uppy-super-focusable]").click()}observer;constructor(){this.uppyReadyToLoad$.pipe(Yr(),Ui(t=>t===!0)).subscribe(()=>this.initUppy()),this.uppyContainer$.pipe(Yr(),Ui(t=>!!t)).subscribe(t=>{this.observer?.disconnect(),this.observer=new MutationObserver(()=>{let i=document.querySelector(".uppy-Dashboard-AddFiles-title");this.showFileButton.set(i!==null)}),this.observer.observe(t?.nativeElement,{childList:!0,subtree:!0})}),this.galleryContainer$.pipe(Yr()).subscribe(t=>{let i=t?.elementRef.nativeElement;if(!i)return;let n=(i.clientWidth-16-32)*.7/4;this.imgHeight.set(n)}),this.activeTab$.pipe(Yr()).subscribe(t=>{if(t.id!=="upload")switch(this.supabaseService.imageMeta.status()){case"idle":this.supabaseService.imageMetaActive.set(!0);break}}),this.route.queryParams.pipe(Yr()).subscribe(t=>{let i=t[this.supabaseService.PARTY_HASH_KEY];this.supabaseService.partyHash.set(i)})}initUppy(){document.querySelector(".uppy-Root")===null&&this.uppy.set(new ko({debug:!1,autoProceed:!1,locale:sv}).use(xi,{inline:!0,showProgressDetails:!0,disableThumbnailGenerator:!1,height:"100%",target:"[uppy-container]"}).use(Kt,{thumbnailHeight:300}).use(ka,{quality:.8}).use(Zn,{endpoint:this.supabaseService.supabaseStorageURL,headers:{authorization:`Bearer ${this.supabaseService.anonUser.value()?.session?.access_token}`,apikey:this.supabaseService.supabaseToken.supabaseKey},uploadDataDuringCreation:!0,chunkSize:6*1024*1024,allowedMetaFields:["bucketName","objectName","contentType","cacheControl"],onError:function(i){console.log("Failed because: "+i)}}).on("file-added",i=>{let n=this.supabaseService.partyHash(),s={bucketName:n,objectName:`${n}/${i.name}`,contentType:i.type};console.log(s),i.meta=v(v({},i.meta),s)}).on("complete",i=>{this.supabaseService.imageMetaActive.set(void 0),console.log("Upload complete! We\u2019ve uploaded these files:",i.successful)}).on("upload-success",i=>p(this,null,function*(){if(console.log("upload-success",i),!i?.name||!i?.preview)return;let n=this.supabaseService.partyHash(),s=`${Ux}${i.name}`,o=`${n}/${this.supabaseService.thumbFolderName}/${s}`,l=yield(yield fetch(i.preview)).blob(),u=new File([l],s,{type:i.type});yield this.supabaseService.supabase.storage.from(n).upload(o,u)})))}ngOnDestroy(){this.observer?.disconnect()}static \u0275fac=function(i){return new(i||r)};static \u0275cmp=jr({type:r,selectors:[["lib-gallery-page"]],viewQuery:function(i,n){i&1&&(Da(n.galleryContainer,ki,5),Da(n.uppyContainer,Sx,5)),i&2&&Ad(2)},decls:2,vars:1,consts:[["uppyContainer",""],["galleryContainer",""],[1,"h-dvh","w-dvw","flex","flex-col","overflow-hidden"],[1,"flex","items-center","justify-center","p-4","flex-initial","text-gold","bg-ivory"],[1,"text-3xl","font-semibold"],[1,"flex-1","flex","justify-center","items-center","flex-col","relative","overflow-hidden"],["uppy-container","",1,"max-w-full","flex-col","flex-auto","gap-2","relative","h-full","overflow-hidden",3,"ngClass"],[1,"absolute","inset-0","flex","justify-center","items-center"],[1,"flex-auto","w-full","flex","flex-col","absolute","inset-0",3,"ngClass"],[1,"flex-auto","w-full","flex","justify-center","items-center","bg-ivory"],["appendOnly","",1,"p-4","flex-auto","w-full","bg-ivory",3,"itemSize"],[1,"border-t","border-primary-border","flex-initial","bg-ivory"],[1,"-mb-px","flex"],[1,"flex-1","border-t-2","px-1","py-4","text-center","text-lg","font-semibold","text-gold","flex","gap-2","items-center",3,"ngClass"],["type","button",1,"z-[2000]","text-lg","text-nowrap","font-semibold","rounded-md","bg-ivory","px-3","py-2","shadow-xs","ring-1","ring-gold","ring-inset","text-gold",3,"click"],[1,"flex","gap-2","items-center"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"size-5","animate-spin","text-gold"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],[4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy"],[1,"group","overflow-hidden","rounded-lg","bg-gray-100","focus-within:ring-2","focus-within:ring-indigo-500","focus-within:ring-offset-2","focus-within:ring-offset-gray-100"],[1,"pointer-events-none","aspect-10/7","object-cover","group-hover:opacity-75",3,"src"],[1,"flex-1","border-t-2","px-1","py-4","text-center","text-lg","font-semibold","text-gold","flex","gap-2","items-center",3,"click","ngClass"],[1,"flex-1"],[1,"flex-2"],["xmlns","http://www.w3.org/2000/svg","height","20","width","20","viewBox","0 0 512 512",1,"flex-1","size-5","text-gold","fill-gold",3,"ngClass"],["xmlns","http://www.w3.org/2000/svg","height","20","width","20","viewBox","0 0 512 512",1,"flex-1","size-5","text-gold","fill-gold",3,"click","ngClass"],["fill","currentColor","d","M105.1 202.6c7.7-21.8 20.2-42.3 37.8-59.8c62.5-62.5 163.8-62.5 226.3 0L386.3 160 352 160c-17.7 0-32 14.3-32 32s14.3 32 32 32l111.5 0c0 0 0 0 0 0l.4 0c17.7 0 32-14.3 32-32l0-112c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 35.2L414.4 97.6c-87.5-87.5-229.3-87.5-316.8 0C73.2 122 55.6 150.7 44.8 181.4c-5.9 16.7 2.9 34.9 19.5 40.8s34.9-2.9 40.8-19.5zM39 289.3c-5 1.5-9.8 4.2-13.7 8.2c-4 4-6.7 8.8-8.1 14c-.3 1.2-.6 2.5-.8 3.8c-.3 1.7-.4 3.4-.4 5.1L16 432c0 17.7 14.3 32 32 32s32-14.3 32-32l0-35.1 17.6 17.5c0 0 0 0 0 0c87.5 87.4 229.3 87.4 316.7 0c24.4-24.4 42.1-53.1 52.9-83.8c5.9-16.7-2.9-34.9-19.5-40.8s-34.9 2.9-40.8 19.5c-7.7 21.8-20.2 42.3-37.8 59.8c-62.5 62.5-163.8 62.5-226.3 0l-.1-.1L125.6 352l34.4 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L48.4 288c-1.6 0-3.2 .1-4.8 .3s-3.1 .5-4.6 1z"]],template:function(i,n){i&1&&Mi(0,kx,1,0,"lib-loading-indicator")(1,Ix,15,9,"div",2),i&2&&zi(n.supabaseService.mandatoryMeta.status()!=="resolved"?0:1)},dependencies:[$s,Nd,iv,ev,rv,ki,cv],styles:["[_nghost-%COMP%]{display:contents}"]})}return r})();var IU=[{path:"",component:dv}];export{dv as GalleryPageComponent,Ux as THUMBNAIL_PREFIX,IU as imageUploaderRoutes};
