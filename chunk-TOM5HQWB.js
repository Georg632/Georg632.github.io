import{$ as Qh,$a as pf,A as Y,Aa as Uo,B as Ve,Ba as Lo,C as Ae,Ca as Vl,D as P,Da as sf,E as yr,Ea as of,F as wn,Fa as af,G as Sn,Ga as xn,H as Tt,Ha as ql,I as vr,Ia as wr,J as he,Ja as Ci,K as ve,L as zl,La as Wl,M as Ce,Ma as Sr,N as Gh,Na as lf,O as Kh,Oa as xi,P as Oo,Pa as uf,Q as Fo,Qa as Gl,R as ot,Ra as No,S as Xh,Sa as cf,T as Yh,Ta as Mo,U as Jh,Ua as Bo,V as Zh,Va as df,W as Ao,Wa as jo,X as je,Xa as Er,Y as _r,Ya as hf,Z as jt,_ as br,_a as ff,a as bn,aa as En,b as yi,ba as $l,c as Ih,ca as Ze,d as re,da as qe,e as Dh,ea as pt,eb as mf,f as Uh,fa as wi,g as Lh,ga as Ro,h as Nh,ha as si,i as vi,ia as _e,j as xo,ja as zt,k as jl,ka as Io,l as Mh,la as Hl,m as Bh,ma as Si,n as jh,na as Ei,o as _i,oa as ef,p as ko,pa as tf,q as zh,qa as at,r as $h,ra as te,s as Po,sa as le,t as Hh,ta as xe,u as Vh,ua as Cn,v as To,va as Ot,w as bi,wa as wt,x as qh,xa as rf,y as Pt,ya as nf,z as Wh,za as Do}from"./chunk-EHQ7XDVK.js";import{b as gf,c as yf,f as mb,g as vf}from"./chunk-HDVAJA6E.js";import{a as v,b as M,c as mr,e as Q,g as se,h as pb,i as m,j as gr,k as So,l as Eo,m as Co}from"./chunk-N57AJHA5.js";var Zl=Q(Jl=>{"use strict";Object.defineProperty(Jl,"__esModule",{value:!0});var Yl=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Jl.default=Yl});var eu=Q(Rn=>{"use strict";var kf=Rn&&Rn.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Rn,"__esModule",{value:!0});var wb=kf((vf(),pb(mb))),Sb=kf(Zl()),Ql=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=wb.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Object.assign({},this.headers),this.headers[e]=t,this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");let r=this.fetch,n=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(s=>m(this,null,function*(){var o,a,l;let u=null,c=null,d=null,p=s.status,f=s.statusText;if(s.ok){if(this.method!=="HEAD"){let E=yield s.text();E===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?c=E:c=JSON.parse(E))}let S=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),k=(a=s.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");S&&k&&k.length>1&&(d=parseInt(k[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(c)&&(c.length>1?(u={code:"PGRST116",details:`Results contain ${c.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},c=null,d=null,p=406,f="Not Acceptable"):c.length===1?c=c[0]:c=null)}else{let S=yield s.text();try{u=JSON.parse(S),Array.isArray(u)&&s.status===404&&(c=[],u=null,p=200,f="OK")}catch{s.status===404&&S===""?(p=204,f="No Content"):u={message:S}}if(u&&this.isMaybeSingle&&(!((l=u?.details)===null||l===void 0)&&l.includes("0 rows"))&&(u=null,p=200,f="OK"),u&&this.shouldThrowOnError)throw new Sb.default(u)}return{error:u,data:c,count:d,status:p,statusText:f}}));return this.shouldThrowOnError||(n=n.catch(s=>{var o,a,l;return{error:{message:`${(o=s?.name)!==null&&o!==void 0?o:"FetchError"}: ${s?.message}`,details:`${(a=s?.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=s?.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),n.then(e,t)}returns(){return this}overrideTypes(){return this}};Rn.default=Ql});var iu=Q(In=>{"use strict";var Eb=In&&In.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(In,"__esModule",{value:!0});var Cb=Eb(eu()),tu=class extends Cb.default{select(e){let t=!1,r=(e??"*").split("").map(n=>/\s/.test(n)&&!t?"":(n==='"'&&(t=!t),n)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:n,referencedTable:s=n}={}){let o=s?`${s}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){let n=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:n=r}={}){let s=typeof n>"u"?"offset":`${n}.offset`,o=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(o,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:n=!1,wal:s=!1,format:o="text"}={}){var a;let l=[e?"analyze":null,t?"verbose":null,r?"settings":null,n?"buffers":null,s?"wal":null].filter(Boolean).join("|"),u=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${u}"; options=${l};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};In.default=tu});var Ko=Q(Dn=>{"use strict";var xb=Dn&&Dn.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Dn,"__esModule",{value:!0});var kb=xb(iu()),ru=class extends kb.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){let r=Array.from(new Set(t)).map(n=>typeof n=="string"&&new RegExp("[,()]").test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:n}={}){let s="";n==="plain"?s="pl":n==="phrase"?s="ph":n==="websearch"&&(s="w");let o=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${s}fts${o}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){let n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}};Dn.default=ru});var su=Q(Ln=>{"use strict";var Pb=Ln&&Ln.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Ln,"__esModule",{value:!0});var Un=Pb(Ko()),nu=class{constructor(e,{headers:t={},schema:r,fetch:n}){this.url=e,this.headers=t,this.schema=r,this.fetch=n}select(e,{head:t=!1,count:r}={}){let n=t?"HEAD":"GET",s=!1,o=(e??"*").split("").map(a=>/\s/.test(a)&&!s?"":(a==='"'&&(s=!s),a)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new Un.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:r=!0}={}){let n="POST",s=[];if(this.headers.Prefer&&s.push(this.headers.Prefer),t&&s.push(`count=${t}`),r||s.push("missing=default"),this.headers.Prefer=s.join(","),Array.isArray(e)){let o=e.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(o.length>0){let a=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new Un.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:n,defaultToNull:s=!0}={}){let o="POST",a=[`resolution=${r?"ignore":"merge"}-duplicates`];if(t!==void 0&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&a.push(this.headers.Prefer),n&&a.push(`count=${n}`),s||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){let l=e.reduce((u,c)=>u.concat(Object.keys(c)),[]);if(l.length>0){let u=[...new Set(l)].map(c=>`"${c}"`);this.url.searchParams.set("columns",u.join(","))}}return new Un.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){let r="PATCH",n=[];return this.headers.Prefer&&n.push(this.headers.Prefer),t&&n.push(`count=${t}`),this.headers.Prefer=n.join(","),new Un.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){let t="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new Un.default({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Ln.default=nu});var Pf=Q(Xo=>{"use strict";Object.defineProperty(Xo,"__esModule",{value:!0});Xo.version=void 0;Xo.version="0.0.0-automated"});var Tf=Q(Yo=>{"use strict";Object.defineProperty(Yo,"__esModule",{value:!0});Yo.DEFAULT_HEADERS=void 0;var Tb=Pf();Yo.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${Tb.version}`}});var Ff=Q(Nn=>{"use strict";var Of=Nn&&Nn.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Nn,"__esModule",{value:!0});var Ob=Of(su()),Fb=Of(Ko()),Ab=Tf(),ou=class i{constructor(e,{headers:t={},schema:r,fetch:n}={}){this.url=e,this.headers=Object.assign(Object.assign({},Ab.DEFAULT_HEADERS),t),this.schemaName=r,this.fetch=n}from(e){let t=new URL(`${this.url}/${e}`);return new Ob.default(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new i(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:r=!1,get:n=!1,count:s}={}){let o,a=new URL(`${this.url}/rpc/${e}`),l;r||n?(o=r?"HEAD":"GET",Object.entries(t).filter(([c,d])=>d!==void 0).map(([c,d])=>[c,Array.isArray(d)?`{${d.join(",")}}`:`${d}`]).forEach(([c,d])=>{a.searchParams.append(c,d)})):(o="POST",l=t);let u=Object.assign({},this.headers);return s&&(u.Prefer=`count=${s}`),new Fb.default({method:o,url:a,headers:u,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}};Nn.default=ou});var Nf=Q(Re=>{"use strict";var kr=Re&&Re.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Re,"__esModule",{value:!0});Re.PostgrestError=Re.PostgrestBuilder=Re.PostgrestTransformBuilder=Re.PostgrestFilterBuilder=Re.PostgrestQueryBuilder=Re.PostgrestClient=void 0;var Af=kr(Ff());Re.PostgrestClient=Af.default;var Rf=kr(su());Re.PostgrestQueryBuilder=Rf.default;var If=kr(Ko());Re.PostgrestFilterBuilder=If.default;var Df=kr(iu());Re.PostgrestTransformBuilder=Df.default;var Uf=kr(eu());Re.PostgrestBuilder=Uf.default;var Lf=kr(Zl());Re.PostgrestError=Lf.default;Re.default={PostgrestClient:Af.default,PostgrestQueryBuilder:Rf.default,PostgrestFilterBuilder:If.default,PostgrestTransformBuilder:Df.default,PostgrestBuilder:Uf.default,PostgrestError:Lf.default}});var Mp=Q((jO,Np)=>{"use strict";Np.exports=function(){var e={},t=e._fns={};e.emit=function(o,a,l,u,c,d,p){var f=r(o);f.length&&n(o,f,[a,l,u,c,d,p])},e.on=function(o,a){t[o]||(t[o]=[]),t[o].push(a)},e.once=function(o,a){function l(){a.apply(this,arguments),e.off(o,l)}this.on(o,l)},e.off=function(o,a){var l=[];if(o&&a){var u=this._fns[o],c=0,d=u?u.length:0;for(c;c<d;c++)u[c]!==a&&l.push(u[c])}l.length?this._fns[o]=l:delete this._fns[o]};function r(s){var o=t[s]?t[s]:[],a=s.indexOf(":"),l=a===-1?[s]:[s.substring(0,a),s.substring(a+1)],u=Object.keys(t),c=0,d=u.length;for(c;c<d;c++){var p=u[c];if(p==="*"&&(o=o.concat(t[p])),l.length===2&&l[0]===p){o=o.concat(t[p]);break}}return o}function n(s,o,a){var l=0,u=o.length;for(l;l<u&&o[l];l++)o[l].event=s,o[l].apply(o[l],a)}return e}});var ya=Q(($O,Bp)=>{"use strict";function y0(i){var e=typeof i;return i!=null&&(e=="object"||e=="function")}Bp.exports=y0});var zp=Q((HO,jp)=>{"use strict";var v0=typeof global=="object"&&global&&global.Object===Object&&global;jp.exports=v0});var bu=Q((VO,$p)=>{"use strict";var _0=zp(),b0=typeof self=="object"&&self&&self.Object===Object&&self,w0=_0||b0||Function("return this")();$p.exports=w0});var Vp=Q((qO,Hp)=>{"use strict";var S0=bu(),E0=function(){return S0.Date.now()};Hp.exports=E0});var Wp=Q((WO,qp)=>{"use strict";var C0=/\s/;function x0(i){for(var e=i.length;e--&&C0.test(i.charAt(e)););return e}qp.exports=x0});var Kp=Q((GO,Gp)=>{"use strict";var k0=Wp(),P0=/^\s+/;function T0(i){return i&&i.slice(0,k0(i)+1).replace(P0,"")}Gp.exports=T0});var wu=Q((KO,Xp)=>{"use strict";var O0=bu(),F0=O0.Symbol;Xp.exports=F0});var Qp=Q((XO,Zp)=>{"use strict";var Yp=wu(),Jp=Object.prototype,A0=Jp.hasOwnProperty,R0=Jp.toString,Qn=Yp?Yp.toStringTag:void 0;function I0(i){var e=A0.call(i,Qn),t=i[Qn];try{i[Qn]=void 0;var r=!0}catch{}var n=R0.call(i);return r&&(e?i[Qn]=t:delete i[Qn]),n}Zp.exports=I0});var tm=Q((YO,em)=>{"use strict";var D0=Object.prototype,U0=D0.toString;function L0(i){return U0.call(i)}em.exports=L0});var sm=Q((JO,nm)=>{"use strict";var im=wu(),N0=Qp(),M0=tm(),B0="[object Null]",j0="[object Undefined]",rm=im?im.toStringTag:void 0;function z0(i){return i==null?i===void 0?j0:B0:rm&&rm in Object(i)?N0(i):M0(i)}nm.exports=z0});var am=Q((ZO,om)=>{"use strict";function $0(i){return i!=null&&typeof i=="object"}om.exports=$0});var um=Q((QO,lm)=>{"use strict";var H0=sm(),V0=am(),q0="[object Symbol]";function W0(i){return typeof i=="symbol"||V0(i)&&H0(i)==q0}lm.exports=W0});var fm=Q((eF,hm)=>{"use strict";var G0=Kp(),cm=ya(),K0=um(),dm=NaN,X0=/^[-+]0x[0-9a-f]+$/i,Y0=/^0b[01]+$/i,J0=/^0o[0-7]+$/i,Z0=parseInt;function Q0(i){if(typeof i=="number")return i;if(K0(i))return dm;if(cm(i)){var e=typeof i.valueOf=="function"?i.valueOf():i;i=cm(e)?e+"":e}if(typeof i!="string")return i===0?i:+i;i=G0(i);var t=Y0.test(i);return t||J0.test(i)?Z0(i.slice(2),t?2:8):X0.test(i)?dm:+i}hm.exports=Q0});var Eu=Q((tF,mm)=>{"use strict";var ew=ya(),Su=Vp(),pm=fm(),tw="Expected a function",iw=Math.max,rw=Math.min;function nw(i,e,t){var r,n,s,o,a,l,u=0,c=!1,d=!1,p=!0;if(typeof i!="function")throw new TypeError(tw);e=pm(e)||0,ew(t)&&(c=!!t.leading,d="maxWait"in t,s=d?iw(pm(t.maxWait)||0,e):s,p="trailing"in t?!!t.trailing:p);function f(N){var B=r,$=n;return r=n=void 0,u=N,o=i.apply($,B),o}function y(N){return u=N,a=setTimeout(E,e),c?f(N):o}function S(N){var B=N-l,$=N-u,J=e-B;return d?rw(J,s-$):J}function k(N){var B=N-l,$=N-u;return l===void 0||B>=e||B<0||d&&$>=s}function E(){var N=Su();if(k(N))return F(N);a=setTimeout(E,S(N))}function F(N){return a=void 0,p&&r?f(N):(r=n=void 0,o)}function D(){a!==void 0&&clearTimeout(a),u=0,r=l=n=a=void 0}function T(){return a===void 0?o:F(Su())}function z(){var N=Su(),B=k(N);if(r=arguments,n=this,l=N,B){if(a===void 0)return y(l);if(d)return clearTimeout(a),a=setTimeout(E,e),f(l)}return a===void 0&&(a=setTimeout(E,e)),o}return z.cancel=D,z.flush=T,z}mm.exports=nw});var ym=Q((iF,gm)=>{"use strict";var sw=Eu(),ow=ya(),aw="Expected a function";function lw(i,e,t){var r=!0,n=!0;if(typeof i!="function")throw new TypeError(aw);return ow(t)&&(r="leading"in t?!!t.leading:r,n="trailing"in t?!!t.trailing:n),sw(i,e,{leading:r,maxWait:e,trailing:n})}gm.exports=lw});var ts=Q((vF,Cm)=>{"use strict";Cm.exports=function(e){if(typeof e!="number"||Number.isNaN(e))throw new TypeError(`Expected a number, got ${typeof e}`);let t=e<0,r=Math.abs(e);if(t&&(r=-r),r===0)return"0 B";let n=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],s=Math.min(Math.floor(Math.log(r)/Math.log(1024)),n.length-1),o=Number(r/1024**s),a=n[s];return`${o>=10||o%1===0?Math.round(o):o.toFixed(1)} ${a}`}});var Pm=Q((_F,km)=>{"use strict";function xm(i,e){this.text=i=i||"",this.hasWild=~i.indexOf("*"),this.separator=e,this.parts=i.split(e)}xm.prototype.match=function(i){var e=!0,t=this.parts,r,n=t.length,s;if(typeof i=="string"||i instanceof String)if(!this.hasWild&&this.text!=i)e=!1;else{for(s=(i||"").split(this.separator),r=0;e&&r<n;r++)t[r]!=="*"&&(r<s.length?e=t[r]===s[r]:e=!1);e=e&&s}else if(typeof i.splice=="function")for(e=[],r=i.length;r--;)this.match(i[r])&&(e[e.length]=i[r]);else if(typeof i=="object"){e={};for(var o in i)this.match(o)&&(e[o]=i[o])}return e};km.exports=function(i,e,t){var r=new xm(i,t||/[\/\.]/);return typeof e<"u"?r.match(e):r}});var Om=Q((bF,Tm)=>{"use strict";var pw=Pm(),mw=/[\/\+\.]/;Tm.exports=function(i,e){function t(r){var n=pw(r,i,mw);return n&&n.length>=2}return e?t(e.split(";")[0]):t}});var Gg=Q((yA,Wg)=>{"use strict";Wg.exports=function(e,t){if(t=t.split(":")[0],e=+e,!e)return!1;switch(t){case"http":case"ws":return e!==80;case"https":case"wss":return e!==443;case"ftp":return e!==21;case"gopher":return e!==70;case"file":return!1}return e!==0}});var Yg=Q(Qu=>{"use strict";var I1=Object.prototype.hasOwnProperty,D1;function Kg(i){try{return decodeURIComponent(i.replace(/\+/g," "))}catch{return null}}function Xg(i){try{return encodeURIComponent(i)}catch{return null}}function U1(i){for(var e=/([^=?#&]+)=?([^&]*)/g,t={},r;r=e.exec(i);){var n=Kg(r[1]),s=Kg(r[2]);n===null||s===null||n in t||(t[n]=s)}return t}function L1(i,e){e=e||"";var t=[],r,n;typeof e!="string"&&(e="?");for(n in i)if(I1.call(i,n)){if(r=i[n],!r&&(r===null||r===D1||isNaN(r))&&(r=""),n=Xg(n),r=Xg(r),n===null||r===null)continue;t.push(n+"="+r)}return t.length?e+t.join("&"):""}Qu.stringify=L1;Qu.parse=U1});var ny=Q((_A,ry)=>{"use strict";var Zg=Gg(),Ia=Yg(),N1=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,Qg=/[\n\r\t]/g,M1=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,ey=/:\d+$/,B1=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,j1=/^[a-zA-Z]:/;function tc(i){return(i||"").toString().replace(N1,"")}var ec=[["#","hash"],["?","query"],function(e,t){return Lt(t.protocol)?e.replace(/\\/g,"/"):e},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],Jg={hash:1,query:1};function ty(i){var e;typeof window<"u"?e=window:typeof global<"u"?e=global:typeof self<"u"?e=self:e={};var t=e.location||{};i=i||t;var r={},n=typeof i,s;if(i.protocol==="blob:")r=new Nt(unescape(i.pathname),{});else if(n==="string"){r=new Nt(i,{});for(s in Jg)delete r[s]}else if(n==="object"){for(s in i)s in Jg||(r[s]=i[s]);r.slashes===void 0&&(r.slashes=M1.test(i.href))}return r}function Lt(i){return i==="file:"||i==="ftp:"||i==="http:"||i==="https:"||i==="ws:"||i==="wss:"}function iy(i,e){i=tc(i),i=i.replace(Qg,""),e=e||{};var t=B1.exec(i),r=t[1]?t[1].toLowerCase():"",n=!!t[2],s=!!t[3],o=0,a;return n?s?(a=t[2]+t[3]+t[4],o=t[2].length+t[3].length):(a=t[2]+t[4],o=t[2].length):s?(a=t[3]+t[4],o=t[3].length):a=t[4],r==="file:"?o>=2&&(a=a.slice(2)):Lt(r)?a=t[4]:r?n&&(a=a.slice(2)):o>=2&&Lt(e.protocol)&&(a=t[4]),{protocol:r,slashes:n||Lt(r),slashesCount:o,rest:a}}function z1(i,e){if(i==="")return e;for(var t=(e||"/").split("/").slice(0,-1).concat(i.split("/")),r=t.length,n=t[r-1],s=!1,o=0;r--;)t[r]==="."?t.splice(r,1):t[r]===".."?(t.splice(r,1),o++):o&&(r===0&&(s=!0),t.splice(r,1),o--);return s&&t.unshift(""),(n==="."||n==="..")&&t.push(""),t.join("/")}function Nt(i,e,t){if(i=tc(i),i=i.replace(Qg,""),!(this instanceof Nt))return new Nt(i,e,t);var r,n,s,o,a,l,u=ec.slice(),c=typeof e,d=this,p=0;for(c!=="object"&&c!=="string"&&(t=e,e=null),t&&typeof t!="function"&&(t=Ia.parse),e=ty(e),n=iy(i||"",e),r=!n.protocol&&!n.slashes,d.slashes=n.slashes||r&&e.slashes,d.protocol=n.protocol||e.protocol||"",i=n.rest,(n.protocol==="file:"&&(n.slashesCount!==2||j1.test(i))||!n.slashes&&(n.protocol||n.slashesCount<2||!Lt(d.protocol)))&&(u[3]=[/(.*)/,"pathname"]);p<u.length;p++){if(o=u[p],typeof o=="function"){i=o(i,d);continue}s=o[0],l=o[1],s!==s?d[l]=i:typeof s=="string"?(a=s==="@"?i.lastIndexOf(s):i.indexOf(s),~a&&(typeof o[2]=="number"?(d[l]=i.slice(0,a),i=i.slice(a+o[2])):(d[l]=i.slice(a),i=i.slice(0,a)))):(a=s.exec(i))&&(d[l]=a[1],i=i.slice(0,a.index)),d[l]=d[l]||r&&o[3]&&e[l]||"",o[4]&&(d[l]=d[l].toLowerCase())}t&&(d.query=t(d.query)),r&&e.slashes&&d.pathname.charAt(0)!=="/"&&(d.pathname!==""||e.pathname!=="")&&(d.pathname=z1(d.pathname,e.pathname)),d.pathname.charAt(0)!=="/"&&Lt(d.protocol)&&(d.pathname="/"+d.pathname),Zg(d.port,d.protocol)||(d.host=d.hostname,d.port=""),d.username=d.password="",d.auth&&(a=d.auth.indexOf(":"),~a?(d.username=d.auth.slice(0,a),d.username=encodeURIComponent(decodeURIComponent(d.username)),d.password=d.auth.slice(a+1),d.password=encodeURIComponent(decodeURIComponent(d.password))):d.username=encodeURIComponent(decodeURIComponent(d.auth)),d.auth=d.password?d.username+":"+d.password:d.username),d.origin=d.protocol!=="file:"&&Lt(d.protocol)&&d.host?d.protocol+"//"+d.host:"null",d.href=d.toString()}function $1(i,e,t){var r=this;switch(i){case"query":typeof e=="string"&&e.length&&(e=(t||Ia.parse)(e)),r[i]=e;break;case"port":r[i]=e,Zg(e,r.protocol)?e&&(r.host=r.hostname+":"+e):(r.host=r.hostname,r[i]="");break;case"hostname":r[i]=e,r.port&&(e+=":"+r.port),r.host=e;break;case"host":r[i]=e,ey.test(e)?(e=e.split(":"),r.port=e.pop(),r.hostname=e.join(":")):(r.hostname=e,r.port="");break;case"protocol":r.protocol=e.toLowerCase(),r.slashes=!t;break;case"pathname":case"hash":if(e){var n=i==="pathname"?"/":"#";r[i]=e.charAt(0)!==n?n+e:e}else r[i]=e;break;case"username":case"password":r[i]=encodeURIComponent(e);break;case"auth":var s=e.indexOf(":");~s?(r.username=e.slice(0,s),r.username=encodeURIComponent(decodeURIComponent(r.username)),r.password=e.slice(s+1),r.password=encodeURIComponent(decodeURIComponent(r.password))):r.username=encodeURIComponent(decodeURIComponent(e))}for(var o=0;o<ec.length;o++){var a=ec[o];a[4]&&(r[a[1]]=r[a[1]].toLowerCase())}return r.auth=r.password?r.username+":"+r.password:r.username,r.origin=r.protocol!=="file:"&&Lt(r.protocol)&&r.host?r.protocol+"//"+r.host:"null",r.href=r.toString(),r}function H1(i){(!i||typeof i!="function")&&(i=Ia.stringify);var e,t=this,r=t.host,n=t.protocol;n&&n.charAt(n.length-1)!==":"&&(n+=":");var s=n+(t.protocol&&t.slashes||Lt(t.protocol)?"//":"");return t.username?(s+=t.username,t.password&&(s+=":"+t.password),s+="@"):t.password?(s+=":"+t.password,s+="@"):t.protocol!=="file:"&&Lt(t.protocol)&&!r&&t.pathname!=="/"&&(s+="@"),(r[r.length-1]===":"||ey.test(t.hostname)&&!t.port)&&(r+=":"),s+=r+t.pathname,e=typeof t.query=="object"?i(t.query):t.query,e&&(s+=e.charAt(0)!=="?"?"?"+e:e),t.hash&&(s+=t.hash),s}Nt.prototype={set:$1,toString:H1};Nt.extractProtocol=iy;Nt.location=ty;Nt.trimLeft=tc;Nt.qs=Ia;ry.exports=Nt});var Xe=Q((w2,Ha)=>{"use strict";(function(){"use strict";var i={}.hasOwnProperty;function e(){for(var n="",s=0;s<arguments.length;s++){var o=arguments[s];o&&(n=r(n,t(o)))}return n}function t(n){if(typeof n=="string"||typeof n=="number")return n;if(typeof n!="object")return"";if(Array.isArray(n))return e.apply(null,n);if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]"))return n.toString();var s="";for(var o in n)i.call(n,o)&&n[o]&&(s=r(s,o));return s}function r(n,s){return s?n?n+" "+s:n+s:n}typeof Ha<"u"&&Ha.exports?(e.default=e,Ha.exports=e):typeof define=="function"&&typeof define.amd=="object"&&define.amd?define("classnames",[],function(){return e}):window.classNames=e})()});var Dv=Q((CI,ad)=>{"use strict";var YE=Object.prototype.hasOwnProperty,Je="~";function Ys(){}Object.create&&(Ys.prototype=Object.create(null),new Ys().__proto__||(Je=!1));function JE(i,e,t){this.fn=i,this.context=e,this.once=t||!1}function Iv(i,e,t,r,n){if(typeof t!="function")throw new TypeError("The listener must be a function");var s=new JE(t,r||i,n),o=Je?Je+e:e;return i._events[o]?i._events[o].fn?i._events[o]=[i._events[o],s]:i._events[o].push(s):(i._events[o]=s,i._eventsCount++),i}function al(i,e){--i._eventsCount===0?i._events=new Ys:delete i._events[e]}function $e(){this._events=new Ys,this._eventsCount=0}$e.prototype.eventNames=function(){var e=[],t,r;if(this._eventsCount===0)return e;for(r in t=this._events)YE.call(t,r)&&e.push(Je?r.slice(1):r);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(t)):e};$e.prototype.listeners=function(e){var t=Je?Je+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var n=0,s=r.length,o=new Array(s);n<s;n++)o[n]=r[n].fn;return o};$e.prototype.listenerCount=function(e){var t=Je?Je+e:e,r=this._events[t];return r?r.fn?1:r.length:0};$e.prototype.emit=function(e,t,r,n,s,o){var a=Je?Je+e:e;if(!this._events[a])return!1;var l=this._events[a],u=arguments.length,c,d;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),u){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,r),!0;case 4:return l.fn.call(l.context,t,r,n),!0;case 5:return l.fn.call(l.context,t,r,n,s),!0;case 6:return l.fn.call(l.context,t,r,n,s,o),!0}for(d=1,c=new Array(u-1);d<u;d++)c[d-1]=arguments[d];l.fn.apply(l.context,c)}else{var p=l.length,f;for(d=0;d<p;d++)switch(l[d].once&&this.removeListener(e,l[d].fn,void 0,!0),u){case 1:l[d].fn.call(l[d].context);break;case 2:l[d].fn.call(l[d].context,t);break;case 3:l[d].fn.call(l[d].context,t,r);break;case 4:l[d].fn.call(l[d].context,t,r,n);break;default:if(!c)for(f=1,c=new Array(u-1);f<u;f++)c[f-1]=arguments[f];l[d].fn.apply(l[d].context,c)}}return!0};$e.prototype.on=function(e,t,r){return Iv(this,e,t,r,!1)};$e.prototype.once=function(e,t,r){return Iv(this,e,t,r,!0)};$e.prototype.removeListener=function(e,t,r,n){var s=Je?Je+e:e;if(!this._events[s])return this;if(!t)return al(this,s),this;var o=this._events[s];if(o.fn)o.fn===t&&(!n||o.once)&&(!r||o.context===r)&&al(this,s);else{for(var a=0,l=[],u=o.length;a<u;a++)(o[a].fn!==t||n&&!o[a].once||r&&o[a].context!==r)&&l.push(o[a]);l.length?this._events[s]=l.length===1?l[0]:l:al(this,s)}return this};$e.prototype.removeAllListeners=function(e){var t;return e?(t=Je?Je+e:e,this._events[t]&&al(this,t)):(this._events=new Ys,this._eventsCount=0),this};$e.prototype.off=$e.prototype.removeListener;$e.prototype.addListener=$e.prototype.on;$e.prefixed=Je;$e.EventEmitter=$e;typeof ad<"u"&&(ad.exports=$e)});var O_=Q((zd,$d)=>{"use strict";(function(i,e){typeof zd=="object"&&typeof $d<"u"?$d.exports=e():typeof define=="function"&&define.amd?define(e):(i=typeof globalThis<"u"?globalThis:i||self,i.Compressor=e())})(zd,function(){"use strict";function i(x,w){var C=Object.keys(x);if(Object.getOwnPropertySymbols){var O=Object.getOwnPropertySymbols(x);w&&(O=O.filter(function(L){return Object.getOwnPropertyDescriptor(x,L).enumerable})),C.push.apply(C,O)}return C}function e(x){for(var w=1;w<arguments.length;w++){var C=arguments[w]!=null?arguments[w]:{};w%2?i(Object(C),!0).forEach(function(O){s(x,O,C[O])}):Object.getOwnPropertyDescriptors?Object.defineProperties(x,Object.getOwnPropertyDescriptors(C)):i(Object(C)).forEach(function(O){Object.defineProperty(x,O,Object.getOwnPropertyDescriptor(C,O))})}return x}function t(x,w){if(!(x instanceof w))throw new TypeError("Cannot call a class as a function")}function r(x,w){for(var C=0;C<w.length;C++){var O=w[C];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(x,l(O.key),O)}}function n(x,w,C){return w&&r(x.prototype,w),C&&r(x,C),Object.defineProperty(x,"prototype",{writable:!1}),x}function s(x,w,C){return w=l(w),w in x?Object.defineProperty(x,w,{value:C,enumerable:!0,configurable:!0,writable:!0}):x[w]=C,x}function o(){return o=Object.assign?Object.assign.bind():function(x){for(var w=1;w<arguments.length;w++){var C=arguments[w];for(var O in C)Object.prototype.hasOwnProperty.call(C,O)&&(x[O]=C[O])}return x},o.apply(this,arguments)}function a(x,w){if(typeof x!="object"||x===null)return x;var C=x[Symbol.toPrimitive];if(C!==void 0){var O=C.call(x,w||"default");if(typeof O!="object")return O;throw new TypeError("@@toPrimitive must return a primitive value.")}return(w==="string"?String:Number)(x)}function l(x){var w=a(x,"string");return typeof w=="symbol"?w:String(w)}var u={exports:{}};(function(x){typeof window>"u"||function(w){var C=w.HTMLCanvasElement&&w.HTMLCanvasElement.prototype,O=w.Blob&&function(){try{return!!new Blob}catch{return!1}}(),L=O&&w.Uint8Array&&function(){try{return new Blob([new Uint8Array(100)]).size===100}catch{return!1}}(),j=w.BlobBuilder||w.WebKitBlobBuilder||w.MozBlobBuilder||w.MSBlobBuilder,ue=/^data:((.*?)(;charset=.*?)?)(;base64)?,/,Z=(O||j)&&w.atob&&w.ArrayBuffer&&w.Uint8Array&&function(K){var X,de,fe,nt,Ee,V,st,Fe,hr;if(X=K.match(ue),!X)throw new Error("invalid data URI");for(de=X[2]?X[1]:"text/plain"+(X[3]||";charset=US-ASCII"),fe=!!X[4],nt=K.slice(X[0].length),fe?Ee=atob(nt):Ee=decodeURIComponent(nt),V=new ArrayBuffer(Ee.length),st=new Uint8Array(V),Fe=0;Fe<Ee.length;Fe+=1)st[Fe]=Ee.charCodeAt(Fe);return O?new Blob([L?st:V],{type:de}):(hr=new j,hr.append(V),hr.getBlob(de))};w.HTMLCanvasElement&&!C.toBlob&&(C.mozGetAsFile?C.toBlob=function(K,X,de){var fe=this;setTimeout(function(){de&&C.toDataURL&&Z?K(Z(fe.toDataURL(X,de))):K(fe.mozGetAsFile("blob",X))})}:C.toDataURL&&Z&&(C.msToBlob?C.toBlob=function(K,X,de){var fe=this;setTimeout(function(){(X&&X!=="image/png"||de)&&C.toDataURL&&Z?K(Z(fe.toDataURL(X,de))):K(fe.msToBlob(X))})}:C.toBlob=function(K,X,de){var fe=this;setTimeout(function(){K(Z(fe.toDataURL(X,de)))})})),x.exports?x.exports=Z:w.dataURLtoBlob=Z}(window)})(u);var c=u.exports,d=function(w){return typeof Blob>"u"?!1:w instanceof Blob||Object.prototype.toString.call(w)==="[object Blob]"},p={strict:!0,checkOrientation:!0,retainExif:!1,maxWidth:1/0,maxHeight:1/0,minWidth:0,minHeight:0,width:void 0,height:void 0,resize:"none",quality:.8,mimeType:"auto",convertTypes:["image/png"],convertSize:5e6,beforeDraw:null,drew:null,success:null,error:null},f=typeof window<"u"&&typeof window.document<"u",y=f?window:{},S=function(w){return w>0&&w<1/0},k=Array.prototype.slice;function E(x){return Array.from?Array.from(x):k.call(x)}var F=/^image\/.+$/;function D(x){return F.test(x)}function T(x){var w=D(x)?x.substr(6):"";return w==="jpeg"&&(w="jpg"),".".concat(w)}var z=String.fromCharCode;function N(x,w,C){var O="",L;for(C+=w,L=w;L<C;L+=1)O+=z(x.getUint8(L));return O}var B=y.btoa;function $(x,w){for(var C=[],O=8192,L=new Uint8Array(x);L.length>0;)C.push(z.apply(null,E(L.subarray(0,O)))),L=L.subarray(O);return"data:".concat(w,";base64,").concat(B(C.join("")))}function J(x){var w=new DataView(x),C;try{var O,L,j;if(w.getUint8(0)===255&&w.getUint8(1)===216)for(var ue=w.byteLength,Z=2;Z+1<ue;){if(w.getUint8(Z)===255&&w.getUint8(Z+1)===225){L=Z;break}Z+=1}if(L){var K=L+4,X=L+10;if(N(w,K,4)==="Exif"){var de=w.getUint16(X);if(O=de===18761,(O||de===19789)&&w.getUint16(X+2,O)===42){var fe=w.getUint32(X+4,O);fe>=8&&(j=X+fe)}}}if(j){var nt=w.getUint16(j,O),Ee,V;for(V=0;V<nt;V+=1)if(Ee=j+V*12+2,w.getUint16(Ee,O)===274){Ee+=8,C=w.getUint16(Ee,O),w.setUint16(Ee,1,O);break}}}catch{C=1}return C}function He(x){var w=0,C=1,O=1;switch(x){case 2:C=-1;break;case 3:w=-180;break;case 4:O=-1;break;case 5:w=90,O=-1;break;case 6:w=90;break;case 7:w=90,C=-1;break;case 8:w=-90;break}return{rotate:w,scaleX:C,scaleY:O}}var oe=/\.\d*(?:0|9){12}\d*$/;function ye(x){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return oe.test(x)?Math.round(x*w)/w:x}function Oe(x){var w=x.aspectRatio,C=x.height,O=x.width,L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"none",j=S(O),ue=S(C);if(j&&ue){var Z=C*w;(L==="contain"||L==="none")&&Z>O||L==="cover"&&Z<O?C=O/w:O=C*w}else j?C=O/w:ue&&(O=C*w);return{width:O,height:C}}function rt(x){for(var w=E(new Uint8Array(x)),C=w.length,O=[],L=0;L+3<C;){var j=w[L],ue=w[L+1];if(j===255&&ue===218)break;if(j===255&&ue===216)L+=2;else{var Z=w[L+2]*256+w[L+3],K=L+Z+2,X=w.slice(L,K);O.push(X),L=K}}return O.reduce(function(de,fe){return fe[0]===255&&fe[1]===225?de.concat(fe):de},[])}function bt(x,w){var C=E(new Uint8Array(x));if(C[2]!==255||C[3]!==224)return x;var O=C[4]*256+C[5],L=[255,216].concat(w,C.slice(4+O));return new Uint8Array(L)}var b=y.ArrayBuffer,g=y.FileReader,_=y.URL||y.webkitURL,A=/\.\w+$/,I=y.Compressor,R=function(){function x(w,C){t(this,x),this.file=w,this.exif=[],this.image=new Image,this.options=e(e({},p),C),this.aborted=!1,this.result=null,this.init()}return n(x,[{key:"init",value:function(){var C=this,O=this.file,L=this.options;if(!d(O)){this.fail(new Error("The first argument must be a File or Blob object."));return}var j=O.type;if(!D(j)){this.fail(new Error("The first argument must be an image File or Blob object."));return}if(!_||!g){this.fail(new Error("The current browser does not support image compression."));return}b||(L.checkOrientation=!1,L.retainExif=!1);var ue=j==="image/jpeg",Z=ue&&L.checkOrientation,K=ue&&L.retainExif;if(_&&!Z&&!K)this.load({url:_.createObjectURL(O)});else{var X=new g;this.reader=X,X.onload=function(de){var fe=de.target,nt=fe.result,Ee={},V=1;Z&&(V=J(nt),V>1&&o(Ee,He(V))),K&&(C.exif=rt(nt)),Z||K?!_||V>1?Ee.url=$(nt,j):Ee.url=_.createObjectURL(O):Ee.url=nt,C.load(Ee)},X.onabort=function(){C.fail(new Error("Aborted to read the image with FileReader."))},X.onerror=function(){C.fail(new Error("Failed to read the image with FileReader."))},X.onloadend=function(){C.reader=null},Z||K?X.readAsArrayBuffer(O):X.readAsDataURL(O)}}},{key:"load",value:function(C){var O=this,L=this.file,j=this.image;j.onload=function(){O.draw(e(e({},C),{},{naturalWidth:j.naturalWidth,naturalHeight:j.naturalHeight}))},j.onabort=function(){O.fail(new Error("Aborted to load the image."))},j.onerror=function(){O.fail(new Error("Failed to load the image."))},y.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(y.navigator.userAgent)&&(j.crossOrigin="anonymous"),j.alt=L.name,j.src=C.url}},{key:"draw",value:function(C){var O=this,L=C.naturalWidth,j=C.naturalHeight,ue=C.rotate,Z=ue===void 0?0:ue,K=C.scaleX,X=K===void 0?1:K,de=C.scaleY,fe=de===void 0?1:de,nt=this.file,Ee=this.image,V=this.options,st=document.createElement("canvas"),Fe=st.getContext("2d"),hr=Math.abs(Z)%180===90,Ul=(V.resize==="contain"||V.resize==="cover")&&S(V.width)&&S(V.height),pn=Math.max(V.maxWidth,0)||1/0,mn=Math.max(V.maxHeight,0)||1/0,gn=Math.max(V.minWidth,0)||0,yn=Math.max(V.minHeight,0)||0,fr=L/j,Me=V.width,Be=V.height;if(hr){var mh=[mn,pn];pn=mh[0],mn=mh[1];var gh=[yn,gn];gn=gh[0],yn=gh[1];var yh=[Be,Me];Me=yh[0],Be=yh[1]}Ul&&(fr=Me/Be);var vh=Oe({aspectRatio:fr,width:pn,height:mn},"contain");pn=vh.width,mn=vh.height;var _h=Oe({aspectRatio:fr,width:gn,height:yn},"cover");if(gn=_h.width,yn=_h.height,Ul){var bh=Oe({aspectRatio:fr,width:Me,height:Be},V.resize);Me=bh.width,Be=bh.height}else{var wh=Oe({aspectRatio:fr,width:Me,height:Be}),Sh=wh.width;Me=Sh===void 0?L:Sh;var Eh=wh.height;Be=Eh===void 0?j:Eh}Me=Math.floor(ye(Math.min(Math.max(Me,gn),pn))),Be=Math.floor(ye(Math.min(Math.max(Be,yn),mn)));var cb=-Me/2,db=-Be/2,hb=Me,fb=Be,Ll=[];if(Ul){var Ch=0,xh=0,Nl=L,Ml=j,kh=Oe({aspectRatio:fr,width:L,height:j},{contain:"cover",cover:"contain"}[V.resize]);Nl=kh.width,Ml=kh.height,Ch=(L-Nl)/2,xh=(j-Ml)/2,Ll.push(Ch,xh,Nl,Ml)}if(Ll.push(cb,db,hb,fb),hr){var Ph=[Be,Me];Me=Ph[0],Be=Ph[1]}st.width=Me,st.height=Be,D(V.mimeType)||(V.mimeType=nt.type);var Th="transparent";nt.size>V.convertSize&&V.convertTypes.indexOf(V.mimeType)>=0&&(V.mimeType="image/jpeg");var Oh=V.mimeType==="image/jpeg";if(Oh&&(Th="#fff"),Fe.fillStyle=Th,Fe.fillRect(0,0,Me,Be),V.beforeDraw&&V.beforeDraw.call(this,Fe,st),!this.aborted&&(Fe.save(),Fe.translate(Me/2,Be/2),Fe.rotate(Z*Math.PI/180),Fe.scale(X,fe),Fe.drawImage.apply(Fe,[Ee].concat(Ll)),Fe.restore(),V.drew&&V.drew.call(this,Fe,st),!this.aborted)){var Fh=function(vn){if(!O.aborted){var Ah=function(_n){return O.done({naturalWidth:L,naturalHeight:j,result:_n})};if(vn&&Oh&&V.retainExif&&O.exif&&O.exif.length>0){var Rh=function(_n){return Ah(c($(bt(_n,O.exif),V.mimeType)))};if(vn.arrayBuffer)vn.arrayBuffer().then(Rh).catch(function(){O.fail(new Error("Failed to read the compressed image with Blob.arrayBuffer()."))});else{var pr=new g;O.reader=pr,pr.onload=function(Bl){var _n=Bl.target;Rh(_n.result)},pr.onabort=function(){O.fail(new Error("Aborted to read the compressed image with FileReader."))},pr.onerror=function(){O.fail(new Error("Failed to read the compressed image with FileReader."))},pr.onloadend=function(){O.reader=null},pr.readAsArrayBuffer(vn)}}else Ah(vn)}};st.toBlob?st.toBlob(Fh,V.mimeType,V.quality):Fh(c(st.toDataURL(V.mimeType,V.quality)))}}},{key:"done",value:function(C){var O=C.naturalWidth,L=C.naturalHeight,j=C.result,ue=this.file,Z=this.image,K=this.options;if(_&&Z.src.indexOf("blob:")===0&&_.revokeObjectURL(Z.src),j)if(K.strict&&!K.retainExif&&j.size>ue.size&&K.mimeType===ue.type&&!(K.width>O||K.height>L||K.minWidth>O||K.minHeight>L||K.maxWidth<O||K.maxHeight<L))j=ue;else{var X=new Date;j.lastModified=X.getTime(),j.lastModifiedDate=X,j.name=ue.name,j.name&&j.type!==ue.type&&(j.name=j.name.replace(A,T(j.type)))}else j=ue;this.result=j,K.success&&K.success.call(this,j)}},{key:"fail",value:function(C){var O=this.options;if(O.error)O.error.call(this,C);else throw C}},{key:"abort",value:function(){this.aborted||(this.aborted=!0,this.reader?this.reader.abort():this.image.complete?this.fail(new Error("The compression process has been aborted.")):(this.image.onload=null,this.image.onabort()))}}],[{key:"noConflict",value:function(){return window.Compressor=I,x}},{key:"setDefaults",value:function(C){o(p,C)}}]),x}();return R})});var oi=class extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}};function be(i){return typeof i=="object"&&i!==null&&"__isStorageError"in i}var zo=class extends oi{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}},ki=class extends oi{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}};var gb=function(i,e,t,r){function n(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(d){o(d)}}function l(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?s(c.value):n(c.value).then(a,l)}u((r=r.apply(i,e||[])).next())})},Ho=i=>{let e;return i?e=i:typeof fetch>"u"?e=(...t)=>import("./chunk-GHVKKAWE.js").then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},_f=()=>gb(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield import("./chunk-GHVKKAWE.js")).Response:Response}),$o=i=>{if(Array.isArray(i))return i.map(t=>$o(t));if(typeof i=="function"||i!==Object(i))return i;let e={};return Object.entries(i).forEach(([t,r])=>{let n=t.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[n]=$o(r)}),e};var Pi=function(i,e,t,r){function n(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(d){o(d)}}function l(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?s(c.value):n(c.value).then(a,l)}u((r=r.apply(i,e||[])).next())})},Kl=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),yb=(i,e,t)=>Pi(void 0,void 0,void 0,function*(){let r=yield _f();i instanceof r&&!t?.noResolveJson?i.json().then(n=>{e(new zo(Kl(n),i.status||500))}).catch(n=>{e(new ki(Kl(n),n))}):e(new ki(Kl(i),i))}),vb=(i,e,t,r)=>{let n={method:i,headers:e?.headers||{}};return i==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json"},e?.headers),r&&(n.body=JSON.stringify(r)),Object.assign(Object.assign({},n),t))};function kn(i,e,t,r,n,s){return Pi(this,void 0,void 0,function*(){return new Promise((o,a)=>{i(t,vb(e,r,n,s)).then(l=>{if(!l.ok)throw l;return r?.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>yb(l,a,r))})})}function Cr(i,e,t,r){return Pi(this,void 0,void 0,function*(){return kn(i,"GET",e,t,r)})}function Ft(i,e,t,r,n){return Pi(this,void 0,void 0,function*(){return kn(i,"POST",e,r,n,t)})}function bf(i,e,t,r,n){return Pi(this,void 0,void 0,function*(){return kn(i,"PUT",e,r,n,t)})}function wf(i,e,t,r){return Pi(this,void 0,void 0,function*(){return kn(i,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),r)})}function Vo(i,e,t,r,n){return Pi(this,void 0,void 0,function*(){return kn(i,"DELETE",e,r,n,t)})}var Qe=function(i,e,t,r){function n(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(d){o(d)}}function l(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?s(c.value):n(c.value).then(a,l)}u((r=r.apply(i,e||[])).next())})},_b={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Sf={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1},qo=class{constructor(e,t={},r,n){this.url=e,this.headers=t,this.bucketId=r,this.fetch=Ho(n)}uploadOrUpdate(e,t,r,n){return Qe(this,void 0,void 0,function*(){try{let s,o=Object.assign(Object.assign({},Sf),n),a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)}),l=o.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",this.encodeMetadata(l)),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",this.encodeMetadata(l))):(s=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),n?.headers&&(a=Object.assign(Object.assign({},a),n.headers));let u=this._removeEmptyFolders(t),c=this._getFinalPath(u),d=yield this.fetch(`${this.url}/object/${c}`,Object.assign({method:e,body:s,headers:a},o?.duplex?{duplex:o.duplex}:{})),p=yield d.json();return d.ok?{data:{path:u,id:p.Id,fullPath:p.Key},error:null}:{data:null,error:p}}catch(s){if(be(s))return{data:null,error:s};throw s}})}upload(e,t,r){return Qe(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,n){return Qe(this,void 0,void 0,function*(){let s=this._removeEmptyFolders(e),o=this._getFinalPath(s),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",t);try{let l,u=Object.assign({upsert:Sf.upsert},n),c=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",u.cacheControl)):(l=r,c["cache-control"]=`max-age=${u.cacheControl}`,c["content-type"]=u.contentType);let d=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:c}),p=yield d.json();return d.ok?{data:{path:s,fullPath:p.Key},error:null}:{data:null,error:p}}catch(l){if(be(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,t){return Qe(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),n=Object.assign({},this.headers);t?.upsert&&(n["x-upsert"]="true");let s=yield Ft(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:n}),o=new URL(this.url+s.url),a=o.searchParams.get("token");if(!a)throw new oi("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(r){if(be(r))return{data:null,error:r};throw r}})}update(e,t,r){return Qe(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return Qe(this,void 0,void 0,function*(){try{return{data:yield Ft(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r?.destinationBucket},{headers:this.headers}),error:null}}catch(n){if(be(n))return{data:null,error:n};throw n}})}copy(e,t,r){return Qe(this,void 0,void 0,function*(){try{return{data:{path:(yield Ft(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(n){if(be(n))return{data:null,error:n};throw n}})}createSignedUrl(e,t,r){return Qe(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e),s=yield Ft(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:t},r?.transform?{transform:r.transform}:{}),{headers:this.headers}),o=r?.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(n){if(be(n))return{data:null,error:n};throw n}})}createSignedUrls(e,t,r){return Qe(this,void 0,void 0,function*(){try{let n=yield Ft(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),s=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{data:n.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${s}`):null})),error:null}}catch(n){if(be(n))return{data:null,error:n};throw n}})}download(e,t){return Qe(this,void 0,void 0,function*(){let n=typeof t?.transform<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString(t?.transform||{}),o=s?`?${s}`:"";try{let a=this._getFinalPath(e);return{data:yield(yield Cr(this.fetch,`${this.url}/${n}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(be(a))return{data:null,error:a};throw a}})}info(e){return Qe(this,void 0,void 0,function*(){let t=this._getFinalPath(e);try{let r=yield Cr(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:$o(r),error:null}}catch(r){if(be(r))return{data:null,error:r};throw r}})}exists(e){return Qe(this,void 0,void 0,function*(){let t=this._getFinalPath(e);try{return yield wf(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(be(r)&&r instanceof ki){let n=r.originalError;if([400,404].includes(n?.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){let r=this._getFinalPath(e),n=[],s=t?.download?`download=${t.download===!0?"":t.download}`:"";s!==""&&n.push(s);let a=typeof t?.transform<"u"?"render/image":"object",l=this.transformOptsToQueryString(t?.transform||{});l!==""&&n.push(l);let u=n.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${u}`)}}}remove(e){return Qe(this,void 0,void 0,function*(){try{return{data:yield Vo(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(be(t))return{data:null,error:t};throw t}})}list(e,t,r){return Qe(this,void 0,void 0,function*(){try{let n=Object.assign(Object.assign(Object.assign({},_b),t),{prefix:e||""});return{data:yield Ft(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(be(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){let t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};var Ef="2.7.1";var Cf={"X-Client-Info":`storage-js/${Ef}`};var xr=function(i,e,t,r){function n(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(d){o(d)}}function l(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?s(c.value):n(c.value).then(a,l)}u((r=r.apply(i,e||[])).next())})},Wo=class{constructor(e,t={},r){this.url=e,this.headers=Object.assign(Object.assign({},Cf),t),this.fetch=Ho(r)}listBuckets(){return xr(this,void 0,void 0,function*(){try{return{data:yield Cr(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(be(e))return{data:null,error:e};throw e}})}getBucket(e){return xr(this,void 0,void 0,function*(){try{return{data:yield Cr(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(be(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return xr(this,void 0,void 0,function*(){try{return{data:yield Ft(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(be(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return xr(this,void 0,void 0,function*(){try{return{data:yield bf(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(be(r))return{data:null,error:r};throw r}})}emptyBucket(e){return xr(this,void 0,void 0,function*(){try{return{data:yield Ft(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(be(t))return{data:null,error:t};throw t}})}deleteBucket(e){return xr(this,void 0,void 0,function*(){try{return{data:yield Vo(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(be(t))return{data:null,error:t};throw t}})}};var Pn=class extends Wo{constructor(e,t={},r){super(e,t,r)}from(e){return new qo(this.url,this.headers,e,this.fetch)}};var xf=i=>{let e;return i?e=i:typeof fetch>"u"?e=(...t)=>import("./chunk-GHVKKAWE.js").then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)};var Tn=class extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}},Go=class extends Tn{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}},On=class extends Tn{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}},Fn=class extends Tn{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}},Xl=function(i){return i.Any="any",i.ApNortheast1="ap-northeast-1",i.ApNortheast2="ap-northeast-2",i.ApSouth1="ap-south-1",i.ApSoutheast1="ap-southeast-1",i.ApSoutheast2="ap-southeast-2",i.CaCentral1="ca-central-1",i.EuCentral1="eu-central-1",i.EuWest1="eu-west-1",i.EuWest2="eu-west-2",i.EuWest3="eu-west-3",i.SaEast1="sa-east-1",i.UsEast1="us-east-1",i.UsWest1="us-west-1",i.UsWest2="us-west-2",i}(Xl||{});var bb=function(i,e,t,r){function n(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(d){o(d)}}function l(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?s(c.value):n(c.value).then(a,l)}u((r=r.apply(i,e||[])).next())})},An=class{constructor(e,{headers:t={},customFetch:r,region:n=Xl.Any}={}){this.url=e,this.headers=t,this.region=n,this.fetch=xf(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var r;return bb(this,void 0,void 0,function*(){try{let{headers:n,method:s,body:o}=t,a={},{region:l}=t;l||(l=this.region);let u=new URL(`${this.url}/${e}`);l&&l!=="any"&&(a["x-region"]=l,u.searchParams.set("forceFunctionRegion",l));let c;o&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",c=o):typeof o=="string"?(a["Content-Type"]="text/plain",c=o):typeof FormData<"u"&&o instanceof FormData?c=o:(a["Content-Type"]="application/json",c=JSON.stringify(o)));let d=yield this.fetch(u.toString(),{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),n),body:c}).catch(S=>{throw new Go(S)}),p=d.headers.get("x-relay-error");if(p&&p==="true")throw new On(d);if(!d.ok)throw new Fn(d);let f=((r=d.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),y;return f==="application/json"?y=yield d.json():f==="application/octet-stream"?y=yield d.blob():f==="text/event-stream"?y=d:f==="multipart/form-data"?y=yield d.formData():y=yield d.text(),{data:y,error:null,response:d}}catch(n){return{data:null,error:n,response:n instanceof Fn||n instanceof On?n.context:void 0}}})}};var Mf=se(Nf(),1),{PostgrestClient:Bf,PostgrestQueryBuilder:oP,PostgrestFilterBuilder:aP,PostgrestTransformBuilder:lP,PostgrestBuilder:uP,PostgrestError:Rb}=Mf.default;function jf(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}var zf=jf();var $f="2.11.15";var Hf=`realtime-js/${$f}`,Vf="1.0.0";var Jo=1e4,qf=1e3,Mn=function(i){return i[i.connecting=0]="connecting",i[i.open=1]="open",i[i.closing=2]="closing",i[i.closed=3]="closed",i}(Mn||{}),ze=function(i){return i.closed="closed",i.errored="errored",i.joined="joined",i.joining="joining",i.leaving="leaving",i}(ze||{}),mt=function(i){return i.close="phx_close",i.error="phx_error",i.join="phx_join",i.reply="phx_reply",i.leave="phx_leave",i.access_token="access_token",i}(mt||{}),au=function(i){return i.websocket="websocket",i}(au||{}),Ti=function(i){return i.Connecting="connecting",i.Open="open",i.Closing="closing",i.Closed="closed",i}(Ti||{});var Zo=class{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){let t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){let n=t.getUint8(1),s=t.getUint8(2),o=this.HEADER_LENGTH+2,a=r.decode(e.slice(o,o+n));o=o+n;let l=r.decode(e.slice(o,o+s));o=o+s;let u=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:l,payload:u}}};var Pr=class{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var ae=function(i){return i.abstime="abstime",i.bool="bool",i.date="date",i.daterange="daterange",i.float4="float4",i.float8="float8",i.int2="int2",i.int4="int4",i.int4range="int4range",i.int8="int8",i.int8range="int8range",i.json="json",i.jsonb="jsonb",i.money="money",i.numeric="numeric",i.oid="oid",i.reltime="reltime",i.text="text",i.time="time",i.timestamp="timestamp",i.timestamptz="timestamptz",i.timetz="timetz",i.tsrange="tsrange",i.tstzrange="tstzrange",i}(ae||{}),uu=(i,e,t={})=>{var r;let n=(r=t.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((s,o)=>(s[o]=Ib(o,i,e,n),s),{})},Ib=(i,e,t,r)=>{let n=e.find(a=>a.name===i),s=n?.type,o=t[i];return s&&!r.includes(s)?Wf(s,o):lu(o)},Wf=(i,e)=>{if(i.charAt(0)==="_"){let t=i.slice(1,i.length);return Nb(e,t)}switch(i){case ae.bool:return Db(e);case ae.float4:case ae.float8:case ae.int2:case ae.int4:case ae.int8:case ae.numeric:case ae.oid:return Ub(e);case ae.json:case ae.jsonb:return Lb(e);case ae.timestamp:return Mb(e);case ae.abstime:case ae.date:case ae.daterange:case ae.int4range:case ae.int8range:case ae.money:case ae.reltime:case ae.text:case ae.time:case ae.timestamptz:case ae.timetz:case ae.tsrange:case ae.tstzrange:return lu(e);default:return lu(e)}},lu=i=>i,Db=i=>{switch(i){case"t":return!0;case"f":return!1;default:return i}},Ub=i=>{if(typeof i=="string"){let e=parseFloat(i);if(!Number.isNaN(e))return e}return i},Lb=i=>{if(typeof i=="string")try{return JSON.parse(i)}catch(e){return console.log(`JSON parse error: ${e}`),i}return i},Nb=(i,e)=>{if(typeof i!="string")return i;let t=i.length-1,r=i[t];if(i[0]==="{"&&r==="}"){let s,o=i.slice(1,t);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(a=>Wf(e,a))}return i},Mb=i=>typeof i=="string"?i.replace(" ","T"):i,Qo=i=>{let e=i;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};var Tr=class{constructor(e,t,r={},n=Jo){this.channel=e,this.event=t,this.payload=r,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);let e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}};var Bn=class i{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};let r=t?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},n=>{let{onJoin:s,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=i.syncState(this.state,n,s,o),this.pendingDiffs.forEach(l=>{this.state=i.syncDiff(this.state,l,s,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},n=>{let{onJoin:s,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=i.syncDiff(this.state,n,s,o),a())}),this.onJoin((n,s,o)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:s,newPresences:o})}),this.onLeave((n,s,o)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,n){let s=this.cloneDeep(e),o=this.transformState(t),a={},l={};return this.map(s,(u,c)=>{o[u]||(l[u]=c)}),this.map(o,(u,c)=>{let d=s[u];if(d){let p=c.map(k=>k.presence_ref),f=d.map(k=>k.presence_ref),y=c.filter(k=>f.indexOf(k.presence_ref)<0),S=d.filter(k=>p.indexOf(k.presence_ref)<0);y.length>0&&(a[u]=y),S.length>0&&(l[u]=S)}else a[u]=c}),this.syncDiff(s,{joins:a,leaves:l},r,n)}static syncDiff(e,t,r,n){let{joins:s,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),n||(n=()=>{}),this.map(s,(a,l)=>{var u;let c=(u=e[a])!==null&&u!==void 0?u:[];if(e[a]=this.cloneDeep(l),c.length>0){let d=e[a].map(f=>f.presence_ref),p=c.filter(f=>d.indexOf(f.presence_ref)<0);e[a].unshift(...p)}r(a,c,l)}),this.map(o,(a,l)=>{let u=e[a];if(!u)return;let c=l.map(d=>d.presence_ref);u=u.filter(d=>c.indexOf(d.presence_ref)<0),e[a]=u,n(a,u,l),u.length===0&&delete e[a]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{let n=e[r];return"metas"in n?t[r]=n.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):t[r]=n,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var $t=function(i){return i.SUBSCRIBED="SUBSCRIBED",i.TIMED_OUT="TIMED_OUT",i.CLOSED="CLOSED",i.CHANNEL_ERROR="CHANNEL_ERROR",i}($t||{});var jn=class i{constructor(e,t={config:{}},r){this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=ze.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Tr(this,mt.join,this.params,this.timeout),this.rejoinTimer=new Pr(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ze.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(n=>n.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ze.closed,this.socket._remove(this)}),this._onError(n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=ze.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ze.errored,this.rejoinTimer.scheduleTimeout())}),this._on(mt.reply,{},(n,s)=>{this._trigger(this._replyEventName(s),n)}),this.presence=new Bn(this),this.broadcastEndpointURL=Qo(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var r,n;if(this.socket.isConnected()||this.socket.connect(),this.state==ze.closed){let{config:{broadcast:s,presence:o,private:a}}=this.params;this._onError(c=>e?.($t.CHANNEL_ERROR,c)),this._onClose(()=>e?.($t.CLOSED));let l={},u={broadcast:s,presence:o,postgres_changes:(n=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(c=>c.filter))!==null&&n!==void 0?n:[],private:a};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},l)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",d=>m(this,[d],function*({postgres_changes:c}){var p;if(this.socket.setAuth(),c===void 0){e?.($t.SUBSCRIBED);return}else{let f=this.bindings.postgres_changes,y=(p=f?.length)!==null&&p!==void 0?p:0,S=[];for(let k=0;k<y;k++){let E=f[k],{filter:{event:F,schema:D,table:T,filter:z}}=E,N=c&&c[k];if(N&&N.event===F&&N.schema===D&&N.table===T&&N.filter===z)S.push(Object.assign(Object.assign({},E),{id:N.id}));else{this.unsubscribe(),this.state=ze.errored,e?.($t.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=S,e&&e($t.SUBSCRIBED);return}})).receive("error",c=>{this.state=ze.errored,e?.($t.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(c).join(", ")||"error")))}).receive("timeout",()=>{e?.($t.TIMED_OUT)})}return this}presenceState(){return this.presence.state}track(r){return m(this,arguments,function*(e,t={}){return yield this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)})}untrack(){return m(this,arguments,function*(e={}){return yield this.send({type:"presence",event:"untrack"},e)})}on(e,t,r){return this._on(e,t,r)}send(r){return m(this,arguments,function*(e,t={}){var n,s;if(!this._canPush()&&e.type==="broadcast"){let{event:o,payload:a}=e,u={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:a,private:this.private}]})};try{let c=yield this._fetchWithTimeout(this.broadcastEndpointURL,u,(n=t.timeout)!==null&&n!==void 0?n:this.timeout);return yield(s=c.body)===null||s===void 0?void 0:s.cancel(),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var a,l,u;let c=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((u=(l=(a=this.params)===null||a===void 0?void 0:a.config)===null||l===void 0?void 0:l.broadcast)===null||u===void 0)&&u.ack)&&o("ok"),c.receive("ok",()=>o("ok")),c.receive("error",()=>o("error")),c.receive("timeout",()=>o("timed out"))})})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=ze.leaving;let t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(mt.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(n=>{r=new Tr(this,mt.leave,{},e),r.receive("ok",()=>{t(),n("ok")}).receive("timeout",()=>{t(),n("timed out")}).receive("error",()=>{n("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}_fetchWithTimeout(e,t,r){return m(this,null,function*(){let n=new AbortController,s=setTimeout(()=>n.abort(),r),o=yield this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:n.signal}));return clearTimeout(s),o})}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new Tr(this,e,t,r);return this._canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var n,s;let o=e.toLocaleLowerCase(),{close:a,error:l,leave:u,join:c}=mt;if(r&&[a,l,u,c].indexOf(o)>=0&&r!==this._joinRef())return;let p=this._onMessage(o,t,r);if(t&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(f=>{var y,S,k;return((y=f.filter)===null||y===void 0?void 0:y.event)==="*"||((k=(S=f.filter)===null||S===void 0?void 0:S.event)===null||k===void 0?void 0:k.toLocaleLowerCase())===o}).map(f=>f.callback(p,r)):(s=this.bindings[o])===null||s===void 0||s.filter(f=>{var y,S,k,E,F,D;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){let T=f.id,z=(y=f.filter)===null||y===void 0?void 0:y.event;return T&&((S=t.ids)===null||S===void 0?void 0:S.includes(T))&&(z==="*"||z?.toLocaleLowerCase()===((k=t.data)===null||k===void 0?void 0:k.type.toLocaleLowerCase()))}else{let T=(F=(E=f?.filter)===null||E===void 0?void 0:E.event)===null||F===void 0?void 0:F.toLocaleLowerCase();return T==="*"||T===((D=t?.event)===null||D===void 0?void 0:D.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof p=="object"&&"ids"in p){let y=p.data,{schema:S,table:k,commit_timestamp:E,type:F,errors:D}=y;p=Object.assign(Object.assign({},{schema:S,table:k,commit_timestamp:E,eventType:F,new:{},old:{},errors:D}),this._getPayloadRecords(y))}f.callback(p,r)})}_isClosed(){return this.state===ze.closed}_isJoined(){return this.state===ze.joined}_isJoining(){return this.state===ze.joining}_isLeaving(){return this.state===ze.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){let n=e.toLocaleLowerCase(),s={type:n,filter:t,callback:r};return this.bindings[n]?this.bindings[n].push(s):this.bindings[n]=[s],this}_off(e,t){let r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(n=>{var s;return!(((s=n.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&i.isEqual(n.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(let r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(mt.close,{},e)}_onError(e){this._on(mt.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ze.joining,this.joinPush.resend(e))}_getPayloadRecords(e){let t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=uu(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=uu(e.columns,e.old_record)),t}};var Gf=()=>{},jb=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`,zn=class{constructor(e,t){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Jo,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Gf,this.ref=0,this.logger=Gf,this.conn=null,this.sendBuffer=[],this.serializer=new Zo,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=s=>{let o;return s?o=s:typeof fetch>"u"?o=(...a)=>import("./chunk-GHVKKAWE.js").then(({default:l})=>l(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${e}/${au.websocket}`,this.httpEndpoint=Qo(e),t?.transport?this.transport=t.transport:this.transport=null,t?.params&&(this.params=t.params),t?.timeout&&(this.timeout=t.timeout),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),t?.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);let n=(r=t?.params)===null||r===void 0?void 0:r.apikey;if(n&&(this.accessTokenValue=n,this.apiKey=n),this.reconnectAfterMs=t?.reconnectAfterMs?t.reconnectAfterMs:s=>[1e3,2e3,5e3,1e4][s-1]||1e4,this.encode=t?.encode?t.encode:(s,o)=>o(JSON.stringify(s)),this.decode=t?.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Pr(()=>m(this,null,function*(){this.disconnect(),this.connect()}),this.reconnectAfterMs),this.fetch=this._resolveFetch(t?.fetch),t?.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=t?.worker||!1,this.workerUrl=t?.workerUrl}this.accessToken=t?.accessToken||null}connect(){if(!this.conn){if(this.transport||(this.transport=zf),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Vf}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(r=>r.teardown()))}getChannels(){return this.channels}removeChannel(e){return m(this,null,function*(){let t=yield e.unsubscribe();return this.channels.length===0&&this.disconnect(),t})}removeAllChannels(){return m(this,null,function*(){let e=yield Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e})}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Mn.connecting:return Ti.Connecting;case Mn.open:return Ti.Open;case Mn.closing:return Ti.Closing;default:return Ti.Closed}}isConnected(){return this.connectionState()===Ti.Open}channel(e,t={config:{}}){let r=`realtime:${e}`,n=this.getChannels().find(s=>s.topic===r);if(n)return n;{let s=new jn(`realtime:${e}`,t,this);return this.channels.push(s),s}}push(e){let{topic:t,event:r,payload:n,ref:s}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${t} ${r} (${s})`,n),this.isConnected()?o():this.sendBuffer.push(o)}setAuth(e=null){return m(this,null,function*(){let t=e||this.accessToken&&(yield this.accessToken())||this.accessTokenValue;this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(r=>{let n={access_token:t,version:Hf};t&&r.updateJoinPayload(n),r.joinedOnce&&r._isJoined()&&r._push(mt.access_token,{access_token:t})}))})}sendHeartbeat(){return m(this,null,function*(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(qf,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),yield this.setAuth()})}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:r,event:n,payload:s,ref:o}=t;r==="phoenix"&&n==="phx_reply"&&this.heartbeatCallback(t.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${r} ${n} ${o&&"("+o+")"||""}`,s),Array.from(this.channels).filter(a=>a._isMember(r)).forEach(a=>a._trigger(n,s,o)),this.stateChangeCallbacks.message.forEach(a=>a(t))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");let e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(mt.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;let r=e.match(/\?/)?"&":"?",n=new URLSearchParams(t);return`${e}${r}${n}`}_workerObjectUrl(e){let t;if(e)t=e;else{let r=new Blob([jb],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}};var Kf="2.50.3";var $n="";typeof Deno<"u"?$n="deno":typeof document<"u"?$n="web":typeof navigator<"u"&&navigator.product==="ReactNative"?$n="react-native":$n="node";var zb={"X-Client-Info":`supabase-js-${$n}/${Kf}`},Xf={headers:zb},Yf={schema:"public"},Jf={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Zf={};vf();var $b=function(i,e,t,r){function n(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(d){o(d)}}function l(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?s(c.value):n(c.value).then(a,l)}u((r=r.apply(i,e||[])).next())})},Hb=i=>{let e;return i?e=i:typeof fetch>"u"?e=gf:e=fetch,(...t)=>e(...t)},Vb=()=>typeof Headers>"u"?yf:Headers,Qf=(i,e,t)=>{let r=Hb(t),n=Vb();return(s,o)=>$b(void 0,void 0,void 0,function*(){var a;let l=(a=yield e())!==null&&a!==void 0?a:i,u=new n(o?.headers);return u.has("apikey")||u.set("apikey",i),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),r(s,Object.assign(Object.assign({},o),{headers:u}))})};var qb=function(i,e,t,r){function n(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(d){o(d)}}function l(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?s(c.value):n(c.value).then(a,l)}u((r=r.apply(i,e||[])).next())})};function ep(i){return i.endsWith("/")?i:i+"/"}function tp(i,e){var t,r;let{db:n,auth:s,realtime:o,global:a}=i,{db:l,auth:u,realtime:c,global:d}=e,p={db:Object.assign(Object.assign({},l),n),auth:Object.assign(Object.assign({},u),s),realtime:Object.assign(Object.assign({},c),o),global:Object.assign(Object.assign(Object.assign({},d),a),{headers:Object.assign(Object.assign({},(t=d?.headers)!==null&&t!==void 0?t:{}),(r=a?.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>qb(this,void 0,void 0,function*(){return""})};return i.accessToken?p.accessToken=i.accessToken:delete p.accessToken,p}var ea="2.70.0";var Oi=30*1e3,ta=3,ia=ta*Oi,ip="http://localhost:9999",rp="supabase.auth.token";var np={"X-Client-Info":`gotrue-js/${ea}`};var Hn="X-Supabase-Api-Version",cu={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},sp=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,op=6e5;var Vn=class extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}};function q(i){return typeof i=="object"&&i!==null&&"__isAuthError"in i}var ra=class extends Vn{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}};function ap(i){return q(i)&&i.name==="AuthApiError"}var Or=class extends Vn{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}},At=class extends Vn{constructor(e,t,r,n){super(e,r,n),this.name=t,this.status=r}},gt=class extends At{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function lp(i){return q(i)&&i.name==="AuthSessionMissingError"}var Fi=class extends At{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},Ai=class extends At{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}},Ri=class extends At{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function up(i){return q(i)&&i.name==="AuthImplicitGrantRedirectError"}var qn=class extends At{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},Fr=class extends At{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}};function na(i){return q(i)&&i.name==="AuthRetryableFetchError"}var Wn=class extends At{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}};var Ht=class extends At{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}};var sa="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),cp=` 	
\r=`.split(""),Wb=(()=>{let i=new Array(128);for(let e=0;e<i.length;e+=1)i[e]=-1;for(let e=0;e<cp.length;e+=1)i[cp[e].charCodeAt(0)]=-2;for(let e=0;e<sa.length;e+=1)i[sa[e].charCodeAt(0)]=e;return i})();function dp(i,e,t){if(i!==null)for(e.queue=e.queue<<8|i,e.queuedBits+=8;e.queuedBits>=6;){let r=e.queue>>e.queuedBits-6&63;t(sa[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){let r=e.queue>>e.queuedBits-6&63;t(sa[r]),e.queuedBits-=6}}function hp(i,e,t){let r=Wb[i];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(i)}"`)}}function du(i){let e=[],t=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},n={queue:0,queuedBits:0},s=o=>{Xb(o,r,t)};for(let o=0;o<i.length;o+=1)hp(i.charCodeAt(o),n,s);return e.join("")}function Gb(i,e){if(i<=127){e(i);return}else if(i<=2047){e(192|i>>6),e(128|i&63);return}else if(i<=65535){e(224|i>>12),e(128|i>>6&63),e(128|i&63);return}else if(i<=1114111){e(240|i>>18),e(128|i>>12&63),e(128|i>>6&63),e(128|i&63);return}throw new Error(`Unrecognized Unicode codepoint: ${i.toString(16)}`)}function Kb(i,e){for(let t=0;t<i.length;t+=1){let r=i.charCodeAt(t);if(r>55295&&r<=56319){let n=(r-55296)*1024&65535;r=(i.charCodeAt(t+1)-56320&65535|n)+65536,t+=1}Gb(r,e)}}function Xb(i,e,t){if(e.utf8seq===0){if(i<=127){t(i);return}for(let r=1;r<6;r+=1)if((i>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=i&31;else if(e.utf8seq===3)e.codepoint=i&15;else if(e.utf8seq===4)e.codepoint=i&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(i<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|i&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function fp(i){let e=[],t={queue:0,queuedBits:0},r=n=>{e.push(n)};for(let n=0;n<i.length;n+=1)hp(i.charCodeAt(n),t,r);return new Uint8Array(e)}function pp(i){let e=[];return Kb(i,t=>e.push(t)),new Uint8Array(e)}function mp(i){let e=[],t={queue:0,queuedBits:0},r=n=>{e.push(n)};return i.forEach(n=>dp(n,t,r)),dp(null,t,r),e.join("")}function gp(i){return Math.round(Date.now()/1e3)+i}function yp(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(i){let e=Math.random()*16|0;return(i=="x"?e:e&3|8).toString(16)})}var yt=()=>typeof window<"u"&&typeof document<"u",Ii={tested:!1,writable:!1},ai=()=>{if(!yt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ii.tested)return Ii.writable;let i=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(i,i),globalThis.localStorage.removeItem(i),Ii.tested=!0,Ii.writable=!0}catch{Ii.tested=!0,Ii.writable=!1}return Ii.writable};function vp(i){let e={},t=new URL(i);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((n,s)=>{e[s]=n})}catch{}return t.searchParams.forEach((r,n)=>{e[n]=r}),e}var oa=i=>{let e;return i?e=i:typeof fetch>"u"?e=(...t)=>import("./chunk-GHVKKAWE.js").then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},_p=i=>typeof i=="object"&&i!==null&&"status"in i&&"ok"in i&&"json"in i&&typeof i.json=="function",hu=(i,e,t)=>m(null,null,function*(){yield i.setItem(e,JSON.stringify(t))}),Kn=(i,e)=>m(null,null,function*(){let t=yield i.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}}),Xn=(i,e)=>m(null,null,function*(){yield i.removeItem(e)}),Gn=class i{constructor(){this.promise=new i.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}};Gn.promiseConstructor=Promise;function aa(i){let e=i.split(".");if(e.length!==3)throw new Ht("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!sp.test(e[r]))throw new Ht("JWT not in base64url format");return{header:JSON.parse(du(e[0])),payload:JSON.parse(du(e[1])),signature:fp(e[2]),raw:{header:e[0],payload:e[1]}}}function bp(i){return m(this,null,function*(){return yield new Promise(e=>{setTimeout(()=>e(null),i)})})}function wp(i,e){return new Promise((r,n)=>{m(null,null,function*(){for(let s=0;s<1/0;s++)try{let o=yield i(s);if(!e(s,null,o)){r(o);return}}catch(o){if(!e(s,o)){n(o);return}}})})}function Yb(i){return("0"+i.toString(16)).substr(-2)}function Jb(){let e=new Uint32Array(56);if(typeof crypto>"u"){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length,n="";for(let s=0;s<56;s++)n+=t.charAt(Math.floor(Math.random()*r));return n}return crypto.getRandomValues(e),Array.from(e,Yb).join("")}function Zb(i){return m(this,null,function*(){let t=new TextEncoder().encode(i),r=yield crypto.subtle.digest("SHA-256",t),n=new Uint8Array(r);return Array.from(n).map(s=>String.fromCharCode(s)).join("")})}function Qb(i){return m(this,null,function*(){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),i;let t=yield Zb(i);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")})}function Di(i,e,t=!1){return m(this,null,function*(){let r=Jb(),n=r;t&&(n+="/PASSWORD_RECOVERY"),yield hu(i,`${e}-code-verifier`,n);let s=yield Qb(r);return[s,r===s?"plain":"s256"]})}var e0=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Sp(i){let e=i.headers.get(Hn);if(!e||!e.match(e0))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Ep(i){if(!i)throw new Error("Missing exp claim");let e=Math.floor(Date.now()/1e3);if(i<=e)throw new Error("JWT has expired")}function Cp(i){switch(i){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var t0=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ui(i){if(!t0.test(i))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var i0=function(i,e){var t={};for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&e.indexOf(r)<0&&(t[r]=i[r]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(i);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(i,r[n])&&(t[r[n]]=i[r[n]]);return t},Li=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),r0=[502,503,504];function xp(i){return m(this,null,function*(){var e;if(!_p(i))throw new Fr(Li(i),0);if(r0.includes(i.status))throw new Fr(Li(i),i.status);let t;try{t=yield i.json()}catch(s){throw new Or(Li(s),s)}let r,n=Sp(i);if(n&&n.getTime()>=cu["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?r=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(r=t.error_code),r){if(r==="weak_password")throw new Wn(Li(t),i.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new gt}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0))throw new Wn(Li(t),i.status,t.weak_password.reasons);throw new ra(Li(t),i.status||500,r)})}var n0=(i,e,t,r)=>{let n={method:i,headers:e?.headers||{}};return i==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),n.body=JSON.stringify(r),Object.assign(Object.assign({},n),t))};function G(i,e,t,r){return m(this,null,function*(){var n;let s=Object.assign({},r?.headers);s[Hn]||(s[Hn]=cu["2024-01-01"].name),r?.jwt&&(s.Authorization=`Bearer ${r.jwt}`);let o=(n=r?.query)!==null&&n!==void 0?n:{};r?.redirectTo&&(o.redirect_to=r.redirectTo);let a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=yield s0(i,e,t+a,{headers:s,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(l):{data:Object.assign({},l),error:null}})}function s0(i,e,t,r,n,s){return m(this,null,function*(){let o=n0(e,r,n,s),a;try{a=yield i(t,Object.assign({},o))}catch(l){throw console.error(l),new Fr(Li(l),0)}if(a.ok||(yield xp(a)),r?.noResolveJson)return a;try{return yield a.json()}catch(l){yield xp(l)}})}function Rt(i){var e;let t=null;o0(i)&&(t=Object.assign({},i),i.expires_at||(t.expires_at=gp(i.expires_in)));let r=(e=i.user)!==null&&e!==void 0?e:i;return{data:{session:t,user:r},error:null}}function fu(i){let e=Rt(i);return!e.error&&i.weak_password&&typeof i.weak_password=="object"&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.message&&typeof i.weak_password.message=="string"&&i.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)&&(e.data.weak_password=i.weak_password),e}function It(i){var e;return{data:{user:(e=i.user)!==null&&e!==void 0?e:i},error:null}}function kp(i){return{data:i,error:null}}function Pp(i){let{action_link:e,email_otp:t,hashed_token:r,redirect_to:n,verification_type:s}=i,o=i0(i,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:t,hashed_token:r,redirect_to:n,verification_type:s},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function Tp(i){return i}function o0(i){return i.access_token&&i.refresh_token&&i.expires_in}var la=["global","local","others"];var a0=function(i,e){var t={};for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&e.indexOf(r)<0&&(t[r]=i[r]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(i);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(i,r[n])&&(t[r[n]]=i[r[n]]);return t},Ar=class{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=oa(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}signOut(r){return m(this,arguments,function*(e,t=la[0]){if(la.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${la.join(", ")}`);try{return yield G(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(q(n))return{data:null,error:n};throw n}})}inviteUserByEmail(r){return m(this,arguments,function*(e,t={}){try{return yield G(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:It})}catch(n){if(q(n))return{data:{user:null},error:n};throw n}})}generateLink(e){return m(this,null,function*(){try{let{options:t}=e,r=a0(e,["options"]),n=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(n.new_email=r?.newEmail,delete n.newEmail),yield G(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:Pp,redirectTo:t?.redirectTo})}catch(t){if(q(t))return{data:{properties:null,user:null},error:t};throw t}})}createUser(e){return m(this,null,function*(){try{return yield G(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:It})}catch(t){if(q(t))return{data:{user:null},error:t};throw t}})}listUsers(e){return m(this,null,function*(){var t,r,n,s,o,a,l;try{let u={nextPage:null,lastPage:0,total:0},c=yield G(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(s=(n=e?.perPage)===null||n===void 0?void 0:n.toString())!==null&&s!==void 0?s:""},xform:Tp});if(c.error)throw c.error;let d=yield c.json(),p=(o=c.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(l=(a=c.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return f.length>0&&(f.forEach(y=>{let S=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse(y.split(";")[1].split("=")[1]);u[`${k}Page`]=S}),u.total=parseInt(p)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(q(u))return{data:{users:[]},error:u};throw u}})}getUserById(e){return m(this,null,function*(){Ui(e);try{return yield G(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:It})}catch(t){if(q(t))return{data:{user:null},error:t};throw t}})}updateUserById(e,t){return m(this,null,function*(){Ui(e);try{return yield G(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:It})}catch(r){if(q(r))return{data:{user:null},error:r};throw r}})}deleteUser(e,t=!1){return m(this,null,function*(){Ui(e);try{return yield G(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:It})}catch(r){if(q(r))return{data:{user:null},error:r};throw r}})}_listFactors(e){return m(this,null,function*(){Ui(e.userId);try{let{data:t,error:r}=yield G(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:t,error:r}}catch(t){if(q(t))return{data:null,error:t};throw t}})}_deleteFactor(e){return m(this,null,function*(){Ui(e.userId),Ui(e.id);try{return{data:yield G(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(q(t))return{data:null,error:t};throw t}})}};var Op={getItem:i=>ai()?globalThis.localStorage.getItem(i):null,setItem:(i,e)=>{ai()&&globalThis.localStorage.setItem(i,e)},removeItem:i=>{ai()&&globalThis.localStorage.removeItem(i)}};function pu(i={}){return{getItem:e=>i[e]||null,setItem:(e,t)=>{i[e]=t},removeItem:e=>{delete i[e]}}}function Fp(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}var Ni={debug:!!(globalThis&&ai()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")},Yn=class extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}},ua=class extends Yn{};function mu(i,e,t){return m(this,null,function*(){Ni.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",i,e);let r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Ni.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",i)},e),yield Promise.resolve().then(()=>globalThis.navigator.locks.request(i,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},n=>m(null,null,function*(){if(n){Ni.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",i,n.name);try{return yield t()}finally{Ni.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",i,n.name)}}else{if(e===0)throw Ni.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",i),new ua(`Acquiring an exclusive Navigator LockManager lock "${i}" immediately failed`);if(Ni.debug)try{let s=yield globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),yield t()}})))})}Fp();var l0={url:ip,storageKey:rp,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:np,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};function Ap(i,e,t){return m(this,null,function*(){return yield t()})}var gu=(()=>{class i{constructor(t){var r,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=i.nextInstanceID,i.nextInstanceID+=1,this.instanceID>0&&yt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");let s=Object.assign(Object.assign({},l0),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new Ar({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=oa(s.fetch),this.lock=s.lock||Ap,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:yt()&&(!((r=globalThis?.navigator)===null||r===void 0)&&r.locks)?this.lock=mu:this.lock=Ap,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:ai()?this.storage=Op:(this.memoryStorage={},this.storage=pu(this.memoryStorage)):(this.memoryStorage={},this.storage=pu(this.memoryStorage)),yt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",o=>m(this,null,function*(){this._debug("received broadcast notification from other tab or client",o),yield this._notifyAllSubscribers(o.data.event,o.data.session,!1)}))}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${ea}) ${new Date().toISOString()}`,...t),this}initialize(){return m(this,null,function*(){return this.initializePromise?yield this.initializePromise:(this.initializePromise=m(this,null,function*(){return yield this._acquireLock(-1,()=>m(this,null,function*(){return yield this._initialize()}))}),yield this.initializePromise)})}_initialize(){return m(this,null,function*(){var t;try{let r=vp(window.location.href),n="none";if(this._isImplicitGrantCallback(r)?n="implicit":(yield this._isPKCECallback(r))&&(n="pkce"),yt()&&this.detectSessionInUrl&&n!=="none"){let{data:s,error:o}=yield this._getSessionFromURL(r,n);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),up(o)){let u=(t=o.details)===null||t===void 0?void 0:t.code;if(u==="identity_already_exists"||u==="identity_not_found"||u==="single_identity_not_deletable")return{error:o}}return yield this._removeSession(),{error:o}}let{session:a,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",a,"redirect type",l),yield this._saveSession(a),setTimeout(()=>m(this,null,function*(){l==="recovery"?yield this._notifyAllSubscribers("PASSWORD_RECOVERY",a):yield this._notifyAllSubscribers("SIGNED_IN",a)}),0),{error:null}}return yield this._recoverAndRefresh(),{error:null}}catch(r){return q(r)?{error:r}:{error:new Or("Unexpected error during initialization",r)}}finally{yield this._handleVisibilityChange(),this._debug("#_initialize()","end")}})}signInAnonymously(t){return m(this,null,function*(){var r,n,s;try{let o=yield G(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t?.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t?.options)===null||s===void 0?void 0:s.captchaToken}},xform:Rt}),{data:a,error:l}=o;if(l||!a)return{data:{user:null,session:null},error:l};let u=a.session,c=a.user;return a.session&&(yield this._saveSession(a.session),yield this._notifyAllSubscribers("SIGNED_IN",u)),{data:{user:c,session:u},error:null}}catch(o){if(q(o))return{data:{user:null,session:null},error:o};throw o}})}signUp(t){return m(this,null,function*(){var r,n,s;try{let o;if("email"in t){let{email:d,password:p,options:f}=t,y=null,S=null;this.flowType==="pkce"&&([y,S]=yield Di(this.storage,this.storageKey)),o=yield G(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f?.emailRedirectTo,body:{email:d,password:p,data:(r=f?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f?.captchaToken},code_challenge:y,code_challenge_method:S},xform:Rt})}else if("phone"in t){let{phone:d,password:p,options:f}=t;o=yield G(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:p,data:(n=f?.data)!==null&&n!==void 0?n:{},channel:(s=f?.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:Rt})}else throw new Ai("You must provide either an email or phone number and a password");let{data:a,error:l}=o;if(l||!a)return{data:{user:null,session:null},error:l};let u=a.session,c=a.user;return a.session&&(yield this._saveSession(a.session),yield this._notifyAllSubscribers("SIGNED_IN",u)),{data:{user:c,session:u},error:null}}catch(o){if(q(o))return{data:{user:null,session:null},error:o};throw o}})}signInWithPassword(t){return m(this,null,function*(){try{let r;if("email"in t){let{email:o,password:a,options:l}=t;r=yield G(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:a,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:fu})}else if("phone"in t){let{phone:o,password:a,options:l}=t;r=yield G(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:a,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:fu})}else throw new Ai("You must provide either an email or phone number and a password");let{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Fi}:(n.session&&(yield this._saveSession(n.session),yield this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(q(r))return{data:{user:null,session:null},error:r};throw r}})}signInWithOAuth(t){return m(this,null,function*(){var r,n,s,o;return yield this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(o=t.options)===null||o===void 0?void 0:o.skipBrowserRedirect})})}exchangeCodeForSession(t){return m(this,null,function*(){return yield this.initializePromise,this._acquireLock(-1,()=>m(this,null,function*(){return this._exchangeCodeForSession(t)}))})}signInWithWeb3(t){return m(this,null,function*(){let{chain:r}=t;if(r==="solana")return yield this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)})}signInWithSolana(t){return m(this,null,function*(){var r,n,s,o,a,l,u,c,d,p,f,y;let S,k;if("message"in t)S=t.message,k=t.signature;else{let{chain:E,wallet:F,statement:D,options:T}=t,z;if(yt())if(typeof F=="object")z=F;else{let B=window;if("solana"in B&&typeof B.solana=="object"&&("signIn"in B.solana&&typeof B.solana.signIn=="function"||"signMessage"in B.solana&&typeof B.solana.signMessage=="function"))z=B.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof F!="object"||!T?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");z=F}let N=new URL((r=T?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in z&&z.signIn){let B=yield z.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},T?.signInWithSolana),{version:"1",domain:N.host,uri:N.href}),D?{statement:D}:null)),$;if(Array.isArray(B)&&B[0]&&typeof B[0]=="object")$=B[0];else if(B&&typeof B=="object"&&"signedMessage"in B&&"signature"in B)$=B;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in $&&"signature"in $&&(typeof $.signedMessage=="string"||$.signedMessage instanceof Uint8Array)&&$.signature instanceof Uint8Array)S=typeof $.signedMessage=="string"?$.signedMessage:new TextDecoder().decode($.signedMessage),k=$.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in z)||typeof z.signMessage!="function"||!("publicKey"in z)||typeof z!="object"||!z.publicKey||!("toBase58"in z.publicKey)||typeof z.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");S=[`${N.host} wants you to sign in with your Solana account:`,z.publicKey.toBase58(),...D?["",D,""]:[""],"Version: 1",`URI: ${N.href}`,`Issued At: ${(s=(n=T?.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((o=T?.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${T.signInWithSolana.notBefore}`]:[],...!((a=T?.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${T.signInWithSolana.expirationTime}`]:[],...!((l=T?.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${T.signInWithSolana.chainId}`]:[],...!((u=T?.signInWithSolana)===null||u===void 0)&&u.nonce?[`Nonce: ${T.signInWithSolana.nonce}`]:[],...!((c=T?.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${T.signInWithSolana.requestId}`]:[],...!((p=(d=T?.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||p===void 0)&&p.length?["Resources",...T.signInWithSolana.resources.map($=>`- ${$}`)]:[]].join(`
`);let B=yield z.signMessage(new TextEncoder().encode(S),"utf8");if(!B||!(B instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");k=B}}try{let{data:E,error:F}=yield G(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:S,signature:mp(k)},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(y=t.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:Rt});if(F)throw F;return!E||!E.session||!E.user?{data:{user:null,session:null},error:new Fi}:(E.session&&(yield this._saveSession(E.session),yield this._notifyAllSubscribers("SIGNED_IN",E.session)),{data:Object.assign({},E),error:F})}catch(E){if(q(E))return{data:{user:null,session:null},error:E};throw E}})}_exchangeCodeForSession(t){return m(this,null,function*(){let r=yield Kn(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{let{data:o,error:a}=yield G(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:Rt});if(yield Xn(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new Fi}:(o.session&&(yield this._saveSession(o.session),yield this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:s??null}),error:a})}catch(o){if(q(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}})}signInWithIdToken(t){return m(this,null,function*(){try{let{options:r,provider:n,token:s,access_token:o,nonce:a}=t,l=yield G(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:o,nonce:a,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:Rt}),{data:u,error:c}=l;return c?{data:{user:null,session:null},error:c}:!u||!u.session||!u.user?{data:{user:null,session:null},error:new Fi}:(u.session&&(yield this._saveSession(u.session),yield this._notifyAllSubscribers("SIGNED_IN",u.session)),{data:u,error:c})}catch(r){if(q(r))return{data:{user:null,session:null},error:r};throw r}})}signInWithOtp(t){return m(this,null,function*(){var r,n,s,o,a;try{if("email"in t){let{email:l,options:u}=t,c=null,d=null;this.flowType==="pkce"&&([c,d]=yield Di(this.storage,this.storageKey));let{error:p}=yield G(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=u?.data)!==null&&r!==void 0?r:{},create_user:(n=u?.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:u?.captchaToken},code_challenge:c,code_challenge_method:d},redirectTo:u?.emailRedirectTo});return{data:{user:null,session:null},error:p}}if("phone"in t){let{phone:l,options:u}=t,{data:c,error:d}=yield G(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=u?.data)!==null&&s!==void 0?s:{},create_user:(o=u?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:u?.captchaToken},channel:(a=u?.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:c?.message_id},error:d}}throw new Ai("You must provide either an email or phone number.")}catch(l){if(q(l))return{data:{user:null,session:null},error:l};throw l}})}verifyOtp(t){return m(this,null,function*(){var r,n;try{let s,o;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,o=(n=t.options)===null||n===void 0?void 0:n.captchaToken);let{data:a,error:l}=yield G(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:o}}),redirectTo:s,xform:Rt});if(l)throw l;if(!a)throw new Error("An error occurred on token verification.");let u=a.session,c=a.user;return u?.access_token&&(yield this._saveSession(u),yield this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",u)),{data:{user:c,session:u},error:null}}catch(s){if(q(s))return{data:{user:null,session:null},error:s};throw s}})}signInWithSSO(t){return m(this,null,function*(){var r,n,s;try{let o=null,a=null;return this.flowType==="pkce"&&([o,a]=yield Di(this.storage,this.storageKey)),yield G(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t?.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:a}),headers:this.headers,xform:kp})}catch(o){if(q(o))return{data:null,error:o};throw o}})}reauthenticate(){return m(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>m(this,null,function*(){return yield this._reauthenticate()}))})}_reauthenticate(){return m(this,null,function*(){try{return yield this._useSession(t=>m(this,null,function*(){let{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new gt;let{error:s}=yield G(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}}))}catch(t){if(q(t))return{data:{user:null,session:null},error:t};throw t}})}resend(t){return m(this,null,function*(){try{let r=`${this.url}/resend`;if("email"in t){let{email:n,type:s,options:o}=t,{error:a}=yield G(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:o?.captchaToken}},redirectTo:o?.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in t){let{phone:n,type:s,options:o}=t,{data:a,error:l}=yield G(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:o?.captchaToken}}});return{data:{user:null,session:null,messageId:a?.message_id},error:l}}throw new Ai("You must provide either an email or phone number and a type")}catch(r){if(q(r))return{data:{user:null,session:null},error:r};throw r}})}getSession(){return m(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>m(this,null,function*(){return this._useSession(r=>m(this,null,function*(){return r}))}))})}_acquireLock(t,r){return m(this,null,function*(){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){let n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=m(this,null,function*(){return yield n,yield r()});return this.pendingInLock.push(m(this,null,function*(){try{yield s}catch{}})),s}return yield this.lock(`lock:${this.storageKey}`,t,()=>m(this,null,function*(){this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;let n=r();for(this.pendingInLock.push(m(this,null,function*(){try{yield n}catch{}})),yield n;this.pendingInLock.length;){let s=[...this.pendingInLock];yield Promise.all(s),this.pendingInLock.splice(0,s.length)}return yield n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}}))}finally{this._debug("#_acquireLock","end")}})}_useSession(t){return m(this,null,function*(){this._debug("#_useSession","begin");try{let r=yield this.__loadSession();return yield t(r)}finally{this._debug("#_useSession","end")}})}__loadSession(){return m(this,null,function*(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null,r=yield Kn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),yield this._removeSession())),!t)return{data:{session:null},error:null};let n=t.expires_at?t.expires_at*1e3-Date.now()<ia:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.storage.isServer){let a=this.suppressGetSessionWarning;t=new Proxy(t,{get:(u,c,d)=>(!a&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(u,c,d))})}return{data:{session:t},error:null}}let{session:s,error:o}=yield this._callRefreshToken(t.refresh_token);return o?{data:{session:null},error:o}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}})}getUser(t){return m(this,null,function*(){return t?yield this._getUser(t):(yield this.initializePromise,yield this._acquireLock(-1,()=>m(this,null,function*(){return yield this._getUser()})))})}_getUser(t){return m(this,null,function*(){try{return t?yield G(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:It}):yield this._useSession(r=>m(this,null,function*(){var n,s,o;let{data:a,error:l}=r;if(l)throw l;return!(!((n=a.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new gt}:yield G(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&o!==void 0?o:void 0,xform:It})}))}catch(r){if(q(r))return lp(r)&&(yield this._removeSession(),yield Xn(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}})}updateUser(n){return m(this,arguments,function*(t,r={}){return yield this.initializePromise,yield this._acquireLock(-1,()=>m(this,null,function*(){return yield this._updateUser(t,r)}))})}_updateUser(n){return m(this,arguments,function*(t,r={}){try{return yield this._useSession(s=>m(this,null,function*(){let{data:o,error:a}=s;if(a)throw a;if(!o.session)throw new gt;let l=o.session,u=null,c=null;this.flowType==="pkce"&&t.email!=null&&([u,c]=yield Di(this.storage,this.storageKey));let{data:d,error:p}=yield G(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:u,code_challenge_method:c}),jwt:l.access_token,xform:It});if(p)throw p;return l.user=d.user,yield this._saveSession(l),yield this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}}))}catch(s){if(q(s))return{data:{user:null},error:s};throw s}})}setSession(t){return m(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>m(this,null,function*(){return yield this._setSession(t)}))})}_setSession(t){return m(this,null,function*(){try{if(!t.access_token||!t.refresh_token)throw new gt;let r=Date.now()/1e3,n=r,s=!0,o=null,{payload:a}=aa(t.access_token);if(a.exp&&(n=a.exp,s=n<=r),s){let{session:l,error:u}=yield this._callRefreshToken(t.refresh_token);if(u)return{data:{user:null,session:null},error:u};if(!l)return{data:{user:null,session:null},error:null};o=l}else{let{data:l,error:u}=yield this._getUser(t.access_token);if(u)throw u;o={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},yield this._saveSession(o),yield this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(r){if(q(r))return{data:{session:null,user:null},error:r};throw r}})}refreshSession(t){return m(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>m(this,null,function*(){return yield this._refreshSession(t)}))})}_refreshSession(t){return m(this,null,function*(){try{return yield this._useSession(r=>m(this,null,function*(){var n;if(!t){let{data:a,error:l}=r;if(l)throw l;t=(n=a.session)!==null&&n!==void 0?n:void 0}if(!t?.refresh_token)throw new gt;let{session:s,error:o}=yield this._callRefreshToken(t.refresh_token);return o?{data:{user:null,session:null},error:o}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}}))}catch(r){if(q(r))return{data:{user:null,session:null},error:r};throw r}})}_getSessionFromURL(t,r){return m(this,null,function*(){try{if(!yt())throw new Ri("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Ri(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new qn("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ri("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new qn("No code detected.");let{data:D,error:T}=yield this._exchangeCodeForSession(t.code);if(T)throw T;let z=new URL(window.location.href);return z.searchParams.delete("code"),window.history.replaceState(window.history.state,"",z.toString()),{data:{session:D.session,redirectType:null},error:null}}let{provider_token:n,provider_refresh_token:s,access_token:o,refresh_token:a,expires_in:l,expires_at:u,token_type:c}=t;if(!o||!l||!a||!c)throw new Ri("No session defined in URL");let d=Math.round(Date.now()/1e3),p=parseInt(l),f=d+p;u&&(f=parseInt(u));let y=f-d;y*1e3<=Oi&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${y}s, should have been closer to ${p}s`);let S=f-p;d-S>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",S,f,d):d-S<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",S,f,d);let{data:k,error:E}=yield this._getUser(o);if(E)throw E;let F={provider_token:n,provider_refresh_token:s,access_token:o,expires_in:p,expires_at:f,refresh_token:a,token_type:c,user:k.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:F,redirectType:t.type},error:null}}catch(n){if(q(n))return{data:{session:null,redirectType:null},error:n};throw n}})}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}_isPKCECallback(t){return m(this,null,function*(){let r=yield Kn(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)})}signOut(){return m(this,arguments,function*(t={scope:"global"}){return yield this.initializePromise,yield this._acquireLock(-1,()=>m(this,null,function*(){return yield this._signOut(t)}))})}_signOut(){return m(this,arguments,function*({scope:t}={scope:"global"}){return yield this._useSession(r=>m(this,null,function*(){var n;let{data:s,error:o}=r;if(o)return{error:o};let a=(n=s.session)===null||n===void 0?void 0:n.access_token;if(a){let{error:l}=yield this.admin.signOut(a,t);if(l&&!(ap(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(yield this._removeSession(),yield Xn(this.storage,`${this.storageKey}-code-verifier`)),{error:null}}))})}onAuthStateChange(t){let r=yp(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),m(this,null,function*(){yield this.initializePromise,yield this._acquireLock(-1,()=>m(this,null,function*(){this._emitInitialSession(r)}))}),{data:{subscription:n}}}_emitInitialSession(t){return m(this,null,function*(){return yield this._useSession(r=>m(this,null,function*(){var n,s;try{let{data:{session:o},error:a}=r;if(a)throw a;yield(n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",o),this._debug("INITIAL_SESSION","callback id",t,"session",o)}catch(o){yield(s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null),this._debug("INITIAL_SESSION","callback id",t,"error",o),console.error(o)}}))})}resetPasswordForEmail(n){return m(this,arguments,function*(t,r={}){let s=null,o=null;this.flowType==="pkce"&&([s,o]=yield Di(this.storage,this.storageKey,!0));try{return yield G(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:s,code_challenge_method:o,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(a){if(q(a))return{data:null,error:a};throw a}})}getUserIdentities(){return m(this,null,function*(){var t;try{let{data:r,error:n}=yield this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(q(r))return{data:null,error:r};throw r}})}linkIdentity(t){return m(this,null,function*(){var r;try{let{data:n,error:s}=yield this._useSession(o=>m(this,null,function*(){var a,l,u,c,d;let{data:p,error:f}=o;if(f)throw f;let y=yield this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(a=t.options)===null||a===void 0?void 0:a.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(u=t.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:!0});return yield G(this.fetch,"GET",y,{headers:this.headers,jwt:(d=(c=p.session)===null||c===void 0?void 0:c.access_token)!==null&&d!==void 0?d:void 0})}));if(s)throw s;return yt()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n?.url),{data:{provider:t.provider,url:n?.url},error:null}}catch(n){if(q(n))return{data:{provider:t.provider,url:null},error:n};throw n}})}unlinkIdentity(t){return m(this,null,function*(){try{return yield this._useSession(r=>m(this,null,function*(){var n,s;let{data:o,error:a}=r;if(a)throw a;return yield G(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})}))}catch(r){if(q(r))return{data:null,error:r};throw r}})}_refreshAccessToken(t){return m(this,null,function*(){let r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{let n=Date.now();return yield wp(s=>m(this,null,function*(){return s>0&&(yield bp(200*Math.pow(2,s-1))),this._debug(r,"refreshing attempt",s),yield G(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Rt})}),(s,o)=>{let a=200*Math.pow(2,s);return o&&na(o)&&Date.now()+a-n<Oi})}catch(n){if(this._debug(r,"error",n),q(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}})}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}_handleProviderSignIn(t,r){return m(this,null,function*(){let n=yield this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),yt()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}})}_recoverAndRefresh(){return m(this,null,function*(){var t;let r="#_recoverAndRefresh()";this._debug(r,"begin");try{let n=yield Kn(this.storage,this.storageKey);if(this._debug(r,"session from storage",n),!this._isValidSession(n)){this._debug(r,"session is not valid"),n!==null&&(yield this._removeSession());return}let s=((t=n.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<ia;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${ia}s`),s){if(this.autoRefreshToken&&n.refresh_token){let{error:o}=yield this._callRefreshToken(n.refresh_token);o&&(console.error(o),na(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),yield this._removeSession()))}}else yield this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(r,"error",n),console.error(n);return}finally{this._debug(r,"end")}})}_callRefreshToken(t){return m(this,null,function*(){var r,n;if(!t)throw new gt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;let s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Gn;let{data:o,error:a}=yield this._refreshAccessToken(t);if(a)throw a;if(!o.session)throw new gt;yield this._saveSession(o.session),yield this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);let l={session:o.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(o){if(this._debug(s,"error",o),q(o)){let a={session:null,error:o};return na(o)||(yield this._removeSession()),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(a),a}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(o),o}finally{this.refreshingDeferred=null,this._debug(s,"end")}})}_notifyAllSubscribers(t,r,n=!0){return m(this,null,function*(){let s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});let o=[],a=Array.from(this.stateChangeEmitters.values()).map(l=>m(this,null,function*(){try{yield l.callback(t,r)}catch(u){o.push(u)}}));if(yield Promise.all(a),o.length>0){for(let l=0;l<o.length;l+=1)console.error(o[l]);throw o[0]}}finally{this._debug(s,"end")}})}_saveSession(t){return m(this,null,function*(){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,yield hu(this.storage,this.storageKey,t)})}_removeSession(){return m(this,null,function*(){this._debug("#_removeSession()"),yield Xn(this.storage,this.storageKey),yield this._notifyAllSubscribers("SIGNED_OUT",null)})}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");let t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&yt()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}_startAutoRefresh(){return m(this,null,function*(){yield this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");let t=setInterval(()=>this._autoRefreshTokenTick(),Oi);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(()=>m(this,null,function*(){yield this.initializePromise,yield this._autoRefreshTokenTick()}),0)})}_stopAutoRefresh(){return m(this,null,function*(){this._debug("#_stopAutoRefresh()");let t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)})}startAutoRefresh(){return m(this,null,function*(){this._removeVisibilityChangedCallback(),yield this._startAutoRefresh()})}stopAutoRefresh(){return m(this,null,function*(){this._removeVisibilityChangedCallback(),yield this._stopAutoRefresh()})}_autoRefreshTokenTick(){return m(this,null,function*(){this._debug("#_autoRefreshTokenTick()","begin");try{yield this._acquireLock(0,()=>m(this,null,function*(){try{let t=Date.now();try{return yield this._useSession(r=>m(this,null,function*(){let{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}let s=Math.floor((n.expires_at*1e3-t)/Oi);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Oi}ms, refresh threshold is ${ta} ticks`),s<=ta&&(yield this._callRefreshToken(n.refresh_token))}))}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}}))}catch(t){if(t.isAcquireTimeout||t instanceof Yn)this._debug("auto refresh token tick lock not available");else throw t}})}_handleVisibilityChange(){return m(this,null,function*(){if(this._debug("#_handleVisibilityChange()"),!yt()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=()=>m(this,null,function*(){return yield this._onVisibilityChanged(!1)}),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),yield this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}})}_onVisibilityChanged(t){return m(this,null,function*(){let r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(yield this.initializePromise,yield this._acquireLock(-1,()=>m(this,null,function*(){if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}yield this._recoverAndRefresh()})))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()})}_getUrlForProvider(t,r,n){return m(this,null,function*(){let s=[`provider=${encodeURIComponent(r)}`];if(n?.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n?.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){let[o,a]=yield Di(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(a)}`});s.push(l.toString())}if(n?.queryParams){let o=new URLSearchParams(n.queryParams);s.push(o.toString())}return n?.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`})}_unenroll(t){return m(this,null,function*(){try{return yield this._useSession(r=>m(this,null,function*(){var n;let{data:s,error:o}=r;return o?{data:null,error:o}:yield G(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s?.session)===null||n===void 0?void 0:n.access_token})}))}catch(r){if(q(r))return{data:null,error:r};throw r}})}_enroll(t){return m(this,null,function*(){try{return yield this._useSession(r=>m(this,null,function*(){var n,s;let{data:o,error:a}=r;if(a)return{data:null,error:a};let l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:u,error:c}=yield G(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=o?.session)===null||n===void 0?void 0:n.access_token});return c?{data:null,error:c}:(t.factorType==="totp"&&(!((s=u?.totp)===null||s===void 0)&&s.qr_code)&&(u.totp.qr_code=`data:image/svg+xml;utf-8,${u.totp.qr_code}`),{data:u,error:null})}))}catch(r){if(q(r))return{data:null,error:r};throw r}})}_verify(t){return m(this,null,function*(){return this._acquireLock(-1,()=>m(this,null,function*(){try{return yield this._useSession(r=>m(this,null,function*(){var n;let{data:s,error:o}=r;if(o)return{data:null,error:o};let{data:a,error:l}=yield G(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=s?.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(yield this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),yield this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:l})}))}catch(r){if(q(r))return{data:null,error:r};throw r}}))})}_challenge(t){return m(this,null,function*(){return this._acquireLock(-1,()=>m(this,null,function*(){try{return yield this._useSession(r=>m(this,null,function*(){var n;let{data:s,error:o}=r;return o?{data:null,error:o}:yield G(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(n=s?.session)===null||n===void 0?void 0:n.access_token})}))}catch(r){if(q(r))return{data:null,error:r};throw r}}))})}_challengeAndVerify(t){return m(this,null,function*(){let{data:r,error:n}=yield this._challenge({factorId:t.factorId});return n?{data:null,error:n}:yield this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})})}_listFactors(){return m(this,null,function*(){let{data:{user:t},error:r}=yield this.getUser();if(r)return{data:null,error:r};let n=t?.factors||[],s=n.filter(a=>a.factor_type==="totp"&&a.status==="verified"),o=n.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:n,totp:s,phone:o},error:null}})}_getAuthenticatorAssuranceLevel(){return m(this,null,function*(){return this._acquireLock(-1,()=>m(this,null,function*(){return yield this._useSession(t=>m(this,null,function*(){var r,n;let{data:{session:s},error:o}=t;if(o)return{data:null,error:o};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};let{payload:a}=aa(s.access_token),l=null;a.aal&&(l=a.aal);let u=l;((n=(r=s.user.factors)===null||r===void 0?void 0:r.filter(p=>p.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(u="aal2");let d=a.amr||[];return{data:{currentLevel:l,nextLevel:u,currentAuthenticationMethods:d},error:null}}))}))})}fetchJwk(n){return m(this,arguments,function*(t,r={keys:[]}){let s=r.keys.find(l=>l.kid===t);if(s||(s=this.jwks.keys.find(l=>l.kid===t),s&&this.jwks_cached_at+op>Date.now()))return s;let{data:o,error:a}=yield G(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;if(!o.keys||o.keys.length===0)throw new Ht("JWKS is empty");if(this.jwks=o,this.jwks_cached_at=Date.now(),s=o.keys.find(l=>l.kid===t),!s)throw new Ht("No matching signing key found in JWKS");return s})}getClaims(n){return m(this,arguments,function*(t,r={keys:[]}){try{let s=t;if(!s){let{data:S,error:k}=yield this.getSession();if(k||!S.session)return{data:null,error:k};s=S.session.access_token}let{header:o,payload:a,signature:l,raw:{header:u,payload:c}}=aa(s);if(Ep(a.exp),!o.kid||o.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){let{error:S}=yield this.getUser(s);if(S)throw S;return{data:{claims:a,header:o,signature:l},error:null}}let d=Cp(o.alg),p=yield this.fetchJwk(o.kid,r),f=yield crypto.subtle.importKey("jwk",p,d,!0,["verify"]);if(!(yield crypto.subtle.verify(d,f,l,pp(`${u}.${c}`))))throw new Ht("Invalid JWT signature");return{data:{claims:a,header:o,signature:l},error:null}}catch(s){if(q(s))return{data:null,error:s};throw s}})}}return i.nextInstanceID=0,i})();var u0=gu,yu=u0;var ca=class extends yu{constructor(e){super(e)}};var c0=function(i,e,t,r){function n(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(d){o(d)}}function l(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?s(c.value):n(c.value).then(a,l)}u((r=r.apply(i,e||[])).next())})},da=class{constructor(e,t,r){var n,s,o;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");let a=ep(e),l=new URL(a);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);let u=`sb-${l.hostname.split(".")[0]}-auth-token`,c={db:Yf,realtime:Zf,auth:Object.assign(Object.assign({},Jf),{storageKey:u}),global:Xf},d=tp(r??{},c);this.storageKey=(n=d.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(s=d.global.headers)!==null&&s!==void 0?s:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(p,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=d.auth)!==null&&o!==void 0?o:{},this.headers,d.global.fetch),this.fetch=Qf(t,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new Bf(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),d.accessToken||this._listenForAuthEvents()}get functions(){return new An(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Pn(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return c0(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();let{data:r}=yield this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,storageKey:s,flowType:o,lock:a,debug:l},u,c){let d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new ca({url:this.authUrl.href,headers:Object.assign(Object.assign({},d),u),storageKey:s,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,flowType:o,lock:a,debug:l,fetch:c,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new zn(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r?.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};var Rp=(i,e,t)=>new da(i,e,t);function Rr(i){i||(i=P(zl));let e=new yi(t=>{if(i.destroyed){t.next();return}return i.onDestroy(t.next.bind(t))});return t=>t.pipe(Pt(e))}function Mi(i,e){let t=e?.injector??P(he),r=new Uh(1),n=lf(()=>{let s;try{s=i()}catch(o){Wl(()=>r.error(o));return}Wl(()=>r.next(s))},{injector:t,manualCleanup:!0});return t.get(zl).onDestroy(()=>{n.destroy(),r.complete()}),r.asObservable()}var ha="thumbnails",fa="thumbnail_",pa="partyHash";var Ip="thumbnailsSigned",Dp=(()=>{class i{saveFullResSignedUrl(t,r,n){let s=Date.now()+n,o={signedUrl:r,expiredAtTicks:s};localStorage.setItem(t,JSON.stringify(o))}readCachedFullResSignedUrl(t){let r=localStorage.getItem(t);if(!r)return;let n=JSON.parse(r),s=Date.now();if(n.expiredAtTicks>s)return n.signedUrl}saveThumbnailSignedUrls(t,r){let n=Date.now()+r,s=this.loadAndPrepareCache();for(let[a,l]of t.entries())s[a]={expiredAtTicks:n,signedUrl:l};let o=JSON.stringify(s);localStorage.setItem(Ip,o)}readCachedThumbnailSignedUrls(){let t=this.loadAndPrepareCache();return new Map(Object.entries(t).map(([r,n])=>[r,n.signedUrl]))}loadAndPrepareCache(){let t=localStorage.getItem(Ip),r={};if(!t)return r;try{let n=JSON.parse(t);r=this.clearOldData(n)}catch{console.warn("Failed to parse signed URL cache")}return r}clearOldData(t){let r=Date.now(),n=Object.entries(t).filter(([,s])=>s.expiredAtTicks>r);return Object.fromEntries(n)}static \u0275fac=function(r){return new(r||i)};static \u0275prov=Y({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var d0=".emptyFolderPlaceholder",ma=(()=>{class i{titleService=P(ff);imageCacheService=P(Dp);supabaseToken=P(mf);supabase=Rp(this.supabaseToken.supabaseUrl,this.supabaseToken.supabaseKey);supabaseStorageURL=`${this.supabaseToken.supabaseUrl}/storage/v1/upload/resumable`;partyHash=Ce(void 0);anonUser=xi({params:()=>this.partyHash(),loader:t=>m(this,null,function*(){let r=yield this.supabase.auth.getUser(),n=yield this.supabase.auth.getSession(),s={user:r.data.user,session:n.data.session};return(!s.session||!s.user||s.user.user_metadata[pa]!==t.params)&&(s=(yield this.supabase.auth.signInAnonymously({options:{data:{partyHash:t.params}}})).data),s})});anonUser$=Mi(this.anonUser.value);mandatoryMeta=xi({params:()=>this.anonUser.value(),loader:()=>m(this,null,function*(){let t=this.partyHash(),{data:r,error:n}=yield this.supabase.from("upload_mandator").select("*");if(n)throw new Error(n.message);if(!r||r.length!==1)throw new Error("no mandator found");let s=r[0];return console.log(s),this.titleService.setTitle(`\u2665 ${s.header_name} \u2665`),s})});imageMetaActive=Ce(void 0);imageMeta=xi({params:()=>this.imageMetaActive(),loader:()=>m(this,null,function*(){let t=this.partyHash();if(!t)return[];let r=`${t}/${ha}`,{data:n,error:s}=yield this.supabase.storage.from(t).list(r,{limit:100,sortBy:{column:"updated_at",order:"desc"}});if(s||!n)return console.warn("Error fetching file list or no data",s),[];let o=n.filter(p=>p.name!==d0),a=this.imageCacheService.readCachedThumbnailSignedUrls(),l=o.map((p,f)=>{let y=`${r}/${p.name}`,S=a.get(y);return M(v({},p),{thumbnailPath:y,thumbnailSignedUrl:S,fullResPath:`${t}/${p.name.replace(fa,"")}`,idx:f})}),u=l.filter(p=>p.thumbnailSignedUrl===void 0).map(p=>p.thumbnailPath),c={data:[],error:new oi("no Paths")};u.length>0&&(c=yield this.supabase.storage.from(t).createSignedUrls(u,43200));let d=new Map(c.data?.filter(p=>p.error===null&&p.path!==void 0).map(({path:p,signedUrl:f})=>[p,f])??[]);return this.imageCacheService.saveThumbnailSignedUrls(d,432e5),l.map((p,f)=>M(v({},p),{thumbnailSignedUrl:p.thumbnailSignedUrl||d.get(p.thumbnailPath),idx:f}))})});static \u0275fac=function(r){return new(r||i)};static \u0275prov=Y({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function ga(i,e){if(!{}.hasOwnProperty.call(i,e))throw new TypeError("attempted to use private field on non-instance");return i}var h0=0;function Lp(i){return"__private_"+h0+++"_"+i}function f0(i,e,t){let r=[];return i.forEach(n=>typeof n!="string"?r.push(n):e[Symbol.split](n).forEach((s,o,a)=>{s!==""&&r.push(s),o<a.length-1&&r.push(t)})),r}function Up(i,e){let t=/\$/g,r="$$$$",n=[i];if(e==null)return n;for(let s of Object.keys(e))if(s!=="_"){let o=e[s];typeof o=="string"&&(o=t[Symbol.replace](o,r)),n=f0(n,new RegExp(`%\\{${s}\\}`,"g"),o)}return n}var p0=i=>{throw new Error(`missing string: ${i}`)},Jn=Lp("onMissingKey"),Zn=Lp("apply"),Ir=class{constructor(e,t){let{onMissingKey:r=p0}=t===void 0?{}:t;Object.defineProperty(this,Zn,{value:m0}),Object.defineProperty(this,Jn,{writable:!0,value:void 0}),this.locale={strings:{},pluralize(n){return n===1?0:1}},Array.isArray(e)?e.forEach(ga(this,Zn)[Zn],this):ga(this,Zn)[Zn](e),ga(this,Jn)[Jn]=r}translate(e,t){return this.translateArray(e,t).join("")}translateArray(e,t){let r=this.locale.strings[e];if(r==null&&(ga(this,Jn)[Jn](e),r=e),typeof r=="object"){if(t&&typeof t.smart_count<"u"){let s=this.locale.pluralize(t.smart_count);return Up(r[s],t)}throw new Error("Attempted to use a string with plural forms, but no value was given for %{smart_count}")}if(typeof r!="string")throw new Error("string was not a string");return Up(r,t)}};function m0(i){if(!(i!=null&&i.strings))return;let e=this.locale;Object.assign(this.locale,{strings:v(v({},e.strings),i.strings),pluralize:i.pluralize||e.pluralize})}var Im=se(Mp(),1);var g0="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";var li=(i=21)=>{let e="",t=i|0;for(;t--;)e+=g0[Math.random()*64|0];return e};var Dm=se(ym(),1);function va(i,e){if(!{}.hasOwnProperty.call(i,e))throw new TypeError("attempted to use private field on non-instance");return i}var uw=0;function vm(i){return"__private_"+uw+++"_"+i}var cw={version:"4.2.0"},Bi=vm("callbacks"),Cu=vm("publish"),_a=class{constructor(){Object.defineProperty(this,Cu,{value:dw}),this.state={},Object.defineProperty(this,Bi,{writable:!0,value:new Set})}getState(){return this.state}setState(e){let t=v({},this.state),r=v(v({},this.state),e);this.state=r,va(this,Cu)[Cu](t,r,e)}subscribe(e){return va(this,Bi)[Bi].add(e),()=>{va(this,Bi)[Bi].delete(e)}}};function dw(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];va(this,Bi)[Bi].forEach(r=>{r(...e)})}_a.VERSION=cw.version;var _m=_a;function Dt(i){let e=i.lastIndexOf(".");return e===-1||e===i.length-1?{name:i,extension:void 0}:{name:i.slice(0,e),extension:i.slice(e+1)}}var xu={__proto__:null,md:"text/markdown",markdown:"text/markdown",mp4:"video/mp4",mp3:"audio/mp3",svg:"image/svg+xml",jpg:"image/jpeg",png:"image/png",webp:"image/webp",gif:"image/gif",heic:"image/heic",heif:"image/heif",yaml:"text/yaml",yml:"text/yaml",csv:"text/csv",tsv:"text/tab-separated-values",tab:"text/tab-separated-values",avi:"video/x-msvideo",mks:"video/x-matroska",mkv:"video/x-matroska",mov:"video/quicktime",dicom:"application/dicom",doc:"application/msword",msg:"application/vnd.ms-outlook",docm:"application/vnd.ms-word.document.macroenabled.12",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",dot:"application/msword",dotm:"application/vnd.ms-word.template.macroenabled.12",dotx:"application/vnd.openxmlformats-officedocument.wordprocessingml.template",xla:"application/vnd.ms-excel",xlam:"application/vnd.ms-excel.addin.macroenabled.12",xlc:"application/vnd.ms-excel",xlf:"application/x-xliff+xml",xlm:"application/vnd.ms-excel",xls:"application/vnd.ms-excel",xlsb:"application/vnd.ms-excel.sheet.binary.macroenabled.12",xlsm:"application/vnd.ms-excel.sheet.macroenabled.12",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xlt:"application/vnd.ms-excel",xltm:"application/vnd.ms-excel.template.macroenabled.12",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template",xlw:"application/vnd.ms-excel",txt:"text/plain",text:"text/plain",conf:"text/plain",log:"text/plain",pdf:"application/pdf",zip:"application/zip","7z":"application/x-7z-compressed",rar:"application/x-rar-compressed",tar:"application/x-tar",gz:"application/gzip",dmg:"application/x-apple-diskimage"};function es(i){var e;if(i.type)return i.type;let t=i.name?(e=Dt(i.name).extension)==null?void 0:e.toLowerCase():null;return t&&t in xu?xu[t]:"application/octet-stream"}function hw(i){return i.charCodeAt(0).toString(32)}function bm(i){let e="";return i.replace(/[^A-Z0-9]/gi,t=>(e+=`-${hw(t)}`,"/"))+e}function wm(i,e){let t=e||"uppy";return typeof i.name=="string"&&(t+=`-${bm(i.name.toLowerCase())}`),i.type!==void 0&&(t+=`-${i.type}`),i.meta&&typeof i.meta.relativePath=="string"&&(t+=`-${bm(i.meta.relativePath.toLowerCase())}`),i.data.size!==void 0&&(t+=`-${i.data.size}`),i.data.lastModified!==void 0&&(t+=`-${i.data.lastModified}`),t}function fw(i){return!i.isRemote||!i.remote?!1:new Set(["box","dropbox","drive","facebook","unsplash"]).has(i.remote.provider)}function ba(i,e){if(fw(i))return i.id;let t=es(i);return wm(M(v({},i),{type:t}),e)}function ku(i){if(i==null&&typeof navigator<"u"&&(i=navigator.userAgent),!i)return!0;let e=/Edge\/(\d+\.\d+)/.exec(i);if(!e)return!0;let r=e[1].split(".",2),n=parseInt(r[0],10),s=parseInt(r[1],10);return n<15||n===15&&s<15063||n>18||n===18&&s>=18218}function Pu(i,e){return e.name?e.name:i.split("/")[0]==="image"?`${i.split("/")[0]}.${i.split("/")[1]}`:"noname"}function Tu(i){return i<10?`0${i}`:i.toString()}function Dr(){let i=new Date,e=Tu(i.getHours()),t=Tu(i.getMinutes()),r=Tu(i.getSeconds());return`${e}:${t}:${r}`}var Sm={debug:()=>{},warn:()=>{},error:function(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];return console.error(`[Uppy] [${Dr()}]`,...e)}},Em={debug:function(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];return console.debug(`[Uppy] [${Dr()}]`,...e)},warn:function(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];return console.warn(`[Uppy] [${Dr()}]`,...e)},error:function(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];return console.error(`[Uppy] [${Dr()}]`,...e)}};var is=se(ts(),1),Fm=se(Om(),1),Am={maxFileSize:null,minFileSize:null,maxTotalFileSize:null,maxNumberOfFiles:null,minNumberOfFiles:null,allowedFileTypes:null,requiredMetaFields:[]},et=class extends Error{constructor(e,t){var r;super(e),this.isRestriction=!0,this.isUserFacing=(r=t?.isUserFacing)!=null?r:!0,t!=null&&t.file&&(this.file=t.file)}},wa=class{constructor(e,t){this.getI18n=t,this.getOpts=()=>{var r;let n=e();if(((r=n.restrictions)==null?void 0:r.allowedFileTypes)!=null&&!Array.isArray(n.restrictions.allowedFileTypes))throw new TypeError("`restrictions.allowedFileTypes` must be an array");return n}}validateAggregateRestrictions(e,t){let{maxTotalFileSize:r,maxNumberOfFiles:n}=this.getOpts().restrictions;if(n&&e.filter(o=>!o.isGhost).length+t.length>n)throw new et(`${this.getI18n()("youCanOnlyUploadX",{smart_count:n})}`);if(r){let s=[...e,...t].reduce((o,a)=>{var l;return o+((l=a.size)!=null?l:0)},0);if(s>r)throw new et(this.getI18n()("aggregateExceedsSize",{sizeAllowed:(0,is.default)(r),size:(0,is.default)(s)}))}}validateSingleFile(e){let{maxFileSize:t,minFileSize:r,allowedFileTypes:n}=this.getOpts().restrictions;if(n&&!n.some(a=>a.includes("/")?e.type?(0,Fm.default)(e.type.replace(/;.*?$/,""),a):!1:a[0]==="."&&e.extension?e.extension.toLowerCase()===a.slice(1).toLowerCase():!1)){let a=n.join(", ");throw new et(this.getI18n()("youCanOnlyUploadFileTypes",{types:a}),{file:e})}if(t&&e.size!=null&&e.size>t){var s;throw new et(this.getI18n()("exceedsSize",{size:(0,is.default)(t),file:(s=e.name)!=null?s:this.getI18n()("unnamed")}),{file:e})}if(r&&e.size!=null&&e.size<r)throw new et(this.getI18n()("inferiorSize",{size:(0,is.default)(r)}),{file:e})}validate(e,t){t.forEach(r=>{this.validateSingleFile(r)}),this.validateAggregateRestrictions(e,t)}validateMinNumberOfFiles(e){let{minNumberOfFiles:t}=this.getOpts().restrictions;if(t&&Object.keys(e).length<t)throw new et(this.getI18n()("youHaveToAtLeastSelectX",{smart_count:t}))}getMissingRequiredMetaFields(e){var t;let r=new et(this.getI18n()("missingRequiredMetaFieldOnFile",{fileName:(t=e.name)!=null?t:this.getI18n()("unnamed")})),{requiredMetaFields:n}=this.getOpts().restrictions,s=[];for(let o of n)(!Object.hasOwn(e.meta,o)||e.meta[o]==="")&&s.push(o);return{missingFields:s,error:r}}};var Rm={strings:{addBulkFilesFailed:{0:"Failed to add %{smart_count} file due to an internal error",1:"Failed to add %{smart_count} files due to internal errors"},youCanOnlyUploadX:{0:"You can only upload %{smart_count} file",1:"You can only upload %{smart_count} files"},youHaveToAtLeastSelectX:{0:"You have to select at least %{smart_count} file",1:"You have to select at least %{smart_count} files"},aggregateExceedsSize:"You selected %{size} of files, but maximum allowed size is %{sizeAllowed}",exceedsSize:"%{file} exceeds maximum allowed size of %{size}",missingRequiredMetaField:"Missing required meta fields",missingRequiredMetaFieldOnFile:"Missing required meta fields in %{fileName}",inferiorSize:"This file is smaller than the allowed size of %{size}",youCanOnlyUploadFileTypes:"You can only upload: %{types}",noMoreFilesAllowed:"Cannot add more files",noDuplicates:"Cannot add the duplicate file '%{fileName}', it already exists",companionError:"Connection with Companion failed",authAborted:"Authentication aborted",companionUnauthorizeHint:"To unauthorize to your %{provider} account, please go to %{url}",failedToUpload:"Failed to upload %{file}",noInternetConnection:"No Internet connection",connectedToInternet:"Connected to the Internet",noFilesFound:"You have no files or folders here",noSearchResults:"Unfortunately, there are no results for this search",selectX:{0:"Select %{smart_count}",1:"Select %{smart_count}"},allFilesFromFolderNamed:"All files from folder %{name}",openFolderNamed:"Open folder %{name}",cancel:"Cancel",logOut:"Log out",logIn:"Log in",pickFiles:"Pick files",pickPhotos:"Pick photos",filter:"Filter",resetFilter:"Reset filter",loading:"Loading...",loadedXFiles:"Loaded %{numFiles} files",authenticateWithTitle:"Please authenticate with %{pluginName} to select files",authenticateWith:"Connect to %{pluginName}",signInWithGoogle:"Sign in with Google",searchImages:"Search for images",enterTextToSearch:"Enter text to search for images",search:"Search",resetSearch:"Reset search",emptyFolderAdded:"No files were added from empty folder",addedNumFiles:"Added %{numFiles} file(s)",folderAlreadyAdded:'The folder "%{folder}" was already added',folderAdded:{0:"Added %{smart_count} file from %{folder}",1:"Added %{smart_count} files from %{folder}"},additionalRestrictionsFailed:"%{count} additional restrictions were not fulfilled",unnamed:"Unnamed",pleaseWait:"Please wait"}};function U(i,e){if(!{}.hasOwnProperty.call(i,e))throw new TypeError("attempted to use private field on non-instance");return i}var gw=0;function ne(i){return"__private_"+gw+++"_"+i}var yw={version:"4.4.6"},Sa={totalProgress:0,allowNewUpload:!0,error:null,recoveredState:null},Ie=ne("plugins"),De=ne("restricter"),rs=ne("storeUnsubscribe"),Vt=ne("emitter"),ji=ne("preProcessors"),zi=ne("uploaders"),Gt=ne("postProcessors"),lt=ne("informAndEmit"),ds=ne("checkRequiredMetaFieldsOnFile"),Ou=ne("checkRequiredMetaFields"),ns=ne("assertNewUploadAllowed"),Ru=ne("transformFile"),ss=ne("startIfAutoProceed"),os=ne("checkAndUpdateFileState"),cs=ne("getFilesToRetry"),as=ne("doRetryAll"),Iu=ne("handleUploadProgress"),ls=ne("updateTotalProgress"),Kt=ne("updateTotalProgressThrottled"),Du=ne("calculateTotalProgress"),Fu=ne("addListeners"),St=ne("updateOnlineStatus"),us=ne("requestClientById"),qt=ne("createUpload"),Au=ne("getUpload"),$i=ne("removeUpload"),Wt=ne("runUpload"),Ea=class i{constructor(e){Object.defineProperty(this,Wt,{value:Iw}),Object.defineProperty(this,$i,{value:Rw}),Object.defineProperty(this,Au,{value:Aw}),Object.defineProperty(this,qt,{value:Fw}),Object.defineProperty(this,Fu,{value:Ow}),Object.defineProperty(this,Du,{value:Tw}),Object.defineProperty(this,ls,{value:Pw}),Object.defineProperty(this,as,{value:kw}),Object.defineProperty(this,cs,{value:xw}),Object.defineProperty(this,os,{value:Cw}),Object.defineProperty(this,ss,{value:Ew}),Object.defineProperty(this,Ru,{value:Sw}),Object.defineProperty(this,ns,{value:ww}),Object.defineProperty(this,Ou,{value:bw}),Object.defineProperty(this,ds,{value:_w}),Object.defineProperty(this,lt,{value:vw}),Object.defineProperty(this,Ie,{writable:!0,value:Object.create(null)}),Object.defineProperty(this,De,{writable:!0,value:void 0}),Object.defineProperty(this,rs,{writable:!0,value:void 0}),Object.defineProperty(this,Vt,{writable:!0,value:(0,Im.default)()}),Object.defineProperty(this,ji,{writable:!0,value:new Set}),Object.defineProperty(this,zi,{writable:!0,value:new Set}),Object.defineProperty(this,Gt,{writable:!0,value:new Set}),this.scheduledAutoProceed=null,this.wasOffline=!1,Object.defineProperty(this,Iu,{writable:!0,value:(n,s)=>{let o=n?this.getFile(n.id):void 0;if(n==null||!o){this.log(`Not setting progress for a file that has been removed: ${n?.id}`);return}if(o.progress.percentage===100){this.log(`Not setting progress for a file that has been already uploaded: ${n.id}`);return}let a={bytesTotal:s.bytesTotal,percentage:s.bytesTotal!=null&&Number.isFinite(s.bytesTotal)&&s.bytesTotal>0?Math.round(s.bytesUploaded/s.bytesTotal*100):void 0};o.progress.uploadStarted!=null?this.setFileState(n.id,{progress:M(v(v({},o.progress),a),{bytesUploaded:s.bytesUploaded})}):this.setFileState(n.id,{progress:v(v({},o.progress),a)}),U(this,Kt)[Kt]()}}),Object.defineProperty(this,Kt,{writable:!0,value:(0,Dm.default)(()=>U(this,ls)[ls](),500,{leading:!0,trailing:!0})}),Object.defineProperty(this,St,{writable:!0,value:this.updateOnlineStatus.bind(this)}),Object.defineProperty(this,us,{writable:!0,value:new Map}),this.defaultLocale=Rm;let t={id:"uppy",autoProceed:!1,allowMultipleUploadBatches:!0,debug:!1,restrictions:Am,meta:{},onBeforeFileAdded:(n,s)=>!Object.hasOwn(s,n.id),onBeforeUpload:n=>n,store:new _m,logger:Sm,infoTimeout:5e3},r=v(v({},t),e);this.opts=M(v({},r),{restrictions:v(v({},t.restrictions),e&&e.restrictions)}),e&&e.logger&&e.debug?this.log("You are using a custom `logger`, but also set `debug: true`, which uses built-in logger to output logs to console. Ignoring `debug: true` and using your custom `logger`.","warning"):e&&e.debug&&(this.opts.logger=Em),this.log(`Using Core v${i.VERSION}`),this.i18nInit(),this.store=this.opts.store,this.setState(M(v({},Sa),{plugins:{},files:{},currentUploads:{},capabilities:{uploadProgress:ku(),individualCancellation:!0,resumableUploads:!1},meta:v({},this.opts.meta),info:[]})),U(this,De)[De]=new wa(()=>this.opts,()=>this.i18n),U(this,rs)[rs]=this.store.subscribe((n,s,o)=>{this.emit("state-update",n,s,o),this.updateAll(s)}),this.opts.debug&&typeof window<"u"&&(window[this.opts.id]=this),U(this,Fu)[Fu]()}emit(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];U(this,Vt)[Vt].emit(e,...r)}on(e,t){return U(this,Vt)[Vt].on(e,t),this}once(e,t){return U(this,Vt)[Vt].once(e,t),this}off(e,t){return U(this,Vt)[Vt].off(e,t),this}updateAll(e){this.iteratePlugins(t=>{t.update(e)})}setState(e){this.store.setState(e)}getState(){return this.store.getState()}patchFilesState(e){let t=this.getState().files;this.setState({files:v(v({},t),Object.fromEntries(Object.entries(e).map(r=>{let[n,s]=r;return[n,v(v({},t[n]),s)]})))})}setFileState(e,t){if(!this.getState().files[e])throw new Error(`Can\u2019t set state for ${e} (the file could have been removed)`);this.patchFilesState({[e]:t})}i18nInit(){let e=r=>this.log(`Missing i18n string: ${r}`,"error"),t=new Ir([this.defaultLocale,this.opts.locale],{onMissingKey:e});this.i18n=t.translate.bind(t),this.i18nArray=t.translateArray.bind(t),this.locale=t.locale}setOptions(e){this.opts=M(v(v({},this.opts),e),{restrictions:v(v({},this.opts.restrictions),e?.restrictions)}),e.meta&&this.setMeta(e.meta),this.i18nInit(),e.locale&&this.iteratePlugins(t=>{t.setOptions(e)}),this.setState(void 0)}resetProgress(){let e={percentage:0,bytesUploaded:!1,uploadComplete:!1,uploadStarted:null},t=v({},this.getState().files),r=Object.create(null);Object.keys(t).forEach(n=>{r[n]=M(v({},t[n]),{progress:v(v({},t[n].progress),e),tus:void 0,transloadit:void 0})}),this.setState(v({files:r},Sa))}clear(){let{capabilities:e,currentUploads:t}=this.getState();if(Object.keys(t).length>0&&!e.individualCancellation)throw new Error("The installed uploader plugin does not allow removing files during an upload.");this.setState(M(v({},Sa),{files:{}}))}addPreProcessor(e){U(this,ji)[ji].add(e)}removePreProcessor(e){return U(this,ji)[ji].delete(e)}addPostProcessor(e){U(this,Gt)[Gt].add(e)}removePostProcessor(e){return U(this,Gt)[Gt].delete(e)}addUploader(e){U(this,zi)[zi].add(e)}removeUploader(e){return U(this,zi)[zi].delete(e)}setMeta(e){let t=v(v({},this.getState().meta),e),r=v({},this.getState().files);Object.keys(r).forEach(n=>{r[n]=M(v({},r[n]),{meta:v(v({},r[n].meta),e)})}),this.log("Adding metadata:"),this.log(e),this.setState({meta:t,files:r})}setFileMeta(e,t){let r=v({},this.getState().files);if(!r[e]){this.log(`Was trying to set metadata for a file that has been removed: ${e}`);return}let n=v(v({},r[e].meta),t);r[e]=M(v({},r[e]),{meta:n}),this.setState({files:r})}getFile(e){return this.getState().files[e]}getFiles(){let{files:e}=this.getState();return Object.values(e)}getFilesByIds(e){return e.map(t=>this.getFile(t))}getObjectOfFilesPerState(){let{files:e,totalProgress:t,error:r}=this.getState(),n=Object.values(e),s=[],o=[],a=[],l=[],u=[],c=[],d=[],p=[],f=[];for(let y of n){let{progress:S}=y;!S.uploadComplete&&S.uploadStarted&&(s.push(y),y.isPaused||p.push(y)),S.uploadStarted||o.push(y),(S.uploadStarted||S.preprocess||S.postprocess)&&a.push(y),S.uploadStarted&&l.push(y),y.isPaused&&u.push(y),S.uploadComplete&&c.push(y),y.error&&d.push(y),(S.preprocess||S.postprocess)&&f.push(y)}return{newFiles:o,startedFiles:a,uploadStartedFiles:l,pausedFiles:u,completeFiles:c,erroredFiles:d,inProgressFiles:s,inProgressNotPausedFiles:p,processingFiles:f,isUploadStarted:l.length>0,isAllComplete:t===100&&c.length===n.length&&f.length===0,isAllErrored:!!r&&d.length===n.length,isAllPaused:s.length!==0&&u.length===s.length,isUploadInProgress:s.length>0,isSomeGhost:n.some(y=>y.isGhost)}}validateRestrictions(e,t){t===void 0&&(t=this.getFiles());try{U(this,De)[De].validate(t,[e])}catch(r){return r}return null}validateSingleFile(e){try{U(this,De)[De].validateSingleFile(e)}catch(t){return t.message}return null}validateAggregateRestrictions(e){let t=this.getFiles();try{U(this,De)[De].validateAggregateRestrictions(t,e)}catch(r){return r.message}return null}checkIfFileAlreadyExists(e){let{files:t}=this.getState();return!!(t[e]&&!t[e].isGhost)}addFile(e){U(this,ns)[ns](e);let{nextFilesState:t,validFilesToAdd:r,errors:n}=U(this,os)[os]([e]),s=n.filter(a=>a.isRestriction);if(U(this,lt)[lt](s),n.length>0)throw n[0];this.setState({files:t});let[o]=r;return this.emit("file-added",o),this.emit("files-added",r),this.log(`Added file: ${o.name}, ${o.id}, mime type: ${o.type}`),U(this,ss)[ss](),o.id}addFiles(e){U(this,ns)[ns]();let{nextFilesState:t,validFilesToAdd:r,errors:n}=U(this,os)[os](e),s=n.filter(a=>a.isRestriction);U(this,lt)[lt](s);let o=n.filter(a=>!a.isRestriction);if(o.length>0){let a=`Multiple errors occurred while adding files:
`;if(o.forEach(l=>{a+=`
 * ${l.message}`}),this.info({message:this.i18n("addBulkFilesFailed",{smart_count:o.length}),details:a},"error",this.opts.infoTimeout),typeof AggregateError=="function")throw new AggregateError(o,a);{let l=new Error(a);throw l.errors=o,l}}this.setState({files:t}),r.forEach(a=>{this.emit("file-added",a)}),this.emit("files-added",r),r.length>5?this.log(`Added batch of ${r.length} files`):Object.values(r).forEach(a=>{this.log(`Added file: ${a.name}
 id: ${a.id}
 type: ${a.type}`)}),r.length>0&&U(this,ss)[ss]()}removeFiles(e){let{files:t,currentUploads:r}=this.getState(),n=v({},t),s=v({},r),o=Object.create(null);e.forEach(c=>{t[c]&&(o[c]=t[c],delete n[c])});function a(c){return o[c]===void 0}Object.keys(s).forEach(c=>{let d=r[c].fileIDs.filter(a);if(d.length===0){delete s[c];return}let{capabilities:p}=this.getState();if(d.length!==r[c].fileIDs.length&&!p.individualCancellation)throw new Error("The installed uploader plugin does not allow removing files during an upload.");s[c]=M(v({},r[c]),{fileIDs:d})});let l={currentUploads:s,files:n};Object.keys(n).length===0&&(l.allowNewUpload=!0,l.error=null,l.recoveredState=null),this.setState(l),U(this,Kt)[Kt]();let u=Object.keys(o);u.forEach(c=>{this.emit("file-removed",o[c])}),u.length>5?this.log(`Removed ${u.length} files`):this.log(`Removed files: ${u.join(", ")}`)}removeFile(e){this.removeFiles([e])}pauseResume(e){if(!this.getState().capabilities.resumableUploads||this.getFile(e).progress.uploadComplete)return;let t=this.getFile(e),n=!(t.isPaused||!1);return this.setFileState(e,{isPaused:n}),this.emit("upload-pause",t,n),n}pauseAll(){let e=v({},this.getState().files);Object.keys(e).filter(r=>!e[r].progress.uploadComplete&&e[r].progress.uploadStarted).forEach(r=>{let n=M(v({},e[r]),{isPaused:!0});e[r]=n}),this.setState({files:e}),this.emit("pause-all")}resumeAll(){let e=v({},this.getState().files);Object.keys(e).filter(r=>!e[r].progress.uploadComplete&&e[r].progress.uploadStarted).forEach(r=>{let n=M(v({},e[r]),{isPaused:!1,error:null});e[r]=n}),this.setState({files:e}),this.emit("resume-all")}retryAll(){return m(this,null,function*(){let e=yield U(this,as)[as]();return this.emit("complete",e),e})}cancelAll(){this.emit("cancel-all");let{files:e}=this.getState(),t=Object.keys(e);t.length&&this.removeFiles(t),this.setState(Sa)}retryUpload(e){this.setFileState(e,{error:null,isPaused:!1}),this.emit("upload-retry",this.getFile(e));let t=U(this,qt)[qt]([e],{forceAllowNewUpload:!0});return U(this,Wt)[Wt](t)}logout(){this.iteratePlugins(e=>{var t;(t=e.provider)==null||t.logout==null||t.logout()})}[Symbol.for("uppy test: updateTotalProgress")](){return U(this,ls)[ls]()}updateOnlineStatus(){var e;((e=window.navigator.onLine)!=null?e:!0)?(this.emit("is-online"),this.wasOffline&&(this.emit("back-online"),this.info(this.i18n("connectedToInternet"),"success",3e3),this.wasOffline=!1)):(this.emit("is-offline"),this.info(this.i18n("noInternetConnection"),"error",0),this.wasOffline=!0)}getID(){return this.opts.id}use(e){if(typeof e!="function"){let l=`Expected a plugin class, but got ${e===null?"null":typeof e}. Please verify that the plugin was imported and spelled correctly.`;throw new TypeError(l)}for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];let s=new e(this,...r),o=s.id;if(!o)throw new Error("Your plugin must have an id");if(!s.type)throw new Error("Your plugin must have a type");let a=this.getPlugin(o);if(a){let l=`Already found a plugin named '${a.id}'. Tried to use: '${o}'.
Uppy plugins must have unique \`id\` options.`;throw new Error(l)}return e.VERSION&&this.log(`Using ${o} v${e.VERSION}`),s.type in U(this,Ie)[Ie]?U(this,Ie)[Ie][s.type].push(s):U(this,Ie)[Ie][s.type]=[s],s.install(),this.emit("plugin-added",s),this}getPlugin(e){for(let t of Object.values(U(this,Ie)[Ie])){let r=t.find(n=>n.id===e);if(r!=null)return r}}[Symbol.for("uppy test: getPlugins")](e){return U(this,Ie)[Ie][e]}iteratePlugins(e){Object.values(U(this,Ie)[Ie]).flat(1).forEach(e)}removePlugin(e){this.log(`Removing plugin ${e.id}`),this.emit("plugin-remove",e),e.uninstall&&e.uninstall();let t=U(this,Ie)[Ie][e.type],r=t.findIndex(o=>o.id===e.id);r!==-1&&t.splice(r,1);let n=this.getState(),s={plugins:M(v({},n.plugins),{[e.id]:void 0})};this.setState(s)}destroy(){this.log(`Closing Uppy instance ${this.opts.id}: removing all files and uninstalling plugins`),this.cancelAll(),U(this,rs)[rs](),this.iteratePlugins(e=>{this.removePlugin(e)}),typeof window<"u"&&window.removeEventListener&&(window.removeEventListener("online",U(this,St)[St]),window.removeEventListener("offline",U(this,St)[St]))}hideInfo(){let{info:e}=this.getState();this.setState({info:e.slice(1)}),this.emit("info-hidden")}info(e,t,r){t===void 0&&(t="info"),r===void 0&&(r=3e3);let n=typeof e=="object";this.setState({info:[...this.getState().info,{type:t,message:n?e.message:e,details:n?e.details:null}]}),setTimeout(()=>this.hideInfo(),r),this.emit("info-visible")}log(e,t){let{logger:r}=this.opts;switch(t){case"error":r.error(e);break;case"warning":r.warn(e);break;default:r.debug(e);break}}registerRequestClient(e,t){U(this,us)[us].set(e,t)}getRequestClientForFile(e){if(!e.remote)throw new Error(`Tried to get RequestClient for a non-remote file ${e.id}`);let t=U(this,us)[us].get(e.remote.requestClientId);if(t==null)throw new Error(`requestClientId "${e.remote.requestClientId}" not registered for file "${e.id}"`);return t}restore(e){return this.log(`Core: attempting to restore upload "${e}"`),this.getState().currentUploads[e]?U(this,Wt)[Wt](e):(U(this,$i)[$i](e),Promise.reject(new Error("Nonexistent upload")))}[Symbol.for("uppy test: createUpload")](){return U(this,qt)[qt](...arguments)}addResultData(e,t){if(!U(this,Au)[Au](e)){this.log(`Not setting result for an upload that has been removed: ${e}`);return}let{currentUploads:r}=this.getState(),n=M(v({},r[e]),{result:v(v({},r[e].result),t)});this.setState({currentUploads:M(v({},r),{[e]:n})})}upload(){return m(this,null,function*(){var e;(e=U(this,Ie)[Ie].uploader)!=null&&e.length||this.log("No uploader type plugins are used","warning");let{files:t}=this.getState();if(U(this,cs)[cs]().length>0){let s=yield U(this,as)[as]();if(!(this.getFiles().filter(a=>a.progress.uploadStarted==null).length>0))return this.emit("complete",s),s;({files:t}=this.getState())}let n=this.opts.onBeforeUpload(t);return n===!1?Promise.reject(new Error("Not starting the upload because onBeforeUpload returned false")):(n&&typeof n=="object"&&(t=n,this.setState({files:t})),Promise.resolve().then(()=>U(this,De)[De].validateMinNumberOfFiles(t)).catch(s=>{throw U(this,lt)[lt]([s]),s}).then(()=>{if(!U(this,Ou)[Ou](t))throw new et(this.i18n("missingRequiredMetaField"))}).catch(s=>{throw s}).then(()=>m(this,null,function*(){let{currentUploads:s}=this.getState(),o=Object.values(s).flatMap(c=>c.fileIDs),a=[];Object.keys(t).forEach(c=>{let d=this.getFile(c);!d.progress.uploadStarted&&o.indexOf(c)===-1&&a.push(d.id)});let l=U(this,qt)[qt](a),u=yield U(this,Wt)[Wt](l);return this.emit("complete",u),u})).catch(s=>{throw this.emit("error",s),this.log(s,"error"),s}))})}};function vw(i){for(let s of i)s.isRestriction?this.emit("restriction-failed",s.file,s):this.emit("error",s,s.file),this.log(s,"warning");let e=i.filter(s=>s.isUserFacing),t=4,r=e.slice(0,t),n=e.slice(t);r.forEach(s=>{let{message:o,details:a=""}=s;this.info({message:o,details:a},"error",this.opts.infoTimeout)}),n.length>0&&this.info({message:this.i18n("additionalRestrictionsFailed",{count:n.length})})}function _w(i){let{missingFields:e,error:t}=U(this,De)[De].getMissingRequiredMetaFields(i);return e.length>0?(this.setFileState(i.id,{missingRequiredMetaFields:e}),this.log(t.message),this.emit("restriction-failed",i,t),!1):(e.length===0&&i.missingRequiredMetaFields&&this.setFileState(i.id,{missingRequiredMetaFields:[]}),!0)}function bw(i){let e=!0;for(let t of Object.values(i))U(this,ds)[ds](t)||(e=!1);return e}function ww(i){let{allowNewUpload:e}=this.getState();if(e===!1){let t=new et(this.i18n("noMoreFilesAllowed"),{file:i});throw U(this,lt)[lt]([t]),t}}function Sw(i){let e=i instanceof File?{name:i.name,type:i.type,size:i.size,data:i}:i,t=es(e),r=Pu(t,e),n=Dt(r).extension,s=ba(e,this.getID()),o=e.meta||{};o.name=r,o.type=t;let a=Number.isFinite(e.data.size)?e.data.size:null;return{source:e.source||"",id:s,name:r,extension:n||"",meta:v(v({},this.getState().meta),o),type:t,data:e.data,progress:{percentage:0,bytesUploaded:!1,bytesTotal:a,uploadComplete:!1,uploadStarted:null},size:a,isGhost:!1,isRemote:e.isRemote||!1,remote:e.remote,preview:e.preview}}function Ew(){this.opts.autoProceed&&!this.scheduledAutoProceed&&(this.scheduledAutoProceed=setTimeout(()=>{this.scheduledAutoProceed=null,this.upload().catch(i=>{i.isRestriction||this.log(i.stack||i.message||i)})},4))}function Cw(i){let{files:e}=this.getState(),t=v({},e),r=[],n=[];for(let a of i)try{var s;let l=U(this,Ru)[Ru](a),u=(s=e[l.id])==null?void 0:s.isGhost;if(u){let d=e[l.id];l=M(v({},d),{isGhost:!1,data:a.data}),this.log(`Replaced the blob in the restored ghost file: ${l.name}, ${l.id}`)}let c=this.opts.onBeforeFileAdded(l,t);if(!c&&this.checkIfFileAlreadyExists(l.id)){var o;throw new et(this.i18n("noDuplicates",{fileName:(o=l.name)!=null?o:this.i18n("unnamed")}),{file:a})}if(c===!1&&!u)throw new et("Cannot add the file because onBeforeFileAdded returned false.",{isUserFacing:!1,file:a});typeof c=="object"&&c!==null&&(l=c),U(this,De)[De].validateSingleFile(l),t[l.id]=l,r.push(l)}catch(l){n.push(l)}try{U(this,De)[De].validateAggregateRestrictions(Object.values(e),r)}catch(a){return n.push(a),{nextFilesState:e,validFilesToAdd:[],errors:n}}return{nextFilesState:t,validFilesToAdd:r,errors:n}}function xw(){let{files:i}=this.getState();return Object.keys(i).filter(e=>i[e].error)}function kw(){return m(this,null,function*(){let i=U(this,cs)[cs](),e=v({},this.getState().files);if(i.forEach(r=>{e[r]=M(v({},e[r]),{isPaused:!1,error:null})}),this.setState({files:e,error:null}),this.emit("retry-all",this.getFilesByIds(i)),i.length===0)return{successful:[],failed:[]};let t=U(this,qt)[qt](i,{forceAllowNewUpload:!0});return U(this,Wt)[Wt](t)})}function Pw(){let i=U(this,Du)[Du](),e=null;i!=null&&(e=Math.round(i*100),e>100?e=100:e<0&&(e=0)),this.emit("progress",e??0),this.setState({totalProgress:e??0})}function Tw(){let e=this.getFiles().filter(a=>a.progress.uploadStarted||a.progress.preprocess||a.progress.postprocess);if(e.length===0)return 0;if(e.every(a=>a.progress.uploadComplete))return 1;let t=a=>a.progress.bytesTotal!=null&&a.progress.bytesTotal!==0,r=e.filter(t),n=e.filter(a=>!t(a));if(r.every(a=>a.progress.uploadComplete)&&n.length>0&&!n.every(a=>a.progress.uploadComplete))return null;let s=r.reduce((a,l)=>{var u;return a+((u=l.progress.bytesTotal)!=null?u:0)},0),o=r.reduce((a,l)=>a+(l.progress.bytesUploaded||0),0);return s===0?0:o/s}function Ow(){let i=(r,n,s)=>{let o=r.message||"Unknown error";r.details&&(o+=` ${r.details}`),this.setState({error:o}),n!=null&&n.id in this.getState().files&&this.setFileState(n.id,{error:o,response:s})};this.on("error",i),this.on("upload-error",(r,n,s)=>{if(i(n,r,s),typeof n=="object"&&n.message){var o;this.log(n.message,"error");let a=new Error(this.i18n("failedToUpload",{file:(o=r?.name)!=null?o:""}));a.isUserFacing=!0,a.details=n.message,n.details&&(a.details+=` ${n.details}`),U(this,lt)[lt]([a])}else U(this,lt)[lt]([n])});let e=null;this.on("upload-stalled",(r,n)=>{let{message:s}=r,o=n.map(a=>a.meta.name).join(", ");e||(this.info({message:s,details:o},"warning",this.opts.infoTimeout),e=setTimeout(()=>{e=null},this.opts.infoTimeout)),this.log(`${s} ${o}`.trim(),"warning")}),this.on("upload",()=>{this.setState({error:null})});let t=r=>{let n=r.filter(o=>{let a=o!=null&&this.getFile(o.id);return a||this.log(`Not setting progress for a file that has been removed: ${o?.id}`),a}),s=Object.fromEntries(n.map(o=>[o.id,{progress:{uploadStarted:Date.now(),uploadComplete:!1,bytesUploaded:0,bytesTotal:o.size}}]));this.patchFilesState(s)};this.on("upload-start",t),this.on("upload-progress",U(this,Iu)[Iu]),this.on("upload-success",(r,n)=>{if(r==null||!this.getFile(r.id)){this.log(`Not setting progress for a file that has been removed: ${r?.id}`);return}let s=this.getFile(r.id).progress;this.setFileState(r.id,{progress:M(v({},s),{postprocess:U(this,Gt)[Gt].size>0?{mode:"indeterminate"}:void 0,uploadComplete:!0,percentage:100,bytesUploaded:s.bytesTotal}),response:n,uploadURL:n.uploadURL,isPaused:!1}),r.size==null&&this.setFileState(r.id,{size:n.bytesUploaded||s.bytesTotal}),U(this,Kt)[Kt]()}),this.on("preprocess-progress",(r,n)=>{if(r==null||!this.getFile(r.id)){this.log(`Not setting progress for a file that has been removed: ${r?.id}`);return}this.setFileState(r.id,{progress:M(v({},this.getFile(r.id).progress),{preprocess:n})})}),this.on("preprocess-complete",r=>{if(r==null||!this.getFile(r.id)){this.log(`Not setting progress for a file that has been removed: ${r?.id}`);return}let n=v({},this.getState().files);n[r.id]=M(v({},n[r.id]),{progress:v({},n[r.id].progress)}),delete n[r.id].progress.preprocess,this.setState({files:n})}),this.on("postprocess-progress",(r,n)=>{if(r==null||!this.getFile(r.id)){this.log(`Not setting progress for a file that has been removed: ${r?.id}`);return}this.setFileState(r.id,{progress:M(v({},this.getState().files[r.id].progress),{postprocess:n})})}),this.on("postprocess-complete",r=>{if(r==null||!this.getFile(r.id)){this.log(`Not setting progress for a file that has been removed: ${r?.id}`);return}let n=v({},this.getState().files);n[r.id]=M(v({},n[r.id]),{progress:v({},n[r.id].progress)}),delete n[r.id].progress.postprocess,this.setState({files:n})}),this.on("restored",()=>{U(this,Kt)[Kt]()}),this.on("dashboard:file-edit-complete",r=>{r&&U(this,ds)[ds](r)}),typeof window<"u"&&window.addEventListener&&(window.addEventListener("online",U(this,St)[St]),window.addEventListener("offline",U(this,St)[St]),setTimeout(U(this,St)[St],3e3))}function Fw(i,e){e===void 0&&(e={});let{forceAllowNewUpload:t=!1}=e,{allowNewUpload:r,currentUploads:n}=this.getState();if(!r&&!t)throw new Error("Cannot create a new upload: already uploading.");let s=li();return this.emit("upload",s,this.getFilesByIds(i)),this.setState({allowNewUpload:this.opts.allowMultipleUploadBatches!==!1&&this.opts.allowMultipleUploads!==!1,currentUploads:M(v({},n),{[s]:{fileIDs:i,step:0,result:{}}})}),s}function Aw(i){let{currentUploads:e}=this.getState();return e[i]}function Rw(i){let e=v({},this.getState().currentUploads);delete e[i],this.setState({currentUploads:e})}function Iw(i){return m(this,null,function*(){let e=()=>{let{currentUploads:s}=this.getState();return s[i]},t=e(),r=[...U(this,ji)[ji],...U(this,zi)[zi],...U(this,Gt)[Gt]];try{for(let s=t.step||0;s<r.length&&t;s++){let o=r[s];this.setState({currentUploads:M(v({},this.getState().currentUploads),{[i]:M(v({},t),{step:s})})});let{fileIDs:a}=t;yield o(a,i),t=e()}}catch(s){throw U(this,$i)[$i](i),s}if(t){t.fileIDs.forEach(l=>{let u=this.getFile(l);u&&u.progress.postprocess&&this.emit("postprocess-complete",u)});let s=t.fileIDs.map(l=>this.getFile(l)),o=s.filter(l=>!l.error),a=s.filter(l=>l.error);this.addResultData(i,{successful:o,failed:a,uploadID:i}),t=e()}let n;return t&&(n=t.result,U(this,$i)[$i](i)),n==null&&(this.log(`Not setting result for an upload that has been removed: ${i}`),n={successful:[],failed:[],uploadID:i}),n})}Ea.VERSION=yw.version;var Ca=Ea;var ps,W,Bm,Dw,Hi,Um,jm,zm,$m,Nu,Uu,Lu,Uw,fs={},Hm=[],Lw=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,ms=Array.isArray;function Ut(i,e){for(var t in e)i[t]=e[t];return i}function Mu(i){i&&i.parentNode&&i.parentNode.removeChild(i)}function h(i,e,t){var r,n,s,o={};for(s in e)s=="key"?r=e[s]:s=="ref"?n=e[s]:o[s]=e[s];if(arguments.length>2&&(o.children=arguments.length>3?ps.call(arguments,2):t),typeof i=="function"&&i.defaultProps!=null)for(s in i.defaultProps)o[s]===void 0&&(o[s]=i.defaultProps[s]);return hs(i,o,r,n,null)}function hs(i,e,t,r,n){var s={type:i,props:e,key:t,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:n??++Bm,__i:-1,__u:0};return n==null&&W.vnode!=null&&W.vnode(s),s}function Pa(){return{current:null}}function Ue(i){return i.children}function pe(i,e){this.props=i,this.context=e}function Ur(i,e){if(e==null)return i.__?Ur(i.__,i.__i+1):null;for(var t;e<i.__k.length;e++)if((t=i.__k[e])!=null&&t.__e!=null)return t.__e;return typeof i.type=="function"?Ur(i):null}function Vm(i){var e,t;if((i=i.__)!=null&&i.__c!=null){for(i.__e=i.__c.base=null,e=0;e<i.__k.length;e++)if((t=i.__k[e])!=null&&t.__e!=null){i.__e=i.__c.base=t.__e;break}return Vm(i)}}function Lm(i){(!i.__d&&(i.__d=!0)&&Hi.push(i)&&!ka.__r++||Um!=W.debounceRendering)&&((Um=W.debounceRendering)||jm)(ka)}function ka(){for(var i,e,t,r,n,s,o,a=1;Hi.length;)Hi.length>a&&Hi.sort(zm),i=Hi.shift(),a=Hi.length,i.__d&&(t=void 0,n=(r=(e=i).__v).__e,s=[],o=[],e.__P&&((t=Ut({},r)).__v=r.__v+1,W.vnode&&W.vnode(t),Bu(e.__P,t,r,e.__n,e.__P.namespaceURI,32&r.__u?[n]:null,s,n??Ur(r),!!(32&r.__u),o),t.__v=r.__v,t.__.__k[t.__i]=t,Gm(s,t,o),t.__e!=n&&Vm(t)));ka.__r=0}function qm(i,e,t,r,n,s,o,a,l,u,c){var d,p,f,y,S,k,E=r&&r.__k||Hm,F=e.length;for(l=Nw(t,e,E,l,F),d=0;d<F;d++)(f=t.__k[d])!=null&&(p=f.__i==-1?fs:E[f.__i]||fs,f.__i=d,k=Bu(i,f,p,n,s,o,a,l,u,c),y=f.__e,f.ref&&p.ref!=f.ref&&(p.ref&&ju(p.ref,null,f),c.push(f.ref,f.__c||y,f)),S==null&&y!=null&&(S=y),4&f.__u||p.__k===f.__k?l=Wm(f,l,i):typeof f.type=="function"&&k!==void 0?l=k:y&&(l=y.nextSibling),f.__u&=-7);return t.__e=S,l}function Nw(i,e,t,r,n){var s,o,a,l,u,c=t.length,d=c,p=0;for(i.__k=new Array(n),s=0;s<n;s++)(o=e[s])!=null&&typeof o!="boolean"&&typeof o!="function"?(l=s+p,(o=i.__k[s]=typeof o=="string"||typeof o=="number"||typeof o=="bigint"||o.constructor==String?hs(null,o,null,null,null):ms(o)?hs(Ue,{children:o},null,null,null):o.constructor==null&&o.__b>0?hs(o.type,o.props,o.key,o.ref?o.ref:null,o.__v):o).__=i,o.__b=i.__b+1,a=null,(u=o.__i=Mw(o,t,l,d))!=-1&&(d--,(a=t[u])&&(a.__u|=2)),a==null||a.__v==null?(u==-1&&(n>c?p--:n<c&&p++),typeof o.type!="function"&&(o.__u|=4)):u!=l&&(u==l-1?p--:u==l+1?p++:(u>l?p--:p++,o.__u|=4))):i.__k[s]=null;if(d)for(s=0;s<c;s++)(a=t[s])!=null&&(2&a.__u)==0&&(a.__e==r&&(r=Ur(a)),Xm(a,a));return r}function Wm(i,e,t){var r,n;if(typeof i.type=="function"){for(r=i.__k,n=0;r&&n<r.length;n++)r[n]&&(r[n].__=i,e=Wm(r[n],e,t));return e}i.__e!=e&&(e&&i.type&&!t.contains(e)&&(e=Ur(i)),t.insertBefore(i.__e,e||null),e=i.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function tt(i,e){return e=e||[],i==null||typeof i=="boolean"||(ms(i)?i.some(function(t){tt(t,e)}):e.push(i)),e}function Mw(i,e,t,r){var n,s,o=i.key,a=i.type,l=e[t];if(l===null&&i.key==null||l&&o==l.key&&a==l.type&&(2&l.__u)==0)return t;if(r>(l!=null&&(2&l.__u)==0?1:0))for(n=t-1,s=t+1;n>=0||s<e.length;){if(n>=0){if((l=e[n])&&(2&l.__u)==0&&o==l.key&&a==l.type)return n;n--}if(s<e.length){if((l=e[s])&&(2&l.__u)==0&&o==l.key&&a==l.type)return s;s++}}return-1}function Nm(i,e,t){e[0]=="-"?i.setProperty(e,t??""):i[e]=t==null?"":typeof t!="number"||Lw.test(e)?t:t+"px"}function xa(i,e,t,r,n){var s,o;e:if(e=="style")if(typeof t=="string")i.style.cssText=t;else{if(typeof r=="string"&&(i.style.cssText=r=""),r)for(e in r)t&&e in t||Nm(i.style,e,"");if(t)for(e in t)r&&t[e]==r[e]||Nm(i.style,e,t[e])}else if(e[0]=="o"&&e[1]=="n")s=e!=(e=e.replace($m,"$1")),o=e.toLowerCase(),e=o in i||e=="onFocusOut"||e=="onFocusIn"?o.slice(2):e.slice(2),i.l||(i.l={}),i.l[e+s]=t,t?r?t.u=r.u:(t.u=Nu,i.addEventListener(e,s?Lu:Uu,s)):i.removeEventListener(e,s?Lu:Uu,s);else{if(n=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in i)try{i[e]=t??"";break e}catch{}typeof t=="function"||(t==null||t===!1&&e[4]!="-"?i.removeAttribute(e):i.setAttribute(e,e=="popover"&&t==1?"":t))}}function Mm(i){return function(e){if(this.l){var t=this.l[e.type+i];if(e.t==null)e.t=Nu++;else if(e.t<t.u)return;return t(W.event?W.event(e):e)}}}function Bu(i,e,t,r,n,s,o,a,l,u){var c,d,p,f,y,S,k,E,F,D,T,z,N,B,$,J,He,oe=e.type;if(e.constructor!=null)return null;128&t.__u&&(l=!!(32&t.__u),s=[a=e.__e=t.__e]),(c=W.__b)&&c(e);e:if(typeof oe=="function")try{if(E=e.props,F="prototype"in oe&&oe.prototype.render,D=(c=oe.contextType)&&r[c.__c],T=c?D?D.props.value:c.__:r,t.__c?k=(d=e.__c=t.__c).__=d.__E:(F?e.__c=d=new oe(E,T):(e.__c=d=new pe(E,T),d.constructor=oe,d.render=jw),D&&D.sub(d),d.props=E,d.state||(d.state={}),d.context=T,d.__n=r,p=d.__d=!0,d.__h=[],d._sb=[]),F&&d.__s==null&&(d.__s=d.state),F&&oe.getDerivedStateFromProps!=null&&(d.__s==d.state&&(d.__s=Ut({},d.__s)),Ut(d.__s,oe.getDerivedStateFromProps(E,d.__s))),f=d.props,y=d.state,d.__v=e,p)F&&oe.getDerivedStateFromProps==null&&d.componentWillMount!=null&&d.componentWillMount(),F&&d.componentDidMount!=null&&d.__h.push(d.componentDidMount);else{if(F&&oe.getDerivedStateFromProps==null&&E!==f&&d.componentWillReceiveProps!=null&&d.componentWillReceiveProps(E,T),!d.__e&&d.shouldComponentUpdate!=null&&d.shouldComponentUpdate(E,d.__s,T)===!1||e.__v==t.__v){for(e.__v!=t.__v&&(d.props=E,d.state=d.__s,d.__d=!1),e.__e=t.__e,e.__k=t.__k,e.__k.some(function(ye){ye&&(ye.__=e)}),z=0;z<d._sb.length;z++)d.__h.push(d._sb[z]);d._sb=[],d.__h.length&&o.push(d);break e}d.componentWillUpdate!=null&&d.componentWillUpdate(E,d.__s,T),F&&d.componentDidUpdate!=null&&d.__h.push(function(){d.componentDidUpdate(f,y,S)})}if(d.context=T,d.props=E,d.__P=i,d.__e=!1,N=W.__r,B=0,F){for(d.state=d.__s,d.__d=!1,N&&N(e),c=d.render(d.props,d.state,d.context),$=0;$<d._sb.length;$++)d.__h.push(d._sb[$]);d._sb=[]}else do d.__d=!1,N&&N(e),c=d.render(d.props,d.state,d.context),d.state=d.__s;while(d.__d&&++B<25);d.state=d.__s,d.getChildContext!=null&&(r=Ut(Ut({},r),d.getChildContext())),F&&!p&&d.getSnapshotBeforeUpdate!=null&&(S=d.getSnapshotBeforeUpdate(f,y)),J=c,c!=null&&c.type===Ue&&c.key==null&&(J=Km(c.props.children)),a=qm(i,ms(J)?J:[J],e,t,r,n,s,o,a,l,u),d.base=e.__e,e.__u&=-161,d.__h.length&&o.push(d),k&&(d.__E=d.__=null)}catch(ye){if(e.__v=null,l||s!=null)if(ye.then){for(e.__u|=l?160:128;a&&a.nodeType==8&&a.nextSibling;)a=a.nextSibling;s[s.indexOf(a)]=null,e.__e=a}else for(He=s.length;He--;)Mu(s[He]);else e.__e=t.__e,e.__k=t.__k;W.__e(ye,e,t)}else s==null&&e.__v==t.__v?(e.__k=t.__k,e.__e=t.__e):a=e.__e=Bw(t.__e,e,t,r,n,s,o,l,u);return(c=W.diffed)&&c(e),128&e.__u?void 0:a}function Gm(i,e,t){for(var r=0;r<t.length;r++)ju(t[r],t[++r],t[++r]);W.__c&&W.__c(e,i),i.some(function(n){try{i=n.__h,n.__h=[],i.some(function(s){s.call(n)})}catch(s){W.__e(s,n.__v)}})}function Km(i){return typeof i!="object"||i==null||i.__b&&i.__b>0?i:ms(i)?i.map(Km):Ut({},i)}function Bw(i,e,t,r,n,s,o,a,l){var u,c,d,p,f,y,S,k=t.props,E=e.props,F=e.type;if(F=="svg"?n="http://www.w3.org/2000/svg":F=="math"?n="http://www.w3.org/1998/Math/MathML":n||(n="http://www.w3.org/1999/xhtml"),s!=null){for(u=0;u<s.length;u++)if((f=s[u])&&"setAttribute"in f==!!F&&(F?f.localName==F:f.nodeType==3)){i=f,s[u]=null;break}}if(i==null){if(F==null)return document.createTextNode(E);i=document.createElementNS(n,F,E.is&&E),a&&(W.__m&&W.__m(e,s),a=!1),s=null}if(F==null)k===E||a&&i.data==E||(i.data=E);else{if(s=s&&ps.call(i.childNodes),k=t.props||fs,!a&&s!=null)for(k={},u=0;u<i.attributes.length;u++)k[(f=i.attributes[u]).name]=f.value;for(u in k)if(f=k[u],u!="children"){if(u=="dangerouslySetInnerHTML")d=f;else if(!(u in E)){if(u=="value"&&"defaultValue"in E||u=="checked"&&"defaultChecked"in E)continue;xa(i,u,null,f,n)}}for(u in E)f=E[u],u=="children"?p=f:u=="dangerouslySetInnerHTML"?c=f:u=="value"?y=f:u=="checked"?S=f:a&&typeof f!="function"||k[u]===f||xa(i,u,f,k[u],n);if(c)a||d&&(c.__html==d.__html||c.__html==i.innerHTML)||(i.innerHTML=c.__html),e.__k=[];else if(d&&(i.innerHTML=""),qm(e.type=="template"?i.content:i,ms(p)?p:[p],e,t,r,F=="foreignObject"?"http://www.w3.org/1999/xhtml":n,s,o,s?s[0]:t.__k&&Ur(t,0),a,l),s!=null)for(u=s.length;u--;)Mu(s[u]);a||(u="value",F=="progress"&&y==null?i.removeAttribute("value"):y!=null&&(y!==i[u]||F=="progress"&&!y||F=="option"&&y!=k[u])&&xa(i,u,y,k[u],n),u="checked",S!=null&&S!=i[u]&&xa(i,u,S,k[u],n))}return i}function ju(i,e,t){try{if(typeof i=="function"){var r=typeof i.__u=="function";r&&i.__u(),r&&e==null||(i.__u=i(e))}else i.current=e}catch(n){W.__e(n,t)}}function Xm(i,e,t){var r,n;if(W.unmount&&W.unmount(i),(r=i.ref)&&(r.current&&r.current!=i.__e||ju(r,null,e)),(r=i.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(s){W.__e(s,e)}r.base=r.__P=null}if(r=i.__k)for(n=0;n<r.length;n++)r[n]&&Xm(r[n],e,t||typeof i.type!="function");t||Mu(i.__e),i.__c=i.__=i.__e=void 0}function jw(i,e,t){return this.constructor(i,t)}function Ym(i,e,t){var r,n,s,o;e==document&&(e=document.documentElement),W.__&&W.__(i,e),n=(r=typeof t=="function")?null:t&&t.__k||e.__k,s=[],o=[],Bu(e,i=(!r&&t||e).__k=h(Ue,null,[i]),n||fs,fs,e.namespaceURI,!r&&t?[t]:n?null:e.firstChild?ps.call(e.childNodes):null,s,!r&&t?t:n?n.__e:e.firstChild,r,o),Gm(s,i,o)}function gs(i,e,t){var r,n,s,o,a=Ut({},i.props);for(s in i.type&&i.type.defaultProps&&(o=i.type.defaultProps),e)s=="key"?r=e[s]:s=="ref"?n=e[s]:a[s]=e[s]===void 0&&o!=null?o[s]:e[s];return arguments.length>2&&(a.children=arguments.length>3?ps.call(arguments,2):t),hs(i.type,a,r||i.key,n||i.ref,null)}ps=Hm.slice,W={__e:function(i,e,t,r){for(var n,s,o;e=e.__;)if((n=e.__c)&&!n.__)try{if((s=n.constructor)&&s.getDerivedStateFromError!=null&&(n.setState(s.getDerivedStateFromError(i)),o=n.__d),n.componentDidCatch!=null&&(n.componentDidCatch(i,r||{}),o=n.__d),o)return n.__E=n}catch(a){i=a}throw i}},Bm=0,Dw=function(i){return i!=null&&i.constructor==null},pe.prototype.setState=function(i,e){var t;t=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=Ut({},this.state),typeof i=="function"&&(i=i(Ut({},t),this.props)),i&&Ut(t,i),i!=null&&this.__v&&(e&&this._sb.push(e),Lm(this))},pe.prototype.forceUpdate=function(i){this.__v&&(this.__e=!0,i&&this.__h.push(i),Lm(this))},pe.prototype.render=Ue,Hi=[],jm=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,zm=function(i,e){return i.__v.__b-e.__v.__b},ka.__r=0,$m=/(PointerCapture)$|Capture$/i,Nu=0,Uu=Mm(!1),Lu=Mm(!0),Uw=0;var ys,me,zu,Jm,vs=0,sg=[],we=W,Zm=we.__b,Qm=we.__r,eg=we.diffed,tg=we.__c,ig=we.unmount,rg=we.__;function Hu(i,e){we.__h&&we.__h(me,i,vs||e),vs=0;var t=me.__H||(me.__H={__:[],__h:[]});return i>=t.__.length&&t.__.push({}),t.__[i]}function vt(i){return vs=1,og(lg,i)}function og(i,e,t){var r=Hu(ys++,2);if(r.t=i,!r.__c&&(r.__=[t?t(e):lg(void 0,e),function(a){var l=r.__N?r.__N[0]:r.__[0],u=r.t(l,a);l!==u&&(r.__N=[u,r.__[1]],r.__c.setState({}))}],r.__c=me,!me.__f)){var n=function(a,l,u){if(!r.__c.__H)return!0;var c=r.__c.__H.__.filter(function(p){return!!p.__c});if(c.every(function(p){return!p.__N}))return!s||s.call(this,a,l,u);var d=r.__c.props!==a;return c.forEach(function(p){if(p.__N){var f=p.__[0];p.__=p.__N,p.__N=void 0,f!==p.__[0]&&(d=!0)}}),s&&s.call(this,a,l,u)||d};me.__f=!0;var s=me.shouldComponentUpdate,o=me.componentWillUpdate;me.componentWillUpdate=function(a,l,u){if(this.__e){var c=s;s=void 0,n(a,l,u),s=c}o&&o.call(this,a,l,u)},me.shouldComponentUpdate=n}return r.__N||r.__}function Et(i,e){var t=Hu(ys++,3);!we.__s&&ag(t.__H,e)&&(t.__=i,t.u=e,me.__H.__h.push(t))}function ui(i){return vs=5,ci(function(){return{current:i}},[])}function ci(i,e){var t=Hu(ys++,7);return ag(t.__H,e)&&(t.__=i(),t.__H=e,t.__h=i),t.__}function di(i,e){return vs=8,ci(function(){return i},e)}function zw(){for(var i;i=sg.shift();)if(i.__P&&i.__H)try{i.__H.__h.forEach(Ta),i.__H.__h.forEach($u),i.__H.__h=[]}catch(e){i.__H.__h=[],we.__e(e,i.__v)}}we.__b=function(i){me=null,Zm&&Zm(i)},we.__=function(i,e){i&&e.__k&&e.__k.__m&&(i.__m=e.__k.__m),rg&&rg(i,e)},we.__r=function(i){Qm&&Qm(i),ys=0;var e=(me=i.__c).__H;e&&(zu===me?(e.__h=[],me.__h=[],e.__.forEach(function(t){t.__N&&(t.__=t.__N),t.u=t.__N=void 0})):(e.__h.forEach(Ta),e.__h.forEach($u),e.__h=[],ys=0)),zu=me},we.diffed=function(i){eg&&eg(i);var e=i.__c;e&&e.__H&&(e.__H.__h.length&&(sg.push(e)!==1&&Jm===we.requestAnimationFrame||((Jm=we.requestAnimationFrame)||$w)(zw)),e.__H.__.forEach(function(t){t.u&&(t.__H=t.u),t.u=void 0})),zu=me=null},we.__c=function(i,e){e.some(function(t){try{t.__h.forEach(Ta),t.__h=t.__h.filter(function(r){return!r.__||$u(r)})}catch(r){e.some(function(n){n.__h&&(n.__h=[])}),e=[],we.__e(r,t.__v)}}),tg&&tg(i,e)},we.unmount=function(i){ig&&ig(i);var e,t=i.__c;t&&t.__H&&(t.__H.__.forEach(function(r){try{Ta(r)}catch(n){e=n}}),t.__H=void 0,e&&we.__e(e,t.__v))};var ng=typeof requestAnimationFrame=="function";function $w(i){var e,t=function(){clearTimeout(r),ng&&cancelAnimationFrame(e),setTimeout(i)},r=setTimeout(t,35);ng&&(e=requestAnimationFrame(t))}function Ta(i){var e=me,t=i.__c;typeof t=="function"&&(i.__c=void 0,t()),me=e}function $u(i){var e=me;i.__c=i.__(),me=e}function ag(i,e){return!i||i.length!==e.length||e.some(function(t,r){return t!==i[r]})}function lg(i,e){return typeof e=="function"?e(i):e}function Vw(i,e){for(var t in e)i[t]=e[t];return i}function ug(i,e){for(var t in i)if(t!=="__source"&&!(t in e))return!0;for(var r in e)if(r!=="__source"&&i[r]!==e[r])return!0;return!1}function cg(i,e){this.props=i,this.context=e}(cg.prototype=new pe).isPureReactComponent=!0,cg.prototype.shouldComponentUpdate=function(i,e){return ug(this.props,i)||ug(this.state,e)};var dg=W.__b;W.__b=function(i){i.type&&i.type.__f&&i.ref&&(i.props.ref=i.ref,i.ref=null),dg&&dg(i)};var GF=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;var qw=W.__e;W.__e=function(i,e,t,r){if(i.then){for(var n,s=e;s=s.__;)if((n=s.__c)&&n.__c)return e.__e==null&&(e.__e=t.__e,e.__k=t.__k),n.__c(i,e)}qw(i,e,t,r)};var hg=W.unmount;function vg(i,e,t){return i&&(i.__c&&i.__c.__H&&(i.__c.__H.__.forEach(function(r){typeof r.__c=="function"&&r.__c()}),i.__c.__H=null),(i=Vw({},i)).__c!=null&&(i.__c.__P===t&&(i.__c.__P=e),i.__c.__e=!0,i.__c=null),i.__k=i.__k&&i.__k.map(function(r){return vg(r,e,t)})),i}function _g(i,e,t){return i&&t&&(i.__v=null,i.__k=i.__k&&i.__k.map(function(r){return _g(r,e,t)}),i.__c&&i.__c.__P===e&&(i.__e&&t.appendChild(i.__e),i.__c.__e=!0,i.__c.__P=t)),i}function Vu(){this.__u=0,this.o=null,this.__b=null}function bg(i){var e=i.__.__c;return e&&e.__a&&e.__a(i)}function Oa(){this.i=null,this.l=null}W.unmount=function(i){var e=i.__c;e&&e.__R&&e.__R(),e&&32&i.__u&&(i.type=null),hg&&hg(i)},(Vu.prototype=new pe).__c=function(i,e){var t=e.__c,r=this;r.o==null&&(r.o=[]),r.o.push(t);var n=bg(r.__v),s=!1,o=function(){s||(s=!0,t.__R=null,n?n(a):a())};t.__R=o;var a=function(){if(!--r.__u){if(r.state.__a){var l=r.state.__a;r.__v.__k[0]=_g(l,l.__c.__P,l.__c.__O)}var u;for(r.setState({__a:r.__b=null});u=r.o.pop();)u.forceUpdate()}};r.__u++||32&e.__u||r.setState({__a:r.__b=r.__v.__k[0]}),i.then(o,o)},Vu.prototype.componentWillUnmount=function(){this.o=[]},Vu.prototype.render=function(i,e){if(this.__b){if(this.__v.__k){var t=document.createElement("div"),r=this.__v.__k[0].__c;this.__v.__k[0]=vg(this.__b,t,r.__O=r.__P)}this.__b=null}var n=e.__a&&h(Ue,null,i.fallback);return n&&(n.__u&=-33),[h(Ue,null,e.__a?null:i.children),n]};var fg=function(i,e,t){if(++t[1]===t[0]&&i.l.delete(e),i.props.revealOrder&&(i.props.revealOrder[0]!=="t"||!i.l.size))for(t=i.i;t;){for(;t.length>3;)t.pop()();if(t[1]<t[0])break;i.i=t=t[2]}};(Oa.prototype=new pe).__a=function(i){var e=this,t=bg(e.__v),r=e.l.get(i);return r[0]++,function(n){var s=function(){e.props.revealOrder?(r.push(n),fg(e,i,r)):n()};t?t(s):s()}},Oa.prototype.render=function(i){this.i=null,this.l=new Map;var e=tt(i.children);i.revealOrder&&i.revealOrder[0]==="b"&&e.reverse();for(var t=e.length;t--;)this.l.set(e[t],this.i=[1,0,this.i]);return i.children},Oa.prototype.componentDidUpdate=Oa.prototype.componentDidMount=function(){var i=this;this.l.forEach(function(e,t){fg(i,t,e)})};var Ww=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,Gw=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,Kw=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,Xw=/[A-Z0-9]/g,Yw=typeof document<"u",Jw=function(i){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(i)};function qu(i,e,t){return e.__k==null&&(e.textContent=""),Ym(i,e),typeof t=="function"&&t(),i?i.__c:null}pe.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(i){Object.defineProperty(pe.prototype,i,{configurable:!0,get:function(){return this["UNSAFE_"+i]},set:function(e){Object.defineProperty(this,i,{configurable:!0,writable:!0,value:e})}})});var pg=W.event;function Zw(){}function Qw(){return this.cancelBubble}function e1(){return this.defaultPrevented}W.event=function(i){return pg&&(i=pg(i)),i.persist=Zw,i.isPropagationStopped=Qw,i.isDefaultPrevented=e1,i.nativeEvent=i};var wg,t1={enumerable:!1,configurable:!0,get:function(){return this.class}},mg=W.vnode;W.vnode=function(i){typeof i.type=="string"&&function(e){var t=e.props,r=e.type,n={},s=r.indexOf("-")===-1;for(var o in t){var a=t[o];if(!(o==="value"&&"defaultValue"in t&&a==null||Yw&&o==="children"&&r==="noscript"||o==="class"||o==="className")){var l=o.toLowerCase();o==="defaultValue"&&"value"in t&&t.value==null?o="value":o==="download"&&a===!0?a="":l==="translate"&&a==="no"?a=!1:l[0]==="o"&&l[1]==="n"?l==="ondoubleclick"?o="ondblclick":l!=="onchange"||r!=="input"&&r!=="textarea"||Jw(t.type)?l==="onfocus"?o="onfocusin":l==="onblur"?o="onfocusout":Kw.test(o)&&(o=l):l=o="oninput":s&&Gw.test(o)?o=o.replace(Xw,"-$&").toLowerCase():a===null&&(a=void 0),l==="oninput"&&n[o=l]&&(o="oninputCapture"),n[o]=a}}r=="select"&&n.multiple&&Array.isArray(n.value)&&(n.value=tt(t.children).forEach(function(u){u.props.selected=n.value.indexOf(u.props.value)!=-1})),r=="select"&&n.defaultValue!=null&&(n.value=tt(t.children).forEach(function(u){u.props.selected=n.multiple?n.defaultValue.indexOf(u.props.value)!=-1:n.defaultValue==u.props.value})),t.class&&!t.className?(n.class=t.class,Object.defineProperty(n,"className",t1)):(t.className&&!t.class||t.class&&t.className)&&(n.class=n.className=t.className),e.props=n}(i),i.$$typeof=Ww,mg&&mg(i)};var gg=W.__r;W.__r=function(i){gg&&gg(i),wg=i.__c};var yg=W.diffed;W.diffed=function(i){yg&&yg(i);var e=i.props,t=i.__e;t!=null&&i.type==="textarea"&&"value"in e&&e.value!==t.value&&(t.value=e.value==null?"":e.value),wg=null};function _s(i){return typeof i!="object"||i===null||!("nodeType"in i)?!1:i.nodeType===Node.ELEMENT_NODE}function i1(i,e){return e===void 0&&(e=document),typeof i=="string"?e.querySelector(i):_s(i)?i:null}var Sg=i1;function r1(i){for(var e;i&&!i.dir;)i=i.parentNode;return(e=i)==null?void 0:e.dir}var Fa=r1;var Xt=class{constructor(e,t){this.uppy=e,this.opts=t??{}}getPluginState(){let{plugins:e}=this.uppy.getState();return e?.[this.id]||{}}setPluginState(e){let{plugins:t}=this.uppy.getState();this.uppy.setState({plugins:M(v({},t),{[this.id]:v(v({},t[this.id]),e)})})}setOptions(e){this.opts=v(v({},this.opts),e),this.setPluginState(void 0),this.i18nInit()}i18nInit(){let e=new Ir([this.defaultLocale,this.uppy.locale,this.opts.locale]);this.i18n=e.translate.bind(e),this.i18nArray=e.translateArray.bind(e),this.setPluginState(void 0)}addTarget(e){throw new Error("Extend the addTarget method to add your plugin to another plugin's target")}install(){}uninstall(){}update(e){}afterUpdate(){}};function Eg(i,e){if(!{}.hasOwnProperty.call(i,e))throw new TypeError("attempted to use private field on non-instance");return i}var n1=0;function s1(i){return"__private_"+n1+++"_"+i}function o1(i){let e=null,t;return function(){for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return t=n,e||(e=Promise.resolve().then(()=>(e=null,i(...t)))),e}}var bs=s1("updateUI"),Wu=class i extends Xt{constructor(){super(...arguments),Object.defineProperty(this,bs,{writable:!0,value:void 0})}getTargetPlugin(e){let t;if(typeof e?.addTarget=="function")t=e,t instanceof i||console.warn(new Error("The provided plugin is not an instance of UIPlugin. This is an indication of a bug with the way Uppy is bundled.",{cause:{targetPlugin:t,UIPlugin:i}}));else if(typeof e=="function"){let r=e;this.uppy.iteratePlugins(n=>{n instanceof r&&(t=n)})}return t}mount(e,t){let r=t.id,n=Sg(e);if(n){this.isTargetDOMEl=!0;let a=document.createElement("div");return a.classList.add("uppy-Root"),Eg(this,bs)[bs]=o1(l=>{this.uppy.getPlugin(this.id)&&(qu(this.render(l,a),a),this.afterUpdate())}),this.uppy.log(`Installing ${r} to a DOM element '${e}'`),this.opts.replaceTargetContent&&(n.innerHTML=""),qu(this.render(this.uppy.getState(),a),a),this.el=a,n.appendChild(a),a.dir=this.opts.direction||Fa(a)||"ltr",this.onMount(),this.el}let s=this.getTargetPlugin(e);if(s)return this.uppy.log(`Installing ${r} to ${s.id}`),this.parent=s,this.el=s.addTarget(t),this.onMount(),this.el;this.uppy.log(`Not installing ${r}`);let o=`Invalid target option given to ${r}.`;throw typeof e=="function"?o+=" The given target is not a Plugin class. Please check that you're not specifying a React Component instead of a plugin. If you are using @uppy/* packages directly, make sure you have only 1 version of @uppy/core installed: run `npm ls @uppy/core` on the command line and verify that all the versions match and are deduped correctly.":o+="If you meant to target an HTML element, please make sure that the element exists. Check that the <script> tag initializing Uppy is right before the closing </body> tag at the end of the page. (see https://github.com/transloadit/uppy/issues/1042)\n\nIf you meant to target a plugin, please confirm that your `import` statements or `require` calls are correct.",new Error(o)}render(e,t){throw new Error("Extend the render method to add your plugin to a DOM element")}update(e){if(this.el!=null){var t,r;(t=(r=Eg(this,bs))[bs])==null||t.call(r,e)}}unmount(){if(this.isTargetDOMEl){var e;(e=this.el)==null||e.remove()}this.onUnmount()}onMount(){}onUnmount(){}},Yt=Wu;function Lr(i){"@babel/helpers - typeof";return Lr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lr(i)}function Cg(i,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,l1(r.key),r)}}function a1(i,e,t){return e&&Cg(i.prototype,e),t&&Cg(i,t),Object.defineProperty(i,"prototype",{writable:!1}),i}function l1(i){var e=u1(i,"string");return Lr(e)=="symbol"?e:e+""}function u1(i,e){if(Lr(i)!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var r=t.call(i,e||"default");if(Lr(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function c1(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function d1(i,e,t){return e=Ss(e),h1(i,Ku()?Reflect.construct(e,t||[],Ss(i).constructor):e.apply(i,t))}function h1(i,e){if(e&&(Lr(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return f1(i)}function f1(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function p1(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),e&&ws(i,e)}function Gu(i){var e=typeof Map=="function"?new Map:void 0;return Gu=function(r){if(r===null||!g1(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(r))return e.get(r);e.set(r,n)}function n(){return m1(r,arguments,Ss(this).constructor)}return n.prototype=Object.create(r.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),ws(n,r)},Gu(i)}function m1(i,e,t){if(Ku())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var n=new(i.bind.apply(i,r));return t&&ws(n,t.prototype),n}function Ku(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ku=function(){return!!i})()}function g1(i){try{return Function.toString.call(i).indexOf("[native code]")!==-1}catch{return typeof i=="function"}}function ws(i,e){return ws=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},ws(i,e)}function Ss(i){return Ss=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ss(i)}var y1=function(i){function e(t){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;if(c1(this,e),r=d1(this,e,[t]),r.originalRequest=s,r.originalResponse=o,r.causingError=n,n!=null&&(t+=", caused by ".concat(n.toString())),s!=null){var a=s.getHeader("X-Request-ID")||"n/a",l=s.getMethod(),u=s.getURL(),c=o?o.getStatus():"n/a",d=o?o.getBody()||"":"n/a";t+=", originated from request (method: ".concat(l,", url: ").concat(u,", response code: ").concat(c,", response text: ").concat(d,", request id: ").concat(a,")")}return r.message=t,r}return p1(e,i),a1(e)}(Gu(Error)),Nr=y1;var v1=!1;function hi(i){v1&&console.log(i)}function Es(i){"@babel/helpers - typeof";return Es=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Es(i)}function _1(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function xg(i,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,w1(r.key),r)}}function b1(i,e,t){return e&&xg(i.prototype,e),t&&xg(i,t),Object.defineProperty(i,"prototype",{writable:!1}),i}function w1(i){var e=S1(i,"string");return Es(e)=="symbol"?e:e+""}function S1(i,e){if(Es(i)!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var r=t.call(i,e||"default");if(Es(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}var kg=function(){function i(){_1(this,i)}return b1(i,[{key:"listAllUploads",value:function(){return Promise.resolve([])}},{key:"findUploadsByFingerprint",value:function(t){return Promise.resolve([])}},{key:"removeUpload",value:function(t){return Promise.resolve()}},{key:"addUpload",value:function(t,r){return Promise.resolve(null)}}])}();var Rg="3.7.7",E1=Rg,Br=typeof Buffer=="function",Pg=typeof TextDecoder=="function"?new TextDecoder:void 0,Tg=typeof TextEncoder=="function"?new TextEncoder:void 0,C1="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Cs=Array.prototype.slice.call(C1),Aa=(i=>{let e={};return i.forEach((t,r)=>e[t]=r),e})(Cs),x1=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,Le=String.fromCharCode.bind(String),Og=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):i=>new Uint8Array(Array.prototype.slice.call(i,0)),Ig=i=>i.replace(/=/g,"").replace(/[+\/]/g,e=>e=="+"?"-":"_"),Dg=i=>i.replace(/[^A-Za-z0-9\+\/]/g,""),Ug=i=>{let e,t,r,n,s="",o=i.length%3;for(let a=0;a<i.length;){if((t=i.charCodeAt(a++))>255||(r=i.charCodeAt(a++))>255||(n=i.charCodeAt(a++))>255)throw new TypeError("invalid character found");e=t<<16|r<<8|n,s+=Cs[e>>18&63]+Cs[e>>12&63]+Cs[e>>6&63]+Cs[e&63]}return o?s.slice(0,o-3)+"===".substring(o):s},Ju=typeof btoa=="function"?i=>btoa(i):Br?i=>Buffer.from(i,"binary").toString("base64"):Ug,Xu=Br?i=>Buffer.from(i).toString("base64"):i=>{let t=[];for(let r=0,n=i.length;r<n;r+=4096)t.push(Le.apply(null,i.subarray(r,r+4096)));return Ju(t.join(""))},Ra=(i,e=!1)=>e?Ig(Xu(i)):Xu(i),k1=i=>{if(i.length<2){var e=i.charCodeAt(0);return e<128?i:e<2048?Le(192|e>>>6)+Le(128|e&63):Le(224|e>>>12&15)+Le(128|e>>>6&63)+Le(128|e&63)}else{var e=65536+(i.charCodeAt(0)-55296)*1024+(i.charCodeAt(1)-56320);return Le(240|e>>>18&7)+Le(128|e>>>12&63)+Le(128|e>>>6&63)+Le(128|e&63)}},P1=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,Lg=i=>i.replace(P1,k1),Fg=Br?i=>Buffer.from(i,"utf8").toString("base64"):Tg?i=>Xu(Tg.encode(i)):i=>Ju(Lg(i)),Mr=(i,e=!1)=>e?Ig(Fg(i)):Fg(i),Ag=i=>Mr(i,!0),T1=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,O1=i=>{switch(i.length){case 4:var e=(7&i.charCodeAt(0))<<18|(63&i.charCodeAt(1))<<12|(63&i.charCodeAt(2))<<6|63&i.charCodeAt(3),t=e-65536;return Le((t>>>10)+55296)+Le((t&1023)+56320);case 3:return Le((15&i.charCodeAt(0))<<12|(63&i.charCodeAt(1))<<6|63&i.charCodeAt(2));default:return Le((31&i.charCodeAt(0))<<6|63&i.charCodeAt(1))}},Ng=i=>i.replace(T1,O1),Mg=i=>{if(i=i.replace(/\s+/g,""),!x1.test(i))throw new TypeError("malformed base64.");i+="==".slice(2-(i.length&3));let e,t="",r,n;for(let s=0;s<i.length;)e=Aa[i.charAt(s++)]<<18|Aa[i.charAt(s++)]<<12|(r=Aa[i.charAt(s++)])<<6|(n=Aa[i.charAt(s++)]),t+=r===64?Le(e>>16&255):n===64?Le(e>>16&255,e>>8&255):Le(e>>16&255,e>>8&255,e&255);return t},Zu=typeof atob=="function"?i=>atob(Dg(i)):Br?i=>Buffer.from(i,"base64").toString("binary"):Mg,Bg=Br?i=>Og(Buffer.from(i,"base64")):i=>Og(Zu(i).split("").map(e=>e.charCodeAt(0))),jg=i=>Bg(zg(i)),F1=Br?i=>Buffer.from(i,"base64").toString("utf8"):Pg?i=>Pg.decode(Bg(i)):i=>Ng(Zu(i)),zg=i=>Dg(i.replace(/[-_]/g,e=>e=="-"?"+":"/")),Yu=i=>F1(zg(i)),A1=i=>{if(typeof i!="string")return!1;let e=i.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(e)||!/[^\s0-9a-zA-Z\-_]/.test(e)},$g=i=>({value:i,enumerable:!1,writable:!0,configurable:!0}),Hg=function(){let i=(e,t)=>Object.defineProperty(String.prototype,e,$g(t));i("fromBase64",function(){return Yu(this)}),i("toBase64",function(e){return Mr(this,e)}),i("toBase64URI",function(){return Mr(this,!0)}),i("toBase64URL",function(){return Mr(this,!0)}),i("toUint8Array",function(){return jg(this)})},Vg=function(){let i=(e,t)=>Object.defineProperty(Uint8Array.prototype,e,$g(t));i("toBase64",function(e){return Ra(this,e)}),i("toBase64URI",function(){return Ra(this,!0)}),i("toBase64URL",function(){return Ra(this,!0)})},R1=()=>{Hg(),Vg()},qg={version:Rg,VERSION:E1,atob:Zu,atobPolyfill:Mg,btoa:Ju,btoaPolyfill:Ug,fromBase64:Yu,toBase64:Mr,encode:Mr,encodeURI:Ag,encodeURL:Ag,utob:Lg,btou:Ng,decode:Yu,isValid:A1,fromUint8Array:Ra,toUint8Array:jg,extendString:Hg,extendUint8Array:Vg,extendBuiltins:R1};var yy=se(ny());function ic(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(i){var e=Math.random()*16|0,t=i==="x"?e:e&3|8;return t.toString(16)})}function rc(){"use strict";rc=function(){return e};var i,e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(b,g,_){b[g]=_.value},s=typeof Symbol=="function"?Symbol:{},o=s.iterator||"@@iterator",a=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function u(b,g,_){return Object.defineProperty(b,g,{value:_,enumerable:!0,configurable:!0,writable:!0}),b[g]}try{u({},"")}catch{u=function(_,A,I){return _[A]=I}}function c(b,g,_,A){var I=g&&g.prototype instanceof E?g:E,R=Object.create(I.prototype),x=new rt(A||[]);return n(R,"_invoke",{value:He(b,_,x)}),R}function d(b,g,_){try{return{type:"normal",arg:b.call(g,_)}}catch(A){return{type:"throw",arg:A}}}e.wrap=c;var p="suspendedStart",f="suspendedYield",y="executing",S="completed",k={};function E(){}function F(){}function D(){}var T={};u(T,o,function(){return this});var z=Object.getPrototypeOf,N=z&&z(z(bt([])));N&&N!==t&&r.call(N,o)&&(T=N);var B=D.prototype=E.prototype=Object.create(T);function $(b){["next","throw","return"].forEach(function(g){u(b,g,function(_){return this._invoke(g,_)})})}function J(b,g){function _(I,R,x,w){var C=d(b[I],b,R);if(C.type!=="throw"){var O=C.arg,L=O.value;return L&&Vi(L)=="object"&&r.call(L,"__await")?g.resolve(L.__await).then(function(j){_("next",j,x,w)},function(j){_("throw",j,x,w)}):g.resolve(L).then(function(j){O.value=j,x(O)},function(j){return _("throw",j,x,w)})}w(C.arg)}var A;n(this,"_invoke",{value:function(R,x){function w(){return new g(function(C,O){_(R,x,C,O)})}return A=A?A.then(w,w):w()}})}function He(b,g,_){var A=p;return function(I,R){if(A===y)throw Error("Generator is already running");if(A===S){if(I==="throw")throw R;return{value:i,done:!0}}for(_.method=I,_.arg=R;;){var x=_.delegate;if(x){var w=oe(x,_);if(w){if(w===k)continue;return w}}if(_.method==="next")_.sent=_._sent=_.arg;else if(_.method==="throw"){if(A===p)throw A=S,_.arg;_.dispatchException(_.arg)}else _.method==="return"&&_.abrupt("return",_.arg);A=y;var C=d(b,g,_);if(C.type==="normal"){if(A=_.done?S:f,C.arg===k)continue;return{value:C.arg,done:_.done}}C.type==="throw"&&(A=S,_.method="throw",_.arg=C.arg)}}}function oe(b,g){var _=g.method,A=b.iterator[_];if(A===i)return g.delegate=null,_==="throw"&&b.iterator.return&&(g.method="return",g.arg=i,oe(b,g),g.method==="throw")||_!=="return"&&(g.method="throw",g.arg=new TypeError("The iterator does not provide a '"+_+"' method")),k;var I=d(A,b.iterator,g.arg);if(I.type==="throw")return g.method="throw",g.arg=I.arg,g.delegate=null,k;var R=I.arg;return R?R.done?(g[b.resultName]=R.value,g.next=b.nextLoc,g.method!=="return"&&(g.method="next",g.arg=i),g.delegate=null,k):R:(g.method="throw",g.arg=new TypeError("iterator result is not an object"),g.delegate=null,k)}function ye(b){var g={tryLoc:b[0]};1 in b&&(g.catchLoc=b[1]),2 in b&&(g.finallyLoc=b[2],g.afterLoc=b[3]),this.tryEntries.push(g)}function Oe(b){var g=b.completion||{};g.type="normal",delete g.arg,b.completion=g}function rt(b){this.tryEntries=[{tryLoc:"root"}],b.forEach(ye,this),this.reset(!0)}function bt(b){if(b||b===""){var g=b[o];if(g)return g.call(b);if(typeof b.next=="function")return b;if(!isNaN(b.length)){var _=-1,A=function I(){for(;++_<b.length;)if(r.call(b,_))return I.value=b[_],I.done=!1,I;return I.value=i,I.done=!0,I};return A.next=A}}throw new TypeError(Vi(b)+" is not iterable")}return F.prototype=D,n(B,"constructor",{value:D,configurable:!0}),n(D,"constructor",{value:F,configurable:!0}),F.displayName=u(D,l,"GeneratorFunction"),e.isGeneratorFunction=function(b){var g=typeof b=="function"&&b.constructor;return!!g&&(g===F||(g.displayName||g.name)==="GeneratorFunction")},e.mark=function(b){return Object.setPrototypeOf?Object.setPrototypeOf(b,D):(b.__proto__=D,u(b,l,"GeneratorFunction")),b.prototype=Object.create(B),b},e.awrap=function(b){return{__await:b}},$(J.prototype),u(J.prototype,a,function(){return this}),e.AsyncIterator=J,e.async=function(b,g,_,A,I){I===void 0&&(I=Promise);var R=new J(c(b,g,_,A),I);return e.isGeneratorFunction(g)?R:R.next().then(function(x){return x.done?x.value:R.next()})},$(B),u(B,l,"Generator"),u(B,o,function(){return this}),u(B,"toString",function(){return"[object Generator]"}),e.keys=function(b){var g=Object(b),_=[];for(var A in g)_.push(A);return _.reverse(),function I(){for(;_.length;){var R=_.pop();if(R in g)return I.value=R,I.done=!1,I}return I.done=!0,I}},e.values=bt,rt.prototype={constructor:rt,reset:function(g){if(this.prev=0,this.next=0,this.sent=this._sent=i,this.done=!1,this.delegate=null,this.method="next",this.arg=i,this.tryEntries.forEach(Oe),!g)for(var _ in this)_.charAt(0)==="t"&&r.call(this,_)&&!isNaN(+_.slice(1))&&(this[_]=i)},stop:function(){this.done=!0;var g=this.tryEntries[0].completion;if(g.type==="throw")throw g.arg;return this.rval},dispatchException:function(g){if(this.done)throw g;var _=this;function A(O,L){return x.type="throw",x.arg=g,_.next=O,L&&(_.method="next",_.arg=i),!!L}for(var I=this.tryEntries.length-1;I>=0;--I){var R=this.tryEntries[I],x=R.completion;if(R.tryLoc==="root")return A("end");if(R.tryLoc<=this.prev){var w=r.call(R,"catchLoc"),C=r.call(R,"finallyLoc");if(w&&C){if(this.prev<R.catchLoc)return A(R.catchLoc,!0);if(this.prev<R.finallyLoc)return A(R.finallyLoc)}else if(w){if(this.prev<R.catchLoc)return A(R.catchLoc,!0)}else{if(!C)throw Error("try statement without catch or finally");if(this.prev<R.finallyLoc)return A(R.finallyLoc)}}}},abrupt:function(g,_){for(var A=this.tryEntries.length-1;A>=0;--A){var I=this.tryEntries[A];if(I.tryLoc<=this.prev&&r.call(I,"finallyLoc")&&this.prev<I.finallyLoc){var R=I;break}}R&&(g==="break"||g==="continue")&&R.tryLoc<=_&&_<=R.finallyLoc&&(R=null);var x=R?R.completion:{};return x.type=g,x.arg=_,R?(this.method="next",this.next=R.finallyLoc,k):this.complete(x)},complete:function(g,_){if(g.type==="throw")throw g.arg;return g.type==="break"||g.type==="continue"?this.next=g.arg:g.type==="return"?(this.rval=this.arg=g.arg,this.method="return",this.next="end"):g.type==="normal"&&_&&(this.next=_),k},finish:function(g){for(var _=this.tryEntries.length-1;_>=0;--_){var A=this.tryEntries[_];if(A.finallyLoc===g)return this.complete(A.completion,A.afterLoc),Oe(A),k}},catch:function(g){for(var _=this.tryEntries.length-1;_>=0;--_){var A=this.tryEntries[_];if(A.tryLoc===g){var I=A.completion;if(I.type==="throw"){var R=I.arg;Oe(A)}return R}}throw Error("illegal catch attempt")},delegateYield:function(g,_,A){return this.delegate={iterator:bt(g),resultName:_,nextLoc:A},this.method==="next"&&(this.arg=i),k}},e}function sy(i,e,t,r,n,s,o){try{var a=i[s](o),l=a.value}catch(u){t(u);return}a.done?e(l):Promise.resolve(l).then(r,n)}function V1(i){return function(){var e=this,t=arguments;return new Promise(function(r,n){var s=i.apply(e,t);function o(l){sy(s,r,n,o,a,"next",l)}function a(l){sy(s,r,n,o,a,"throw",l)}o(void 0)})}}function py(i,e){return G1(i)||W1(i,e)||my(i,e)||q1()}function q1(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function W1(i,e){var t=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t!=null){var r,n,s,o,a=[],l=!0,u=!1;try{if(s=(t=t.call(i)).next,e===0){if(Object(t)!==t)return;l=!1}else for(;!(l=(r=s.call(t)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,n=c}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(u)throw n}}return a}}function G1(i){if(Array.isArray(i))return i}function Vi(i){"@babel/helpers - typeof";return Vi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vi(i)}function K1(i,e){var t=typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(!t){if(Array.isArray(i)||(t=my(i))||e&&i&&typeof i.length=="number"){t&&(i=t);var r=0,n=function(){};return{s:n,n:function(){return r>=i.length?{done:!0}:{done:!1,value:i[r++]}},e:function(u){throw u},f:n}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,a;return{s:function(){t=t.call(i)},n:function(){var u=t.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&t.return!=null&&t.return()}finally{if(o)throw a}}}}function my(i,e){if(i){if(typeof i=="string")return oy(i,e);var t=Object.prototype.toString.call(i).slice(8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Array.from(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return oy(i,e)}}function oy(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=i[t];return r}function ay(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(i);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(i,n).enumerable})),t.push.apply(t,r)}return t}function jr(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ay(Object(t),!0).forEach(function(r){X1(i,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):ay(Object(t)).forEach(function(r){Object.defineProperty(i,r,Object.getOwnPropertyDescriptor(t,r))})}return i}function X1(i,e,t){return e=gy(e),e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function Y1(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function ly(i,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,gy(r.key),r)}}function J1(i,e,t){return e&&ly(i.prototype,e),t&&ly(i,t),Object.defineProperty(i,"prototype",{writable:!1}),i}function gy(i){var e=Z1(i,"string");return Vi(e)=="symbol"?e:e+""}function Z1(i,e){if(Vi(i)!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var r=t.call(i,e||"default");if(Vi(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}var Da="tus-v1",Ua="ietf-draft-03",xs="ietf-draft-05",Q1={endpoint:null,uploadUrl:null,metadata:{},metadataForPartialUploads:{},fingerprint:null,uploadSize:null,onProgress:null,onChunkComplete:null,onSuccess:null,onError:null,onUploadUrlAvailable:null,overridePatchMethod:!1,headers:{},addRequestId:!1,onBeforeRequest:null,onAfterResponse:null,onShouldRetry:_y,chunkSize:Number.POSITIVE_INFINITY,retryDelays:[0,1e3,3e3,5e3],parallelUploads:1,parallelUploadBoundaries:null,storeFingerprintForResuming:!0,removeFingerprintOnSuccess:!1,uploadLengthDeferred:!1,uploadDataDuringCreation:!1,urlStorage:null,fileReader:null,httpStack:null,protocol:Da},vy=function(){function i(e,t){Y1(this,i),"resume"in t&&console.log("tus: The `resume` option has been removed in tus-js-client v2. Please use the URL storage API instead."),this.options=t,this.options.chunkSize=Number(this.options.chunkSize),this._urlStorage=this.options.urlStorage,this.file=e,this.url=null,this._req=null,this._fingerprint=null,this._urlStorageKey=null,this._offset=null,this._aborted=!1,this._size=null,this._source=null,this._retryAttempt=0,this._retryTimeout=null,this._offsetBeforeRetry=0,this._parallelUploads=null,this._parallelUploadUrls=null}return J1(i,[{key:"findPreviousUploads",value:function(){var t=this;return this.options.fingerprint(this.file,this.options).then(function(r){return t._urlStorage.findUploadsByFingerprint(r)})}},{key:"resumeFromPreviousUpload",value:function(t){this.url=t.uploadUrl||null,this._parallelUploadUrls=t.parallelUploadUrls||null,this._urlStorageKey=t.urlStorageKey}},{key:"start",value:function(){var t=this,r=this.file;if(!r){this._emitError(new Error("tus: no file or stream to upload provided"));return}if(![Da,Ua,xs].includes(this.options.protocol)){this._emitError(new Error("tus: unsupported protocol ".concat(this.options.protocol)));return}if(!this.options.endpoint&&!this.options.uploadUrl&&!this.url){this._emitError(new Error("tus: neither an endpoint or an upload URL is provided"));return}var n=this.options.retryDelays;if(n!=null&&Object.prototype.toString.call(n)!=="[object Array]"){this._emitError(new Error("tus: the `retryDelays` option must either be an array or null"));return}if(this.options.parallelUploads>1)for(var s=0,o=["uploadUrl","uploadSize","uploadLengthDeferred"];s<o.length;s++){var a=o[s];if(this.options[a]){this._emitError(new Error("tus: cannot use the ".concat(a," option when parallelUploads is enabled")));return}}if(this.options.parallelUploadBoundaries){if(this.options.parallelUploads<=1){this._emitError(new Error("tus: cannot use the `parallelUploadBoundaries` option when `parallelUploads` is disabled"));return}if(this.options.parallelUploads!==this.options.parallelUploadBoundaries.length){this._emitError(new Error("tus: the `parallelUploadBoundaries` must have the same length as the value of `parallelUploads`"));return}}this.options.fingerprint(r,this.options).then(function(l){return l==null?hi("No fingerprint was calculated meaning that the upload cannot be stored in the URL storage."):hi("Calculated fingerprint: ".concat(l)),t._fingerprint=l,t._source?t._source:t.options.fileReader.openFile(r,t.options.chunkSize)}).then(function(l){if(t._source=l,t.options.uploadLengthDeferred)t._size=null;else if(t.options.uploadSize!=null){if(t._size=Number(t.options.uploadSize),Number.isNaN(t._size)){t._emitError(new Error("tus: cannot convert `uploadSize` option into a number"));return}}else if(t._size=t._source.size,t._size==null){t._emitError(new Error("tus: cannot automatically derive upload's size from input. Specify it manually using the `uploadSize` option or use the `uploadLengthDeferred` option"));return}t.options.parallelUploads>1||t._parallelUploadUrls!=null?t._startParallelUpload():t._startSingleUpload()}).catch(function(l){t._emitError(l)})}},{key:"_startParallelUpload",value:function(){var t,r=this,n=this._size,s=0;this._parallelUploads=[];var o=this._parallelUploadUrls!=null?this._parallelUploadUrls.length:this.options.parallelUploads,a=(t=this.options.parallelUploadBoundaries)!==null&&t!==void 0?t:tS(this._source.size,o);this._parallelUploadUrls&&a.forEach(function(c,d){c.uploadUrl=r._parallelUploadUrls[d]||null}),this._parallelUploadUrls=new Array(a.length);var l=a.map(function(c,d){var p=0;return r._source.slice(c.start,c.end).then(function(f){var y=f.value;return new Promise(function(S,k){var E=jr(jr({},r.options),{},{uploadUrl:c.uploadUrl||null,storeFingerprintForResuming:!1,removeFingerprintOnSuccess:!1,parallelUploads:1,parallelUploadBoundaries:null,metadata:r.options.metadataForPartialUploads,headers:jr(jr({},r.options.headers),{},{"Upload-Concat":"partial"}),onSuccess:S,onError:k,onProgress:function(T){s=s-p+T,p=T,r._emitProgress(s,n)},onUploadUrlAvailable:function(){r._parallelUploadUrls[d]=F.url,r._parallelUploadUrls.filter(function(T){return!!T}).length===a.length&&r._saveUploadInUrlStorage()}}),F=new i(y,E);F.start(),r._parallelUploads.push(F)})})}),u;Promise.all(l).then(function(){u=r._openRequest("POST",r.options.endpoint),u.setHeader("Upload-Concat","final;".concat(r._parallelUploadUrls.join(" ")));var c=uy(r.options.metadata);return c!==""&&u.setHeader("Upload-Metadata",c),r._sendRequest(u,null)}).then(function(c){if(!zr(c.getStatus(),200)){r._emitHttpError(u,c,"tus: unexpected response while creating upload");return}var d=c.getHeader("Location");if(d==null){r._emitHttpError(u,c,"tus: invalid or missing Location header");return}r.url=fy(r.options.endpoint,d),hi("Created upload at ".concat(r.url)),r._emitSuccess(c)}).catch(function(c){r._emitError(c)})}},{key:"_startSingleUpload",value:function(){if(this._aborted=!1,this.url!=null){hi("Resuming upload from previous URL: ".concat(this.url)),this._resumeUpload();return}if(this.options.uploadUrl!=null){hi("Resuming upload from provided URL: ".concat(this.options.uploadUrl)),this.url=this.options.uploadUrl,this._resumeUpload();return}hi("Creating a new upload"),this._createUpload()}},{key:"abort",value:function(t){var r=this;if(this._parallelUploads!=null){var n=K1(this._parallelUploads),s;try{for(n.s();!(s=n.n()).done;){var o=s.value;o.abort(t)}}catch(a){n.e(a)}finally{n.f()}}return this._req!==null&&this._req.abort(),this._aborted=!0,this._retryTimeout!=null&&(clearTimeout(this._retryTimeout),this._retryTimeout=null),!t||this.url==null?Promise.resolve():i.terminate(this.url,this.options).then(function(){return r._removeFromUrlStorage()})}},{key:"_emitHttpError",value:function(t,r,n,s){this._emitError(new Nr(n,s,t,r))}},{key:"_emitError",value:function(t){var r=this;if(!this._aborted){if(this.options.retryDelays!=null){var n=this._offset!=null&&this._offset>this._offsetBeforeRetry;if(n&&(this._retryAttempt=0),hy(t,this._retryAttempt,this.options)){var s=this.options.retryDelays[this._retryAttempt++];this._offsetBeforeRetry=this._offset,this._retryTimeout=setTimeout(function(){r.start()},s);return}}if(typeof this.options.onError=="function")this.options.onError(t);else throw t}}},{key:"_emitSuccess",value:function(t){this.options.removeFingerprintOnSuccess&&this._removeFromUrlStorage(),typeof this.options.onSuccess=="function"&&this.options.onSuccess({lastResponse:t})}},{key:"_emitProgress",value:function(t,r){typeof this.options.onProgress=="function"&&this.options.onProgress(t,r)}},{key:"_emitChunkComplete",value:function(t,r,n){typeof this.options.onChunkComplete=="function"&&this.options.onChunkComplete(t,r,n)}},{key:"_createUpload",value:function(){var t=this;if(!this.options.endpoint){this._emitError(new Error("tus: unable to create upload because no endpoint is provided"));return}var r=this._openRequest("POST",this.options.endpoint);this.options.uploadLengthDeferred?r.setHeader("Upload-Defer-Length","1"):r.setHeader("Upload-Length","".concat(this._size));var n=uy(this.options.metadata);n!==""&&r.setHeader("Upload-Metadata",n);var s;this.options.uploadDataDuringCreation&&!this.options.uploadLengthDeferred?(this._offset=0,s=this._addChunkToRequest(r)):((this.options.protocol===Ua||this.options.protocol===xs)&&r.setHeader("Upload-Complete","?0"),s=this._sendRequest(r,null)),s.then(function(o){if(!zr(o.getStatus(),200)){t._emitHttpError(r,o,"tus: unexpected response while creating upload");return}var a=o.getHeader("Location");if(a==null){t._emitHttpError(r,o,"tus: invalid or missing Location header");return}if(t.url=fy(t.options.endpoint,a),hi("Created upload at ".concat(t.url)),typeof t.options.onUploadUrlAvailable=="function"&&t.options.onUploadUrlAvailable(),t._size===0){t._emitSuccess(o),t._source.close();return}t._saveUploadInUrlStorage().then(function(){t.options.uploadDataDuringCreation?t._handleUploadResponse(r,o):(t._offset=0,t._performUpload())})}).catch(function(o){t._emitHttpError(r,null,"tus: failed to create upload",o)})}},{key:"_resumeUpload",value:function(){var t=this,r=this._openRequest("HEAD",this.url),n=this._sendRequest(r,null);n.then(function(s){var o=s.getStatus();if(!zr(o,200)){if(o===423){t._emitHttpError(r,s,"tus: upload is currently locked; retry later");return}if(zr(o,400)&&t._removeFromUrlStorage(),!t.options.endpoint){t._emitHttpError(r,s,"tus: unable to resume upload (new upload cannot be created without an endpoint)");return}t.url=null,t._createUpload();return}var a=Number.parseInt(s.getHeader("Upload-Offset"),10);if(Number.isNaN(a)){t._emitHttpError(r,s,"tus: invalid or missing offset value");return}var l=Number.parseInt(s.getHeader("Upload-Length"),10);if(Number.isNaN(l)&&!t.options.uploadLengthDeferred&&t.options.protocol===Da){t._emitHttpError(r,s,"tus: invalid or missing length value");return}typeof t.options.onUploadUrlAvailable=="function"&&t.options.onUploadUrlAvailable(),t._saveUploadInUrlStorage().then(function(){if(a===l){t._emitProgress(l,l),t._emitSuccess(s);return}t._offset=a,t._performUpload()})}).catch(function(s){t._emitHttpError(r,null,"tus: failed to resume upload",s)})}},{key:"_performUpload",value:function(){var t=this;if(!this._aborted){var r;this.options.overridePatchMethod?(r=this._openRequest("POST",this.url),r.setHeader("X-HTTP-Method-Override","PATCH")):r=this._openRequest("PATCH",this.url),r.setHeader("Upload-Offset","".concat(this._offset));var n=this._addChunkToRequest(r);n.then(function(s){if(!zr(s.getStatus(),200)){t._emitHttpError(r,s,"tus: unexpected response while uploading chunk");return}t._handleUploadResponse(r,s)}).catch(function(s){t._aborted||t._emitHttpError(r,null,"tus: failed to upload chunk at offset ".concat(t._offset),s)})}}},{key:"_addChunkToRequest",value:function(t){var r=this,n=this._offset,s=this._offset+this.options.chunkSize;return t.setProgressHandler(function(o){r._emitProgress(n+o,r._size)}),this.options.protocol===Da?t.setHeader("Content-Type","application/offset+octet-stream"):this.options.protocol===xs&&t.setHeader("Content-Type","application/partial-upload"),(s===Number.POSITIVE_INFINITY||s>this._size)&&!this.options.uploadLengthDeferred&&(s=this._size),this._source.slice(n,s).then(function(o){var a=o.value,l=o.done,u=a!=null&&a.size?a.size:0;r.options.uploadLengthDeferred&&l&&(r._size=r._offset+u,t.setHeader("Upload-Length","".concat(r._size)));var c=r._offset+u;return!r.options.uploadLengthDeferred&&l&&c!==r._size?Promise.reject(new Error("upload was configured with a size of ".concat(r._size," bytes, but the source is done after ").concat(c," bytes"))):a===null?r._sendRequest(t):((r.options.protocol===Ua||r.options.protocol===xs)&&t.setHeader("Upload-Complete",l?"?1":"?0"),r._emitProgress(r._offset,r._size),r._sendRequest(t,a))})}},{key:"_handleUploadResponse",value:function(t,r){var n=Number.parseInt(r.getHeader("Upload-Offset"),10);if(Number.isNaN(n)){this._emitHttpError(t,r,"tus: invalid or missing offset value");return}if(this._emitProgress(n,this._size),this._emitChunkComplete(n-this._offset,n,this._size),this._offset=n,n===this._size){this._emitSuccess(r),this._source.close();return}this._performUpload()}},{key:"_openRequest",value:function(t,r){var n=cy(t,r,this.options);return this._req=n,n}},{key:"_removeFromUrlStorage",value:function(){var t=this;this._urlStorageKey&&(this._urlStorage.removeUpload(this._urlStorageKey).catch(function(r){t._emitError(r)}),this._urlStorageKey=null)}},{key:"_saveUploadInUrlStorage",value:function(){var t=this;if(!this.options.storeFingerprintForResuming||!this._fingerprint||this._urlStorageKey!==null)return Promise.resolve();var r={size:this._size,metadata:this.options.metadata,creationTime:new Date().toString()};return this._parallelUploads?r.parallelUploadUrls=this._parallelUploadUrls:r.uploadUrl=this.url,this._urlStorage.addUpload(this._fingerprint,r).then(function(n){t._urlStorageKey=n})}},{key:"_sendRequest",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return dy(t,r,this.options)}}],[{key:"terminate",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=cy("DELETE",t,r);return dy(n,null,r).then(function(s){if(s.getStatus()!==204)throw new Nr("tus: unexpected response while terminating upload",null,n,s)}).catch(function(s){if(s instanceof Nr||(s=new Nr("tus: failed to terminate upload",s,n,null)),!hy(s,0,r))throw s;var o=r.retryDelays[0],a=r.retryDelays.slice(1),l=jr(jr({},r),{},{retryDelays:a});return new Promise(function(u){return setTimeout(u,o)}).then(function(){return i.terminate(t,l)})})}}])}();function uy(i){return Object.entries(i).map(function(e){var t=py(e,2),r=t[0],n=t[1];return"".concat(r," ").concat(qg.encode(String(n)))}).join(",")}function zr(i,e){return i>=e&&i<e+100}function cy(i,e,t){var r=t.httpStack.createRequest(i,e);t.protocol===Ua?r.setHeader("Upload-Draft-Interop-Version","5"):t.protocol===xs?r.setHeader("Upload-Draft-Interop-Version","6"):r.setHeader("Tus-Resumable","1.0.0");for(var n=t.headers||{},s=0,o=Object.entries(n);s<o.length;s++){var a=py(o[s],2),l=a[0],u=a[1];r.setHeader(l,u)}if(t.addRequestId){var c=ic();r.setHeader("X-Request-ID",c)}return r}function dy(i,e,t){return nc.apply(this,arguments)}function nc(){return nc=V1(rc().mark(function i(e,t,r){var n;return rc().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(typeof r.onBeforeRequest!="function"){o.next=3;break}return o.next=3,r.onBeforeRequest(e);case 3:return o.next=5,e.send(t);case 5:if(n=o.sent,typeof r.onAfterResponse!="function"){o.next=9;break}return o.next=9,r.onAfterResponse(e,n);case 9:return o.abrupt("return",n);case 10:case"end":return o.stop()}},i)})),nc.apply(this,arguments)}function eS(){var i=!0;return typeof navigator<"u"&&navigator.onLine===!1&&(i=!1),i}function hy(i,e,t){return t.retryDelays==null||e>=t.retryDelays.length||i.originalRequest==null?!1:t&&typeof t.onShouldRetry=="function"?t.onShouldRetry(i,e,t):_y(i)}function _y(i){var e=i.originalResponse?i.originalResponse.getStatus():0;return(!zr(e,400)||e===409||e===423)&&eS()}function fy(i,e){return new yy.default(e,i).toString()}function tS(i,e){for(var t=Math.floor(i/e),r=[],n=0;n<e;n++)r.push({start:t*n,end:t*(n+1)});return r[e-1].end=i,r}vy.defaultOptions=Q1;var La=vy;var iS=function(){return typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative"},Na=iS;function sc(i){return new Promise(function(e,t){var r=new XMLHttpRequest;r.responseType="blob",r.onload=function(){var n=r.response;e(n)},r.onerror=function(n){t(n)},r.open("GET",i),r.send()})}var rS=function(){return typeof window<"u"&&(typeof window.PhoneGap<"u"||typeof window.Cordova<"u"||typeof window.cordova<"u")},by=rS;function oc(i){return new Promise(function(e,t){var r=new FileReader;r.onload=function(){var n=new Uint8Array(r.result);e({value:n})},r.onerror=function(n){t(n)},r.readAsArrayBuffer(i)})}function ks(i){"@babel/helpers - typeof";return ks=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ks(i)}function nS(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function wy(i,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,oS(r.key),r)}}function sS(i,e,t){return e&&wy(i.prototype,e),t&&wy(i,t),Object.defineProperty(i,"prototype",{writable:!1}),i}function oS(i){var e=aS(i,"string");return ks(e)=="symbol"?e:e+""}function aS(i,e){if(ks(i)!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var r=t.call(i,e||"default");if(ks(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}var ac=function(){function i(e){nS(this,i),this._file=e,this.size=e.size}return sS(i,[{key:"slice",value:function(t,r){if(by())return oc(this._file.slice(t,r));var n=this._file.slice(t,r),s=r>=this.size;return Promise.resolve({value:n,done:s})}},{key:"close",value:function(){}}])}();function Ps(i){"@babel/helpers - typeof";return Ps=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ps(i)}function lS(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function Sy(i,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,cS(r.key),r)}}function uS(i,e,t){return e&&Sy(i.prototype,e),t&&Sy(i,t),Object.defineProperty(i,"prototype",{writable:!1}),i}function cS(i){var e=dS(i,"string");return Ps(e)=="symbol"?e:e+""}function dS(i,e){if(Ps(i)!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var r=t.call(i,e||"default");if(Ps(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function Ey(i){return i===void 0?0:i.size!==void 0?i.size:i.length}function hS(i,e){if(i.concat)return i.concat(e);if(i instanceof Blob)return new Blob([i,e],{type:i.type});if(i.set){var t=new i.constructor(i.length+e.length);return t.set(i),t.set(e,i.length),t}throw new Error("Unknown data type")}var Cy=function(){function i(e){lS(this,i),this._buffer=void 0,this._bufferOffset=0,this._reader=e,this._done=!1}return uS(i,[{key:"slice",value:function(t,r){return t<this._bufferOffset?Promise.reject(new Error("Requested data is before the reader's current offset")):this._readUntilEnoughDataOrDone(t,r)}},{key:"_readUntilEnoughDataOrDone",value:function(t,r){var n=this,s=r<=this._bufferOffset+Ey(this._buffer);if(this._done||s){var o=this._getDataFromBuffer(t,r),a=o==null?this._done:!1;return Promise.resolve({value:o,done:a})}return this._reader.read().then(function(l){var u=l.value,c=l.done;return c?n._done=!0:n._buffer===void 0?n._buffer=u:n._buffer=hS(n._buffer,u),n._readUntilEnoughDataOrDone(t,r)})}},{key:"_getDataFromBuffer",value:function(t,r){t>this._bufferOffset&&(this._buffer=this._buffer.slice(t-this._bufferOffset),this._bufferOffset=t);var n=Ey(this._buffer)===0;return this._done&&n?null:this._buffer.slice(0,r-t)}},{key:"close",value:function(){this._reader.cancel&&this._reader.cancel()}}])}();function qi(i){"@babel/helpers - typeof";return qi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qi(i)}function lc(){"use strict";lc=function(){return e};var i,e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(b,g,_){b[g]=_.value},s=typeof Symbol=="function"?Symbol:{},o=s.iterator||"@@iterator",a=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function u(b,g,_){return Object.defineProperty(b,g,{value:_,enumerable:!0,configurable:!0,writable:!0}),b[g]}try{u({},"")}catch{u=function(_,A,I){return _[A]=I}}function c(b,g,_,A){var I=g&&g.prototype instanceof E?g:E,R=Object.create(I.prototype),x=new rt(A||[]);return n(R,"_invoke",{value:He(b,_,x)}),R}function d(b,g,_){try{return{type:"normal",arg:b.call(g,_)}}catch(A){return{type:"throw",arg:A}}}e.wrap=c;var p="suspendedStart",f="suspendedYield",y="executing",S="completed",k={};function E(){}function F(){}function D(){}var T={};u(T,o,function(){return this});var z=Object.getPrototypeOf,N=z&&z(z(bt([])));N&&N!==t&&r.call(N,o)&&(T=N);var B=D.prototype=E.prototype=Object.create(T);function $(b){["next","throw","return"].forEach(function(g){u(b,g,function(_){return this._invoke(g,_)})})}function J(b,g){function _(I,R,x,w){var C=d(b[I],b,R);if(C.type!=="throw"){var O=C.arg,L=O.value;return L&&qi(L)=="object"&&r.call(L,"__await")?g.resolve(L.__await).then(function(j){_("next",j,x,w)},function(j){_("throw",j,x,w)}):g.resolve(L).then(function(j){O.value=j,x(O)},function(j){return _("throw",j,x,w)})}w(C.arg)}var A;n(this,"_invoke",{value:function(R,x){function w(){return new g(function(C,O){_(R,x,C,O)})}return A=A?A.then(w,w):w()}})}function He(b,g,_){var A=p;return function(I,R){if(A===y)throw Error("Generator is already running");if(A===S){if(I==="throw")throw R;return{value:i,done:!0}}for(_.method=I,_.arg=R;;){var x=_.delegate;if(x){var w=oe(x,_);if(w){if(w===k)continue;return w}}if(_.method==="next")_.sent=_._sent=_.arg;else if(_.method==="throw"){if(A===p)throw A=S,_.arg;_.dispatchException(_.arg)}else _.method==="return"&&_.abrupt("return",_.arg);A=y;var C=d(b,g,_);if(C.type==="normal"){if(A=_.done?S:f,C.arg===k)continue;return{value:C.arg,done:_.done}}C.type==="throw"&&(A=S,_.method="throw",_.arg=C.arg)}}}function oe(b,g){var _=g.method,A=b.iterator[_];if(A===i)return g.delegate=null,_==="throw"&&b.iterator.return&&(g.method="return",g.arg=i,oe(b,g),g.method==="throw")||_!=="return"&&(g.method="throw",g.arg=new TypeError("The iterator does not provide a '"+_+"' method")),k;var I=d(A,b.iterator,g.arg);if(I.type==="throw")return g.method="throw",g.arg=I.arg,g.delegate=null,k;var R=I.arg;return R?R.done?(g[b.resultName]=R.value,g.next=b.nextLoc,g.method!=="return"&&(g.method="next",g.arg=i),g.delegate=null,k):R:(g.method="throw",g.arg=new TypeError("iterator result is not an object"),g.delegate=null,k)}function ye(b){var g={tryLoc:b[0]};1 in b&&(g.catchLoc=b[1]),2 in b&&(g.finallyLoc=b[2],g.afterLoc=b[3]),this.tryEntries.push(g)}function Oe(b){var g=b.completion||{};g.type="normal",delete g.arg,b.completion=g}function rt(b){this.tryEntries=[{tryLoc:"root"}],b.forEach(ye,this),this.reset(!0)}function bt(b){if(b||b===""){var g=b[o];if(g)return g.call(b);if(typeof b.next=="function")return b;if(!isNaN(b.length)){var _=-1,A=function I(){for(;++_<b.length;)if(r.call(b,_))return I.value=b[_],I.done=!1,I;return I.value=i,I.done=!0,I};return A.next=A}}throw new TypeError(qi(b)+" is not iterable")}return F.prototype=D,n(B,"constructor",{value:D,configurable:!0}),n(D,"constructor",{value:F,configurable:!0}),F.displayName=u(D,l,"GeneratorFunction"),e.isGeneratorFunction=function(b){var g=typeof b=="function"&&b.constructor;return!!g&&(g===F||(g.displayName||g.name)==="GeneratorFunction")},e.mark=function(b){return Object.setPrototypeOf?Object.setPrototypeOf(b,D):(b.__proto__=D,u(b,l,"GeneratorFunction")),b.prototype=Object.create(B),b},e.awrap=function(b){return{__await:b}},$(J.prototype),u(J.prototype,a,function(){return this}),e.AsyncIterator=J,e.async=function(b,g,_,A,I){I===void 0&&(I=Promise);var R=new J(c(b,g,_,A),I);return e.isGeneratorFunction(g)?R:R.next().then(function(x){return x.done?x.value:R.next()})},$(B),u(B,l,"Generator"),u(B,o,function(){return this}),u(B,"toString",function(){return"[object Generator]"}),e.keys=function(b){var g=Object(b),_=[];for(var A in g)_.push(A);return _.reverse(),function I(){for(;_.length;){var R=_.pop();if(R in g)return I.value=R,I.done=!1,I}return I.done=!0,I}},e.values=bt,rt.prototype={constructor:rt,reset:function(g){if(this.prev=0,this.next=0,this.sent=this._sent=i,this.done=!1,this.delegate=null,this.method="next",this.arg=i,this.tryEntries.forEach(Oe),!g)for(var _ in this)_.charAt(0)==="t"&&r.call(this,_)&&!isNaN(+_.slice(1))&&(this[_]=i)},stop:function(){this.done=!0;var g=this.tryEntries[0].completion;if(g.type==="throw")throw g.arg;return this.rval},dispatchException:function(g){if(this.done)throw g;var _=this;function A(O,L){return x.type="throw",x.arg=g,_.next=O,L&&(_.method="next",_.arg=i),!!L}for(var I=this.tryEntries.length-1;I>=0;--I){var R=this.tryEntries[I],x=R.completion;if(R.tryLoc==="root")return A("end");if(R.tryLoc<=this.prev){var w=r.call(R,"catchLoc"),C=r.call(R,"finallyLoc");if(w&&C){if(this.prev<R.catchLoc)return A(R.catchLoc,!0);if(this.prev<R.finallyLoc)return A(R.finallyLoc)}else if(w){if(this.prev<R.catchLoc)return A(R.catchLoc,!0)}else{if(!C)throw Error("try statement without catch or finally");if(this.prev<R.finallyLoc)return A(R.finallyLoc)}}}},abrupt:function(g,_){for(var A=this.tryEntries.length-1;A>=0;--A){var I=this.tryEntries[A];if(I.tryLoc<=this.prev&&r.call(I,"finallyLoc")&&this.prev<I.finallyLoc){var R=I;break}}R&&(g==="break"||g==="continue")&&R.tryLoc<=_&&_<=R.finallyLoc&&(R=null);var x=R?R.completion:{};return x.type=g,x.arg=_,R?(this.method="next",this.next=R.finallyLoc,k):this.complete(x)},complete:function(g,_){if(g.type==="throw")throw g.arg;return g.type==="break"||g.type==="continue"?this.next=g.arg:g.type==="return"?(this.rval=this.arg=g.arg,this.method="return",this.next="end"):g.type==="normal"&&_&&(this.next=_),k},finish:function(g){for(var _=this.tryEntries.length-1;_>=0;--_){var A=this.tryEntries[_];if(A.finallyLoc===g)return this.complete(A.completion,A.afterLoc),Oe(A),k}},catch:function(g){for(var _=this.tryEntries.length-1;_>=0;--_){var A=this.tryEntries[_];if(A.tryLoc===g){var I=A.completion;if(I.type==="throw"){var R=I.arg;Oe(A)}return R}}throw Error("illegal catch attempt")},delegateYield:function(g,_,A){return this.delegate={iterator:bt(g),resultName:_,nextLoc:A},this.method==="next"&&(this.arg=i),k}},e}function xy(i,e,t,r,n,s,o){try{var a=i[s](o),l=a.value}catch(u){t(u);return}a.done?e(l):Promise.resolve(l).then(r,n)}function fS(i){return function(){var e=this,t=arguments;return new Promise(function(r,n){var s=i.apply(e,t);function o(l){xy(s,r,n,o,a,"next",l)}function a(l){xy(s,r,n,o,a,"throw",l)}o(void 0)})}}function pS(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function ky(i,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,gS(r.key),r)}}function mS(i,e,t){return e&&ky(i.prototype,e),t&&ky(i,t),Object.defineProperty(i,"prototype",{writable:!1}),i}function gS(i){var e=yS(i,"string");return qi(e)=="symbol"?e:e+""}function yS(i,e){if(qi(i)!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var r=t.call(i,e||"default");if(qi(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}var Py=function(){function i(){pS(this,i)}return mS(i,[{key:"openFile",value:function(){var e=fS(lc().mark(function r(n,s){var o;return lc().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!(Na()&&n&&typeof n.uri<"u")){l.next=11;break}return l.prev=1,l.next=4,sc(n.uri);case 4:return o=l.sent,l.abrupt("return",new ac(o));case 8:throw l.prev=8,l.t0=l.catch(1),new Error("tus: cannot fetch `file.uri` as Blob, make sure the uri is correct and accessible. ".concat(l.t0));case 11:if(!(typeof n.slice=="function"&&typeof n.size<"u")){l.next=13;break}return l.abrupt("return",Promise.resolve(new ac(n)));case 13:if(typeof n.read!="function"){l.next=18;break}if(s=Number(s),Number.isFinite(s)){l.next=17;break}return l.abrupt("return",Promise.reject(new Error("cannot create source for stream without a finite value for the `chunkSize` option")));case 17:return l.abrupt("return",Promise.resolve(new Cy(n,s)));case 18:return l.abrupt("return",Promise.reject(new Error("source object may only be an instance of File, Blob, or Reader in this environment")));case 19:case"end":return l.stop()}},r,null,[[1,8]])}));function t(r,n){return e.apply(this,arguments)}return t}()}])}();function uc(i,e){return Na()?Promise.resolve(vS(i,e)):Promise.resolve(["tus-br",i.name,i.type,i.size,i.lastModified,e.endpoint].join("-"))}function vS(i,e){var t=i.exif?_S(JSON.stringify(i.exif)):"noexif";return["tus-rn",i.name||"noname",i.size||"nosize",t,e.endpoint].join("/")}function _S(i){var e=0;if(i.length===0)return e;for(var t=0;t<i.length;t++){var r=i.charCodeAt(t);e=(e<<5)-e+r,e&=e}return e}function Ts(i){"@babel/helpers - typeof";return Ts=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ts(i)}function cc(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function Ty(i,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,bS(r.key),r)}}function dc(i,e,t){return e&&Ty(i.prototype,e),t&&Ty(i,t),Object.defineProperty(i,"prototype",{writable:!1}),i}function bS(i){var e=wS(i,"string");return Ts(e)=="symbol"?e:e+""}function wS(i,e){if(Ts(i)!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var r=t.call(i,e||"default");if(Ts(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}var Oy=function(){function i(){cc(this,i)}return dc(i,[{key:"createRequest",value:function(t,r){return new SS(t,r)}},{key:"getName",value:function(){return"XHRHttpStack"}}])}();var SS=function(){function i(e,t){cc(this,i),this._xhr=new XMLHttpRequest,this._xhr.open(e,t,!0),this._method=e,this._url=t,this._headers={}}return dc(i,[{key:"getMethod",value:function(){return this._method}},{key:"getURL",value:function(){return this._url}},{key:"setHeader",value:function(t,r){this._xhr.setRequestHeader(t,r),this._headers[t]=r}},{key:"getHeader",value:function(t){return this._headers[t]}},{key:"setProgressHandler",value:function(t){"upload"in this._xhr&&(this._xhr.upload.onprogress=function(r){r.lengthComputable&&t(r.loaded)})}},{key:"send",value:function(){var t=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return new Promise(function(n,s){t._xhr.onload=function(){n(new ES(t._xhr))},t._xhr.onerror=function(o){s(o)},t._xhr.send(r)})}},{key:"abort",value:function(){return this._xhr.abort(),Promise.resolve()}},{key:"getUnderlyingObject",value:function(){return this._xhr}}])}(),ES=function(){function i(e){cc(this,i),this._xhr=e}return dc(i,[{key:"getStatus",value:function(){return this._xhr.status}},{key:"getHeader",value:function(t){return this._xhr.getResponseHeader(t)}},{key:"getBody",value:function(){return this._xhr.responseText}},{key:"getUnderlyingObject",value:function(){return this._xhr}}])}();function Os(i){"@babel/helpers - typeof";return Os=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Os(i)}function CS(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function Fy(i,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,kS(r.key),r)}}function xS(i,e,t){return e&&Fy(i.prototype,e),t&&Fy(i,t),Object.defineProperty(i,"prototype",{writable:!1}),i}function kS(i){var e=PS(i,"string");return Os(e)=="symbol"?e:e+""}function PS(i,e){if(Os(i)!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var r=t.call(i,e||"default");if(Os(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}var fc=!1;try{fc="localStorage"in window,Ma="tusSupport",hc=localStorage.getItem(Ma),localStorage.setItem(Ma,hc),hc===null&&localStorage.removeItem(Ma)}catch(i){if(i.code===i.SECURITY_ERR||i.code===i.QUOTA_EXCEEDED_ERR)fc=!1;else throw i}var Ma,hc,Ay=fc,Ry=function(){function i(){CS(this,i)}return xS(i,[{key:"findAllUploads",value:function(){var t=this._findEntries("tus::");return Promise.resolve(t)}},{key:"findUploadsByFingerprint",value:function(t){var r=this._findEntries("tus::".concat(t,"::"));return Promise.resolve(r)}},{key:"removeUpload",value:function(t){return localStorage.removeItem(t),Promise.resolve()}},{key:"addUpload",value:function(t,r){var n=Math.round(Math.random()*1e12),s="tus::".concat(t,"::").concat(n);return localStorage.setItem(s,JSON.stringify(r)),Promise.resolve(s)}},{key:"_findEntries",value:function(t){for(var r=[],n=0;n<localStorage.length;n++){var s=localStorage.key(n);if(s.indexOf(t)===0)try{var o=JSON.parse(localStorage.getItem(s));o.urlStorageKey=s,r.push(o)}catch{}}return r}}])}();function Hr(i){"@babel/helpers - typeof";return Hr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hr(i)}function TS(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function Iy(i,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,Ly(r.key),r)}}function OS(i,e,t){return e&&Iy(i.prototype,e),t&&Iy(i,t),Object.defineProperty(i,"prototype",{writable:!1}),i}function FS(i,e,t){return e=Ba(e),AS(i,Uy()?Reflect.construct(e,t||[],Ba(i).constructor):e.apply(i,t))}function AS(i,e){if(e&&(Hr(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return RS(i)}function RS(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Uy(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Uy=function(){return!!i})()}function Ba(i){return Ba=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ba(i)}function IS(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),e&&pc(i,e)}function pc(i,e){return pc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},pc(i,e)}function Dy(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(i);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(i,n).enumerable})),t.push.apply(t,r)}return t}function $r(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Dy(Object(t),!0).forEach(function(r){DS(i,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):Dy(Object(t)).forEach(function(r){Object.defineProperty(i,r,Object.getOwnPropertyDescriptor(t,r))})}return i}function DS(i,e,t){return e=Ly(e),e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function Ly(i){var e=US(i,"string");return Hr(e)=="symbol"?e:e+""}function US(i,e){if(Hr(i)!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var r=t.call(i,e||"default");if(Hr(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}var ja=$r($r({},La.defaultOptions),{},{httpStack:new Oy,fileReader:new Py,urlStorage:Ay?new Ry:new kg,fingerprint:uc}),Ny=function(i){function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return TS(this,e),r=$r($r({},ja),r),FS(this,e,[t,r])}return IS(e,i),OS(e,null,[{key:"terminate",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return n=$r($r({},ja),n),La.terminate(r,n)}}])}(La),ZA=typeof XMLHttpRequest=="function"&&typeof Blob=="function"&&typeof Blob.prototype.slice=="function";function Jt(i,e){if(!{}.hasOwnProperty.call(i,e))throw new TypeError("attempted to use private field on non-instance");return i}var LS=0;function By(i){return"__private_"+LS+++"_"+i}var We=By("uppy"),Fs=By("events"),za=class{constructor(e){Object.defineProperty(this,We,{writable:!0,value:void 0}),Object.defineProperty(this,Fs,{writable:!0,value:[]}),Jt(this,We)[We]=e}on(e,t){return Jt(this,Fs)[Fs].push([e,t]),Jt(this,We)[We].on(e,t)}remove(){for(let[e,t]of Jt(this,Fs)[Fs].splice(0))Jt(this,We)[We].off(e,t)}onFilePause(e,t){this.on("upload-pause",(r,n)=>{e===r?.id&&t(n)})}onFileRemove(e,t){this.on("file-removed",r=>{e===r.id&&t(r.id)})}onPause(e,t){this.on("upload-pause",(r,n)=>{e===r?.id&&t(n)})}onRetry(e,t){this.on("upload-retry",r=>{e===r?.id&&t()})}onRetryAll(e,t){this.on("retry-all",()=>{Jt(this,We)[We].getFile(e)&&t()})}onPauseAll(e,t){this.on("pause-all",()=>{Jt(this,We)[We].getFile(e)&&t()})}onCancelAll(e,t){var r=this;this.on("cancel-all",function(){Jt(r,We)[We].getFile(e)&&t(...arguments)})}onResumeAll(e,t){this.on("resume-all",()=>{Jt(this,We)[We].getFile(e)&&t()})}};var mc=class extends Error{constructor(e,t){t===void 0&&(t=null),super("This looks like a network error, the endpoint might be blocked by an internet provider or a firewall."),this.cause=e,this.isNetworkError=!0,this.request=t}},jy=mc;function NS(i){return i?i.readyState!==0&&i.readyState!==4||i.status===0:!1}var zy=NS;function H(i,e){if(!{}.hasOwnProperty.call(i,e))throw new TypeError("attempted to use private field on non-instance");return i}var MS=0;function it(i){return"__private_"+MS+++"_"+i}function BS(i){return new Error("Cancelled",{cause:i})}function $y(i){if(i!=null){var e;let t=()=>this.abort(i.reason);i.addEventListener("abort",t,{once:!0});let r=()=>{i.removeEventListener("abort",t)};(e=this.then)==null||e.call(this,r,r)}return this}var ct=it("activeRequests"),Ke=it("queuedHandlers"),ut=it("paused"),Wi=it("pauseTimer"),Ge=it("downLimit"),Gi=it("upperLimit"),Zt=it("rateLimitingTimer"),As=it("call"),Qt=it("queueNext"),vc=it("next"),gc=it("queue"),_c=it("dequeue"),yc=it("resume"),Ki=it("increaseLimit"),Vr=class{constructor(e){Object.defineProperty(this,_c,{value:VS}),Object.defineProperty(this,gc,{value:HS}),Object.defineProperty(this,vc,{value:$S}),Object.defineProperty(this,Qt,{value:zS}),Object.defineProperty(this,As,{value:jS}),Object.defineProperty(this,ct,{writable:!0,value:0}),Object.defineProperty(this,Ke,{writable:!0,value:[]}),Object.defineProperty(this,ut,{writable:!0,value:!1}),Object.defineProperty(this,Wi,{writable:!0,value:void 0}),Object.defineProperty(this,Ge,{writable:!0,value:1}),Object.defineProperty(this,Gi,{writable:!0,value:void 0}),Object.defineProperty(this,Zt,{writable:!0,value:void 0}),Object.defineProperty(this,yc,{writable:!0,value:()=>this.resume()}),Object.defineProperty(this,Ki,{writable:!0,value:()=>{if(H(this,ut)[ut]){H(this,Zt)[Zt]=setTimeout(H(this,Ki)[Ki],0);return}H(this,Ge)[Ge]=this.limit,this.limit=Math.ceil((H(this,Gi)[Gi]+H(this,Ge)[Ge])/2);for(let t=H(this,Ge)[Ge];t<=this.limit;t++)H(this,Qt)[Qt]();H(this,Gi)[Gi]-H(this,Ge)[Ge]>3?H(this,Zt)[Zt]=setTimeout(H(this,Ki)[Ki],2e3):H(this,Ge)[Ge]=Math.floor(H(this,Ge)[Ge]/2)}}),typeof e!="number"||e===0?this.limit=1/0:this.limit=e}run(e,t){return!H(this,ut)[ut]&&H(this,ct)[ct]<this.limit?H(this,As)[As](e):H(this,gc)[gc](e,t)}wrapSyncFunction(e,t){var r=this;return function(){for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];let a=r.run(()=>(e(...s),queueMicrotask(()=>a.done()),()=>{}),t);return{abortOn:$y,abort(){a.abort()}}}}wrapPromiseFunction(e,t){var r=this;return function(){for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];let a,l=new Promise((u,c)=>{a=r.run(()=>{let d,p;try{p=Promise.resolve(e(...s))}catch(f){p=Promise.reject(f)}return p.then(f=>{d?c(d):(a.done(),u(f))},f=>{d?c(d):(a.done(),c(f))}),f=>{d=BS(f)}},t)});return l.abort=u=>{a.abort(u)},l.abortOn=$y,l}}resume(){H(this,ut)[ut]=!1,clearTimeout(H(this,Wi)[Wi]);for(let e=0;e<this.limit;e++)H(this,Qt)[Qt]()}pause(e){e===void 0&&(e=null),H(this,ut)[ut]=!0,clearTimeout(H(this,Wi)[Wi]),e!=null&&(H(this,Wi)[Wi]=setTimeout(H(this,yc)[yc],e))}rateLimit(e){clearTimeout(H(this,Zt)[Zt]),this.pause(e),this.limit>1&&Number.isFinite(this.limit)&&(H(this,Gi)[Gi]=this.limit-1,this.limit=H(this,Ge)[Ge],H(this,Zt)[Zt]=setTimeout(H(this,Ki)[Ki],e))}get isPaused(){return H(this,ut)[ut]}};function jS(i){H(this,ct)[ct]+=1;let e=!1,t;try{t=i()}catch(r){throw H(this,ct)[ct]-=1,r}return{abort:r=>{e||(e=!0,H(this,ct)[ct]-=1,t?.(r),H(this,Qt)[Qt]())},done:()=>{e||(e=!0,H(this,ct)[ct]-=1,H(this,Qt)[Qt]())}}}function zS(){queueMicrotask(()=>H(this,vc)[vc]())}function $S(){if(H(this,ut)[ut]||H(this,ct)[ct]>=this.limit||H(this,Ke)[Ke].length===0)return;let i=H(this,Ke)[Ke].shift();if(i==null)throw new Error("Invariant violation: next is null");let e=H(this,As)[As](i.fn);i.abort=e.abort,i.done=e.done}function HS(i,e){let t={fn:i,priority:e?.priority||0,abort:()=>{H(this,_c)[_c](t)},done:()=>{throw new Error("Cannot mark a queued request as done: this indicates a bug")}},r=H(this,Ke)[Ke].findIndex(n=>t.priority>n.priority);return r===-1?H(this,Ke)[Ke].push(t):H(this,Ke)[Ke].splice(r,0,t),t}function VS(i){let e=H(this,Ke)[Ke].indexOf(i);e!==-1&&H(this,Ke)[Ke].splice(e,1)}var i2=Symbol("__queue");function Rs(i,e){return Object.prototype.hasOwnProperty.call(i,e)}function Hy(i){let e=t=>"error"in t&&!!t.error;return i.filter(t=>!e(t))}function Vy(i){return i.filter(e=>{var t;return!((t=e.progress)!=null&&t.uploadStarted)||!e.isRestored})}function bc(i,e){return i===!0?Object.keys(e):Array.isArray(i)?i:[]}function qS(){return typeof window<"u"&&(typeof window.PhoneGap<"u"||typeof window.Cordova<"u"||typeof window.cordova<"u")}function WS(){return typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative"}function wc(i){return(e,t)=>{if(qS()||WS())return ja.fingerprint(e,t);let r=["tus",i.id,t.endpoint].join("-");return Promise.resolve(r)}}function Xi(i,e){if(!{}.hasOwnProperty.call(i,e))throw new TypeError("attempted to use private field on non-instance");return i}var GS=0;function Ls(i){return"__private_"+GS+++"_"+i}var KS={version:"4.2.2"},qy={endpoint:"",uploadUrl:null,metadata:{},uploadSize:null,onProgress:null,onChunkComplete:null,onSuccess:null,onError:null,overridePatchMethod:!1,headers:{},addRequestId:!1,chunkSize:1/0,retryDelays:[100,1e3,3e3,5e3],parallelUploads:1,removeFingerprintOnSuccess:!1,uploadLengthDeferred:!1,uploadDataDuringCreation:!1},XS={limit:20,retryDelays:qy.retryDelays,withCredentials:!1,allowedMetaFields:!0},Ds=Ls("retryDelayIterator"),Ec=Ls("uploadLocalFile"),Cc=Ls("getCompanionClientArgs"),Sc=Ls("uploadFiles"),Is=Ls("handleUpload"),Us=class extends Xt{constructor(e,t){var r,n;if(super(e,v(v({},XS),t)),Object.defineProperty(this,Sc,{value:ZS}),Object.defineProperty(this,Cc,{value:JS}),Object.defineProperty(this,Ec,{value:YS}),Object.defineProperty(this,Ds,{writable:!0,value:void 0}),Object.defineProperty(this,Is,{writable:!0,value:s=>m(this,null,function*(){if(s.length===0){this.uppy.log("[Tus] No files to upload");return}this.opts.limit===0&&this.uppy.log("[Tus] When uploading multiple files at once, consider setting the `limit` option (to `10` for example), to limit the number of concurrent uploads, which helps prevent memory and network issues: https://uppy.io/docs/tus/#limit-0","warning"),this.uppy.log("[Tus] Uploading...");let o=this.uppy.getFilesByIds(s);yield Xi(this,Sc)[Sc](o)})}),this.type="uploader",this.id=this.opts.id||"Tus",t?.allowedMetaFields===void 0&&"metaFields"in this.opts)throw new Error("The `metaFields` option has been renamed to `allowedMetaFields`.");if("autoRetry"in t)throw new Error("The `autoRetry` option was deprecated and has been removed.");this.requests=(r=this.opts.rateLimitedQueue)!=null?r:new Vr(this.opts.limit),Xi(this,Ds)[Ds]=(n=this.opts.retryDelays)==null?void 0:n.values(),this.uploaders=Object.create(null),this.uploaderEvents=Object.create(null)}resetUploaderReferences(e,t){let r=this.uploaders[e];r&&(r.abort(),t!=null&&t.abort&&r.abort(!0),this.uploaders[e]=null),this.uploaderEvents[e]&&(this.uploaderEvents[e].remove(),this.uploaderEvents[e]=null)}onReceiveUploadUrl(e,t){let r=this.uppy.getFile(e.id);r&&(!r.tus||r.tus.uploadUrl!==t)&&(this.uppy.log("[Tus] Storing upload url"),this.uppy.setFileState(r.id,{tus:M(v({},r.tus),{uploadUrl:t})}))}install(){this.uppy.setState({capabilities:M(v({},this.uppy.getState().capabilities),{resumableUploads:!0})}),this.uppy.addUploader(Xi(this,Is)[Is])}uninstall(){this.uppy.setState({capabilities:M(v({},this.uppy.getState().capabilities),{resumableUploads:!1})}),this.uppy.removeUploader(Xi(this,Is)[Is])}};function YS(i){return this.resetUploaderReferences(i.id),new Promise((e,t)=>{let r,n,s,o=v(v({},this.opts),i.tus||{});typeof o.headers=="function"&&(o.headers=o.headers(i));let k=o,{onShouldRetry:a,onBeforeRequest:l}=k,u=mr(k,["onShouldRetry","onBeforeRequest"]),c=v(v({},qy),u);c.fingerprint=wc(i),c.onBeforeRequest=E=>m(this,null,function*(){let F=E.getUnderlyingObject();F.withCredentials=!!o.withCredentials;let D;if(typeof l=="function"&&(D=l(E,i)),Rs(r,"shouldBeRequeued")){if(!r.shouldBeRequeued)return Promise.reject();let T,z=new Promise(N=>{T=N});r=this.requests.run(()=>(i.isPaused&&r.abort(),T(),()=>{})),yield Promise.all([z,D]);return}return D}),c.onError=E=>{var F;this.uppy.log(E);let D=E.originalRequest!=null?E.originalRequest.getUnderlyingObject():null;zy(D)&&(E=new jy(E,D)),this.resetUploaderReferences(i.id),(F=r)==null||F.abort(),typeof o.onError=="function"&&o.onError(E),t(E)},c.onProgress=(E,F)=>{var D;this.onReceiveUploadUrl(i,s.url),typeof o.onProgress=="function"&&o.onProgress(E,F);let T=this.uppy.getFile(i.id);this.uppy.emit("upload-progress",T,{uploadStarted:(D=T.progress.uploadStarted)!=null?D:0,bytesUploaded:E,bytesTotal:F})},c.onSuccess=E=>{var F;let D={uploadURL:(F=s.url)!=null?F:void 0,status:200,body:{xhr:E.lastResponse.getUnderlyingObject()}};if(this.uppy.emit("upload-success",this.uppy.getFile(i.id),D),this.resetUploaderReferences(i.id),r.done(),s.url){let{name:T}=s.file;this.uppy.log(`Download ${T} from ${s.url}`)}typeof o.onSuccess=="function"&&o.onSuccess(E),e(s)};let d=E=>{var F;let D=E==null||(F=E.originalResponse)==null?void 0:F.getStatus();if(D===429){if(!this.requests.isPaused){var T;let z=(T=Xi(this,Ds)[Ds])==null?void 0:T.next();if(z==null||z.done)return!1;this.requests.rateLimit(z.value)}}else{if(D!=null&&D>=400&&D<500&&D!==409&&D!==423)return!1;typeof navigator<"u"&&navigator.onLine===!1&&(this.requests.isPaused||(this.requests.pause(),window.addEventListener("online",()=>{this.requests.resume()},{once:!0})))}return r.abort(),r={shouldBeRequeued:!0,abort(){this.shouldBeRequeued=!1},done(){throw new Error("Cannot mark a queued request as done: this indicates a bug")},fn(){throw new Error("Cannot run a queued request: this indicates a bug")}},!0};a!=null?c.onShouldRetry=(E,F)=>a(E,F,o,d):c.onShouldRetry=d;let p=(E,F,D)=>{Rs(E,F)&&!Rs(E,D)&&(E[D]=E[F])},f={};bc(o.allowedMetaFields,i.meta).forEach(E=>{f[E]=String(i.meta[E])}),p(f,"type","filetype"),p(f,"name","filename"),c.metadata=f,s=new Ny(i.data,c),this.uploaders[i.id]=s;let S=new za(this.uppy);this.uploaderEvents[i.id]=S,n=()=>(i.isPaused||s.start(),()=>{}),s.findPreviousUploads().then(E=>{let F=E[0];F&&(this.uppy.log(`[Tus] Resuming upload of ${i.id} started at ${F.creationTime}`),s.resumeFromPreviousUpload(F)),r=this.requests.run(n)}),S.onFileRemove(i.id,E=>{r.abort(),this.resetUploaderReferences(i.id,{abort:!!s.url}),e(`upload ${E} was removed`)}),S.onPause(i.id,E=>{r.abort(),E?s.abort():r=this.requests.run(n)}),S.onPauseAll(i.id,()=>{r.abort(),s.abort()}),S.onCancelAll(i.id,()=>{r.abort(),this.resetUploaderReferences(i.id,{abort:!!s.url}),e(`upload ${i.id} was canceled`)}),S.onResumeAll(i.id,()=>{r.abort(),i.error&&s.abort(),r=this.requests.run(n)})}).catch(e=>{throw this.uppy.emit("upload-error",i,e),e})}function JS(i){var e;let t=v({},this.opts);return i.tus&&Object.assign(t,i.tus),typeof t.headers=="function"&&(t.headers=t.headers(i)),M(v({},(e=i.remote)==null?void 0:e.body),{endpoint:t.endpoint,uploadUrl:t.uploadUrl,protocol:"tus",size:i.data.size,headers:t.headers,metadata:i.meta})}function ZS(i){return m(this,null,function*(){let e=Hy(i),t=Vy(e);this.uppy.emit("upload-start",t),yield Promise.allSettled(e.map(r=>{if(r.isRemote){let n=()=>this.requests,s=new AbortController,o=l=>{l.id===r.id&&s.abort()};this.uppy.on("file-removed",o);let a=this.uppy.getRequestClientForFile(r).uploadRemoteFile(r,Xi(this,Cc)[Cc](r),{signal:s.signal,getQueue:n});return this.requests.wrapSyncFunction(()=>{this.uppy.off("file-removed",o)},{priority:-1})(),a}return Xi(this,Ec)[Ec](r)}))})}Us.VERSION=KS.version;function $a(i,e,t,r){return t===0||i===e?i:r===0?e:i+(e-i)*2**(-r/t)}var dt={STATE_ERROR:"error",STATE_WAITING:"waiting",STATE_PREPROCESSING:"preprocessing",STATE_UPLOADING:"uploading",STATE_POSTPROCESSING:"postprocessing",STATE_COMPLETE:"complete"};var Ac=se(Xe(),1);function Ns(i){let e=[],t="indeterminate",r;for(let{progress:s}of Object.values(i)){let{preprocess:o,postprocess:a}=s;r==null&&(o||a)&&({mode:t,message:r}=o||a),o?.mode==="determinate"&&e.push(o.value),a?.mode==="determinate"&&e.push(a.value)}let n=e.reduce((s,o)=>s+o/e.length,0);return{mode:t,message:r,value:n}}var Tc=se(Xe(),1),Pc=se(ts(),1);function xc(i){let e=Math.floor(i/3600)%24,t=Math.floor(i/60)%60,r=Math.floor(i%60);return{hours:e,minutes:t,seconds:r}}function kc(i){let e=xc(i),t=e.hours===0?"":`${e.hours}h`,r=e.minutes===0?"":`${e.hours===0?e.minutes:` ${e.minutes.toString(10).padStart(2,"0")}`}m`,n=e.hours!==0?"":`${e.minutes===0?e.seconds:` ${e.seconds.toString(10).padStart(2,"0")}`}s`;return`${t}${r}${n}`}var QS="\xB7",Wy=()=>` ${QS} `;function Gy(i){let{newFiles:e,isUploadStarted:t,recoveredState:r,i18n:n,uploadState:s,isSomeGhost:o,startUpload:a}=i,l=(0,Tc.default)("uppy-u-reset","uppy-c-btn","uppy-StatusBar-actionBtn","uppy-StatusBar-actionBtn--upload",{"uppy-c-btn-primary":s===dt.STATE_WAITING},{"uppy-StatusBar-actionBtn--disabled":o}),u=e&&t&&!r?n("uploadXNewFiles",{smart_count:e}):n("uploadXFiles",{smart_count:e});return h("button",{type:"button",className:l,"aria-label":n("uploadXFiles",{smart_count:e}),onClick:a,disabled:o,"data-uppy-super-focusable":!0},u)}function Ky(i){let{i18n:e,uppy:t}=i;return h("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-StatusBar-actionBtn uppy-StatusBar-actionBtn--retry","aria-label":e("retryUpload"),onClick:()=>t.retryAll().catch(()=>{}),"data-uppy-super-focusable":!0,"data-cy":"retry"},h("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"8",height:"10",viewBox:"0 0 8 10"},h("path",{d:"M4 2.408a2.75 2.75 0 1 0 2.75 2.75.626.626 0 0 1 1.25.018v.023a4 4 0 1 1-4-4.041V.25a.25.25 0 0 1 .389-.208l2.299 1.533a.25.25 0 0 1 0 .416l-2.3 1.533A.25.25 0 0 1 4 3.316v-.908z"})),e("retry"))}function Xy(i){let{i18n:e,uppy:t}=i;return h("button",{type:"button",className:"uppy-u-reset uppy-StatusBar-actionCircleBtn",title:e("cancel"),"aria-label":e("cancel"),onClick:()=>t.cancelAll(),"data-cy":"cancel","data-uppy-super-focusable":!0},h("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"16",height:"16",viewBox:"0 0 16 16"},h("g",{fill:"none",fillRule:"evenodd"},h("circle",{fill:"#888",cx:"8",cy:"8",r:"8"}),h("path",{fill:"#FFF",d:"M9.283 8l2.567 2.567-1.283 1.283L8 9.283 5.433 11.85 4.15 10.567 6.717 8 4.15 5.433 5.433 4.15 8 6.717l2.567-2.567 1.283 1.283z"}))))}function Yy(i){let{isAllPaused:e,i18n:t,isAllComplete:r,resumableUploads:n,uppy:s}=i,o=t(e?"resume":"pause");function a(){if(!r){if(!n){s.cancelAll();return}if(e){s.resumeAll();return}s.pauseAll()}}return h("button",{title:o,"aria-label":o,className:"uppy-u-reset uppy-StatusBar-actionCircleBtn",type:"button",onClick:a,"data-cy":"togglePauseResume","data-uppy-super-focusable":!0},h("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"16",height:"16",viewBox:"0 0 16 16"},h("g",{fill:"none",fillRule:"evenodd"},h("circle",{fill:"#888",cx:"8",cy:"8",r:"8"}),h("path",{fill:"#FFF",d:e?"M6 4.25L11.5 8 6 11.75z":"M5 4.5h2v7H5v-7zm4 0h2v7H9v-7z"}))))}function Jy(i){let{i18n:e,doneButtonHandler:t}=i;return h("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-StatusBar-actionBtn uppy-StatusBar-actionBtn--done",onClick:t,"data-uppy-super-focusable":!0},e("done"))}function Zy(){return h("svg",{className:"uppy-StatusBar-spinner","aria-hidden":"true",focusable:"false",width:"14",height:"14"},h("path",{d:"M13.983 6.547c-.12-2.509-1.64-4.893-3.939-5.936-2.48-1.127-5.488-.656-7.556 1.094C.524 3.367-.398 6.048.162 8.562c.556 2.495 2.46 4.52 4.94 5.183 2.932.784 5.61-.602 7.256-3.015-1.493 1.993-3.745 3.309-6.298 2.868-2.514-.434-4.578-2.349-5.153-4.84a6.226 6.226 0 0 1 2.98-6.778C6.34.586 9.74 1.1 11.373 3.493c.407.596.693 1.282.842 1.988.127.598.073 1.197.161 1.794.078.525.543 1.257 1.15.864.525-.341.49-1.05.456-1.592-.007-.15.02.3 0 0",fillRule:"evenodd"}))}function Qy(i){let{progress:e}=i,{value:t,mode:r,message:n}=e;return h("div",{className:"uppy-StatusBar-content"},h(Zy,null),r==="determinate"?`${Math.round(t*100)}% \xB7 `:"",n)}function eE(i){let{numUploads:e,complete:t,totalUploadedSize:r,totalSize:n,totalETA:s,i18n:o}=i,a=e>1,l=(0,Pc.default)(r);return h("div",{className:"uppy-StatusBar-statusSecondary"},a&&o("filesUploadedOfTotal",{complete:t,smart_count:e}),h("span",{className:"uppy-StatusBar-additionalInfo"},a&&Wy(),n!=null?o("dataUploadedOfTotal",{complete:l,total:(0,Pc.default)(n)}):o("dataUploadedOfUnknown",{complete:l}),Wy(),s!=null&&o("xTimeLeft",{time:kc(s)})))}function ev(i){let{i18n:e,complete:t,numUploads:r}=i;return h("div",{className:"uppy-StatusBar-statusSecondary"},e("filesUploadedOfTotal",{complete:t,smart_count:r}))}function tE(i){let{i18n:e,newFiles:t,startUpload:r}=i,n=(0,Tc.default)("uppy-u-reset","uppy-c-btn","uppy-StatusBar-actionBtn","uppy-StatusBar-actionBtn--uploadNewlyAdded");return h("div",{className:"uppy-StatusBar-statusSecondary"},h("div",{className:"uppy-StatusBar-statusSecondaryHint"},e("xMoreFilesAdded",{smart_count:t})),h("button",{type:"button",className:n,"aria-label":e("uploadXFiles",{smart_count:t}),onClick:r},e("upload")))}function tv(i){let{i18n:e,supportsUploadProgress:t,totalProgress:r,showProgressDetails:n,isUploadStarted:s,isAllComplete:o,isAllPaused:a,newFiles:l,numUploads:u,complete:c,totalUploadedSize:d,totalSize:p,totalETA:f,startUpload:y}=i,S=l&&s;if(!s||o)return null;let k=e(a?"paused":"uploading");function E(){return!a&&!S&&n?t?h(eE,{numUploads:u,complete:c,totalUploadedSize:d,totalSize:p,totalETA:f,i18n:e}):h(ev,{i18n:e,complete:c,numUploads:u}):null}return h("div",{className:"uppy-StatusBar-content","aria-label":k,title:k},a?null:h(Zy,null),h("div",{className:"uppy-StatusBar-status"},h("div",{className:"uppy-StatusBar-statusPrimary"},t&&r!==0?`${k}: ${r}%`:k),E(),S?h(tE,{i18n:e,newFiles:l,startUpload:y}):null))}function iv(i){let{i18n:e}=i;return h("div",{className:"uppy-StatusBar-content",role:"status",title:e("complete")},h("div",{className:"uppy-StatusBar-status"},h("div",{className:"uppy-StatusBar-statusPrimary"},h("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-StatusBar-statusIndicator uppy-c-icon",width:"15",height:"11",viewBox:"0 0 15 11"},h("path",{d:"M.414 5.843L1.627 4.63l3.472 3.472L13.202 0l1.212 1.213L5.1 10.528z"})),e("complete"))))}function rv(i){let{error:e,i18n:t,complete:r,numUploads:n}=i;function s(){let o=`${t("uploadFailed")} 

 ${e}`;alert(o)}return h("div",{className:"uppy-StatusBar-content",title:t("uploadFailed")},h("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-StatusBar-statusIndicator uppy-c-icon",width:"11",height:"11",viewBox:"0 0 11 11"},h("path",{d:"M4.278 5.5L0 1.222 1.222 0 5.5 4.278 9.778 0 11 1.222 6.722 5.5 11 9.778 9.778 11 5.5 6.722 1.222 11 0 9.778z"})),h("div",{className:"uppy-StatusBar-status"},h("div",{className:"uppy-StatusBar-statusPrimary"},t("uploadFailed"),h("button",{className:"uppy-u-reset uppy-StatusBar-details","aria-label":t("showErrorDetails"),"data-microtip-position":"top-right","data-microtip-size":"medium",onClick:s,type:"button"},"?")),h(ev,{i18n:t,complete:r,numUploads:n})))}var{STATE_ERROR:nv,STATE_WAITING:iE,STATE_PREPROCESSING:Oc,STATE_UPLOADING:Va,STATE_POSTPROCESSING:Fc,STATE_COMPLETE:qa}=dt;function Rc(i){let{newFiles:e,allowNewUpload:t,isUploadInProgress:r,isAllPaused:n,resumableUploads:s,error:o,hideUploadButton:a=void 0,hidePauseResumeButton:l=!1,hideCancelButton:u=!1,hideRetryButton:c=!1,recoveredState:d,uploadState:p,totalProgress:f,files:y,supportsUploadProgress:S,hideAfterFinish:k=!1,isSomeGhost:E,doneButtonHandler:F=void 0,isUploadStarted:D,i18n:T,startUpload:z,uppy:N,isAllComplete:B,showProgressDetails:$=void 0,numUploads:J,complete:He,totalSize:oe,totalETA:ye,totalUploadedSize:Oe}=i;function rt(){switch(p){case Fc:case Oc:{let Z=Ns(y);return Z.mode==="determinate"?Z.value*100:f}case nv:return null;case Va:return S?f:null;default:return f}}function bt(){switch(p){case Fc:case Oc:{let{mode:Z}=Ns(y);return Z==="indeterminate"}case Va:return!S;default:return!1}}let b=rt(),g=b??100,_=!o&&e&&(!r&&!n||d)&&t&&!a,A=!u&&p!==iE&&p!==qa,I=s&&!l&&p===Va,R=o&&!B&&!c,x=F&&p===qa,w=(0,Ac.default)("uppy-StatusBar-progress",{"is-indeterminate":bt()}),C=(0,Ac.default)("uppy-StatusBar",`is-${p}`,{"has-ghosts":E}),O=(()=>{switch(p){case Oc:case Fc:return h(Qy,{progress:Ns(y)});case qa:return h(iv,{i18n:T});case nv:return h(rv,{error:o,i18n:T,numUploads:J,complete:He});case Va:return h(tv,{i18n:T,supportsUploadProgress:S,totalProgress:f,showProgressDetails:$,isUploadStarted:D,isAllComplete:B,isAllPaused:n,newFiles:e,numUploads:J,complete:He,totalUploadedSize:Oe,totalSize:oe,totalETA:ye,startUpload:z});default:return null}})();return!(_||R||I||A||x)&&!O||p===qa&&k?null:h("div",{className:C},h("div",{className:w,style:{width:`${g}%`},role:"progressbar","aria-label":`${g}%`,"aria-valuetext":`${g}%`,"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":b}),O,h("div",{className:"uppy-StatusBar-actions"},_?h(Gy,{newFiles:e,isUploadStarted:D,recoveredState:d,i18n:T,isSomeGhost:E,startUpload:z,uploadState:p}):null,R?h(Ky,{i18n:T,uppy:N}):null,I?h(Yy,{isAllPaused:n,i18n:T,isAllComplete:B,resumableUploads:s,uppy:N}):null,A?h(Xy,{i18n:T,uppy:N}):null,x?h(Jy,{i18n:T,doneButtonHandler:F}):null))}var sv={strings:{uploading:"Uploading",complete:"Complete",uploadFailed:"Upload failed",paused:"Paused",retry:"Retry",cancel:"Cancel",pause:"Pause",resume:"Resume",done:"Done",filesUploadedOfTotal:{0:"%{complete} of %{smart_count} file uploaded",1:"%{complete} of %{smart_count} files uploaded"},dataUploadedOfTotal:"%{complete} of %{total}",dataUploadedOfUnknown:"%{complete} of unknown",xTimeLeft:"%{time} left",uploadXFiles:{0:"Upload %{smart_count} file",1:"Upload %{smart_count} files"},uploadXNewFiles:{0:"Upload +%{smart_count} file",1:"Upload +%{smart_count} files"},upload:"Upload",retryUpload:"Retry upload",xMoreFilesAdded:{0:"%{smart_count} more file added",1:"%{smart_count} more files added"},showErrorDetails:"Show error details"}};function ce(i,e){if(!{}.hasOwnProperty.call(i,e))throw new TypeError("attempted to use private field on non-instance");return i}var rE=0;function Wr(i){return"__private_"+rE+++"_"+i}var nE={version:"4.1.3"},sE=2e3,oE=2e3;function aE(i,e,t,r){if(i)return dt.STATE_ERROR;if(e)return dt.STATE_COMPLETE;if(t)return dt.STATE_WAITING;let n=dt.STATE_WAITING,s=Object.keys(r);for(let o=0;o<s.length;o++){let{progress:a}=r[s[o]];if(a.uploadStarted&&!a.uploadComplete)return dt.STATE_UPLOADING;a.preprocess&&(n=dt.STATE_PREPROCESSING),a.postprocess&&n!==dt.STATE_PREPROCESSING&&(n=dt.STATE_POSTPROCESSING)}return n}var lE={hideUploadButton:!1,hideRetryButton:!1,hidePauseResumeButton:!1,hideCancelButton:!1,showProgressDetails:!1,hideAfterFinish:!0,doneButtonHandler:null},_t=Wr("lastUpdateTime"),Ct=Wr("previousUploadedBytes"),ei=Wr("previousSpeed"),ht=Wr("previousETA"),Ic=Wr("computeSmoothETA"),Ms=Wr("onUploadStart"),qr=class extends Yt{constructor(e,t){super(e,v(v({},lE),t)),Object.defineProperty(this,Ic,{value:uE}),Object.defineProperty(this,_t,{writable:!0,value:void 0}),Object.defineProperty(this,Ct,{writable:!0,value:void 0}),Object.defineProperty(this,ei,{writable:!0,value:void 0}),Object.defineProperty(this,ht,{writable:!0,value:void 0}),this.startUpload=()=>this.uppy.upload().catch(()=>{}),Object.defineProperty(this,Ms,{writable:!0,value:()=>{let{recoveredState:r}=this.uppy.getState();if(ce(this,ei)[ei]=null,ce(this,ht)[ht]=null,r){ce(this,Ct)[Ct]=Object.values(r.files).reduce((n,s)=>{let{progress:o}=s;return n+o.bytesUploaded},0),this.uppy.emit("restore-confirmed");return}ce(this,_t)[_t]=performance.now(),ce(this,Ct)[Ct]=0}}),this.id=this.opts.id||"StatusBar",this.title="StatusBar",this.type="progressindicator",this.defaultLocale=sv,this.i18nInit(),this.render=this.render.bind(this),this.install=this.install.bind(this)}render(e){let{capabilities:t,files:r,allowNewUpload:n,totalProgress:s,error:o,recoveredState:a}=e,{newFiles:l,startedFiles:u,completeFiles:c,isUploadStarted:d,isAllComplete:p,isAllPaused:f,isUploadInProgress:y,isSomeGhost:S}=this.uppy.getObjectOfFilesPerState(),k=a?Object.values(r):l,E=!!t.resumableUploads,F=t.uploadProgress!==!1,D=null,T=0;u.every(N=>N.progress.bytesTotal!=null&&N.progress.bytesTotal!==0)?(D=0,u.forEach(N=>{D+=N.progress.bytesTotal||0,T+=N.progress.bytesUploaded||0})):u.forEach(N=>{T+=N.progress.bytesUploaded||0});let z=ce(this,Ic)[Ic]({uploaded:T,total:D});return Rc({error:o,uploadState:aE(o,p,a,e.files||{}),allowNewUpload:n,totalProgress:s,totalSize:D,totalUploadedSize:T,isAllComplete:!1,isAllPaused:f,isUploadStarted:d,isUploadInProgress:y,isSomeGhost:S,recoveredState:a,complete:c.length,newFiles:k.length,numUploads:u.length,totalETA:z,files:r,i18n:this.i18n,uppy:this.uppy,startUpload:this.startUpload,doneButtonHandler:this.opts.doneButtonHandler,resumableUploads:E,supportsUploadProgress:F,showProgressDetails:this.opts.showProgressDetails,hideUploadButton:this.opts.hideUploadButton,hideRetryButton:this.opts.hideRetryButton,hidePauseResumeButton:this.opts.hidePauseResumeButton,hideCancelButton:this.opts.hideCancelButton,hideAfterFinish:this.opts.hideAfterFinish})}onMount(){let e=this.el;Fa(e)||(e.dir="ltr")}install(){let{target:e}=this.opts;e&&this.mount(e,this),this.uppy.on("upload",ce(this,Ms)[Ms]),ce(this,_t)[_t]=performance.now(),ce(this,Ct)[Ct]=this.uppy.getFiles().reduce((t,r)=>t+r.progress.bytesUploaded,0)}uninstall(){this.unmount(),this.uppy.off("upload",ce(this,Ms)[Ms])}};function uE(i){var e,t;if(i.total==null||i.total===0)return null;let r=i.total-i.uploaded;if(r<=0)return null;(t=(e=ce(this,_t))[_t])!=null||(e[_t]=performance.now());let n=performance.now()-ce(this,_t)[_t];if(n===0){var s;return Math.round(((s=ce(this,ht)[ht])!=null?s:0)/100)/10}let o=i.uploaded-ce(this,Ct)[Ct];if(ce(this,Ct)[Ct]=i.uploaded,o<=0){var a;return Math.round(((a=ce(this,ht)[ht])!=null?a:0)/100)/10}let l=o/n,u=ce(this,ei)[ei]==null?l:$a(l,ce(this,ei)[ei],sE,n);ce(this,ei)[ei]=u;let c=r/u,d=Math.max(ce(this,ht)[ht]-n,0),p=ce(this,ht)[ht]==null?c:$a(c,d,oE,n);return ce(this,ht)[ht]=p,ce(this,_t)[_t]=performance.now(),Math.round(p/100)/10}qr.VERSION=nE.version;var ov=300,Wa=class extends pe{constructor(){super(...arguments),this.ref=Pa()}componentWillEnter(e){this.ref.current.style.opacity="1",this.ref.current.style.transform="none",setTimeout(e,ov)}componentWillLeave(e){this.ref.current.style.opacity="0",this.ref.current.style.transform="translateY(350%)",setTimeout(e,ov)}render(){let{children:e}=this.props;return h("div",{className:"uppy-Informer-animated",ref:this.ref},e)}};function cE(i,e){return Object.assign(i,e)}function dE(i,e){var t;return(t=i?.key)!=null?t:e}function hE(i,e){let t=i._ptgLinkedRefs||(i._ptgLinkedRefs={});return t[e]||(t[e]=r=>{i.refs[e]=r})}function Bs(i){let e={};for(let t=0;t<i.length;t++)if(i[t]!=null){let r=dE(i[t],t.toString(36));e[r]=i[t]}return e}function fE(i,e){i=i||{},e=e||{};let t=o=>e.hasOwnProperty(o)?e[o]:i[o],r={},n=[];for(let o in i)e.hasOwnProperty(o)?n.length&&(r[o]=n,n=[]):n.push(o);let s={};for(let o in e){if(r.hasOwnProperty(o))for(let a=0;a<r[o].length;a++){let l=r[o][a];s[r[o][a]]=t(l)}s[o]=t(o)}for(let o=0;o<n.length;o++)s[n[o]]=t(n[o]);return s}var pE=i=>i,mE=(()=>{class i extends pe{constructor(t,r){super(t,r),this.refs={},this.state={children:Bs(tt(tt(this.props.children))||[])},this.performAppear=this.performAppear.bind(this),this.performEnter=this.performEnter.bind(this),this.performLeave=this.performLeave.bind(this)}componentWillMount(){this.currentlyTransitioningKeys={},this.keysToAbortLeave=[],this.keysToEnter=[],this.keysToLeave=[]}componentDidMount(){let t=this.state.children;for(let r in t)t[r]&&this.performAppear(r)}componentWillReceiveProps(t){let r=Bs(tt(t.children)||[]),n=this.state.children;this.setState(o=>({children:fE(o.children,r)}));let s;for(s in r)if(r.hasOwnProperty(s)){let o=n&&n.hasOwnProperty(s);r[s]&&o&&this.currentlyTransitioningKeys[s]?(this.keysToEnter.push(s),this.keysToAbortLeave.push(s)):r[s]&&!o&&!this.currentlyTransitioningKeys[s]&&this.keysToEnter.push(s)}for(s in n)if(n.hasOwnProperty(s)){let o=r&&r.hasOwnProperty(s);n[s]&&!o&&!this.currentlyTransitioningKeys[s]&&this.keysToLeave.push(s)}}componentDidUpdate(){let{keysToEnter:t}=this;this.keysToEnter=[],t.forEach(this.performEnter);let{keysToLeave:r}=this;this.keysToLeave=[],r.forEach(this.performLeave)}_finishAbort(t){let r=this.keysToAbortLeave.indexOf(t);r!==-1&&this.keysToAbortLeave.splice(r,1)}performAppear(t){this.currentlyTransitioningKeys[t]=!0;let r=this.refs[t];r!=null&&r.componentWillAppear?r.componentWillAppear(this._handleDoneAppearing.bind(this,t)):this._handleDoneAppearing(t)}_handleDoneAppearing(t){let r=this.refs[t];r!=null&&r.componentDidAppear&&r.componentDidAppear(),delete this.currentlyTransitioningKeys[t],this._finishAbort(t);let n=Bs(tt(this.props.children)||[]);(!n||!n.hasOwnProperty(t))&&this.performLeave(t)}performEnter(t){this.currentlyTransitioningKeys[t]=!0;let r=this.refs[t];r!=null&&r.componentWillEnter?r.componentWillEnter(this._handleDoneEntering.bind(this,t)):this._handleDoneEntering(t)}_handleDoneEntering(t){let r=this.refs[t];r!=null&&r.componentDidEnter&&r.componentDidEnter(),delete this.currentlyTransitioningKeys[t],this._finishAbort(t);let n=Bs(tt(this.props.children)||[]);(!n||!n.hasOwnProperty(t))&&this.performLeave(t)}performLeave(t){if(this.keysToAbortLeave.indexOf(t)!==-1)return;this.currentlyTransitioningKeys[t]=!0;let n=this.refs[t];n!=null&&n.componentWillLeave?n.componentWillLeave(this._handleDoneLeaving.bind(this,t)):this._handleDoneLeaving(t)}_handleDoneLeaving(t){if(this.keysToAbortLeave.indexOf(t)!==-1)return;let n=this.refs[t];n!=null&&n.componentDidLeave&&n.componentDidLeave(),delete this.currentlyTransitioningKeys[t];let s=Bs(tt(this.props.children)||[]);if(s&&s.hasOwnProperty(t))this.performEnter(t);else{let o=cE({},this.state.children);delete o[t],this.setState({children:o})}}render(t,r){let k=t,{childFactory:n,transitionLeave:s,transitionName:o,transitionAppear:a,transitionEnter:l,transitionLeaveTimeout:u,transitionEnterTimeout:c,transitionAppearTimeout:d,component:p}=k,f=mr(k,["childFactory","transitionLeave","transitionName","transitionAppear","transitionEnter","transitionLeaveTimeout","transitionEnterTimeout","transitionAppearTimeout","component"]),{children:y}=r,S=Object.entries(y).map(E=>{let[F,D]=E;if(!D)return;let T=hE(this,F);return gs(n(D),{ref:T,key:F})}).filter(Boolean);return h(p,f,S)}}return i.defaultProps={component:"span",childFactory:pE},i})(),av=mE;var gE={version:"4.2.1"},Yi=class extends Yt{constructor(e,t){super(e,t),this.render=r=>h("div",{className:"uppy uppy-Informer"},h(av,null,r.info.map(n=>h(Wa,{key:n.message},h("p",{role:"alert"},n.message," ",n.details&&h("span",{"aria-label":n.details,"data-microtip-position":"top-left","data-microtip-size":"medium",role:"tooltip",onClick:()=>alert(`${n.message} 

 ${n.details}`)},"?")))))),this.type="progressindicator",this.id=this.opts.id||"Informer",this.title="Informer"}install(){let{target:e}=this.opts;e&&this.mount(e,this)}};Yi.VERSION=gE.version;var yE=/^data:([^/]+\/[^,;]+(?:[^,]*?))(;base64)?,([\s\S]*)$/;function vE(i,e,t){var r,n;let s=yE.exec(i),o=(r=(n=e.mimeType)!=null?n:s?.[1])!=null?r:"plain/text",a;if(s?.[2]!=null){let l=atob(decodeURIComponent(s[3])),u=new Uint8Array(l.length);for(let c=0;c<l.length;c++)u[c]=l.charCodeAt(c);a=[u]}else s?.[3]!=null&&(a=[decodeURIComponent(s[3])]);return t?new File(a,e.name||"",{type:o}):new Blob(a,{type:o})}var lv=vE;function Ga(i){return i.startsWith("blob:")}function Ka(i){return i?/^[^/]+\/(jpe?g|gif|png|svg|svg\+xml|bmp|webp|avif)$/.test(i):!1}function ie(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}var yv=typeof self<"u"?self:global,Hs=typeof navigator<"u",_E=Hs&&typeof HTMLImageElement>"u",uv=!(typeof global>"u"||typeof process>"u"||!process.versions||!process.versions.node),vv=yv.Buffer,_v=!!vv,bE=i=>i!==void 0;function bv(i){return i===void 0||(i instanceof Map?i.size===0:Object.values(i).filter(bE).length===0)}function Pe(i){let e=new Error(i);throw delete e.stack,e}function cv(i){let e=function(t){let r=0;return t.ifd0.enabled&&(r+=1024),t.exif.enabled&&(r+=2048),t.makerNote&&(r+=2048),t.userComment&&(r+=1024),t.gps.enabled&&(r+=512),t.interop.enabled&&(r+=100),t.ifd1.enabled&&(r+=1024),r+2048}(i);return i.jfif.enabled&&(e+=50),i.xmp.enabled&&(e+=2e4),i.iptc.enabled&&(e+=14e3),i.icc.enabled&&(e+=6e3),e}var Dc=i=>String.fromCharCode.apply(null,i),dv=typeof TextDecoder<"u"?new TextDecoder("utf-8"):void 0,Zi=class i{static from(e,t){return e instanceof this&&e.le===t?e:new i(e,void 0,void 0,t)}constructor(e,t=0,r,n){if(typeof n=="boolean"&&(this.le=n),Array.isArray(e)&&(e=new Uint8Array(e)),e===0)this.byteOffset=0,this.byteLength=0;else if(e instanceof ArrayBuffer){r===void 0&&(r=e.byteLength-t);let s=new DataView(e,t,r);this._swapDataView(s)}else if(e instanceof Uint8Array||e instanceof DataView||e instanceof i){r===void 0&&(r=e.byteLength-t),(t+=e.byteOffset)+r>e.byteOffset+e.byteLength&&Pe("Creating view outside of available memory in ArrayBuffer");let s=new DataView(e.buffer,t,r);this._swapDataView(s)}else if(typeof e=="number"){let s=new DataView(new ArrayBuffer(e));this._swapDataView(s)}else Pe("Invalid input argument for BufferView: "+e)}_swapArrayBuffer(e){this._swapDataView(new DataView(e))}_swapBuffer(e){this._swapDataView(new DataView(e.buffer,e.byteOffset,e.byteLength))}_swapDataView(e){this.dataView=e,this.buffer=e.buffer,this.byteOffset=e.byteOffset,this.byteLength=e.byteLength}_lengthToEnd(e){return this.byteLength-e}set(e,t,r=i){return e instanceof DataView||e instanceof i?e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer&&(e=new Uint8Array(e)),e instanceof Uint8Array||Pe("BufferView.set(): Invalid data argument."),this.toUint8().set(e,t),new r(this,t,e.byteLength)}subarray(e,t){return t=t||this._lengthToEnd(e),new i(this,e,t)}toUint8(){return new Uint8Array(this.buffer,this.byteOffset,this.byteLength)}getUint8Array(e,t){return new Uint8Array(this.buffer,this.byteOffset+e,t)}getString(e=0,t=this.byteLength){return n=this.getUint8Array(e,t),dv?dv.decode(n):_v?Buffer.from(n).toString("utf8"):decodeURIComponent(escape(Dc(n)));var n}getLatin1String(e=0,t=this.byteLength){let r=this.getUint8Array(e,t);return Dc(r)}getUnicodeString(e=0,t=this.byteLength){let r=[];for(let n=0;n<t&&e+n<this.byteLength;n+=2)r.push(this.getUint16(e+n));return Dc(r)}getInt8(e){return this.dataView.getInt8(e)}getUint8(e){return this.dataView.getUint8(e)}getInt16(e,t=this.le){return this.dataView.getInt16(e,t)}getInt32(e,t=this.le){return this.dataView.getInt32(e,t)}getUint16(e,t=this.le){return this.dataView.getUint16(e,t)}getUint32(e,t=this.le){return this.dataView.getUint32(e,t)}getFloat32(e,t=this.le){return this.dataView.getFloat32(e,t)}getFloat64(e,t=this.le){return this.dataView.getFloat64(e,t)}getFloat(e,t=this.le){return this.dataView.getFloat32(e,t)}getDouble(e,t=this.le){return this.dataView.getFloat64(e,t)}getUintBytes(e,t,r){switch(t){case 1:return this.getUint8(e,r);case 2:return this.getUint16(e,r);case 4:return this.getUint32(e,r);case 8:return this.getUint64&&this.getUint64(e,r)}}getUint(e,t,r){switch(t){case 8:return this.getUint8(e,r);case 16:return this.getUint16(e,r);case 32:return this.getUint32(e,r);case 64:return this.getUint64&&this.getUint64(e,r)}}toString(e){return this.dataView.toString(e,this.constructor.name)}ensureChunk(){}};function Lc(i,e){Pe(`${i} '${e}' was not loaded, try using full build of exifr.`)}var Vs=class extends Map{constructor(e){super(),this.kind=e}get(e,t){return this.has(e)||Lc(this.kind,e),t&&(e in t||function(r,n){Pe(`Unknown ${r} '${n}'.`)}(this.kind,e),t[e].enabled||Lc(this.kind,e)),super.get(e)}keyList(){return Array.from(this.keys())}},Qa=new Vs("file parser"),ft=new Vs("segment parser"),Gs=new Vs("file reader"),wE=yv.fetch;function hv(i,e){return(t=i).startsWith("data:")||t.length>1e4?Mc(i,e,"base64"):uv&&i.includes("://")?Nc(i,e,"url",Xa):uv?Mc(i,e,"fs"):Hs?Nc(i,e,"url",Xa):void Pe("Invalid input argument");var t}function Nc(i,e,t,r){return m(this,null,function*(){return Gs.has(t)?Mc(i,e,t):r?function(n,s){return m(this,null,function*(){let o=yield s(n);return new Zi(o)})}(i,r):void Pe(`Parser ${t} is not loaded`)})}function Mc(i,e,t){return m(this,null,function*(){let r=new(Gs.get(t))(i,e);return yield r.read(),r})}var Xa=i=>wE(i).then(e=>e.arrayBuffer()),qs=i=>new Promise((e,t)=>{let r=new FileReader;r.onloadend=()=>e(r.result||new ArrayBuffer),r.onerror=t,r.readAsArrayBuffer(i)}),Bc=class extends Map{get tagKeys(){return this.allKeys||(this.allKeys=Array.from(this.keys())),this.allKeys}get tagValues(){return this.allValues||(this.allValues=Array.from(this.values())),this.allValues}};function wv(i,e,t){let r=new Bc;for(let[n,s]of t)r.set(n,s);if(Array.isArray(e))for(let n of e)i.set(n,r);else i.set(e,r);return r}function Sv(i,e,t){let r,n=i.get(e);for(r of t)n.set(r[0],r[1])}var Ks=new Map,Vc=new Map,qc=new Map,Gr=["chunked","firstChunkSize","firstChunkSizeNode","firstChunkSizeBrowser","chunkSize","chunkLimit"],el=["jfif","xmp","icc","iptc","ihdr"],Ws=["tiff",...el],Se=["ifd0","ifd1","exif","gps","interop"],Kr=[...Ws,...Se],Xr=["makerNote","userComment"],tl=["translateKeys","translateValues","reviveValues","multiSegment"],Yr=[...tl,"sanitize","mergeOutput","silentErrors"],Ya=class{get translate(){return this.translateKeys||this.translateValues||this.reviveValues}},Ji=class extends Ya{get needed(){return this.enabled||this.deps.size>0}constructor(e,t,r,n){if(super(),ie(this,"enabled",!1),ie(this,"skip",new Set),ie(this,"pick",new Set),ie(this,"deps",new Set),ie(this,"translateKeys",!1),ie(this,"translateValues",!1),ie(this,"reviveValues",!1),this.key=e,this.enabled=t,this.parse=this.enabled,this.applyInheritables(n),this.canBeFiltered=Se.includes(e),this.canBeFiltered&&(this.dict=Ks.get(e)),r!==void 0)if(Array.isArray(r))this.parse=this.enabled=!0,this.canBeFiltered&&r.length>0&&this.translateTagSet(r,this.pick);else if(typeof r=="object"){if(this.enabled=!0,this.parse=r.parse!==!1,this.canBeFiltered){let{pick:s,skip:o}=r;s&&s.length>0&&this.translateTagSet(s,this.pick),o&&o.length>0&&this.translateTagSet(o,this.skip)}this.applyInheritables(r)}else r===!0||r===!1?this.parse=this.enabled=r:Pe(`Invalid options argument: ${r}`)}applyInheritables(e){let t,r;for(t of tl)r=e[t],r!==void 0&&(this[t]=r)}translateTagSet(e,t){if(this.dict){let r,n,{tagKeys:s,tagValues:o}=this.dict;for(r of e)typeof r=="string"?(n=o.indexOf(r),n===-1&&(n=s.indexOf(Number(r))),n!==-1&&t.add(Number(s[n]))):t.add(r)}else for(let r of e)t.add(r)}finalizeFilters(){!this.enabled&&this.deps.size>0?(this.enabled=!0,Ja(this.pick,this.deps)):this.enabled&&this.pick.size>0&&Ja(this.pick,this.deps)}},Ye={jfif:!1,tiff:!0,xmp:!1,icc:!1,iptc:!1,ifd0:!0,ifd1:!1,exif:!0,gps:!0,interop:!1,ihdr:void 0,makerNote:!1,userComment:!1,multiSegment:!1,skip:[],pick:[],translateKeys:!0,translateValues:!0,reviveValues:!0,sanitize:!0,mergeOutput:!0,silentErrors:!0,chunked:!0,firstChunkSize:void 0,firstChunkSizeNode:512,firstChunkSizeBrowser:65536,chunkSize:65536,chunkLimit:5},fv=new Map,Qi=class extends Ya{static useCached(e){let t=fv.get(e);return t!==void 0||(t=new this(e),fv.set(e,t)),t}constructor(e){super(),e===!0?this.setupFromTrue():e===void 0?this.setupFromUndefined():Array.isArray(e)?this.setupFromArray(e):typeof e=="object"?this.setupFromObject(e):Pe(`Invalid options argument ${e}`),this.firstChunkSize===void 0&&(this.firstChunkSize=Hs?this.firstChunkSizeBrowser:this.firstChunkSizeNode),this.mergeOutput&&(this.ifd1.enabled=!1),this.filterNestedSegmentTags(),this.traverseTiffDependencyTree(),this.checkLoadedPlugins()}setupFromUndefined(){let e;for(e of Gr)this[e]=Ye[e];for(e of Yr)this[e]=Ye[e];for(e of Xr)this[e]=Ye[e];for(e of Kr)this[e]=new Ji(e,Ye[e],void 0,this)}setupFromTrue(){let e;for(e of Gr)this[e]=Ye[e];for(e of Yr)this[e]=Ye[e];for(e of Xr)this[e]=!0;for(e of Kr)this[e]=new Ji(e,!0,void 0,this)}setupFromArray(e){let t;for(t of Gr)this[t]=Ye[t];for(t of Yr)this[t]=Ye[t];for(t of Xr)this[t]=Ye[t];for(t of Kr)this[t]=new Ji(t,!1,void 0,this);this.setupGlobalFilters(e,void 0,Se)}setupFromObject(e){let t;for(t of(Se.ifd0=Se.ifd0||Se.image,Se.ifd1=Se.ifd1||Se.thumbnail,Object.assign(this,e),Gr))this[t]=Uc(e[t],Ye[t]);for(t of Yr)this[t]=Uc(e[t],Ye[t]);for(t of Xr)this[t]=Uc(e[t],Ye[t]);for(t of Ws)this[t]=new Ji(t,Ye[t],e[t],this);for(t of Se)this[t]=new Ji(t,Ye[t],e[t],this.tiff);this.setupGlobalFilters(e.pick,e.skip,Se,Kr),e.tiff===!0?this.batchEnableWithBool(Se,!0):e.tiff===!1?this.batchEnableWithUserValue(Se,e):Array.isArray(e.tiff)?this.setupGlobalFilters(e.tiff,void 0,Se):typeof e.tiff=="object"&&this.setupGlobalFilters(e.tiff.pick,e.tiff.skip,Se)}batchEnableWithBool(e,t){for(let r of e)this[r].enabled=t}batchEnableWithUserValue(e,t){for(let r of e){let n=t[r];this[r].enabled=n!==!1&&n!==void 0}}setupGlobalFilters(e,t,r,n=r){if(e&&e.length){for(let o of n)this[o].enabled=!1;let s=pv(e,r);for(let[o,a]of s)Ja(this[o].pick,a),this[o].enabled=!0}else if(t&&t.length){let s=pv(t,r);for(let[o,a]of s)Ja(this[o].skip,a)}}filterNestedSegmentTags(){let{ifd0:e,exif:t,xmp:r,iptc:n,icc:s}=this;this.makerNote?t.deps.add(37500):t.skip.add(37500),this.userComment?t.deps.add(37510):t.skip.add(37510),r.enabled||e.skip.add(700),n.enabled||e.skip.add(33723),s.enabled||e.skip.add(34675)}traverseTiffDependencyTree(){let{ifd0:e,exif:t,gps:r,interop:n}=this;n.needed&&(t.deps.add(40965),e.deps.add(40965)),t.needed&&e.deps.add(34665),r.needed&&e.deps.add(34853),this.tiff.enabled=Se.some(s=>this[s].enabled===!0)||this.makerNote||this.userComment;for(let s of Se)this[s].finalizeFilters()}get onlyTiff(){return!el.map(e=>this[e].enabled).some(e=>e===!0)&&this.tiff.enabled}checkLoadedPlugins(){for(let e of Ws)this[e].enabled&&!ft.has(e)&&Lc("segment parser",e)}};function pv(i,e){let t,r,n,s,o=[];for(n of e){for(s of(t=Ks.get(n),r=[],t))(i.includes(s[0])||i.includes(s[1]))&&r.push(s[0]);r.length&&o.push([n,r])}return o}function Uc(i,e){return i!==void 0?i:e!==void 0?e:void 0}function Ja(i,e){for(let t of e)i.add(t)}ie(Qi,"default",Ye);var Jr=class{constructor(e){ie(this,"parsers",{}),ie(this,"output",{}),ie(this,"errors",[]),ie(this,"pushToErrors",t=>this.errors.push(t)),this.options=Qi.useCached(e)}read(e){return m(this,null,function*(){this.file=yield function(t,r){return typeof t=="string"?hv(t,r):Hs&&!_E&&t instanceof HTMLImageElement?hv(t.src,r):t instanceof Uint8Array||t instanceof ArrayBuffer||t instanceof DataView?new Zi(t):Hs&&t instanceof Blob?Nc(t,r,"blob",qs):void Pe("Invalid input argument")}(e,this.options)})}setup(){if(this.fileParser)return;let{file:e}=this,t=e.getUint16(0);for(let[r,n]of Qa)if(n.canHandle(e,t))return this.fileParser=new n(this.options,this.file,this.parsers),e[r]=!0;this.file.close&&this.file.close(),Pe("Unknown file format")}parse(){return m(this,null,function*(){let{output:e,errors:t}=this;return this.setup(),this.options.silentErrors?(yield this.executeParsers().catch(this.pushToErrors),t.push(...this.fileParser.errors)):yield this.executeParsers(),this.file.close&&this.file.close(),this.options.silentErrors&&t.length>0&&(e.errors=t),bv(r=e)?void 0:r;var r})}executeParsers(){return m(this,null,function*(){let{output:e}=this;yield this.fileParser.parse();let t=Object.values(this.parsers).map(r=>m(this,null,function*(){let n=yield r.parse();r.assignToOutput(e,n)}));this.options.silentErrors&&(t=t.map(r=>r.catch(this.pushToErrors))),yield Promise.all(t)})}extractThumbnail(){return m(this,null,function*(){this.setup();let{options:e,file:t}=this,r=ft.get("tiff",e);var n;if(t.tiff?n={start:0,type:"tiff"}:t.jpeg&&(n=yield this.fileParser.getOrFindSegment("tiff")),n===void 0)return;let s=yield this.fileParser.ensureSegmentChunk(n),o=this.parsers.tiff=new r(s,e,t),a=yield o.extractThumbnail();return t.close&&t.close(),a})}};function Ev(i,e){return m(this,null,function*(){let t=new Jr(e);return yield t.read(i),t.parse()})}var SE=Object.freeze({__proto__:null,parse:Ev,Exifr:Jr,fileParsers:Qa,segmentParsers:ft,fileReaders:Gs,tagKeys:Ks,tagValues:Vc,tagRevivers:qc,createDictionary:wv,extendDictionary:Sv,fetchUrlAsArrayBuffer:Xa,readBlobAsArrayBuffer:qs,chunkedProps:Gr,otherSegments:el,segments:Ws,tiffBlocks:Se,segmentsAndBlocks:Kr,tiffExtractables:Xr,inheritables:tl,allFormatters:Yr,Options:Qi}),fi=class{static findPosition(e,t){let r=e.getUint16(t+2)+2,n=typeof this.headerLength=="function"?this.headerLength(e,t,r):this.headerLength,s=t+n,o=r-n;return{offset:t,length:r,headerLength:n,start:s,size:o,end:s+o}}static parse(e,t={}){return new this(e,new Qi({[this.type]:t}),e).parse()}normalizeInput(e){return e instanceof Zi?e:new Zi(e)}constructor(e,t={},r){ie(this,"errors",[]),ie(this,"raw",new Map),ie(this,"handleError",n=>{if(!this.options.silentErrors)throw n;this.errors.push(n.message)}),this.chunk=this.normalizeInput(e),this.file=r,this.type=this.constructor.type,this.globalOptions=this.options=t,this.localOptions=t[this.type],this.canTranslate=this.localOptions&&this.localOptions.translate}translate(){this.canTranslate&&(this.translated=this.translateBlock(this.raw,this.type))}get output(){return this.translated?this.translated:this.raw?Object.fromEntries(this.raw):void 0}translateBlock(e,t){let r=qc.get(t),n=Vc.get(t),s=Ks.get(t),o=this.options[t],a=o.reviveValues&&!!r,l=o.translateValues&&!!n,u=o.translateKeys&&!!s,c={};for(let[d,p]of e)a&&r.has(d)?p=r.get(d)(p):l&&n.has(d)&&(p=this.translateValue(p,n.get(d))),u&&s.has(d)&&(d=s.get(d)||d),c[d]=p;return c}translateValue(e,t){return t[e]||t.DEFAULT||e}assignToOutput(e,t){this.assignObjectToOutput(e,this.constructor.type,t)}assignObjectToOutput(e,t,r){if(this.globalOptions.mergeOutput)return Object.assign(e,r);e[t]?Object.assign(e[t],r):e[t]=r}};ie(fi,"headerLength",4),ie(fi,"type",void 0),ie(fi,"multiSegment",!1),ie(fi,"canHandle",()=>!1);function EE(i){return i===192||i===194||i===196||i===219||i===221||i===218||i===254}function CE(i){return i>=224&&i<=239}function xE(i,e,t){for(let[r,n]of ft)if(n.canHandle(i,e,t))return r}var Za=class extends class{constructor(e,t,r){ie(this,"errors",[]),ie(this,"ensureSegmentChunk",n=>m(this,null,function*(){let s=n.start,o=n.size||65536;if(this.file.chunked)if(this.file.available(s,o))n.chunk=this.file.subarray(s,o);else try{n.chunk=yield this.file.readChunk(s,o)}catch(a){Pe(`Couldn't read segment: ${JSON.stringify(n)}. ${a.message}`)}else this.file.byteLength>s+o?n.chunk=this.file.subarray(s,o):n.size===void 0?n.chunk=this.file.subarray(s):Pe("Segment unreachable: "+JSON.stringify(n));return n.chunk})),this.extendOptions&&this.extendOptions(e),this.options=e,this.file=t,this.parsers=r}injectSegment(e,t){this.options[e].enabled&&this.createParser(e,t)}createParser(e,t){let r=new(ft.get(e))(t,this.options,this.file);return this.parsers[e]=r}createParsers(e){for(let t of e){let{type:r,chunk:n}=t,s=this.options[r];if(s&&s.enabled){let o=this.parsers[r];o&&o.append||o||this.createParser(r,n)}}}readSegments(e){return m(this,null,function*(){let t=e.map(this.ensureSegmentChunk);yield Promise.all(t)})}}{constructor(...e){super(...e),ie(this,"appSegments",[]),ie(this,"jpegSegments",[]),ie(this,"unknownSegments",[])}static canHandle(e,t){return t===65496}parse(){return m(this,null,function*(){yield this.findAppSegments(),yield this.readSegments(this.appSegments),this.mergeMultiSegments(),this.createParsers(this.mergedAppSegments||this.appSegments)})}setupSegmentFinderArgs(e){e===!0?(this.findAll=!0,this.wanted=new Set(ft.keyList())):(e=e===void 0?ft.keyList().filter(t=>this.options[t].enabled):e.filter(t=>this.options[t].enabled&&ft.has(t)),this.findAll=!1,this.remaining=new Set(e),this.wanted=new Set(e)),this.unfinishedMultiSegment=!1}findAppSegments(e=0,t){return m(this,null,function*(){this.setupSegmentFinderArgs(t);let{file:r,findAll:n,wanted:s,remaining:o}=this;if(!n&&this.file.chunked&&(n=Array.from(s).some(a=>{let l=ft.get(a),u=this.options[a];return l.multiSegment&&u.multiSegment}),n&&(yield this.file.readWhole())),e=this.findAppSegmentsInRange(e,r.byteLength),!this.options.onlyTiff&&r.chunked){let a=!1;for(;o.size>0&&!a&&(r.canReadNextChunk||this.unfinishedMultiSegment);){let{nextChunkOffset:l}=r,u=this.appSegments.some(c=>!this.file.available(c.offset||c.start,c.length||c.size));if(a=e>l&&!u?!(yield r.readNextChunk(e)):!(yield r.readNextChunk(l)),(e=this.findAppSegmentsInRange(e,r.byteLength))===void 0)return}}})}findAppSegmentsInRange(e,t){t-=2;let r,n,s,o,a,l,{file:u,findAll:c,wanted:d,remaining:p,options:f}=this;for(;e<t;e++)if(u.getUint8(e)===255){if(r=u.getUint8(e+1),CE(r)){if(n=u.getUint16(e+2),s=xE(u,e,n),s&&d.has(s)&&(o=ft.get(s),a=o.findPosition(u,e),l=f[s],a.type=s,this.appSegments.push(a),!c&&(o.multiSegment&&l.multiSegment?(this.unfinishedMultiSegment=a.chunkNumber<a.chunkCount,this.unfinishedMultiSegment||p.delete(s)):p.delete(s),p.size===0)))break;f.recordUnknownSegments&&(a=fi.findPosition(u,e),a.marker=r,this.unknownSegments.push(a)),e+=n+1}else if(EE(r)){if(n=u.getUint16(e+2),r===218&&f.stopAfterSos!==!1)return;f.recordJpegSegments&&this.jpegSegments.push({offset:e,length:n,marker:r}),e+=n+1}}return e}mergeMultiSegments(){if(!this.appSegments.some(t=>t.multiSegment))return;let e=function(t,r){let n,s,o,a=new Map;for(let l=0;l<t.length;l++)n=t[l],s=n[r],a.has(s)?o=a.get(s):a.set(s,o=[]),o.push(n);return Array.from(a)}(this.appSegments,"type");this.mergedAppSegments=e.map(([t,r])=>{let n=ft.get(t,this.options);return n.handleMultiSegments?{type:t,chunk:n.handleMultiSegments(r)}:r[0]})}getSegment(e){return this.appSegments.find(t=>t.type===e)}getOrFindSegment(e){return m(this,null,function*(){let t=this.getSegment(e);return t===void 0&&(yield this.findAppSegments(0,[e]),t=this.getSegment(e)),t})}};ie(Za,"type","jpeg"),Qa.set("jpeg",Za);var kE=[void 0,1,1,2,4,8,1,1,2,4,8,4,8,4],jc=class extends fi{parseHeader(){var e=this.chunk.getUint16();e===18761?this.le=!0:e===19789&&(this.le=!1),this.chunk.le=this.le,this.headerParsed=!0}parseTags(e,t,r=new Map){let{pick:n,skip:s}=this.options[t];n=new Set(n);let o=n.size>0,a=s.size===0,l=this.chunk.getUint16(e);e+=2;for(let u=0;u<l;u++){let c=this.chunk.getUint16(e);if(o){if(n.has(c)&&(r.set(c,this.parseTag(e,c,t)),n.delete(c),n.size===0))break}else!a&&s.has(c)||r.set(c,this.parseTag(e,c,t));e+=12}return r}parseTag(e,t,r){let{chunk:n}=this,s=n.getUint16(e+2),o=n.getUint32(e+4),a=kE[s];if(a*o<=4?e+=8:e=n.getUint32(e+8),(s<1||s>13)&&Pe(`Invalid TIFF value type. block: ${r.toUpperCase()}, tag: ${t.toString(16)}, type: ${s}, offset ${e}`),e>n.byteLength&&Pe(`Invalid TIFF value offset. block: ${r.toUpperCase()}, tag: ${t.toString(16)}, type: ${s}, offset ${e} is outside of chunk size ${n.byteLength}`),s===1)return n.getUint8Array(e,o);if(s===2)return(l=function(u){for(;u.endsWith("\0");)u=u.slice(0,-1);return u}(l=n.getString(e,o)).trim())===""?void 0:l;var l;if(s===7)return n.getUint8Array(e,o);if(o===1)return this.parseTagValue(s,e);{let u=new(function(d){switch(d){case 1:return Uint8Array;case 3:return Uint16Array;case 4:return Uint32Array;case 5:return Array;case 6:return Int8Array;case 8:return Int16Array;case 9:return Int32Array;case 10:return Array;case 11:return Float32Array;case 12:return Float64Array;default:return Array}}(s))(o),c=a;for(let d=0;d<o;d++)u[d]=this.parseTagValue(s,e),e+=c;return u}}parseTagValue(e,t){let{chunk:r}=this;switch(e){case 1:return r.getUint8(t);case 3:return r.getUint16(t);case 4:return r.getUint32(t);case 5:return r.getUint32(t)/r.getUint32(t+4);case 6:return r.getInt8(t);case 8:return r.getInt16(t);case 9:return r.getInt32(t);case 10:return r.getInt32(t)/r.getInt32(t+4);case 11:return r.getFloat(t);case 12:return r.getDouble(t);case 13:return r.getUint32(t);default:Pe(`Invalid tiff type ${e}`)}}},$s=class extends jc{static canHandle(e,t){return e.getUint8(t+1)===225&&e.getUint32(t+4)===1165519206&&e.getUint16(t+8)===0}parse(){return m(this,null,function*(){this.parseHeader();let{options:e}=this;return e.ifd0.enabled&&(yield this.parseIfd0Block()),e.exif.enabled&&(yield this.safeParse("parseExifBlock")),e.gps.enabled&&(yield this.safeParse("parseGpsBlock")),e.interop.enabled&&(yield this.safeParse("parseInteropBlock")),e.ifd1.enabled&&(yield this.safeParse("parseThumbnailBlock")),this.createOutput()})}safeParse(e){let t=this[e]();return t.catch!==void 0&&(t=t.catch(this.handleError)),t}findIfd0Offset(){this.ifd0Offset===void 0&&(this.ifd0Offset=this.chunk.getUint32(4))}findIfd1Offset(){if(this.ifd1Offset===void 0){this.findIfd0Offset();let e=this.chunk.getUint16(this.ifd0Offset),t=this.ifd0Offset+2+12*e;this.ifd1Offset=this.chunk.getUint32(t)}}parseBlock(e,t){let r=new Map;return this[t]=r,this.parseTags(e,t,r),r}parseIfd0Block(){return m(this,null,function*(){if(this.ifd0)return;let{file:e}=this;this.findIfd0Offset(),this.ifd0Offset<8&&Pe("Malformed EXIF data"),!e.chunked&&this.ifd0Offset>e.byteLength&&Pe(`IFD0 offset points to outside of file.
this.ifd0Offset: ${this.ifd0Offset}, file.byteLength: ${e.byteLength}`),e.tiff&&(yield e.ensureChunk(this.ifd0Offset,cv(this.options)));let t=this.parseBlock(this.ifd0Offset,"ifd0");return t.size!==0?(this.exifOffset=t.get(34665),this.interopOffset=t.get(40965),this.gpsOffset=t.get(34853),this.xmp=t.get(700),this.iptc=t.get(33723),this.icc=t.get(34675),this.options.sanitize&&(t.delete(34665),t.delete(40965),t.delete(34853),t.delete(700),t.delete(33723),t.delete(34675)),t):void 0})}parseExifBlock(){return m(this,null,function*(){if(this.exif||(this.ifd0||(yield this.parseIfd0Block()),this.exifOffset===void 0))return;this.file.tiff&&(yield this.file.ensureChunk(this.exifOffset,cv(this.options)));let e=this.parseBlock(this.exifOffset,"exif");return this.interopOffset||(this.interopOffset=e.get(40965)),this.makerNote=e.get(37500),this.userComment=e.get(37510),this.options.sanitize&&(e.delete(40965),e.delete(37500),e.delete(37510)),this.unpack(e,41728),this.unpack(e,41729),e})}unpack(e,t){let r=e.get(t);r&&r.length===1&&e.set(t,r[0])}parseGpsBlock(){return m(this,null,function*(){if(this.gps||(this.ifd0||(yield this.parseIfd0Block()),this.gpsOffset===void 0))return;let e=this.parseBlock(this.gpsOffset,"gps");return e&&e.has(2)&&e.has(4)&&(e.set("latitude",mv(...e.get(2),e.get(1))),e.set("longitude",mv(...e.get(4),e.get(3)))),e})}parseInteropBlock(){return m(this,null,function*(){if(!this.interop&&(this.ifd0||(yield this.parseIfd0Block()),this.interopOffset!==void 0||this.exif||(yield this.parseExifBlock()),this.interopOffset!==void 0))return this.parseBlock(this.interopOffset,"interop")})}parseThumbnailBlock(e=!1){return m(this,null,function*(){if(!this.ifd1&&!this.ifd1Parsed&&(!this.options.mergeOutput||e))return this.findIfd1Offset(),this.ifd1Offset>0&&(this.parseBlock(this.ifd1Offset,"ifd1"),this.ifd1Parsed=!0),this.ifd1})}extractThumbnail(){return m(this,null,function*(){if(this.headerParsed||this.parseHeader(),this.ifd1Parsed||(yield this.parseThumbnailBlock(!0)),this.ifd1===void 0)return;let e=this.ifd1.get(513),t=this.ifd1.get(514);return this.chunk.getUint8Array(e,t)})}get image(){return this.ifd0}get thumbnail(){return this.ifd1}createOutput(){let e,t,r,n={};for(t of Se)if(e=this[t],!bv(e))if(r=this.canTranslate?this.translateBlock(e,t):Object.fromEntries(e),this.options.mergeOutput){if(t==="ifd1")continue;Object.assign(n,r)}else n[t]=r;return this.makerNote&&(n.makerNote=this.makerNote),this.userComment&&(n.userComment=this.userComment),n}assignToOutput(e,t){if(this.globalOptions.mergeOutput)Object.assign(e,t);else for(let[r,n]of Object.entries(t))this.assignObjectToOutput(e,r,n)}};function mv(i,e,t,r){var n=i+e/60+t/3600;return r!=="S"&&r!=="W"||(n*=-1),n}ie($s,"type","tiff"),ie($s,"headerLength",10),ft.set("tiff",$s);var aR=Object.freeze({__proto__:null,default:SE,Exifr:Jr,fileParsers:Qa,segmentParsers:ft,fileReaders:Gs,tagKeys:Ks,tagValues:Vc,tagRevivers:qc,createDictionary:wv,extendDictionary:Sv,fetchUrlAsArrayBuffer:Xa,readBlobAsArrayBuffer:qs,chunkedProps:Gr,otherSegments:el,segments:Ws,tiffBlocks:Se,segmentsAndBlocks:Kr,tiffExtractables:Xr,inheritables:tl,allFormatters:Yr,Options:Qi,parse:Ev}),Wc={ifd0:!1,ifd1:!1,exif:!1,gps:!1,interop:!1,sanitize:!1,reviveValues:!0,translateKeys:!1,translateValues:!1,mergeOutput:!1},lR=Object.assign({},Wc,{firstChunkSize:4e4,gps:[1,2,3,4]});var uR=Object.assign({},Wc,{tiff:!1,ifd1:!0,mergeOutput:!1});var PE=Object.assign({},Wc,{firstChunkSize:4e4,ifd0:[274]});function TE(i){return m(this,null,function*(){let e=new Jr(PE);yield e.read(i);let t=yield e.parse();if(t&&t.ifd0)return t.ifd0[274]})}var OE=Object.freeze({1:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:0,rad:0},2:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:0,rad:0},3:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:180,rad:180*Math.PI/180},4:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:180,rad:180*Math.PI/180},5:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:90,rad:90*Math.PI/180},6:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:90,rad:90*Math.PI/180},7:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:270,rad:270*Math.PI/180},8:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:270,rad:270*Math.PI/180}}),js=!0,zs=!0;if(typeof navigator=="object"){let i=navigator.userAgent;if(i.includes("iPad")||i.includes("iPhone")){let e=i.match(/OS (\d+)_(\d+)/);if(e){let[,t,r]=e;js=Number(t)+.1*Number(r)<13.4,zs=!1}}else if(i.includes("OS X 10")){let[,e]=i.match(/OS X 10[_.](\d+)/);js=zs=Number(e)<15}if(i.includes("Chrome/")){let[,e]=i.match(/Chrome\/(\d+)/);js=zs=Number(e)<81}else if(i.includes("Firefox/")){let[,e]=i.match(/Firefox\/(\d+)/);js=zs=Number(e)<77}}function Cv(i){return m(this,null,function*(){let e=yield TE(i);return Object.assign({canvas:js,css:zs},OE[e])})}var zc=class extends Zi{constructor(...e){super(...e),ie(this,"ranges",new $c),this.byteLength!==0&&this.ranges.add(0,this.byteLength)}_tryExtend(e,t,r){if(e===0&&this.byteLength===0&&r){let n=new DataView(r.buffer||r,r.byteOffset,r.byteLength);this._swapDataView(n)}else{let n=e+t;if(n>this.byteLength){let{dataView:s}=this._extend(n);this._swapDataView(s)}}}_extend(e){let t;t=_v?vv.allocUnsafe(e):new Uint8Array(e);let r=new DataView(t.buffer,t.byteOffset,t.byteLength);return t.set(new Uint8Array(this.buffer,this.byteOffset,this.byteLength),0),{uintView:t,dataView:r}}subarray(e,t,r=!1){return t=t||this._lengthToEnd(e),r&&this._tryExtend(e,t),this.ranges.add(e,t),super.subarray(e,t)}set(e,t,r=!1){r&&this._tryExtend(t,e.byteLength,e);let n=super.set(e,t);return this.ranges.add(t,n.byteLength),n}ensureChunk(e,t){return m(this,null,function*(){this.chunked&&(this.ranges.available(e,t)||(yield this.readChunk(e,t)))})}available(e,t){return this.ranges.available(e,t)}},$c=class{constructor(){ie(this,"list",[])}get length(){return this.list.length}add(e,t,r=0){let n=e+t,s=this.list.filter(o=>gv(e,o.offset,n)||gv(e,o.end,n));if(s.length>0){e=Math.min(e,...s.map(a=>a.offset)),n=Math.max(n,...s.map(a=>a.end)),t=n-e;let o=s.shift();o.offset=e,o.length=t,o.end=n,this.list=this.list.filter(a=>!s.includes(a))}else this.list.push({offset:e,length:t,end:n})}available(e,t){let r=e+t;return this.list.some(n=>n.offset<=e&&r<=n.end)}};function gv(i,e,t){return i<=e&&e<=t}var Hc=class extends zc{constructor(e,t){super(0),ie(this,"chunksRead",0),this.input=e,this.options=t}readWhole(){return m(this,null,function*(){this.chunked=!1,yield this.readChunk(this.nextChunkOffset)})}readChunked(){return m(this,null,function*(){this.chunked=!0,yield this.readChunk(0,this.options.firstChunkSize)})}readNextChunk(){return m(this,arguments,function*(e=this.nextChunkOffset){if(this.fullyRead)return this.chunksRead++,!1;let t=this.options.chunkSize,r=yield this.readChunk(e,t);return!!r&&r.byteLength===t})}readChunk(e,t){return m(this,null,function*(){if(this.chunksRead++,(t=this.safeWrapAddress(e,t))!==0)return this._readChunk(e,t)})}safeWrapAddress(e,t){return this.size!==void 0&&e+t>this.size?Math.max(0,this.size-e):t}get nextChunkOffset(){if(this.ranges.list.length!==0)return this.ranges.list[0].length}get canReadNextChunk(){return this.chunksRead<this.options.chunkLimit}get fullyRead(){return this.size!==void 0&&this.nextChunkOffset===this.size}read(){return this.options.chunked?this.readChunked():this.readWhole()}close(){}};Gs.set("blob",class extends Hc{readWhole(){return m(this,null,function*(){this.chunked=!1;let i=yield qs(this.input);this._swapArrayBuffer(i)})}readChunked(){return this.chunked=!0,this.size=this.input.size,super.readChunked()}_readChunk(i,e){return m(this,null,function*(){let t=e?i+e:void 0,r=this.input.slice(i,t),n=yield qs(r);return this.set(n,i,!0)})}});var xv={strings:{generatingThumbnails:"Generating thumbnails..."}};var FE={version:"4.1.1"};function AE(i,e,t){try{i.getContext("2d").getImageData(0,0,1,1)}catch(r){if(r.code===18)return Promise.reject(new Error("cannot read image, probably an svg with external resources"))}return i.toBlob?new Promise(r=>{i.toBlob(r,e,t)}).then(r=>{if(r===null)throw new Error("cannot read image, probably an svg with external resources");return r}):Promise.resolve().then(()=>lv(i.toDataURL(e,t),{})).then(r=>{if(r===null)throw new Error("could not extract blob, probably an old browser");return r})}function RE(i,e){let t=i.width,r=i.height;(e.deg===90||e.deg===270)&&(t=i.height,r=i.width);let n=document.createElement("canvas");n.width=t,n.height=r;let s=n.getContext("2d");return s.translate(t/2,r/2),e.canvas&&(s.rotate(e.rad),s.scale(e.scaleX,e.scaleY)),s.drawImage(i,-i.width/2,-i.height/2,i.width,i.height),n}function IE(i){let e=i.width/i.height,t=5e6,r=4096,n=Math.floor(Math.sqrt(t*e)),s=Math.floor(t/Math.sqrt(t*e));if(n>r&&(n=r,s=Math.round(n/e)),s>r&&(s=r,n=Math.round(e*s)),i.width>n){let o=document.createElement("canvas");return o.width=n,o.height=s,o.getContext("2d").drawImage(i,0,0,n,s),o}return i}var DE={thumbnailWidth:null,thumbnailHeight:null,thumbnailType:"image/jpeg",waitForThumbnailsBeforeUpload:!1,lazy:!1},pi=class extends Yt{constructor(e,t){if(super(e,v(v({},DE),t)),this.onFileAdded=r=>{!r.preview&&r.data&&Ka(r.type)&&!r.isRemote&&this.addToQueue(r.id)},this.onCancelRequest=r=>{let n=this.queue.indexOf(r.id);n!==-1&&this.queue.splice(n,1)},this.onFileRemoved=r=>{let n=this.queue.indexOf(r.id);n!==-1&&this.queue.splice(n,1),r.preview&&Ga(r.preview)&&URL.revokeObjectURL(r.preview)},this.onRestored=()=>{this.uppy.getFiles().filter(n=>n.isRestored).forEach(n=>{(!n.preview||Ga(n.preview))&&this.addToQueue(n.id)})},this.onAllFilesRemoved=()=>{this.queue=[]},this.waitUntilAllProcessed=r=>{r.forEach(s=>{let o=this.uppy.getFile(s);this.uppy.emit("preprocess-progress",o,{mode:"indeterminate",message:this.i18n("generatingThumbnails")})});let n=()=>{r.forEach(s=>{let o=this.uppy.getFile(s);this.uppy.emit("preprocess-complete",o)})};return new Promise(s=>{this.queueProcessing?this.uppy.once("thumbnail:all-generated",()=>{n(),s()}):(n(),s())})},this.type="modifier",this.id=this.opts.id||"ThumbnailGenerator",this.title="Thumbnail Generator",this.queue=[],this.queueProcessing=!1,this.defaultThumbnailDimension=200,this.thumbnailType=this.opts.thumbnailType,this.defaultLocale=xv,this.i18nInit(),this.opts.lazy&&this.opts.waitForThumbnailsBeforeUpload)throw new Error("ThumbnailGenerator: The `lazy` and `waitForThumbnailsBeforeUpload` options are mutually exclusive. Please ensure at most one of them is set to `true`.")}createThumbnail(e,t,r){let n=URL.createObjectURL(e.data),s=new Promise((a,l)=>{let u=new Image;u.src=n,u.addEventListener("load",()=>{URL.revokeObjectURL(n),a(u)}),u.addEventListener("error",c=>{URL.revokeObjectURL(n),l(c.error||new Error("Could not create thumbnail"))})}),o=Cv(e.data).catch(()=>1);return Promise.all([s,o]).then(a=>{let[l,u]=a,c=this.getProportionalDimensions(l,t,r,u.deg),d=RE(l,u),p=this.resizeImage(d,c.width,c.height);return AE(p,this.thumbnailType,80)}).then(a=>URL.createObjectURL(a))}getProportionalDimensions(e,t,r,n){let s=e.width/e.height;return(n===90||n===270)&&(s=e.height/e.width),t!=null?{width:t,height:Math.round(t/s)}:r!=null?{width:Math.round(r*s),height:r}:{width:this.defaultThumbnailDimension,height:Math.round(this.defaultThumbnailDimension/s)}}resizeImage(e,t,r){let n=IE(e),s=Math.ceil(Math.log2(n.width/t));s<1&&(s=1);let o=t*2**(s-1),a=r*2**(s-1),l=2;for(;s--;){let u=document.createElement("canvas");u.width=o,u.height=a,u.getContext("2d").drawImage(n,0,0,o,a),n=u,o=Math.round(o/l),a=Math.round(a/l)}return n}setPreviewURL(e,t){this.uppy.setFileState(e,{preview:t})}addToQueue(e){this.queue.push(e),this.queueProcessing===!1&&this.processQueue()}processQueue(){if(this.queueProcessing=!0,this.queue.length>0){let e=this.uppy.getFile(this.queue.shift());return e?this.requestThumbnail(e).catch(()=>{}).then(()=>this.processQueue()):(this.uppy.log("[ThumbnailGenerator] file was removed before a thumbnail could be generated, but not removed from the queue. This is probably a bug","error"),Promise.resolve())}return this.queueProcessing=!1,this.uppy.log("[ThumbnailGenerator] Emptied thumbnail queue"),this.uppy.emit("thumbnail:all-generated"),Promise.resolve()}requestThumbnail(e){return Ka(e.type)&&!e.isRemote?this.createThumbnail(e,this.opts.thumbnailWidth,this.opts.thumbnailHeight).then(t=>{this.setPreviewURL(e.id,t),this.uppy.log(`[ThumbnailGenerator] Generated thumbnail for ${e.id}`),this.uppy.emit("thumbnail:generated",this.uppy.getFile(e.id),t)}).catch(t=>{this.uppy.log(`[ThumbnailGenerator] Failed thumbnail for ${e.id}:`,"warning"),this.uppy.log(t,"warning"),this.uppy.emit("thumbnail:error",this.uppy.getFile(e.id),t)}):Promise.resolve()}install(){this.uppy.on("file-removed",this.onFileRemoved),this.uppy.on("cancel-all",this.onAllFilesRemoved),this.opts.lazy?(this.uppy.on("thumbnail:request",this.onFileAdded),this.uppy.on("thumbnail:cancel",this.onCancelRequest)):(this.uppy.on("thumbnail:request",this.onFileAdded),this.uppy.on("file-added",this.onFileAdded),this.uppy.on("restored",this.onRestored)),this.opts.waitForThumbnailsBeforeUpload&&this.uppy.addPreProcessor(this.waitUntilAllProcessed)}uninstall(){this.uppy.off("file-removed",this.onFileRemoved),this.uppy.off("cancel-all",this.onAllFilesRemoved),this.opts.lazy?(this.uppy.off("thumbnail:request",this.onFileAdded),this.uppy.off("thumbnail:cancel",this.onCancelRequest)):(this.uppy.off("thumbnail:request",this.onFileAdded),this.uppy.off("file-added",this.onFileAdded),this.uppy.off("restored",this.onRestored)),this.opts.waitForThumbnailsBeforeUpload&&this.uppy.removePreProcessor(this.waitUntilAllProcessed)}};pi.VERSION=FE.version;function UE(i){if(typeof i=="string"){let e=document.querySelectorAll(i);return e.length===0?null:Array.from(e)}return typeof i=="object"&&_s(i)?[i]:null}var Gc=UE;var mi=Array.from;function il(i,e,t,r){let{onSuccess:n}=r;i.readEntries(s=>{let o=[...e,...s];s.length?queueMicrotask(()=>{il(i,o,t,{onSuccess:n})}):n(o)},s=>{t(s),n(e)})}function kv(i,e){return i==null?i:{kind:i.isFile?"file":i.isDirectory?"directory":void 0,name:i.name,getFile(){return new Promise((r,n)=>i.file(r,n))},values(){return So(this,null,function*(){let r=i.createReader(),n=yield new gr(new Promise(s=>{il(r,[],e,{onSuccess:o=>s(o.map(a=>kv(a,e)))})}));yield*Eo(n)})},isSameEntry:void 0}}function Pv(i,e,t){try{return t===void 0&&(t=void 0),function(){return So(this,null,function*(){let r=()=>`${e}/${i.name}`;if(i.kind==="file"){let l=yield new gr(i.getFile());l!=null?(l.relativePath=e?r():null,yield l):t!=null&&(yield t)}else if(i.kind==="directory")try{for(var n=Co(i.values()),s,o,a;s=!(o=yield new gr(n.next())).done;s=!1){let l=o.value;yield*Eo(Pv(l,e?r():i.name))}}catch{a=[o]}finally{try{s&&(o=n.return)&&(yield new gr(o.call(n)))}finally{if(a)throw a[0]}}else t!=null&&(yield t)})}()}catch(r){return Promise.reject(r)}}function Kc(i,e){return So(this,null,function*(){let t=yield new gr(Promise.all(Array.from(i.items,r=>m(null,null,function*(){let n;return n??(n=kv(typeof r.getAsEntry=="function"?r.getAsEntry():r.webkitGetAsEntry(),e)),{fileSystemHandle:n,lastResortFile:r.getAsFile()}}))));for(let{lastResortFile:r,fileSystemHandle:n}of t)if(n!=null)try{yield*Eo(Pv(n,"",r))}catch(s){r!=null?yield r:e(s)}else r!=null&&(yield r)})}function Xc(i){let e=mi(i.files);return Promise.resolve(e)}function Yc(i,e){return m(this,null,function*(){var t;let r=(t=e?.logDropError)!=null?t:Function.prototype;try{let l=[];try{for(var n=Co(Kc(i,r)),s,o,a;s=!(o=yield n.next()).done;s=!1){let u=o.value;l.push(u)}}catch{a=[o]}finally{try{s&&(o=n.return)&&(yield o.call(n))}finally{if(a)throw a[0]}}return l}catch{return Xc(i)}})}var Wv=se(Xe(),1);function Xs(i){return M(v({},i),{type:i.mimeType,extension:i.name?Dt(i.name).extension:null})}function LE(){return h("svg",{width:"26",height:"26",viewBox:"0 0 26 26",xmlns:"http://www.w3.org/2000/svg"},h("g",{fill:"none","fill-rule":"evenodd"},h("circle",{fill:"#FFF",cx:"13",cy:"13",r:"13"}),h("path",{d:"M21.64 13.205c0-.639-.057-1.252-.164-1.841H13v3.481h4.844a4.14 4.14 0 01-1.796 2.716v2.259h2.908c1.702-1.567 2.684-3.875 2.684-6.615z",fill:"#4285F4","fill-rule":"nonzero"}),h("path",{d:"M13 22c2.43 0 4.467-.806 5.956-2.18l-2.908-2.259c-.806.54-1.837.86-3.048.86-2.344 0-4.328-1.584-5.036-3.711H4.957v2.332A8.997 8.997 0 0013 22z",fill:"#34A853","fill-rule":"nonzero"}),h("path",{d:"M7.964 14.71A5.41 5.41 0 017.682 13c0-.593.102-1.17.282-1.71V8.958H4.957A8.996 8.996 0 004 13c0 1.452.348 2.827.957 4.042l3.007-2.332z",fill:"#FBBC05","fill-rule":"nonzero"}),h("path",{d:"M13 7.58c1.321 0 2.508.454 3.44 1.345l2.582-2.58C17.463 4.891 15.426 4 13 4a8.997 8.997 0 00-8.043 4.958l3.007 2.332C8.672 9.163 10.656 7.58 13 7.58z",fill:"#EA4335","fill-rule":"nonzero"}),h("path",{d:"M4 4h18v18H4z"})))}function NE(i){let{pluginName:e,i18n:t,onAuth:r}=i,n=e==="Google Drive",s=di(o=>{o.preventDefault(),r()},[r]);return h("form",{onSubmit:s},n?h("button",{type:"submit",className:"uppy-u-reset uppy-c-btn uppy-c-btn-primary uppy-Provider-authBtn uppy-Provider-btn-google","data-uppy-super-focusable":!0},h(LE,null),t("signInWithGoogle")):h("button",{type:"submit",className:"uppy-u-reset uppy-c-btn uppy-c-btn-primary uppy-Provider-authBtn","data-uppy-super-focusable":!0},t("authenticateWith",{pluginName:e})))}var ME=i=>{let{pluginName:e,i18n:t,onAuth:r}=i;return h(NE,{pluginName:e,i18n:t,onAuth:r})};function rl(i){let{loading:e,pluginName:t,pluginIcon:r,i18n:n,handleAuth:s,renderForm:o=ME}=i;return h("div",{className:"uppy-Provider-auth"},h("div",{className:"uppy-Provider-authIcon"},r()),h("div",{className:"uppy-Provider-authTitle"},n("authenticateWithTitle",{pluginName:t})),o({pluginName:t,i18n:n,loading:e,onAuth:s}))}var Tv=se(Xe(),1);function Jc(i){let{i18n:e,logout:t,username:r}=i;return h(Ue,null,r&&h("span",{className:"uppy-ProviderBrowser-user",key:"username"},r),h("button",{type:"button",onClick:t,className:"uppy-u-reset uppy-c-btn uppy-ProviderBrowser-userLogout",key:"logout"},e("logOut")))}function Zc(i){let{openFolder:e,title:t,breadcrumbsIcon:r,breadcrumbs:n,i18n:s}=i;return h("div",{className:"uppy-Provider-breadcrumbs"},h("div",{className:"uppy-Provider-breadcrumbsIcon"},r),n.map((o,a)=>{var l;return h(Ue,null,h("button",{key:o.id,type:"button",className:"uppy-u-reset uppy-c-btn",onClick:()=>e(o.id)},o.type==="root"?t:(l=o.data.name)!=null?l:s("unnamed")),n.length===a+1?"":" / ")}))}function Qc(i){return h("div",{className:"uppy-ProviderBrowser-header"},h("div",{className:(0,Tv.default)("uppy-ProviderBrowser-headerBar",!i.showBreadcrumbs&&"uppy-ProviderBrowser-headerBar--simple")},i.showBreadcrumbs&&h(Zc,{openFolder:i.openFolder,breadcrumbs:i.breadcrumbs,breadcrumbsIcon:i.pluginIcon&&i.pluginIcon(),title:i.title,i18n:i.i18n}),h(Jc,{logout:i.logout,username:i.username,i18n:i.i18n})))}function ed(){return ed=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(i[r]=t[r])}return i},ed.apply(null,arguments)}var BE={position:"relative",width:"100%",minHeight:"100%"},jE={position:"absolute",top:0,left:0,width:"100%",overflow:"visible"},td=class extends pe{constructor(e){super(e),this.handleScroll=()=>{this.setState({offset:this.base.scrollTop})},this.handleResize=()=>{this.resize()},this.focusElement=null,this.state={offset:0,height:0}}componentDidMount(){this.resize(),window.addEventListener("resize",this.handleResize)}componentWillUpdate(){this.base.contains(document.activeElement)&&(this.focusElement=document.activeElement)}componentDidUpdate(){this.focusElement&&this.focusElement.parentNode&&document.activeElement!==this.focusElement&&this.focusElement.focus(),this.focusElement=null,this.resize()}componentWillUnmount(){window.removeEventListener("resize",this.handleResize)}resize(){let{height:e}=this.state;e!==this.base.offsetHeight&&this.setState({height:this.base.offsetHeight})}render(e){let S=e,{data:t,rowHeight:r,renderRow:n,overscanCount:s=10}=S,o=mr(S,["data","rowHeight","renderRow","overscanCount"]),{offset:a,height:l}=this.state,u=Math.floor(a/r),c=Math.floor(l/r);s&&(u=Math.max(0,u-u%s),c+=s);let d=u+c+4,p=t.slice(u,d),f=M(v({},BE),{height:t.length*r}),y=M(v({},jE),{top:u*r});return h("div",ed({onScroll:this.handleScroll},o),h("div",{role:"presentation",style:f},h("div",{role:"presentation",style:y},p.map(n))))}},nl=td;var Ov=se(Xe(),1);function zE(){return h("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:11,height:14.5,viewBox:"0 0 44 58"},h("path",{d:"M27.437.517a1 1 0 0 0-.094.03H4.25C2.037.548.217 2.368.217 4.58v48.405c0 2.212 1.82 4.03 4.03 4.03H39.03c2.21 0 4.03-1.818 4.03-4.03V15.61a1 1 0 0 0-.03-.28 1 1 0 0 0 0-.093 1 1 0 0 0-.03-.032 1 1 0 0 0 0-.03 1 1 0 0 0-.032-.063 1 1 0 0 0-.03-.063 1 1 0 0 0-.032 0 1 1 0 0 0-.03-.063 1 1 0 0 0-.032-.03 1 1 0 0 0-.03-.063 1 1 0 0 0-.063-.062l-14.593-14a1 1 0 0 0-.062-.062A1 1 0 0 0 28 .708a1 1 0 0 0-.374-.157 1 1 0 0 0-.156 0 1 1 0 0 0-.03-.03l-.003-.003zM4.25 2.547h22.218v9.97c0 2.21 1.82 4.03 4.03 4.03h10.564v36.438a2.02 2.02 0 0 1-2.032 2.032H4.25c-1.13 0-2.032-.9-2.032-2.032V4.58c0-1.13.902-2.032 2.03-2.032zm24.218 1.345l10.375 9.937.75.718H30.5c-1.13 0-2.032-.9-2.032-2.03V3.89z"}))}function $E(){return h("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",style:{minWidth:16,marginRight:3},viewBox:"0 0 276.157 276.157"},h("path",{d:"M273.08 101.378c-3.3-4.65-8.86-7.32-15.254-7.32h-24.34V67.59c0-10.2-8.3-18.5-18.5-18.5h-85.322c-3.63 0-9.295-2.875-11.436-5.805l-6.386-8.735c-4.982-6.814-15.104-11.954-23.546-11.954H58.73c-9.292 0-18.638 6.608-21.737 15.372l-2.033 5.752c-.958 2.71-4.72 5.37-7.596 5.37H18.5C8.3 49.09 0 57.39 0 67.59v167.07c0 .886.16 1.73.443 2.52.152 3.306 1.18 6.424 3.053 9.064 3.3 4.652 8.86 7.32 15.255 7.32h188.487c11.395 0 23.27-8.425 27.035-19.18l40.677-116.188c2.11-6.035 1.43-12.164-1.87-16.816zM18.5 64.088h8.864c9.295 0 18.64-6.607 21.738-15.37l2.032-5.75c.96-2.712 4.722-5.373 7.597-5.373h29.565c3.63 0 9.295 2.876 11.437 5.806l6.386 8.735c4.982 6.815 15.104 11.954 23.546 11.954h85.322c1.898 0 3.5 1.602 3.5 3.5v26.47H69.34c-11.395 0-23.27 8.423-27.035 19.178L15 191.23V67.59c0-1.898 1.603-3.5 3.5-3.5zm242.29 49.15l-40.676 116.188c-1.674 4.78-7.812 9.135-12.877 9.135H18.75c-1.447 0-2.576-.372-3.02-.997-.442-.625-.422-1.814.057-3.18l40.677-116.19c1.674-4.78 7.812-9.134 12.877-9.134h188.487c1.448 0 2.577.372 3.02.997.443.625.423 1.814-.056 3.18z"}))}function HE(){return h("svg",{"aria-hidden":"true",focusable:"false",style:{width:16,marginRight:4},viewBox:"0 0 58 58"},h("path",{d:"M36.537 28.156l-11-7a1.005 1.005 0 0 0-1.02-.033C24.2 21.3 24 21.635 24 22v14a1 1 0 0 0 1.537.844l11-7a1.002 1.002 0 0 0 0-1.688zM26 34.18V23.82L34.137 29 26 34.18z"}),h("path",{d:"M57 6H1a1 1 0 0 0-1 1v44a1 1 0 0 0 1 1h56a1 1 0 0 0 1-1V7a1 1 0 0 0-1-1zM10 28H2v-9h8v9zm-8 2h8v9H2v-9zm10 10V8h34v42H12V40zm44-12h-8v-9h8v9zm-8 2h8v9h-8v-9zm8-22v9h-8V8h8zM2 8h8v9H2V8zm0 42v-9h8v9H2zm54 0h-8v-9h8v9z"}))}function Zr(i){let{itemIconString:e,alt:t=void 0}=i;if(e===null)return null;switch(e){case"file":return h(zE,null);case"folder":return h($E,null);case"video":return h(HE,null);default:return h("img",{src:e,alt:t,referrerPolicy:"no-referrer",loading:"lazy",width:16,height:16})}}function VE(i){var e,t;let{file:r,toggleCheckbox:n,className:s,isDisabled:o,restrictionError:a,showTitles:l,children:u=null,i18n:c}=i;return h("li",{className:s,title:o&&a?a:void 0},h("input",{type:"checkbox",className:"uppy-u-reset uppy-ProviderBrowserItem-checkbox uppy-ProviderBrowserItem-checkbox--grid",onChange:n,name:"listitem",id:r.id,checked:r.status==="checked",disabled:o,"data-uppy-super-focusable":!0}),h("label",{htmlFor:r.id,"aria-label":(e=r.data.name)!=null?e:c("unnamed"),className:"uppy-u-reset uppy-ProviderBrowserItem-inner"},h(Zr,{itemIconString:r.data.thumbnail||r.data.icon}),l&&((t=r.data.name)!=null?t:c("unnamed")),u))}var id=VE;function rd(i){var e,t,r;let{file:n,openFolder:s,className:o,isDisabled:a,restrictionError:l,toggleCheckbox:u,showTitles:c,i18n:d}=i;return h("li",{className:o,title:n.status!=="checked"&&l?l:void 0},h("input",{type:"checkbox",className:"uppy-u-reset uppy-ProviderBrowserItem-checkbox",onChange:u,name:"listitem",id:n.id,checked:n.status==="checked","aria-label":n.data.isFolder?d("allFilesFromFolderNamed",{name:(e=n.data.name)!=null?e:d("unnamed")}):null,disabled:a,"data-uppy-super-focusable":!0}),n.data.isFolder?h("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-ProviderBrowserItem-inner",onClick:()=>s(n.id),"aria-label":d("openFolderNamed",{name:(t=n.data.name)!=null?t:d("unnamed")})},h("div",{className:"uppy-ProviderBrowserItem-iconWrap"},h(Zr,{itemIconString:n.data.icon})),c&&n.data.name?h("span",null,n.data.name):d("unnamed")):h("label",{htmlFor:n.id,className:"uppy-u-reset uppy-ProviderBrowserItem-inner"},h("div",{className:"uppy-ProviderBrowserItem-iconWrap"},h(Zr,{itemIconString:n.data.icon})),c&&((r=n.data.name)!=null?r:d("unnamed"))))}function nd(i){let{viewType:e,toggleCheckbox:t,showTitles:r,i18n:n,openFolder:s,file:o,utmSource:a}=i,l=o.type==="folder"?null:o.restrictionError,u=!!l&&o.status!=="checked",c={file:o,openFolder:s,toggleCheckbox:t,utmSource:a,i18n:n,viewType:e,showTitles:r,className:(0,Ov.default)("uppy-ProviderBrowserItem",{"uppy-ProviderBrowserItem--disabled":u},{"uppy-ProviderBrowserItem--noPreview":o.data.icon==="video"},{"uppy-ProviderBrowserItem--is-checked":o.status==="checked"},{"uppy-ProviderBrowserItem--is-partial":o.status==="partial"}),isDisabled:u,restrictionError:l};switch(e){case"grid":return h(id,c);case"list":return h(rd,c);case"unsplash":return h(id,c,h("a",{href:`${o.data.author.url}?utm_source=${a}&utm_medium=referral`,target:"_blank",rel:"noopener noreferrer",className:"uppy-ProviderBrowserItem-author",tabIndex:-1},o.data.author.name));default:throw new Error(`There is no such type ${e}`)}}function qE(i){let{displayedPartialTree:e,viewType:t,toggleCheckbox:r,handleScroll:n,showTitles:s,i18n:o,isLoading:a,openFolder:l,noResultsLabel:u,virtualList:c,utmSource:d}=i,[p,f]=vt(!1);if(Et(()=>{let S=E=>{E.key==="Shift"&&f(!1)},k=E=>{E.key==="Shift"&&f(!0)};return document.addEventListener("keyup",S),document.addEventListener("keydown",k),()=>{document.removeEventListener("keyup",S),document.removeEventListener("keydown",k)}},[]),a)return h("div",{className:"uppy-Provider-loading"},typeof a=="string"?a:o("loading"));if(e.length===0)return h("div",{className:"uppy-Provider-empty"},u);let y=S=>h(nd,{viewType:t,toggleCheckbox:k=>{var E;k.stopPropagation(),k.preventDefault(),(E=document.getSelection())==null||E.removeAllRanges(),r(S,p)},showTitles:s,i18n:o,openFolder:l,file:S,utmSource:d});return c?h("div",{className:"uppy-ProviderBrowser-body"},h("ul",{className:"uppy-ProviderBrowser-list"},h(nl,{data:e,renderRow:y,rowHeight:31}))):h("div",{className:"uppy-ProviderBrowser-body"},h("ul",{className:"uppy-ProviderBrowser-list",onScroll:n,role:"listbox",tabIndex:-1},e.map(y)))}var sl=qE;var WE=(i,e,t,r,n)=>{let s=e.filter(f=>f.isFolder===!0),o=e.filter(f=>f.isFolder===!1),a=t.type==="folder"&&t.status==="checked",l=s.map(f=>({type:"folder",id:f.requestPath,cached:!1,nextPagePath:null,status:a?"checked":"unchecked",parentId:t.id,data:f})),u=o.map(f=>{let y=n(f);return{type:"file",id:f.requestPath,restrictionError:y,status:a&&!y?"checked":"unchecked",parentId:t.id,data:f}}),c=M(v({},t),{cached:!0,nextPagePath:r});return[...i.map(f=>f.id===c.id?c:f),...l,...u]},Fv=WE;var GE=(i,e,t,r,n)=>{let s=i.find(y=>y.id===e),o=t.filter(y=>y.isFolder===!0),a=t.filter(y=>y.isFolder===!1),l=M(v({},s),{nextPagePath:r}),u=i.map(y=>y.id===l.id?l:y),c=l.type==="folder"&&l.status==="checked",d=o.map(y=>({type:"folder",id:y.requestPath,cached:!1,nextPagePath:null,status:c?"checked":"unchecked",parentId:l.id,data:y})),p=a.map(y=>{let S=n(y);return{type:"file",id:y.requestPath,restrictionError:S,status:c&&!S?"checked":"unchecked",parentId:l.id,data:y}});return[...u,...d,...p]},Av=GE;var KE=i=>i.map(e=>v({},e)),ol=KE;var sd=(i,e,t)=>{i.filter(n=>n.type!=="root"&&n.parentId===e).forEach(n=>{n.status=t&&!(n.type==="file"&&n.restrictionError)?"checked":"unchecked",sd(i,n.id,t)})},od=(i,e)=>{let t=i.find(o=>o.id===e);if(t.type==="root")return;let r=i.filter(o=>o.type!=="root"&&o.parentId===t.id&&!(o.type==="file"&&o.restrictionError)),n=r.every(o=>o.status==="checked"),s=r.every(o=>o.status==="unchecked");n?t.status="checked":s?t.status="unchecked":t.status="partial",od(i,t.parentId)},XE=(i,e)=>{let t=ol(i);if(e.length>=2){let r=t.filter(n=>n.type!=="root"&&e.includes(n.id));r.forEach(n=>{n.type==="file"?n.status=n.restrictionError?"unchecked":"checked":n.status="checked"}),r.forEach(n=>{sd(t,n.id,!0)}),od(t,r[0].parentId)}else{let r=t.find(n=>n.id===e[0]);r.status=r.status==="checked"?"unchecked":"checked",sd(t,r.id,r.status==="checked"),od(t,r.parentId)}return t},Rv=XE;var ld=se(Dv(),1);var Js=class extends Error{constructor(e){super(e),this.name="TimeoutError"}},ud=class extends Error{constructor(e){super(),this.name="AbortError",this.message=e}},Uv=i=>globalThis.DOMException===void 0?new ud(i):new DOMException(i),Lv=i=>{let e=i.reason===void 0?Uv("This operation was aborted."):i.reason;return e instanceof Error?e:Uv(e)};function cd(i,e){let{milliseconds:t,fallback:r,message:n,customTimers:s={setTimeout,clearTimeout}}=e,o,a,u=new Promise((c,d)=>{if(typeof t!="number"||Math.sign(t)!==1)throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${t}\``);if(e.signal){let{signal:f}=e;f.aborted&&d(Lv(f)),a=()=>{d(Lv(f))},f.addEventListener("abort",a,{once:!0})}if(t===Number.POSITIVE_INFINITY){i.then(c,d);return}let p=new Js;o=s.setTimeout.call(void 0,()=>{if(r){try{c(r())}catch(f){d(f)}return}typeof i.cancel=="function"&&i.cancel(),n===!1?c():n instanceof Error?d(n):(p.message=n??`Promise timed out after ${t} milliseconds`,d(p))},t),m(null,null,function*(){try{c(yield i)}catch(f){d(f)}})}).finally(()=>{u.clear(),a&&e.signal&&e.signal.removeEventListener("abort",a)});return u.clear=()=>{s.clearTimeout.call(void 0,o),o=void 0},u}function dd(i,e,t){let r=0,n=i.length;for(;n>0;){let s=Math.trunc(n/2),o=r+s;t(i[o],e)<=0?(r=++o,n-=s+1):n=s}return r}var ll=class{#e=[];enqueue(e,t){t=v({priority:0},t);let r={priority:t.priority,id:t.id,run:e};if(this.size===0||this.#e[this.size-1].priority>=t.priority){this.#e.push(r);return}let n=dd(this.#e,r,(s,o)=>o.priority-s.priority);this.#e.splice(n,0,r)}setPriority(e,t){let r=this.#e.findIndex(s=>s.id===e);if(r===-1)throw new ReferenceError(`No promise function with the id "${e}" exists in the queue.`);let[n]=this.#e.splice(r,1);this.enqueue(n.run,{priority:t,id:e})}dequeue(){return this.#e.shift()?.run}filter(e){return this.#e.filter(t=>t.priority===e.priority).map(t=>t.run)}get size(){return this.#e.length}};var ul=class extends ld.default{#e;#o;#s=0;#f;#a;#p=0;#i;#l;#t;#m;#r=0;#u;#n;#g;#_=1n;timeout;constructor(e){if(super(),e=v({carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:ll},e),!(typeof e.intervalCap=="number"&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${e.intervalCap?.toString()??""}\` (${typeof e.intervalCap})`);if(e.interval===void 0||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${e.interval?.toString()??""}\` (${typeof e.interval})`);this.#e=e.carryoverConcurrencyCount,this.#o=e.intervalCap===Number.POSITIVE_INFINITY||e.interval===0,this.#f=e.intervalCap,this.#a=e.interval,this.#t=new e.queueClass,this.#m=e.queueClass,this.concurrency=e.concurrency,this.timeout=e.timeout,this.#g=e.throwOnTimeout===!0,this.#n=e.autoStart===!1}get#b(){return this.#o||this.#s<this.#f}get#w(){return this.#r<this.#u}#S(){this.#r--,this.#c(),this.emit("next")}#E(){this.#v(),this.#y(),this.#l=void 0}get#C(){let e=Date.now();if(this.#i===void 0){let t=this.#p-e;if(t<0)this.#s=this.#e?this.#r:0;else return this.#l===void 0&&(this.#l=setTimeout(()=>{this.#E()},t)),!0}return!1}#c(){if(this.#t.size===0)return this.#i&&clearInterval(this.#i),this.#i=void 0,this.emit("empty"),this.#r===0&&this.emit("idle"),!1;if(!this.#n){let e=!this.#C;if(this.#b&&this.#w){let t=this.#t.dequeue();return t?(this.emit("active"),t(),e&&this.#y(),!0):!1}}return!1}#y(){this.#o||this.#i!==void 0||(this.#i=setInterval(()=>{this.#v()},this.#a),this.#p=Date.now()+this.#a)}#v(){this.#s===0&&this.#r===0&&this.#i&&(clearInterval(this.#i),this.#i=void 0),this.#s=this.#e?this.#r:0,this.#d()}#d(){for(;this.#c(););}get concurrency(){return this.#u}set concurrency(e){if(!(typeof e=="number"&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this.#u=e,this.#d()}#x(e){return m(this,null,function*(){return new Promise((t,r)=>{e.addEventListener("abort",()=>{r(e.reason)},{once:!0})})})}setPriority(e,t){this.#t.setPriority(e,t)}add(r){return m(this,arguments,function*(e,t={}){return t.id??=(this.#_++).toString(),t=v({timeout:this.timeout,throwOnTimeout:this.#g},t),new Promise((n,s)=>{this.#t.enqueue(()=>m(this,null,function*(){this.#r++,this.#s++;try{t.signal?.throwIfAborted();let o=e({signal:t.signal});t.timeout&&(o=cd(Promise.resolve(o),{milliseconds:t.timeout})),t.signal&&(o=Promise.race([o,this.#x(t.signal)]));let a=yield o;n(a),this.emit("completed",a)}catch(o){if(o instanceof Js&&!t.throwOnTimeout){n();return}s(o),this.emit("error",o)}finally{this.#S()}}),t),this.emit("add"),this.#c()})})}addAll(e,t){return m(this,null,function*(){return Promise.all(e.map(r=>m(this,null,function*(){return this.add(r,t)})))})}start(){return this.#n?(this.#n=!1,this.#d(),this):this}pause(){this.#n=!0}clear(){this.#t=new this.#m}onEmpty(){return m(this,null,function*(){this.#t.size!==0&&(yield this.#h("empty"))})}onSizeLessThan(e){return m(this,null,function*(){this.#t.size<e||(yield this.#h("next",()=>this.#t.size<e))})}onIdle(){return m(this,null,function*(){this.#r===0&&this.#t.size===0||(yield this.#h("idle"))})}#h(e,t){return m(this,null,function*(){return new Promise(r=>{let n=()=>{t&&!t()||(this.off(e,n),r())};this.on(e,n)})})}get size(){return this.#t.size}sizeBy(e){return this.#t.filter(e).length}get pending(){return this.#r}get isPaused(){return this.#n}};var Nv=(i,e,t,r,n)=>m(null,null,function*(){let s=[],o=t.cached?t.nextPagePath:t.id;for(;o;){let d=yield r(o);s=s.concat(d.items),o=d.nextPagePath}let a=s.filter(d=>d.isFolder===!0),l=s.filter(d=>d.isFolder===!1),u=a.map(d=>({type:"folder",id:d.requestPath,cached:!1,nextPagePath:null,status:"checked",parentId:t.id,data:d})),c=l.map(d=>{let p=n(d);return{type:"file",id:d.requestPath,restrictionError:p,status:p?"unchecked":"checked",parentId:t.id,data:d}});t.cached=!0,t.nextPagePath=null,e.push(...c,...u),u.forEach(d=>m(null,null,function*(){i.add(()=>Nv(i,e,d,r,n))}))}),ZE=(i,e,t,r)=>m(null,null,function*(){let n=new ul({concurrency:6}),s=ol(i);return s.filter(a=>a.type==="folder"&&a.status==="checked"&&(a.cached===!1||a.nextPagePath)).forEach(a=>{n.add(()=>Nv(n,s,a,e,t))}),n.on("completed",()=>{let a=s.filter(l=>l.type==="file"&&l.status==="checked").length;r(a)}),yield n.onIdle(),s}),Mv=ZE;var er={afterOpenFolder:Fv,afterScrollFolder:Av,afterToggleCheckbox:Rv,afterFill:Mv};var QE=i=>{let{scrollHeight:e,scrollTop:t,offsetHeight:r}=i.target;return e-(t+r)<50},cl=QE;var eC=i=>e=>{if(!e.isAuthError){if(e.name==="AbortError"){i.log("Aborting request","warning");return}i.log(e,"error"),e.name==="UserFacingApiError"&&i.info({message:i.i18n("companionError"),details:i.i18n(e.message)},"warning",5e3)}},ti=eC;var tC=(i,e,t,r)=>{let n=e.findIndex(s=>s.id===r);if(n!==-1&&t){let s=e.findIndex(a=>a.id===i);return e.slice(Math.min(n,s),Math.max(n,s)+1).map(a=>a.id)}return[i]},dl=tC;function iC(i){let{searchString:e,setSearchString:t,submitSearchString:r,wrapperClassName:n,inputClassName:s,inputLabel:o,clearSearchLabel:a="",showButton:l=!1,buttonLabel:u="",buttonCSSClassName:c=""}=i,d=y=>{t(y.target.value)},p=di(y=>{y.preventDefault(),r()},[r]),[f]=vt(()=>{let y=document.createElement("form");return y.setAttribute("tabindex","-1"),y.id=li(),y});return Et(()=>(document.body.appendChild(f),f.addEventListener("submit",p),()=>{f.removeEventListener("submit",p),document.body.removeChild(f)}),[f,p]),h("section",{className:n},h("input",{className:`uppy-u-reset ${s}`,type:"search","aria-label":o,placeholder:o,value:e,onInput:d,form:f.id,"data-uppy-super-focusable":!0}),!l&&h("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon uppy-ProviderBrowser-searchFilterIcon",width:"12",height:"12",viewBox:"0 0 12 12"},h("path",{d:"M8.638 7.99l3.172 3.172a.492.492 0 1 1-.697.697L7.91 8.656a4.977 4.977 0 0 1-2.983.983C2.206 9.639 0 7.481 0 4.819 0 2.158 2.206 0 4.927 0c2.721 0 4.927 2.158 4.927 4.82a4.74 4.74 0 0 1-1.216 3.17zm-3.71.685c2.176 0 3.94-1.726 3.94-3.856 0-2.129-1.764-3.855-3.94-3.855C2.75.964.984 2.69.984 4.819c0 2.13 1.765 3.856 3.942 3.856z"})),!l&&e&&h("button",{className:"uppy-u-reset uppy-ProviderBrowser-searchFilterReset",type:"button","aria-label":a,title:a,onClick:()=>t("")},h("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",viewBox:"0 0 19 19"},h("path",{d:"M17.318 17.232L9.94 9.854 9.586 9.5l-.354.354-7.378 7.378h.707l-.62-.62v.706L9.318 9.94l.354-.354-.354-.354L1.94 1.854v.707l.62-.62h-.706l7.378 7.378.354.354.354-.354 7.378-7.378h-.707l.622.62v-.706L9.854 9.232l-.354.354.354.354 7.378 7.378.708-.707-7.38-7.378v.708l7.38-7.38.353-.353-.353-.353-.622-.622-.353-.353-.354.352-7.378 7.38h.708L2.56 1.23 2.208.88l-.353.353-.622.62-.353.355.352.353 7.38 7.38v-.708l-7.38 7.38-.353.353.352.353.622.622.353.353.354-.353 7.38-7.38h-.708l7.38 7.38z"}))),l&&h("button",{className:`uppy-u-reset uppy-c-btn uppy-c-btn-primary ${c}`,type:"submit",form:f.id},u))}var Qr=iC;var jv=se(Xe(),1);var rC=i=>i.filter(t=>t.type==="file"&&t.status==="checked"?!0:t.type==="folder"&&t.status==="checked"?!i.some(n=>n.type!=="root"&&n.parentId===t.id):!1).length,Bv=rC;function Zs(i){let{cancelSelection:e,donePicking:t,i18n:r,partialTree:n,validateAggregateRestrictions:s}=i,o=ci(()=>s(n),[n,s]),a=ci(()=>Bv(n),[n]);return a===0?null:h("div",{className:"uppy-ProviderBrowser-footer"},h("div",{className:"uppy-ProviderBrowser-footer-buttons"},h("button",{className:(0,jv.default)("uppy-u-reset uppy-c-btn uppy-c-btn-primary",{"uppy-c-btn--disabled":o}),disabled:!!o,onClick:t,type:"button"},r("selectX",{smart_count:a})),h("button",{className:"uppy-u-reset uppy-c-btn uppy-c-btn-link",onClick:e,type:"button"},r("cancel"))),o&&h("div",{className:"uppy-ProviderBrowser-footer-error"},o))}var nC=(i,e,t)=>{var r,n;return{id:i.id,source:e.id,name:i.name||i.id,type:i.mimeType,isRemote:!0,data:i,preview:i.thumbnail||void 0,meta:{authorName:(r=i.author)==null?void 0:r.name,authorUrl:(n=i.author)==null?void 0:n.url,relativePath:i.relDirPath||null,absolutePath:i.absDirPath},body:{fileId:i.id},remote:{companionUrl:e.opts.companionUrl,url:`${t.fileUrl(i.requestPath)}`,body:{fileId:i.id},providerName:t.name,provider:t.provider,requestClientId:t.provider}}},zv=nC;var sC=(i,e,t)=>{let r=i.map(o=>zv(o,e,t)),n=[],s=[];r.forEach(o=>{e.uppy.checkIfFileAlreadyExists(ba(o,e.uppy.getID()))?s.push(o):n.push(o)}),n.length>0&&e.uppy.info(e.uppy.i18n("addedNumFiles",{numFiles:n.length})),s.length>0&&e.uppy.info(`Not adding ${s.length} files because they already exist`),e.uppy.addFiles(n)},hl=sC;var $v=(i,e,t)=>{let r=e===null?"null":e;if(t[r])return t[r];let n=i.find(o=>o.id===e);if(n.type==="root")return[];let s=[...$v(i,n.parentId,t),n];return t[r]=s,s},oC=i=>{let e=Object.create(null);return i.filter(n=>n.type==="file"&&n.status==="checked").map(n=>{let s=$v(i,n.id,e),o=s.findIndex(c=>c.type==="folder"&&c.status==="checked"),a=s.slice(o),l=`/${s.map(c=>c.data.name).join("/")}`,u=a.length===1?void 0:a.map(c=>c.data.name).join("/");return M(v({},n.data),{absDirPath:l,relDirPath:u})})},fl=oC;var aC=(i,e)=>{let t=i.find(n=>n.id===e),r=[];for(;r=[t,...r],t.type!=="root";){let n=t.parentId;t=i.find(s=>s.id===n)}return r},Hv=aC;function gi(i,e){if(!{}.hasOwnProperty.call(i,e))throw new TypeError("attempted to use private field on non-instance");return i}var lC=0;function qv(i){return"__private_"+lC+++"_"+i}var uC={version:"4.4.4"};function eo(){return h("svg",{"aria-hidden":"true",focusable:"false",width:"30",height:"30",viewBox:"0 0 30 30"},h("path",{d:"M15 30c8.284 0 15-6.716 15-15 0-8.284-6.716-15-15-15C6.716 0 0 6.716 0 15c0 8.284 6.716 15 15 15zm4.258-12.676v6.846h-8.426v-6.846H5.204l9.82-12.364 9.82 12.364H19.26z"}))}var Vv=i=>({authenticated:void 0,partialTree:[{type:"root",id:i,cached:!1,nextPagePath:null}],currentFolderId:i,searchString:"",didFirstRender:!1,username:null,loading:!1}),tr=qv("abortController"),xt=qv("withAbort"),Qs=class{constructor(e,t){Object.defineProperty(this,xt,{value:cC}),this.isHandlingScroll=!1,this.lastCheckbox=null,Object.defineProperty(this,tr,{writable:!0,value:void 0}),this.validateSingleFile=n=>{let s=Xs(n);return this.plugin.uppy.validateSingleFile(s)},this.getDisplayedPartialTree=()=>{let{partialTree:n,currentFolderId:s,searchString:o}=this.plugin.getPluginState(),a=n.filter(u=>u.type!=="root"&&u.parentId===s);return o===""?a:a.filter(u=>{var c;return((c=u.data.name)!=null?c:this.plugin.uppy.i18n("unnamed")).toLowerCase().indexOf(o.toLowerCase())!==-1})},this.validateAggregateRestrictions=n=>{let o=n.filter(a=>a.type==="file"&&a.status==="checked").map(a=>a.data);return this.plugin.uppy.validateAggregateRestrictions(o)},this.plugin=e,this.provider=t.provider;let r={viewType:"list",showTitles:!0,showFilter:!0,showBreadcrumbs:!0,loadAllFiles:!1,virtualList:!1};this.opts=v(v({},r),t),this.openFolder=this.openFolder.bind(this),this.logout=this.logout.bind(this),this.handleAuth=this.handleAuth.bind(this),this.handleScroll=this.handleScroll.bind(this),this.resetPluginState=this.resetPluginState.bind(this),this.donePicking=this.donePicking.bind(this),this.render=this.render.bind(this),this.cancelSelection=this.cancelSelection.bind(this),this.toggleCheckbox=this.toggleCheckbox.bind(this),this.resetPluginState(),this.plugin.uppy.on("dashboard:close-panel",this.resetPluginState),this.plugin.uppy.registerRequestClient(this.provider.provider,this.provider)}resetPluginState(){this.plugin.setPluginState(Vv(this.plugin.rootFolderId))}tearDown(){}setLoading(e){this.plugin.setPluginState({loading:e})}cancelSelection(){let{partialTree:e}=this.plugin.getPluginState(),t=e.map(r=>r.type==="root"?r:M(v({},r),{status:"unchecked"}));this.plugin.setPluginState({partialTree:t})}openFolder(e){return m(this,null,function*(){this.lastCheckbox=null;let{partialTree:t}=this.plugin.getPluginState(),r=t.find(n=>n.id===e);if(r.cached){this.plugin.setPluginState({currentFolderId:e,searchString:""});return}this.setLoading(!0),yield gi(this,xt)[xt](n=>m(this,null,function*(){let s=e,o=[];do{let{username:l,nextPagePath:u,items:c}=yield this.provider.list(s,{signal:n});this.plugin.setPluginState({username:l}),s=u,o=o.concat(c),this.setLoading(this.plugin.uppy.i18n("loadedXFiles",{numFiles:o.length}))}while(this.opts.loadAllFiles&&s);let a=er.afterOpenFolder(t,o,r,s,this.validateSingleFile);this.plugin.setPluginState({partialTree:a,currentFolderId:e,searchString:""})})).catch(ti(this.plugin.uppy)),this.setLoading(!1)})}logout(){return m(this,null,function*(){yield gi(this,xt)[xt](e=>m(this,null,function*(){let t=yield this.provider.logout({signal:e});if(t.ok){if(!t.revoked){let r=this.plugin.uppy.i18n("companionUnauthorizeHint",{provider:this.plugin.title,url:t.manual_revoke_url});this.plugin.uppy.info(r,"info",7e3)}this.plugin.setPluginState(M(v({},Vv(this.plugin.rootFolderId)),{authenticated:!1}))}})).catch(ti(this.plugin.uppy))})}handleAuth(e){return m(this,null,function*(){yield gi(this,xt)[xt](t=>m(this,null,function*(){this.setLoading(!0),yield this.provider.login({authFormData:e,signal:t}),this.plugin.setPluginState({authenticated:!0}),yield Promise.all([this.provider.fetchPreAuthToken(),this.openFolder(this.plugin.rootFolderId)])})).catch(ti(this.plugin.uppy)),this.setLoading(!1)})}handleScroll(e){return m(this,null,function*(){let{partialTree:t,currentFolderId:r}=this.plugin.getPluginState(),n=t.find(s=>s.id===r);cl(e)&&!this.isHandlingScroll&&n.nextPagePath&&(this.isHandlingScroll=!0,yield gi(this,xt)[xt](s=>m(this,null,function*(){let{nextPagePath:o,items:a}=yield this.provider.list(n.nextPagePath,{signal:s}),l=er.afterScrollFolder(t,r,a,o,this.validateSingleFile);this.plugin.setPluginState({partialTree:l})})).catch(ti(this.plugin.uppy)),this.isHandlingScroll=!1)})}donePicking(){return m(this,null,function*(){let{partialTree:e}=this.plugin.getPluginState();this.setLoading(!0),yield gi(this,xt)[xt](t=>m(this,null,function*(){let r=yield er.afterFill(e,o=>this.provider.list(o,{signal:t}),this.validateSingleFile,o=>{this.setLoading(this.plugin.uppy.i18n("addedNumFiles",{numFiles:o}))});if(this.validateAggregateRestrictions(r)){this.plugin.setPluginState({partialTree:r});return}let s=fl(r);hl(s,this.plugin,this.provider),this.resetPluginState()})).catch(ti(this.plugin.uppy)),this.setLoading(!1)})}toggleCheckbox(e,t){let{partialTree:r}=this.plugin.getPluginState(),n=dl(e.id,this.getDisplayedPartialTree(),t,this.lastCheckbox),s=er.afterToggleCheckbox(r,n);this.plugin.setPluginState({partialTree:s}),this.lastCheckbox=e.id}render(e,t){t===void 0&&(t={});let{didFirstRender:r}=this.plugin.getPluginState(),{i18n:n}=this.plugin.uppy;r||(this.plugin.setPluginState({didFirstRender:!0}),this.provider.fetchPreAuthToken(),this.openFolder(this.plugin.rootFolderId));let s=v(v({},this.opts),t),{authenticated:o,loading:a}=this.plugin.getPluginState(),l=this.plugin.icon||eo;if(o===!1)return h(rl,{pluginName:this.plugin.title,pluginIcon:l,handleAuth:this.handleAuth,i18n:this.plugin.uppy.i18n,renderForm:s.renderAuthForm,loading:a});let{partialTree:u,currentFolderId:c,username:d,searchString:p}=this.plugin.getPluginState(),f=Hv(u,c);return h("div",{className:(0,Wv.default)("uppy-ProviderBrowser",`uppy-ProviderBrowser-viewType--${s.viewType}`)},h(Qc,{showBreadcrumbs:s.showBreadcrumbs,openFolder:this.openFolder,breadcrumbs:f,pluginIcon:l,title:this.plugin.title,logout:this.logout,username:d,i18n:n}),s.showFilter&&h(Qr,{searchString:p,setSearchString:y=>{this.plugin.setPluginState({searchString:y})},submitSearchString:()=>{},inputLabel:n("filter"),clearSearchLabel:n("resetFilter"),wrapperClassName:"uppy-ProviderBrowser-searchFilter",inputClassName:"uppy-ProviderBrowser-searchFilterInput"}),h(sl,{toggleCheckbox:this.toggleCheckbox,displayedPartialTree:this.getDisplayedPartialTree(),openFolder:this.openFolder,virtualList:s.virtualList,noResultsLabel:n("noFilesFound"),handleScroll:this.handleScroll,viewType:s.viewType,showTitles:s.showTitles,i18n:this.plugin.uppy.i18n,isLoading:a,utmSource:"Companion"}),h(Zs,{partialTree:u,donePicking:this.donePicking,cancelSelection:this.cancelSelection,i18n:n,validateAggregateRestrictions:this.validateAggregateRestrictions}))}};function cC(i){return m(this,null,function*(){var e;(e=gi(this,tr)[tr])==null||e.abort();let t=new AbortController;gi(this,tr)[tr]=t;let r=()=>{t.abort()};try{this.plugin.uppy.on("dashboard:close-panel",r),this.plugin.uppy.on("cancel-all",r),yield i(t.signal)}finally{this.plugin.uppy.off("dashboard:close-panel",r),this.plugin.uppy.off("cancel-all",r),gi(this,tr)[tr]=void 0}})}Qs.VERSION=uC.version;var Gv=se(Xe(),1);var dC={version:"4.4.4"},hC={loading:!1,searchString:"",partialTree:[{type:"root",id:null,cached:!1,nextPagePath:null}],currentFolderId:null,isInputMode:!0},fC={viewType:"grid",showTitles:!0,showFilter:!0,utmSource:"Companion"},en=class{constructor(e,t){this.isHandlingScroll=!1,this.lastCheckbox=null,this.validateSingleFile=r=>{let n=Xs(r);return this.plugin.uppy.validateSingleFile(n)},this.getDisplayedPartialTree=()=>{let{partialTree:r}=this.plugin.getPluginState();return r.filter(n=>n.type!=="root")},this.setSearchString=r=>{this.plugin.setPluginState({searchString:r}),r===""&&this.plugin.setPluginState({partialTree:[]})},this.validateAggregateRestrictions=r=>{let s=r.filter(o=>o.type==="file"&&o.status==="checked").map(o=>o.data);return this.plugin.uppy.validateAggregateRestrictions(s)},this.plugin=e,this.provider=t.provider,this.opts=v(v({},fC),t),this.setSearchString=this.setSearchString.bind(this),this.search=this.search.bind(this),this.resetPluginState=this.resetPluginState.bind(this),this.handleScroll=this.handleScroll.bind(this),this.donePicking=this.donePicking.bind(this),this.cancelSelection=this.cancelSelection.bind(this),this.toggleCheckbox=this.toggleCheckbox.bind(this),this.render=this.render.bind(this),this.resetPluginState(),this.plugin.uppy.on("dashboard:close-panel",this.resetPluginState),this.plugin.uppy.registerRequestClient(this.provider.provider,this.provider)}tearDown(){}setLoading(e){this.plugin.setPluginState({loading:e})}resetPluginState(){this.plugin.setPluginState(hC)}cancelSelection(){let{partialTree:e}=this.plugin.getPluginState(),t=e.map(r=>r.type==="root"?r:M(v({},r),{status:"unchecked"}));this.plugin.setPluginState({partialTree:t})}search(){return m(this,null,function*(){let{searchString:e}=this.plugin.getPluginState();if(e!==""){this.setLoading(!0);try{let t=yield this.provider.search(e),r=[{type:"root",id:null,cached:!1,nextPagePath:t.nextPageQuery},...t.items.map(n=>({type:"file",id:n.requestPath,status:"unchecked",parentId:null,data:n}))];this.plugin.setPluginState({partialTree:r,isInputMode:!1})}catch(t){ti(this.plugin.uppy)(t)}this.setLoading(!1)}})}handleScroll(e){return m(this,null,function*(){let{partialTree:t,searchString:r}=this.plugin.getPluginState(),n=t.find(s=>s.type==="root");if(cl(e)&&!this.isHandlingScroll&&n.nextPagePath){this.isHandlingScroll=!0;try{let s=yield this.provider.search(r,n.nextPagePath),o=M(v({},n),{nextPagePath:s.nextPageQuery}),a=t.filter(u=>u.type!=="root"),l=[o,...a,...s.items.map(u=>({type:"file",id:u.requestPath,status:"unchecked",parentId:null,data:u}))];this.plugin.setPluginState({partialTree:l})}catch(s){ti(this.plugin.uppy)(s)}this.isHandlingScroll=!1}})}donePicking(){return m(this,null,function*(){let{partialTree:e}=this.plugin.getPluginState(),t=fl(e);hl(t,this.plugin,this.provider),this.resetPluginState()})}toggleCheckbox(e,t){let{partialTree:r}=this.plugin.getPluginState(),n=dl(e.id,this.getDisplayedPartialTree(),t,this.lastCheckbox),s=er.afterToggleCheckbox(r,n);this.plugin.setPluginState({partialTree:s}),this.lastCheckbox=e.id}render(e,t){t===void 0&&(t={});let{isInputMode:r,searchString:n,loading:s,partialTree:o}=this.plugin.getPluginState(),{i18n:a}=this.plugin.uppy,l=v(v({},this.opts),t);return r?h(Qr,{searchString:n,setSearchString:this.setSearchString,submitSearchString:this.search,inputLabel:a("enterTextToSearch"),buttonLabel:a("searchImages"),wrapperClassName:"uppy-SearchProvider",inputClassName:"uppy-c-textInput uppy-SearchProvider-input",showButton:!0,buttonCSSClassName:"uppy-SearchProvider-searchButton"}):h("div",{className:(0,Gv.default)("uppy-ProviderBrowser",`uppy-ProviderBrowser-viewType--${l.viewType}`)},l.showFilter&&h(Qr,{searchString:n,setSearchString:this.setSearchString,submitSearchString:this.search,inputLabel:a("search"),clearSearchLabel:a("resetSearch"),wrapperClassName:"uppy-ProviderBrowser-searchFilter",inputClassName:"uppy-ProviderBrowser-searchFilterInput"}),h(sl,{toggleCheckbox:this.toggleCheckbox,displayedPartialTree:this.getDisplayedPartialTree(),handleScroll:this.handleScroll,openFolder:()=>m(this,null,function*(){}),noResultsLabel:a("noSearchResults"),viewType:l.viewType,showTitles:l.showTitles,isLoading:s,i18n:a,virtualList:!1,utmSource:this.opts.utmSource}),h(Zs,{partialTree:o,donePicking:this.donePicking,cancelSelection:this.cancelSelection,i18n:a,validateAggregateRestrictions:this.validateAggregateRestrictions}))}};en.VERSION=dC.version;var Kv=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function pC(i,e){return!!(i===e||Kv(i)&&Kv(e))}function mC(i,e){if(i.length!==e.length)return!1;for(var t=0;t<i.length;t++)if(!pC(i[t],e[t]))return!1;return!0}function hd(i,e){e===void 0&&(e=mC);var t=null;function r(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];if(t&&t.lastThis===this&&e(n,t.lastArgs))return t.lastResult;var o=i.apply(this,n);return t={lastResult:o,lastArgs:n,lastThis:this},o}return r.clear=function(){t=null},r}var pl=['a[href]:not([tabindex^="-"]):not([inert]):not([aria-hidden])','area[href]:not([tabindex^="-"]):not([inert]):not([aria-hidden])',"input:not([disabled]):not([inert]):not([aria-hidden])","select:not([disabled]):not([inert]):not([aria-hidden])","textarea:not([disabled]):not([inert]):not([aria-hidden])","button:not([disabled]):not([inert]):not([aria-hidden])",'iframe:not([tabindex^="-"]):not([inert]):not([aria-hidden])','object:not([tabindex^="-"]):not([inert]):not([aria-hidden])','embed:not([tabindex^="-"]):not([inert]):not([aria-hidden])','[contenteditable]:not([tabindex^="-"]):not([inert]):not([aria-hidden])','[tabindex]:not([tabindex^="-"]):not([inert]):not([aria-hidden])'];function to(i,e){if(e){let t=i.querySelector(`[data-uppy-paneltype="${e}"]`);if(t)return t}return i}function Xv(i,e){let t=e[0];t&&(t.focus(),i.preventDefault())}function gC(i,e){let t=e[e.length-1];t&&(t.focus(),i.preventDefault())}function yC(i){return i.contains(document.activeElement)}function fd(i,e,t){let r=to(t,e),n=mi(r.querySelectorAll(pl)),s=n.indexOf(document.activeElement);yC(r)?i.shiftKey&&s===0?gC(i,n):!i.shiftKey&&s===n.length-1&&Xv(i,n):Xv(i,n)}function Yv(i,e,t){e===null||fd(i,e,t)}var Jv=se(Eu(),1);function pd(){let i=!1;return(0,Jv.default)((t,r)=>{let n=to(t,r),s=n.contains(document.activeElement);if(s&&i)return;let o=n.querySelector("[data-uppy-super-focusable]");if(!(s&&!o))if(o)o.focus({preventScroll:!0}),i=!0;else{let a=n.querySelector(pl);a?.focus({preventScroll:!0}),i=!1}},260)}var m_=se(Xe(),1);function md(){let i=document.body;return!(!("draggable"in i)||!("ondragstart"in i&&"ondrop"in i)||!("FormData"in window)||!("FileReader"in window))}var t_=se(Xe(),1);function Zv(i,e){if(i===e)return!0;if(!i||!e)return!1;let t=Object.keys(i),r=Object.keys(e),n=t.length;if(r.length!==n)return!1;for(let s=0;s<n;s++){let o=t[s];if(i[o]!==e[o]||!Object.prototype.hasOwnProperty.call(e,o))return!1}return!0}function _C(){return h("svg",{"aria-hidden":"true",focusable:"false",width:"25",height:"25",viewBox:"0 0 25 25"},h("g",{fill:"#686DE0",fillRule:"evenodd"},h("path",{d:"M5 7v10h15V7H5zm0-1h15a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1z",fillRule:"nonzero"}),h("path",{d:"M6.35 17.172l4.994-5.026a.5.5 0 0 1 .707 0l2.16 2.16 3.505-3.505a.5.5 0 0 1 .707 0l2.336 2.31-.707.72-1.983-1.97-3.505 3.505a.5.5 0 0 1-.707 0l-2.16-2.159-3.938 3.939-1.409.026z",fillRule:"nonzero"}),h("circle",{cx:"7.5",cy:"9.5",r:"1.5"})))}function bC(){return h("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25"},h("path",{d:"M9.5 18.64c0 1.14-1.145 2-2.5 2s-2.5-.86-2.5-2c0-1.14 1.145-2 2.5-2 .557 0 1.079.145 1.5.396V7.25a.5.5 0 0 1 .379-.485l9-2.25A.5.5 0 0 1 18.5 5v11.64c0 1.14-1.145 2-2.5 2s-2.5-.86-2.5-2c0-1.14 1.145-2 2.5-2 .557 0 1.079.145 1.5.396V8.67l-8 2v7.97zm8-11v-2l-8 2v2l8-2zM7 19.64c.855 0 1.5-.484 1.5-1s-.645-1-1.5-1-1.5.484-1.5 1 .645 1 1.5 1zm9-2c.855 0 1.5-.484 1.5-1s-.645-1-1.5-1-1.5.484-1.5 1 .645 1 1.5 1z",fill:"#049BCF",fillRule:"nonzero"}))}function wC(){return h("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25"},h("path",{d:"M16 11.834l4.486-2.691A1 1 0 0 1 22 10v6a1 1 0 0 1-1.514.857L16 14.167V17a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V9a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v2.834zM15 9H5v8h10V9zm1 4l5 3v-6l-5 3z",fill:"#19AF67",fillRule:"nonzero"}))}function SC(){return h("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25"},h("path",{d:"M9.766 8.295c-.691-1.843-.539-3.401.747-3.726 1.643-.414 2.505.938 2.39 3.299-.039.79-.194 1.662-.537 3.148.324.49.66.967 1.055 1.51.17.231.382.488.629.757 1.866-.128 3.653.114 4.918.655 1.487.635 2.192 1.685 1.614 2.84-.566 1.133-1.839 1.084-3.416.249-1.141-.604-2.457-1.634-3.51-2.707a13.467 13.467 0 0 0-2.238.426c-1.392 4.051-4.534 6.453-5.707 4.572-.986-1.58 1.38-4.206 4.914-5.375.097-.322.185-.656.264-1.001.08-.353.306-1.31.407-1.737-.678-1.059-1.2-2.031-1.53-2.91zm2.098 4.87c-.033.144-.068.287-.104.427l.033-.01-.012.038a14.065 14.065 0 0 1 1.02-.197l-.032-.033.052-.004a7.902 7.902 0 0 1-.208-.271c-.197-.27-.38-.526-.555-.775l-.006.028-.002-.003c-.076.323-.148.632-.186.8zm5.77 2.978c1.143.605 1.832.632 2.054.187.26-.519-.087-1.034-1.113-1.473-.911-.39-2.175-.608-3.55-.608.845.766 1.787 1.459 2.609 1.894zM6.559 18.789c.14.223.693.16 1.425-.413.827-.648 1.61-1.747 2.208-3.206-2.563 1.064-4.102 2.867-3.633 3.62zm5.345-10.97c.088-1.793-.351-2.48-1.146-2.28-.473.119-.564 1.05-.056 2.405.213.566.52 1.188.908 1.859.18-.858.268-1.453.294-1.984z",fill:"#E2514A",fillRule:"nonzero"}))}function EC(){return h("svg",{"aria-hidden":"true",focusable:"false",width:"25",height:"25",viewBox:"0 0 25 25"},h("path",{d:"M10.45 2.05h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5V2.55a.5.5 0 0 1 .5-.5zm2.05 1.024h1.05a.5.5 0 0 1 .5.5V3.6a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5v-.001zM10.45 0h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5V.5a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-2.05 3.074h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-2.05 1.024h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm-2.05 1.025h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-1.656 3.074l-.82 5.946c.52.302 1.174.458 1.976.458.803 0 1.455-.156 1.975-.458l-.82-5.946h-2.311zm0-1.025h2.312c.512 0 .946.378 1.015.885l.82 5.946c.056.412-.142.817-.501 1.026-.686.398-1.515.597-2.49.597-.974 0-1.804-.199-2.49-.597a1.025 1.025 0 0 1-.5-1.026l.819-5.946c.07-.507.503-.885 1.015-.885zm.545 6.6a.5.5 0 0 1-.397-.561l.143-.999a.5.5 0 0 1 .495-.429h.74a.5.5 0 0 1 .495.43l.143.998a.5.5 0 0 1-.397.561c-.404.08-.819.08-1.222 0z",fill:"#00C469",fillRule:"nonzero"}))}function CC(){return h("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25"},h("g",{fill:"#A7AFB7",fillRule:"nonzero"},h("path",{d:"M5.5 22a.5.5 0 0 1-.5-.5v-18a.5.5 0 0 1 .5-.5h10.719a.5.5 0 0 1 .367.16l3.281 3.556a.5.5 0 0 1 .133.339V21.5a.5.5 0 0 1-.5.5h-14zm.5-1h13V7.25L16 4H6v17z"}),h("path",{d:"M15 4v3a1 1 0 0 0 1 1h3V7h-3V4h-1z"})))}function xC(){return h("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25"},h("path",{d:"M4.5 7h13a.5.5 0 1 1 0 1h-13a.5.5 0 0 1 0-1zm0 3h15a.5.5 0 1 1 0 1h-15a.5.5 0 1 1 0-1zm0 3h15a.5.5 0 1 1 0 1h-15a.5.5 0 1 1 0-1zm0 3h10a.5.5 0 1 1 0 1h-10a.5.5 0 1 1 0-1z",fill:"#5A5E69",fillRule:"nonzero"}))}function ir(i){let e={color:"#838999",icon:CC()};if(!i)return e;let t=i.split("/")[0],r=i.split("/")[1];return t==="text"?{color:"#5a5e69",icon:xC()}:t==="image"?{color:"#686de0",icon:_C()}:t==="audio"?{color:"#068dbb",icon:bC()}:t==="video"?{color:"#19af67",icon:wC()}:t==="application"&&r==="pdf"?{color:"#e25149",icon:SC()}:t==="application"&&["zip","x-7z-compressed","x-zip-compressed","x-rar-compressed","x-tar","x-gzip","x-apple-diskimage"].indexOf(r)!==-1?{color:"#00C469",icon:EC()}:e}function io(i){let{file:e}=i;if(e.preview)return h("img",{draggable:!1,className:"uppy-Dashboard-Item-previewImg",alt:e.name,src:e.preview});let{color:t,icon:r}=ir(e.type);return h("div",{className:"uppy-Dashboard-Item-previewIconWrap"},h("span",{className:"uppy-Dashboard-Item-previewIcon",style:{color:t}},r),h("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-Dashboard-Item-previewIconBg",width:"58",height:"76",viewBox:"0 0 58 76"},h("rect",{fill:"#FFF",width:"58",height:"76",rx:"3",fillRule:"evenodd"})))}var kC=(i,e)=>(typeof e=="function"?e():e).filter(n=>n.id===i)[0].name;function ro(i){let{file:e,toggleFileCard:t,i18n:r,metaFields:n}=i,{missingRequiredMetaFields:s}=e;if(!(s!=null&&s.length))return null;let o=s.map(a=>kC(a,n)).join(", ");return h("div",{className:"uppy-Dashboard-Item-errorMessage"},r("missingRequiredMetaFields",{smart_count:s.length,fields:o})," ",h("button",{type:"button",class:"uppy-u-reset uppy-Dashboard-Item-errorMessageBtn",onClick:()=>t(!0,e.id)},r("editFile")))}function gd(i){let{file:e,i18n:t,toggleFileCard:r,metaFields:n,showLinkToFileUploadResult:s}=i,a=e.preview?"rgba(255, 255, 255, 0.5)":ir(e.type).color;return h("div",{className:"uppy-Dashboard-Item-previewInnerWrap",style:{backgroundColor:a}},s&&e.uploadURL&&h("a",{className:"uppy-Dashboard-Item-previewLink",href:e.uploadURL,rel:"noreferrer noopener",target:"_blank","aria-label":e.meta.name},h("span",{hidden:!0},e.meta.name)),h(io,{file:e}),h(ro,{file:e,i18n:t,toggleFileCard:r,metaFields:n}))}function PC(i){if(!i.isUploaded){if(i.error&&!i.hideRetryButton){i.uppy.retryUpload(i.file.id);return}i.resumableUploads&&!i.hidePauseResumeButton?i.uppy.pauseResume(i.file.id):i.individualCancellation&&!i.hideCancelButton&&i.uppy.removeFile(i.file.id)}}function Qv(i){return i.isUploaded?i.i18n("uploadComplete"):i.error?i.i18n("retryUpload"):i.resumableUploads?i.file.isPaused?i.i18n("resumeUpload"):i.i18n("pauseUpload"):i.individualCancellation?i.i18n("cancelUpload"):""}function yd(i){return h("div",{className:"uppy-Dashboard-Item-progress"},h("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-progressIndicator",type:"button","aria-label":Qv(i),title:Qv(i),onClick:()=>PC(i)},i.children))}function ml(i){let{children:e}=i;return h("svg",{"aria-hidden":"true",focusable:"false",width:"70",height:"70",viewBox:"0 0 36 36",className:"uppy-c-icon uppy-Dashboard-Item-progressIcon--circle"},e)}function vd(i){let{progress:e}=i,t=2*Math.PI*15;return h("g",null,h("circle",{className:"uppy-Dashboard-Item-progressIcon--bg",r:"15",cx:"18",cy:"18","stroke-width":"2",fill:"none"}),h("circle",{className:"uppy-Dashboard-Item-progressIcon--progress",r:"15",cx:"18",cy:"18",transform:"rotate(-90, 18, 18)",fill:"none","stroke-width":"2","stroke-dasharray":t,"stroke-dashoffset":t-t/100*e}))}function _d(i){return!i.file.progress.uploadStarted||i.file.progress.percentage===void 0?null:i.isUploaded?h("div",{className:"uppy-Dashboard-Item-progress"},h("div",{className:"uppy-Dashboard-Item-progressIndicator"},h(ml,null,h("circle",{r:"15",cx:"18",cy:"18",fill:"#1bb240"}),h("polygon",{className:"uppy-Dashboard-Item-progressIcon--check",transform:"translate(2, 3)",points:"14 22.5 7 15.2457065 8.99985857 13.1732815 14 18.3547104 22.9729883 9 25 11.1005634"})))):i.recoveredState?null:i.error&&!i.hideRetryButton?h(yd,i,h("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon uppy-Dashboard-Item-progressIcon--retry",width:"28",height:"31",viewBox:"0 0 16 19"},h("path",{d:"M16 11a8 8 0 1 1-8-8v2a6 6 0 1 0 6 6h2z"}),h("path",{d:"M7.9 3H10v2H7.9z"}),h("path",{d:"M8.536.5l3.535 3.536-1.414 1.414L7.12 1.914z"}),h("path",{d:"M10.657 2.621l1.414 1.415L8.536 7.57 7.12 6.157z"}))):i.resumableUploads&&!i.hidePauseResumeButton?h(yd,i,h(ml,null,h(vd,{progress:i.file.progress.percentage}),i.file.isPaused?h("polygon",{className:"uppy-Dashboard-Item-progressIcon--play",transform:"translate(3, 3)",points:"12 20 12 10 20 15"}):h("g",{className:"uppy-Dashboard-Item-progressIcon--pause",transform:"translate(14.5, 13)"},h("rect",{x:"0",y:"0",width:"2",height:"10",rx:"0"}),h("rect",{x:"5",y:"0",width:"2",height:"10",rx:"0"})))):!i.resumableUploads&&i.individualCancellation&&!i.hideCancelButton?h(yd,i,h(ml,null,h(vd,{progress:i.file.progress.percentage}),h("polygon",{className:"cancel",transform:"translate(2, 2)",points:"19.8856516 11.0625 16 14.9481516 12.1019737 11.0625 11.0625 12.1143484 14.9481516 16 11.0625 19.8980263 12.1019737 20.9375 16 17.0518484 19.8856516 20.9375 20.9375 19.8980263 17.0518484 16 20.9375 12"}))):h("div",{className:"uppy-Dashboard-Item-progress"},h("div",{className:"uppy-Dashboard-Item-progressIndicator"},h(ml,null,h(vd,{progress:i.file.progress.percentage}))))}var e_=se(ts(),1);var bd="...";function gl(i,e){if(e===0)return"";if(i.length<=e)return i;if(e<=bd.length+1)return`${i.slice(0,e-1)}\u2026`;let t=e-bd.length,r=Math.ceil(t/2),n=Math.floor(t/2);return i.slice(0,r)+bd+i.slice(-n)}var TC=i=>{let{author:e,name:t}=i.file.meta;function r(){return i.isSingleFile&&i.containerHeight>=350?90:i.containerWidth<=352?35:i.containerWidth<=576?60:e?20:30}return h("div",{className:"uppy-Dashboard-Item-name",title:t},gl(t,r()))},OC=i=>{var e;let{author:t}=i.file.meta,r=(e=i.file.remote)==null?void 0:e.providerName,n="\xB7";return t?h("div",{className:"uppy-Dashboard-Item-author"},h("a",{href:`${t.url}?utm_source=Companion&utm_medium=referral`,target:"_blank",rel:"noopener noreferrer"},gl(t.name,13)),r?h(Fragment,null,` ${n} `,r,` ${n} `):null):null},FC=i=>i.file.size&&h("div",{className:"uppy-Dashboard-Item-statusSize"},(0,e_.default)(i.file.size)),AC=i=>i.file.isGhost&&h("span",null," \u2022 ",h("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-reSelect",type:"button",onClick:()=>i.toggleAddFilesPanel(!0)},i.i18n("reSelect"))),RC=i=>{let{file:e,onClick:t}=i;return e.error?h("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-errorDetails","aria-label":e.error,"data-microtip-position":"bottom","data-microtip-size":"medium",onClick:t,type:"button"},"?"):null};function wd(i){let{file:e,i18n:t,toggleFileCard:r,metaFields:n,toggleAddFilesPanel:s,isSingleFile:o,containerHeight:a,containerWidth:l}=i;return h("div",{className:"uppy-Dashboard-Item-fileInfo","data-uppy-file-source":e.source},h("div",{className:"uppy-Dashboard-Item-fileName"},TC({file:e,isSingleFile:o,containerHeight:a,containerWidth:l}),h(RC,{file:e,onClick:()=>alert(e.error)})),h("div",{className:"uppy-Dashboard-Item-status"},OC({file:e}),FC({file:e}),AC({file:e,toggleAddFilesPanel:s,i18n:t})),h(ro,{file:e,i18n:t,toggleFileCard:r,metaFields:n}))}function Sd(i,e){return e===void 0&&(e="Copy the URL below"),new Promise(t=>{let r=document.createElement("textarea");r.setAttribute("style",{position:"fixed",top:0,left:0,width:"2em",height:"2em",padding:0,border:"none",outline:"none",boxShadow:"none",background:"transparent"}),r.value=i,document.body.appendChild(r),r.select();let n=()=>{document.body.removeChild(r),window.prompt(e,i),t()};try{return document.execCommand("copy")?(document.body.removeChild(r),t()):n()}catch{return document.body.removeChild(r),n()}})}function IC(i){let{file:e,uploadInProgressOrComplete:t,metaFields:r,canEditFile:n,i18n:s,onClick:o}=i;return!t&&r&&r.length>0||!t&&n(e)?h("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-action uppy-Dashboard-Item-action--edit",type:"button","aria-label":s("editFileWithFilename",{file:e.meta.name}),title:s("editFileWithFilename",{file:e.meta.name}),onClick:()=>o()},h("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"14",height:"14",viewBox:"0 0 14 14"},h("g",{fillRule:"evenodd"},h("path",{d:"M1.5 10.793h2.793A1 1 0 0 0 5 10.5L11.5 4a1 1 0 0 0 0-1.414L9.707.793a1 1 0 0 0-1.414 0l-6.5 6.5A1 1 0 0 0 1.5 8v2.793zm1-1V8L9 1.5l1.793 1.793-6.5 6.5H2.5z",fillRule:"nonzero"}),h("rect",{x:"1",y:"12.293",width:"11",height:"1",rx:".5"}),h("path",{fillRule:"nonzero",d:"M6.793 2.5L9.5 5.207l.707-.707L7.5 1.793z"})))):null}function DC(i){let{i18n:e,onClick:t,file:r}=i;return h("button",{className:"uppy-u-reset uppy-Dashboard-Item-action uppy-Dashboard-Item-action--remove",type:"button","aria-label":e("removeFile",{file:r.meta.name}),title:e("removeFile",{file:r.meta.name}),onClick:()=>t()},h("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"18",height:"18",viewBox:"0 0 18 18"},h("path",{d:"M9 0C4.034 0 0 4.034 0 9s4.034 9 9 9 9-4.034 9-9-4.034-9-9-9z"}),h("path",{fill:"#FFF",d:"M13 12.222l-.778.778L9 9.778 5.778 13 5 12.222 8.222 9 5 5.778 5.778 5 9 8.222 12.222 5l.778.778L9.778 9z"})))}function UC(i){let{file:e,uppy:t,i18n:r}=i,n=s=>{Sd(e.uploadURL,r("copyLinkToClipboardFallback")).then(()=>{t.log("Link copied to clipboard."),t.info(r("copyLinkToClipboardSuccess"),"info",3e3)}).catch(t.log).then(()=>s.target.focus({preventScroll:!0}))};return h("button",{className:"uppy-u-reset uppy-Dashboard-Item-action uppy-Dashboard-Item-action--copyLink",type:"button","aria-label":r("copyLink"),title:r("copyLink"),onClick:s=>n(s)},h("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"14",height:"14",viewBox:"0 0 14 12"},h("path",{d:"M7.94 7.703a2.613 2.613 0 0 1-.626 2.681l-.852.851a2.597 2.597 0 0 1-1.849.766A2.616 2.616 0 0 1 2.764 7.54l.852-.852a2.596 2.596 0 0 1 2.69-.625L5.267 7.099a1.44 1.44 0 0 0-.833.407l-.852.851a1.458 1.458 0 0 0 1.03 2.486c.39 0 .755-.152 1.03-.426l.852-.852c.231-.231.363-.522.406-.824l1.04-1.038zm4.295-5.937A2.596 2.596 0 0 0 10.387 1c-.698 0-1.355.272-1.849.766l-.852.851a2.614 2.614 0 0 0-.624 2.688l1.036-1.036c.041-.304.173-.6.407-.833l.852-.852c.275-.275.64-.426 1.03-.426a1.458 1.458 0 0 1 1.03 2.486l-.852.851a1.442 1.442 0 0 1-.824.406l-1.04 1.04a2.596 2.596 0 0 0 2.683-.628l.851-.85a2.616 2.616 0 0 0 0-3.697zm-6.88 6.883a.577.577 0 0 0 .82 0l3.474-3.474a.579.579 0 1 0-.819-.82L5.355 7.83a.579.579 0 0 0 0 .819z"})))}function Ed(i){let{uppy:e,file:t,uploadInProgressOrComplete:r,canEditFile:n,metaFields:s,showLinkToFileUploadResult:o,showRemoveButton:a,i18n:l,toggleFileCard:u,openFileEditor:c}=i;return h("div",{className:"uppy-Dashboard-Item-actionWrapper"},h(IC,{i18n:l,file:t,uploadInProgressOrComplete:r,canEditFile:n,metaFields:s,onClick:()=>{s&&s.length>0?u(!0,t.id):c(t)}}),o&&t.uploadURL?h(UC,{file:t,uppy:e,i18n:l}):null,a?h(DC,{i18n:l,file:t,onClick:()=>e.removeFile(t.id)}):null)}var yl=class extends pe{componentDidMount(){let{file:e}=this.props;e.preview||this.props.handleRequestThumbnail(e)}shouldComponentUpdate(e){return!Zv(this.props,e)}componentDidUpdate(){let{file:e}=this.props;e.preview||this.props.handleRequestThumbnail(e)}componentWillUnmount(){let{file:e}=this.props;e.preview||this.props.handleCancelThumbnail(e)}render(){let{file:e}=this.props,t=e.progress.preprocess||e.progress.postprocess,r=!!e.progress.uploadComplete&&!t&&!e.error,n=!!e.progress.uploadStarted||!!t,s=e.progress.uploadStarted&&!e.progress.uploadComplete||t,o=e.error||!1,{isGhost:a}=e,l=(this.props.individualCancellation||!s)&&!r;r&&this.props.showRemoveButtonAfterComplete&&(l=!0);let u=(0,t_.default)({"uppy-Dashboard-Item":!0,"is-inprogress":s&&!this.props.recoveredState,"is-processing":t,"is-complete":r,"is-error":!!o,"is-resumable":this.props.resumableUploads,"is-noIndividualCancellation":!this.props.individualCancellation,"is-ghost":a});return h("div",{className:u,id:`uppy_${e.id}`,role:this.props.role},h("div",{className:"uppy-Dashboard-Item-preview"},h(gd,{file:e,showLinkToFileUploadResult:this.props.showLinkToFileUploadResult,i18n:this.props.i18n,toggleFileCard:this.props.toggleFileCard,metaFields:this.props.metaFields}),h(_d,{uppy:this.props.uppy,file:e,error:o,isUploaded:r,hideRetryButton:this.props.hideRetryButton,hideCancelButton:this.props.hideCancelButton,hidePauseResumeButton:this.props.hidePauseResumeButton,recoveredState:this.props.recoveredState,resumableUploads:this.props.resumableUploads,individualCancellation:this.props.individualCancellation,i18n:this.props.i18n})),h("div",{className:"uppy-Dashboard-Item-fileInfoAndButtons"},h(wd,{file:e,containerWidth:this.props.containerWidth,containerHeight:this.props.containerHeight,i18n:this.props.i18n,toggleAddFilesPanel:this.props.toggleAddFilesPanel,toggleFileCard:this.props.toggleFileCard,metaFields:this.props.metaFields,isSingleFile:this.props.isSingleFile}),h(Ed,{file:e,metaFields:this.props.metaFields,showLinkToFileUploadResult:this.props.showLinkToFileUploadResult,showRemoveButton:l,canEditFile:this.props.canEditFile,uploadInProgressOrComplete:n,toggleFileCard:this.props.toggleFileCard,openFileEditor:this.props.openFileEditor,uppy:this.props.uppy,i18n:this.props.i18n})))}};function LC(i,e){let t=[],r=[];return i.forEach(n=>{r.length<e?r.push(n):(t.push(r),r=[n])}),r.length&&t.push(r),t}function Cd(i){let{id:e,i18n:t,uppy:r,files:n,resumableUploads:s,hideRetryButton:o,hidePauseResumeButton:a,hideCancelButton:l,showLinkToFileUploadResult:u,showRemoveButtonAfterComplete:c,metaFields:d,isSingleFile:p,toggleFileCard:f,handleRequestThumbnail:y,handleCancelThumbnail:S,recoveredState:k,individualCancellation:E,itemsPerRow:F,openFileEditor:D,canEditFile:T,toggleAddFilesPanel:z,containerWidth:N,containerHeight:B}=i,$=F===1?71:200,J=ci(()=>{let oe=(Oe,rt)=>Number(n[rt].isGhost)-Number(n[Oe].isGhost),ye=Object.keys(n);return k&&ye.sort(oe),LC(ye,F)},[n,F,k]),He=oe=>h("div",{class:"uppy-Dashboard-filesInner",role:"presentation",key:oe[0]},oe.map(ye=>h(yl,{key:ye,uppy:r,id:e,i18n:t,resumableUploads:s,individualCancellation:E,hideRetryButton:o,hidePauseResumeButton:a,hideCancelButton:l,showLinkToFileUploadResult:u,showRemoveButtonAfterComplete:c,metaFields:d,recoveredState:k,isSingleFile:p,containerWidth:N,containerHeight:B,toggleFileCard:f,handleRequestThumbnail:y,handleCancelThumbnail:S,role:"listitem",openFileEditor:D,canEditFile:T,toggleAddFilesPanel:z,file:n[ye]})));return p?h("div",{class:"uppy-Dashboard-files"},He(J[0])):h(nl,{class:"uppy-Dashboard-files",role:"list",data:J,renderRow:He,rowHeight:$})}var xd=class extends pe{constructor(){super(...arguments),this.fileInput=null,this.folderInput=null,this.mobilePhotoFileInput=null,this.mobileVideoFileInput=null,this.triggerFileInputClick=()=>{var e;(e=this.fileInput)==null||e.click()},this.triggerFolderInputClick=()=>{var e;(e=this.folderInput)==null||e.click()},this.triggerVideoCameraInputClick=()=>{var e;(e=this.mobileVideoFileInput)==null||e.click()},this.triggerPhotoCameraInputClick=()=>{var e;(e=this.mobilePhotoFileInput)==null||e.click()},this.onFileInputChange=e=>{this.props.handleInputChange(e),e.currentTarget.value=""},this.renderHiddenInput=(e,t)=>{var r;return h("input",{className:"uppy-Dashboard-input",hidden:!0,"aria-hidden":"true",tabIndex:-1,webkitdirectory:e,type:"file",name:"files[]",multiple:this.props.maxNumberOfFiles!==1,onChange:this.onFileInputChange,accept:(r=this.props.allowedFileTypes)==null?void 0:r.join(", "),ref:t})},this.renderHiddenCameraInput=(e,t,r)=>{let s={photo:"image/*",video:"video/*"}[e];return h("input",{className:"uppy-Dashboard-input",hidden:!0,"aria-hidden":"true",tabIndex:-1,type:"file",name:`camera-${e}`,onChange:this.onFileInputChange,capture:t,accept:s,ref:r})},this.renderMyDeviceAcquirer=()=>h("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":"MyDevice"},h("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-uppy-super-focusable":!0,onClick:this.triggerFileInputClick},h("div",{className:"uppy-DashboardTab-inner"},h("svg",{className:"uppy-DashboardTab-iconMyDevice","aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32"},h("path",{d:"M8.45 22.087l-1.305-6.674h17.678l-1.572 6.674H8.45zm4.975-12.412l1.083 1.765a.823.823 0 00.715.386h7.951V13.5H8.587V9.675h4.838zM26.043 13.5h-1.195v-2.598c0-.463-.336-.75-.798-.75h-8.356l-1.082-1.766A.823.823 0 0013.897 8H7.728c-.462 0-.815.256-.815.718V13.5h-.956a.97.97 0 00-.746.37.972.972 0 00-.19.81l1.724 8.565c.095.44.484.755.933.755H24c.44 0 .824-.3.929-.727l2.043-8.568a.972.972 0 00-.176-.825.967.967 0 00-.753-.38z",fill:"currentcolor","fill-rule":"evenodd"}))),h("div",{className:"uppy-DashboardTab-name"},this.props.i18n("myDevice")))),this.renderPhotoCamera=()=>h("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":"MobilePhotoCamera"},h("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-uppy-super-focusable":!0,onClick:this.triggerPhotoCameraInputClick},h("div",{className:"uppy-DashboardTab-inner"},h("svg",{"aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32"},h("path",{d:"M23.5 9.5c1.417 0 2.5 1.083 2.5 2.5v9.167c0 1.416-1.083 2.5-2.5 2.5h-15c-1.417 0-2.5-1.084-2.5-2.5V12c0-1.417 1.083-2.5 2.5-2.5h2.917l1.416-2.167C13 7.167 13.25 7 13.5 7h5c.25 0 .5.167.667.333L20.583 9.5H23.5zM16 11.417a4.706 4.706 0 00-4.75 4.75 4.704 4.704 0 004.75 4.75 4.703 4.703 0 004.75-4.75c0-2.663-2.09-4.75-4.75-4.75zm0 7.825c-1.744 0-3.076-1.332-3.076-3.074 0-1.745 1.333-3.077 3.076-3.077 1.744 0 3.074 1.333 3.074 3.076s-1.33 3.075-3.074 3.075z",fill:"#02B383","fill-rule":"nonzero"}))),h("div",{className:"uppy-DashboardTab-name"},this.props.i18n("takePictureBtn")))),this.renderVideoCamera=()=>h("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":"MobileVideoCamera"},h("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-uppy-super-focusable":!0,onClick:this.triggerVideoCameraInputClick},h("div",{className:"uppy-DashboardTab-inner"},h("svg",{"aria-hidden":"true",width:"32",height:"32",viewBox:"0 0 32 32"},h("path",{fill:"#FF675E",fillRule:"nonzero",d:"m21.254 14.277 2.941-2.588c.797-.313 1.243.818 1.09 1.554-.01 2.094.02 4.189-.017 6.282-.126.915-1.145 1.08-1.58.34l-2.434-2.142c-.192.287-.504 1.305-.738.468-.104-1.293-.028-2.596-.05-3.894.047-.312.381.823.426 1.069.063-.384.206-.744.362-1.09zm-12.939-3.73c3.858.013 7.717-.025 11.574.02.912.129 1.492 1.237 1.351 2.217-.019 2.412.04 4.83-.03 7.239-.17 1.025-1.166 1.59-2.029 1.429-3.705-.012-7.41.025-11.114-.019-.913-.129-1.492-1.237-1.352-2.217.018-2.404-.036-4.813.029-7.214.136-.82.83-1.473 1.571-1.454z "}))),h("div",{className:"uppy-DashboardTab-name"},this.props.i18n("recordVideoBtn")))),this.renderBrowseButton=(e,t)=>{let r=this.props.acquirers.length;return h("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-Dashboard-browse",onClick:t,"data-uppy-super-focusable":r===0},e)},this.renderDropPasteBrowseTagline=e=>{let t=this.renderBrowseButton(this.props.i18n("browseFiles"),this.triggerFileInputClick),r=this.renderBrowseButton(this.props.i18n("browseFolders"),this.triggerFolderInputClick),n=this.props.fileManagerSelectionType,s=n.charAt(0).toUpperCase()+n.slice(1);return h("div",{class:"uppy-Dashboard-AddFiles-title"},this.props.disableLocalFiles?this.props.i18n("importFiles"):e>0?this.props.i18nArray(`dropPasteImport${s}`,{browseFiles:t,browseFolders:r,browse:t}):this.props.i18nArray(`dropPaste${s}`,{browseFiles:t,browseFolders:r,browse:t}))},this.renderAcquirer=e=>{var t;return h("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":e.id},h("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-cy":e.id,"aria-controls":`uppy-DashboardContent-panel--${e.id}`,"aria-selected":((t=this.props.activePickerPanel)==null?void 0:t.id)===e.id,"data-uppy-super-focusable":!0,onClick:()=>this.props.showPanel(e.id)},h("div",{className:"uppy-DashboardTab-inner"},e.icon()),h("div",{className:"uppy-DashboardTab-name"},e.name)))},this.renderAcquirers=e=>{let t=[...e],r=t.splice(e.length-2,e.length);return h(Ue,null,t.map(n=>this.renderAcquirer(n)),h("span",{role:"presentation",style:{"white-space":"nowrap"}},r.map(n=>this.renderAcquirer(n))))},this.renderSourcesList=(e,t)=>{let{showNativePhotoCameraButton:r,showNativeVideoCameraButton:n}=this.props,s=[],o="myDevice";t||s.push({key:o,elements:this.renderMyDeviceAcquirer()}),r&&s.push({key:"nativePhotoCameraButton",elements:this.renderPhotoCamera()}),n&&s.push({key:"nativePhotoCameraButton",elements:this.renderVideoCamera()}),s.push(...e.map(c=>({key:c.id,elements:this.renderAcquirer(c)}))),s.length===1&&s[0].key===o&&(s=[]);let l=[...s],u=l.splice(s.length-2,s.length);return h(Ue,null,this.renderDropPasteBrowseTagline(s.length),h("div",{className:"uppy-Dashboard-AddFiles-list",role:"tablist"},l.map(c=>{let{key:d,elements:p}=c;return h(Ue,{key:d},p)}),h("span",{role:"presentation",style:{"white-space":"nowrap"}},u.map(c=>{let{key:d,elements:p}=c;return h(Ue,{key:d},p)}))))}}[Symbol.for("uppy test: disable unused locale key warning")](){this.props.i18nArray("dropPasteBoth"),this.props.i18nArray("dropPasteFiles"),this.props.i18nArray("dropPasteFolders"),this.props.i18nArray("dropPasteImportBoth"),this.props.i18nArray("dropPasteImportFiles"),this.props.i18nArray("dropPasteImportFolders")}renderPoweredByUppy(){let{i18nArray:e}=this.props,t=h("span",null,h("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon uppy-Dashboard-poweredByIcon",width:"11",height:"11",viewBox:"0 0 11 11"},h("path",{d:"M7.365 10.5l-.01-4.045h2.612L5.5.806l-4.467 5.65h2.604l.01 4.044h3.718z",fillRule:"evenodd"})),h("span",{className:"uppy-Dashboard-poweredByUppy"},"Uppy")),r=e("poweredBy",{uppy:t});return h("a",{tabIndex:-1,href:"https://uppy.io",rel:"noreferrer noopener",target:"_blank",className:"uppy-Dashboard-poweredBy"},r)}render(){let{showNativePhotoCameraButton:e,showNativeVideoCameraButton:t,nativeCameraFacingMode:r}=this.props;return h("div",{className:"uppy-Dashboard-AddFiles"},this.renderHiddenInput(!1,n=>{this.fileInput=n}),this.renderHiddenInput(!0,n=>{this.folderInput=n}),e&&this.renderHiddenCameraInput("photo",r,n=>{this.mobilePhotoFileInput=n}),t&&this.renderHiddenCameraInput("video",r,n=>{this.mobileVideoFileInput=n}),this.renderSourcesList(this.props.acquirers,this.props.disableLocalFiles),h("div",{className:"uppy-Dashboard-AddFiles-info"},this.props.note&&h("div",{className:"uppy-Dashboard-note"},this.props.note),this.props.proudlyDisplayPoweredByUppy&&this.renderPoweredByUppy()))}},vl=xd;var i_=se(Xe(),1);var NC=i=>h("div",{className:(0,i_.default)("uppy-Dashboard-AddFilesPanel",i.className),"data-uppy-panelType":"AddFiles","aria-hidden":!i.showAddFilesPanel},h("div",{className:"uppy-DashboardContent-bar"},h("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":"1"},i.i18n("addingMoreFiles")),h("button",{className:"uppy-DashboardContent-back",type:"button",onClick:()=>i.toggleAddFilesPanel(!1)},i.i18n("back"))),h(vl,i)),r_=NC;var n_=se(Xe(),1);function MC(i){let{tagName:e}=i.target;if(e==="INPUT"||e==="TEXTAREA"){i.stopPropagation();return}i.preventDefault(),i.stopPropagation()}var Mt=MC;function BC(i){let{activePickerPanel:e,className:t,hideAllPanels:r,i18n:n,state:s,uppy:o}=i,a=ui(null);return h("div",{className:(0,n_.default)("uppy-DashboardContent-panel",t),role:"tabpanel","data-uppy-panelType":"PickerPanel",id:`uppy-DashboardContent-panel--${e.id}`,onDragOver:Mt,onDragLeave:Mt,onDrop:Mt,onPaste:Mt},h("div",{className:"uppy-DashboardContent-bar"},h("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":"1"},n("importFrom",{name:e.name})),h("button",{className:"uppy-DashboardContent-back",type:"button",onClick:r},n("cancel"))),h("div",{ref:a,className:"uppy-DashboardContent-panelBody"},o.getPlugin(e.id).render(s,a.current)))}var s_=BC;var o_=se(Xe(),1);function jC(i){let e=i.files[i.fileCardFor],t=()=>{i.uppy.emit("file-editor:cancel",e),i.closeFileEditor()};return h("div",{className:(0,o_.default)("uppy-DashboardContent-panel",i.className),role:"tabpanel","data-uppy-panelType":"FileEditor",id:"uppy-DashboardContent-panel--editor"},h("div",{className:"uppy-DashboardContent-bar"},h("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":"1"},i.i18nArray("editing",{file:h("span",{className:"uppy-DashboardContent-titleFile"},e.meta?e.meta.name:e.name)})),h("button",{className:"uppy-DashboardContent-back",type:"button",onClick:t},i.i18n("cancel")),h("button",{className:"uppy-DashboardContent-save",type:"button",onClick:i.saveFileEditor},i.i18n("save"))),h("div",{className:"uppy-DashboardContent-panelBody"},i.editors.map(r=>i.uppy.getPlugin(r.id).render(i.state))))}var a_=jC;var Bt={STATE_ERROR:"error",STATE_WAITING:"waiting",STATE_PREPROCESSING:"preprocessing",STATE_UPLOADING:"uploading",STATE_POSTPROCESSING:"postprocessing",STATE_COMPLETE:"complete",STATE_PAUSED:"paused"};function zC(i,e,t,r){if(r===void 0&&(r={}),i)return Bt.STATE_ERROR;if(e)return Bt.STATE_COMPLETE;if(t)return Bt.STATE_PAUSED;let n=Bt.STATE_WAITING,s=Object.keys(r);for(let o=0;o<s.length;o++){let{progress:a}=r[s[o]];if(a.uploadStarted&&!a.uploadComplete)return Bt.STATE_UPLOADING;a.preprocess&&n!==Bt.STATE_UPLOADING&&(n=Bt.STATE_PREPROCESSING),a.postprocess&&n!==Bt.STATE_UPLOADING&&n!==Bt.STATE_PREPROCESSING&&(n=Bt.STATE_POSTPROCESSING)}return n}function $C(i){let{files:e,i18n:t,isAllComplete:r,isAllErrored:n,isAllPaused:s,inProgressNotPausedFiles:o,newFiles:a,processingFiles:l}=i;switch(zC(n,r,s,e)){case"uploading":return t("uploadingXFiles",{smart_count:o.length});case"preprocessing":case"postprocessing":return t("processingXFiles",{smart_count:l.length});case"paused":return t("uploadPaused");case"waiting":return t("xFilesSelected",{smart_count:a.length});case"complete":return t("uploadComplete");case"error":return t("error");default:}}function HC(i){let{i18n:e,isAllComplete:t,hideCancelButton:r,maxNumberOfFiles:n,toggleAddFilesPanel:s,uppy:o}=i,{allowNewUpload:a}=i;return a&&n&&(a=i.totalFileCount<i.maxNumberOfFiles),h("div",{className:"uppy-DashboardContent-bar"},!t&&!r?h("button",{className:"uppy-DashboardContent-back",type:"button",onClick:()=>o.cancelAll()},e("cancel")):h("div",null),h("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":"1"},h($C,i)),a?h("button",{className:"uppy-DashboardContent-addMore",type:"button","aria-label":e("addMoreFiles"),title:e("addMoreFiles"),onClick:()=>s(!0)},h("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"15",height:"15",viewBox:"0 0 15 15"},h("path",{d:"M8 6.5h6a.5.5 0 0 1 .5.5v.5a.5.5 0 0 1-.5.5H8v6a.5.5 0 0 1-.5.5H7a.5.5 0 0 1-.5-.5V8h-6a.5.5 0 0 1-.5-.5V7a.5.5 0 0 1 .5-.5h6v-6A.5.5 0 0 1 7 0h.5a.5.5 0 0 1 .5.5v6z"})),h("span",{className:"uppy-DashboardContent-addMoreCaption"},e("addMore"))):h("div",null))}var l_=HC;var u_=se(Xe(),1);function kd(i){let{computedMetaFields:e,requiredMetaFields:t,updateMeta:r,form:n,formState:s}=i,o={text:"uppy-u-reset uppy-c-textInput uppy-Dashboard-FileCard-input"};return e.map(a=>{let l=`uppy-Dashboard-FileCard-input-${a.id}`,u=t.includes(a.id);return h("fieldset",{key:a.id,className:"uppy-Dashboard-FileCard-fieldset"},h("label",{className:"uppy-Dashboard-FileCard-label",htmlFor:l},a.name),a.render!==void 0?a.render({value:s[a.id],onChange:c=>r(c,a.id),fieldCSSClasses:o,required:u,form:n.id},h):h("input",{className:o.text,id:l,form:n.id,type:a.type||"text",required:u,value:s[a.id],placeholder:a.placeholder,onInput:c=>r(c.target.value,a.id),"data-uppy-super-focusable":!0}))})}function Pd(i){var e;let{files:t,fileCardFor:r,toggleFileCard:n,saveFileCard:s,metaFields:o,requiredMetaFields:a,openFileEditor:l,i18n:u,i18nArray:c,className:d,canEditFile:p}=i,f=()=>typeof o=="function"?o(t[r]):o,y=t[r],S=(e=f())!=null?e:[],k=p(y),E={};S.forEach($=>{var J;E[$.id]=(J=y.meta[$.id])!=null?J:""});let[F,D]=vt(E),T=di($=>{$.preventDefault(),s(F,r)},[s,F,r]),z=($,J)=>{D(M(v({},F),{[J]:$}))},N=()=>{n(!1)},[B]=vt(()=>{let $=document.createElement("form");return $.setAttribute("tabindex","-1"),$.id=li(),$});return Et(()=>(document.body.appendChild(B),B.addEventListener("submit",T),()=>{B.removeEventListener("submit",T),document.body.removeChild(B)}),[B,T]),h("div",{className:(0,u_.default)("uppy-Dashboard-FileCard",d),"data-uppy-panelType":"FileCard",onDragOver:Mt,onDragLeave:Mt,onDrop:Mt,onPaste:Mt},h("div",{className:"uppy-DashboardContent-bar"},h("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":"1"},c("editing",{file:h("span",{className:"uppy-DashboardContent-titleFile"},y.meta?y.meta.name:y.name)})),h("button",{className:"uppy-DashboardContent-back",type:"button",form:B.id,title:u("finishEditingFile"),onClick:N},u("cancel"))),h("div",{className:"uppy-Dashboard-FileCard-inner"},h("div",{className:"uppy-Dashboard-FileCard-preview",style:{backgroundColor:ir(y.type).color}},h(io,{file:y}),k&&h("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-Dashboard-FileCard-edit",onClick:$=>{T($),l(y)}},u("editImage"))),h("div",{className:"uppy-Dashboard-FileCard-info"},h(kd,{computedMetaFields:S,requiredMetaFields:a,updateMeta:z,form:B,formState:F})),h("div",{className:"uppy-Dashboard-FileCard-actions"},h("button",{className:"uppy-u-reset uppy-c-btn uppy-c-btn-primary uppy-Dashboard-FileCard-actionsBtn",type:"submit",form:B.id},u("saveChanges")),h("button",{className:"uppy-u-reset uppy-c-btn uppy-c-btn-link uppy-Dashboard-FileCard-actionsBtn",type:"button",onClick:N,form:B.id},u("cancel")))))}var d_=se(Xe(),1),tn="uppy-transition-slideDownUp",c_=250;function VC(i){let{children:e}=i,[t,r]=vt(null),[n,s]=vt(""),o=ui(),a=ui(),l=ui(),u=()=>{s(`${tn}-enter`),cancelAnimationFrame(l.current),clearTimeout(a.current),a.current=void 0,l.current=requestAnimationFrame(()=>{s(`${tn}-enter ${tn}-enter-active`),o.current=setTimeout(()=>{s("")},c_)})},c=()=>{s(`${tn}-leave`),cancelAnimationFrame(l.current),clearTimeout(o.current),o.current=void 0,l.current=requestAnimationFrame(()=>{s(`${tn}-leave ${tn}-leave-active`),a.current=setTimeout(()=>{r(null),s("")},c_)})};return Et(()=>{let d=tt(e)[0];t!==d&&(d&&!t?u():t&&!d&&!a.current&&c(),r(d))},[e,t]),Et(()=>()=>{clearTimeout(o.current),clearTimeout(a.current),cancelAnimationFrame(l.current)},[]),t?gs(t,{className:(0,d_.default)(n,t.props.className)}):null}var no=VC;function rn(){return rn=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(i[r]=t[r])}return i},rn.apply(null,arguments)}var h_=900,f_=700,Td=576,p_=330;function Od(i){let e=i.totalFileCount===0,t=i.totalFileCount===1,r=i.containerWidth>Td,n=i.containerHeight>p_,s=(0,m_.default)({"uppy-Dashboard":!0,"uppy-Dashboard--isDisabled":i.disabled,"uppy-Dashboard--animateOpenClose":i.animateOpenClose,"uppy-Dashboard--isClosing":i.isClosing,"uppy-Dashboard--isDraggingOver":i.isDraggingOver,"uppy-Dashboard--modal":!i.inline,"uppy-size--md":i.containerWidth>Td,"uppy-size--lg":i.containerWidth>f_,"uppy-size--xl":i.containerWidth>h_,"uppy-size--height-md":i.containerHeight>p_,"uppy-Dashboard--isAddFilesPanelVisible":i.showAddFilesPanel,"uppy-Dashboard--isInnerWrapVisible":i.areInsidesReadyToBeVisible,"uppy-Dashboard--singleFile":i.singleFileFullScreen&&t&&n}),o=1;i.containerWidth>h_?o=5:i.containerWidth>f_?o=4:i.containerWidth>Td&&(o=3);let a=i.showSelectedFiles&&!e,l=i.recoveredState?Object.keys(i.recoveredState.files).length:null,u=i.files?Object.keys(i.files).filter(p=>i.files[p].isGhost).length:0,c=()=>u>0?i.i18n("recoveredXFiles",{smart_count:u}):i.i18n("recoveredAllFiles");return h("div",{className:s,"data-uppy-theme":i.theme,"data-uppy-num-acquirers":i.acquirers.length,"data-uppy-drag-drop-supported":!i.disableLocalFiles&&md(),"aria-hidden":i.inline?"false":i.isHidden,"aria-disabled":i.disabled,"aria-label":i.inline?i.i18n("dashboardTitle"):i.i18n("dashboardWindowTitle"),onPaste:i.handlePaste,onDragOver:i.handleDragOver,onDragLeave:i.handleDragLeave,onDrop:i.handleDrop},h("div",{"aria-hidden":"true",className:"uppy-Dashboard-overlay",tabIndex:-1,onClick:i.handleClickOutside}),h("div",{className:"uppy-Dashboard-inner","aria-modal":!i.inline&&"true",role:i.inline?void 0:"dialog",style:{width:i.inline&&i.width?i.width:"",height:i.inline&&i.height?i.height:""}},i.inline?null:h("button",{className:"uppy-u-reset uppy-Dashboard-close",type:"button","aria-label":i.i18n("closeModal"),title:i.i18n("closeModal"),onClick:i.closeModal},h("span",{"aria-hidden":"true"},"\xD7")),h("div",{className:"uppy-Dashboard-innerWrap"},h("div",{className:"uppy-Dashboard-dropFilesHereHint"},i.i18n("dropHint")),a&&h(l_,i),l&&h("div",{className:"uppy-Dashboard-serviceMsg"},h("svg",{className:"uppy-Dashboard-serviceMsg-icon","aria-hidden":"true",focusable:"false",width:"21",height:"16",viewBox:"0 0 24 19"},h("g",{transform:"translate(0 -1)",fill:"none",fillRule:"evenodd"},h("path",{d:"M12.857 1.43l10.234 17.056A1 1 0 0122.234 20H1.766a1 1 0 01-.857-1.514L11.143 1.429a1 1 0 011.714 0z",fill:"#FFD300"}),h("path",{fill:"#000",d:"M11 6h2l-.3 8h-1.4z"}),h("circle",{fill:"#000",cx:"12",cy:"17",r:"1"}))),h("strong",{className:"uppy-Dashboard-serviceMsg-title"},i.i18n("sessionRestored")),h("div",{className:"uppy-Dashboard-serviceMsg-text"},c())),a?h(Cd,{id:i.id,i18n:i.i18n,uppy:i.uppy,files:i.files,resumableUploads:i.resumableUploads,hideRetryButton:i.hideRetryButton,hidePauseResumeButton:i.hidePauseResumeButton,hideCancelButton:i.hideCancelButton,showLinkToFileUploadResult:i.showLinkToFileUploadResult,showRemoveButtonAfterComplete:i.showRemoveButtonAfterComplete,metaFields:i.metaFields,toggleFileCard:i.toggleFileCard,handleRequestThumbnail:i.handleRequestThumbnail,handleCancelThumbnail:i.handleCancelThumbnail,recoveredState:i.recoveredState,individualCancellation:i.individualCancellation,openFileEditor:i.openFileEditor,canEditFile:i.canEditFile,toggleAddFilesPanel:i.toggleAddFilesPanel,isSingleFile:t,itemsPerRow:o,containerWidth:i.containerWidth,containerHeight:i.containerHeight}):h(vl,{i18n:i.i18n,i18nArray:i.i18nArray,acquirers:i.acquirers,handleInputChange:i.handleInputChange,maxNumberOfFiles:i.maxNumberOfFiles,allowedFileTypes:i.allowedFileTypes,showNativePhotoCameraButton:i.showNativePhotoCameraButton,showNativeVideoCameraButton:i.showNativeVideoCameraButton,nativeCameraFacingMode:i.nativeCameraFacingMode,showPanel:i.showPanel,activePickerPanel:i.activePickerPanel,disableLocalFiles:i.disableLocalFiles,fileManagerSelectionType:i.fileManagerSelectionType,note:i.note,proudlyDisplayPoweredByUppy:i.proudlyDisplayPoweredByUppy}),h(no,null,i.showAddFilesPanel?h(r_,rn({key:"AddFiles"},i,{isSizeMD:r})):null),h(no,null,i.fileCardFor?h(Pd,rn({key:"FileCard"},i)):null),h(no,null,i.activePickerPanel?h(s_,rn({key:"Picker"},i)):null),h(no,null,i.showFileEditor?h(a_,rn({key:"Editor"},i)):null),h("div",{className:"uppy-Dashboard-progressindicators"},i.progressindicators.map(p=>i.uppy.getPlugin(p.id).render(i.state))))))}var g_={strings:{closeModal:"Close Modal",addMoreFiles:"Add more files",addingMoreFiles:"Adding more files",importFrom:"Import from %{name}",dashboardWindowTitle:"Uppy Dashboard Window (Press escape to close)",dashboardTitle:"Uppy Dashboard",copyLinkToClipboardSuccess:"Link copied to clipboard.",copyLinkToClipboardFallback:"Copy the URL below",copyLink:"Copy link",back:"Back",removeFile:"Remove file",editFile:"Edit file",editImage:"Edit image",editing:"Editing %{file}",error:"Error",finishEditingFile:"Finish editing file",saveChanges:"Save changes",myDevice:"My Device",dropHint:"Drop your files here",uploadComplete:"Upload complete",uploadPaused:"Upload paused",resumeUpload:"Resume upload",pauseUpload:"Pause upload",retryUpload:"Retry upload",cancelUpload:"Cancel upload",xFilesSelected:{0:"%{smart_count} file selected",1:"%{smart_count} files selected"},uploadingXFiles:{0:"Uploading %{smart_count} file",1:"Uploading %{smart_count} files"},processingXFiles:{0:"Processing %{smart_count} file",1:"Processing %{smart_count} files"},poweredBy:"Powered by %{uppy}",addMore:"Add more",editFileWithFilename:"Edit file %{file}",save:"Save",cancel:"Cancel",dropPasteFiles:"Drop files here or %{browseFiles}",dropPasteFolders:"Drop files here or %{browseFolders}",dropPasteBoth:"Drop files here, %{browseFiles} or %{browseFolders}",dropPasteImportFiles:"Drop files here, %{browseFiles} or import from:",dropPasteImportFolders:"Drop files here, %{browseFolders} or import from:",dropPasteImportBoth:"Drop files here, %{browseFiles}, %{browseFolders} or import from:",importFiles:"Import files from:",browseFiles:"browse files",browseFolders:"browse folders",recoveredXFiles:{0:"We could not fully recover 1 file. Please re-select it and resume the upload.",1:"We could not fully recover %{smart_count} files. Please re-select them and resume the upload."},recoveredAllFiles:"We restored all files. You can now resume the upload.",sessionRestored:"Session restored",reSelect:"Re-select",missingRequiredMetaFields:{0:"Missing required meta field: %{fields}.",1:"Missing required meta fields: %{fields}."},takePictureBtn:"Take Picture",recordVideoBtn:"Record Video"}};function ee(i,e){if(!{}.hasOwnProperty.call(i,e))throw new TypeError("attempted to use private field on non-instance");return i}var qC=0;function Ne(i){return"__private_"+qC+++"_"+i}var WC={version:"4.3.4"},Fd=hd.default||hd,y_=9,GC=27;function v_(){let i={};return i.promise=new Promise((e,t)=>{i.resolve=e,i.reject=t}),i}var KC={target:"body",metaFields:[],thumbnailWidth:280,thumbnailType:"image/jpeg",waitForThumbnailsBeforeUpload:!1,defaultPickerIcon:eo,showLinkToFileUploadResult:!1,showProgressDetails:!1,hideUploadButton:!1,hideCancelButton:!1,hideRetryButton:!1,hidePauseResumeButton:!1,hideProgressAfterFinish:!1,note:null,singleFileFullScreen:!0,disableStatusBar:!1,disableInformer:!1,disableThumbnailGenerator:!1,fileManagerSelectionType:"files",proudlyDisplayPoweredByUppy:!0,showSelectedFiles:!0,showRemoveButtonAfterComplete:!1,showNativePhotoCameraButton:!1,showNativeVideoCameraButton:!1,theme:"light",autoOpen:null,disabled:!1,disableLocalFiles:!1,nativeCameraFacingMode:"",onDragLeave:()=>{},onDragOver:()=>{},onDrop:()=>{},plugins:[],doneButtonHandler:void 0,onRequestCloseModal:null,inline:!1,animateOpenClose:!0,browserBackButtonClose:!1,closeAfterFinish:!1,closeModalOnClickOutside:!1,disablePageScrollWhenModalOpen:!0,trigger:null,width:750,height:550},rr=Ne("disabledNodes"),ii=Ne("generateLargeThumbnailIfSingleFile"),so=Ne("openFileEditorWhenFilesAdded"),nr=Ne("attachRenderFunctionToTarget"),Ad=Ne("isTargetSupported"),Rd=Ne("getAcquirers"),Id=Ne("getProgressIndicators"),ri=Ne("getEditors"),Dd=Ne("addSpecifiedPluginsFromOptions"),Ud=Ne("autoDiscoverPlugins"),sr=Ne("addSupportedPluginIfNoTarget"),oo=Ne("getStatusBarOpts"),ao=Ne("getThumbnailGeneratorOpts"),Ld=Ne("getInformerOpts"),lo=Ne("getStatusBarId"),uo=Ne("getThumbnailGeneratorId"),Nd=Ne("getInformerId"),nn=class extends Yt{constructor(e,t){var r,n,s;let o=(r=t?.autoOpen)!=null?r:null;super(e,M(v(v({},KC),t),{autoOpen:o})),Object.defineProperty(this,Nd,{value:ex}),Object.defineProperty(this,uo,{value:QC}),Object.defineProperty(this,lo,{value:ZC}),Object.defineProperty(this,Ld,{value:JC}),Object.defineProperty(this,ao,{value:YC}),Object.defineProperty(this,oo,{value:XC}),Object.defineProperty(this,rr,{writable:!0,value:void 0}),this.modalName=`uppy-Dashboard-${li()}`,this.superFocus=pd(),this.ifFocusedOnUppyRecently=!1,this.removeTarget=a=>{let u=this.getPluginState().targets.filter(c=>c.id!==a.id);this.setPluginState({targets:u})},this.addTarget=a=>{let l=a.id||a.constructor.name,u=a.title||l,c=a.type;if(c!=="acquirer"&&c!=="progressindicator"&&c!=="editor")return this.uppy.log("Dashboard: can only be targeted by plugins of types: acquirer, progressindicator, editor","error"),null;let d={id:l,name:u,type:c},f=this.getPluginState().targets.slice();return f.push(d),this.setPluginState({targets:f}),this.el},this.hideAllPanels=()=>{var a;let l=this.getPluginState(),u={activePickerPanel:void 0,showAddFilesPanel:!1,activeOverlayType:null,fileCardFor:null,showFileEditor:!1};l.activePickerPanel===u.activePickerPanel&&l.showAddFilesPanel===u.showAddFilesPanel&&l.showFileEditor===u.showFileEditor&&l.activeOverlayType===u.activeOverlayType||(this.setPluginState(u),this.uppy.emit("dashboard:close-panel",(a=l.activePickerPanel)==null?void 0:a.id))},this.showPanel=a=>{let{targets:l}=this.getPluginState(),u=l.find(c=>c.type==="acquirer"&&c.id===a);this.setPluginState({activePickerPanel:u,activeOverlayType:"PickerPanel"}),this.uppy.emit("dashboard:show-panel",a)},this.canEditFile=a=>{let{targets:l}=this.getPluginState();return ee(this,ri)[ri](l).some(c=>this.uppy.getPlugin(c.id).canEditFile(a))},this.openFileEditor=a=>{let{targets:l}=this.getPluginState(),u=ee(this,ri)[ri](l);this.setPluginState({showFileEditor:!0,fileCardFor:a.id||null,activeOverlayType:"FileEditor"}),u.forEach(c=>{this.uppy.getPlugin(c.id).selectFile(a)})},this.closeFileEditor=()=>{let{metaFields:a}=this.getPluginState();a&&a.length>0?this.setPluginState({showFileEditor:!1,activeOverlayType:"FileCard"}):this.setPluginState({showFileEditor:!1,fileCardFor:null,activeOverlayType:"AddFiles"})},this.saveFileEditor=()=>{let{targets:a}=this.getPluginState();ee(this,ri)[ri](a).forEach(u=>{this.uppy.getPlugin(u.id).save()}),this.closeFileEditor()},this.openModal=()=>{let{promise:a,resolve:l}=v_();if(this.savedScrollPosition=window.pageYOffset,this.savedActiveElement=document.activeElement,this.opts.disablePageScrollWhenModalOpen&&document.body.classList.add("uppy-Dashboard-isFixed"),this.opts.animateOpenClose&&this.getPluginState().isClosing){let u=()=>{this.setPluginState({isHidden:!1}),this.el.removeEventListener("animationend",u,!1),l()};this.el.addEventListener("animationend",u,!1)}else this.setPluginState({isHidden:!1}),l();return this.opts.browserBackButtonClose&&this.updateBrowserHistory(),document.addEventListener("keydown",this.handleKeyDownInModal),this.uppy.emit("dashboard:modal-open"),a},this.closeModal=a=>{var l;let u=(l=a?.manualClose)!=null?l:!0,{isHidden:c,isClosing:d}=this.getPluginState();if(c||d)return;let{promise:p,resolve:f}=v_();if(this.opts.disablePageScrollWhenModalOpen&&document.body.classList.remove("uppy-Dashboard-isFixed"),this.opts.animateOpenClose){this.setPluginState({isClosing:!0});let S=()=>{this.setPluginState({isHidden:!0,isClosing:!1}),this.superFocus.cancel(),this.savedActiveElement.focus(),this.el.removeEventListener("animationend",S,!1),f()};this.el.addEventListener("animationend",S,!1)}else this.setPluginState({isHidden:!0}),this.superFocus.cancel(),this.savedActiveElement.focus(),f();if(document.removeEventListener("keydown",this.handleKeyDownInModal),u&&this.opts.browserBackButtonClose){var y;(y=history.state)!=null&&y[this.modalName]&&history.back()}return this.uppy.emit("dashboard:modal-closed"),p},this.isModalOpen=()=>!this.getPluginState().isHidden||!1,this.requestCloseModal=()=>this.opts.onRequestCloseModal?this.opts.onRequestCloseModal():this.closeModal(),this.setDarkModeCapability=a=>{let{capabilities:l}=this.uppy.getState();this.uppy.setState({capabilities:M(v({},l),{darkMode:a})})},this.handleSystemDarkModeChange=a=>{let l=a.matches;this.uppy.log(`[Dashboard] Dark mode is ${l?"on":"off"}`),this.setDarkModeCapability(l)},this.toggleFileCard=(a,l)=>{let u=this.uppy.getFile(l);a?this.uppy.emit("dashboard:file-edit-start",u):this.uppy.emit("dashboard:file-edit-complete",u),this.setPluginState({fileCardFor:a?l:null,activeOverlayType:a?"FileCard":null})},this.toggleAddFilesPanel=a=>{this.setPluginState({showAddFilesPanel:a,activeOverlayType:a?"AddFiles":null})},this.addFiles=a=>{let l=a.map(u=>({source:this.id,name:u.name,type:u.type,data:u,meta:{relativePath:u.relativePath||u.webkitRelativePath||null}}));try{this.uppy.addFiles(l)}catch(u){this.uppy.log(u)}},this.startListeningToResize=()=>{this.resizeObserver=new ResizeObserver(a=>{let l=a[0],{width:u,height:c}=l.contentRect;this.setPluginState({containerWidth:u,containerHeight:c,areInsidesReadyToBeVisible:!0})}),this.resizeObserver.observe(this.el.querySelector(".uppy-Dashboard-inner")),this.makeDashboardInsidesVisibleAnywayTimeout=setTimeout(()=>{let a=this.getPluginState(),l=!this.opts.inline&&a.isHidden;!a.areInsidesReadyToBeVisible&&!l&&(this.uppy.log("[Dashboard] resize event didn\u2019t fire on time: defaulted to mobile layout","warning"),this.setPluginState({areInsidesReadyToBeVisible:!0}))},1e3)},this.stopListeningToResize=()=>{this.resizeObserver.disconnect(),clearTimeout(this.makeDashboardInsidesVisibleAnywayTimeout)},this.recordIfFocusedOnUppyRecently=a=>{this.el.contains(a.target)?this.ifFocusedOnUppyRecently=!0:(this.ifFocusedOnUppyRecently=!1,this.superFocus.cancel())},this.disableInteractiveElements=a=>{var l;let u=["a[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])",'[role="button"]:not([disabled])'],c=(l=ee(this,rr)[rr])!=null?l:mi(this.el.querySelectorAll(u)).filter(d=>!d.classList.contains("uppy-Dashboard-close"));for(let d of c)d.tagName==="A"?d.setAttribute("aria-disabled",a):d.disabled=a;a?ee(this,rr)[rr]=c:ee(this,rr)[rr]=null,this.dashboardIsDisabled=a},this.updateBrowserHistory=()=>{var a;(a=history.state)!=null&&a[this.modalName]||history.pushState(M(v({},history.state),{[this.modalName]:!0}),""),window.addEventListener("popstate",this.handlePopState,!1)},this.handlePopState=a=>{var l;this.isModalOpen()&&(!a.state||!a.state[this.modalName])&&this.closeModal({manualClose:!1}),!this.isModalOpen()&&(l=a.state)!=null&&l[this.modalName]&&history.back()},this.handleKeyDownInModal=a=>{a.keyCode===GC&&this.requestCloseModal(),a.keyCode===y_&&fd(a,this.getPluginState().activeOverlayType,this.el)},this.handleClickOutside=()=>{this.opts.closeModalOnClickOutside&&this.requestCloseModal()},this.handlePaste=a=>{this.uppy.iteratePlugins(u=>{u.type==="acquirer"&&(u.handleRootPaste==null||u.handleRootPaste(a))});let l=mi(a.clipboardData.files);l.length>0&&(this.uppy.log("[Dashboard] Files pasted"),this.addFiles(l))},this.handleInputChange=a=>{a.preventDefault();let l=mi(a.currentTarget.files||[]);l.length>0&&(this.uppy.log("[Dashboard] Files selected through input"),this.addFiles(l))},this.handleDragOver=a=>{a.preventDefault(),a.stopPropagation();let l=()=>{let p=!0;return this.uppy.iteratePlugins(f=>{f.canHandleRootDrop!=null&&f.canHandleRootDrop(a)&&(p=!0)}),p},u=()=>{let{types:p}=a.dataTransfer;return p.some(f=>f==="Files")},c=l(),d=u();if(!c&&!d||this.opts.disabled||this.opts.disableLocalFiles&&(d||!c)||!this.uppy.getState().allowNewUpload){a.dataTransfer.dropEffect="none";return}a.dataTransfer.dropEffect="copy",this.setPluginState({isDraggingOver:!0}),this.opts.onDragOver(a)},this.handleDragLeave=a=>{a.preventDefault(),a.stopPropagation(),this.setPluginState({isDraggingOver:!1}),this.opts.onDragLeave(a)},this.handleDrop=a=>m(this,null,function*(){a.preventDefault(),a.stopPropagation(),this.setPluginState({isDraggingOver:!1}),this.uppy.iteratePlugins(d=>{d.type==="acquirer"&&(d.handleRootDrop==null||d.handleRootDrop(a))});let l=!1,u=d=>{this.uppy.log(d,"error"),l||(this.uppy.info(d.message,"error"),l=!0)};this.uppy.log("[Dashboard] Processing dropped files");let c=yield Yc(a.dataTransfer,{logDropError:u});c.length>0&&(this.uppy.log("[Dashboard] Files dropped"),this.addFiles(c)),this.opts.onDrop(a)}),this.handleRequestThumbnail=a=>{this.opts.waitForThumbnailsBeforeUpload||this.uppy.emit("thumbnail:request",a)},this.handleCancelThumbnail=a=>{this.opts.waitForThumbnailsBeforeUpload||this.uppy.emit("thumbnail:cancel",a)},this.handleKeyDownInInline=a=>{a.keyCode===y_&&Yv(a,this.getPluginState().activeOverlayType,this.el)},this.handlePasteOnBody=a=>{this.el.contains(document.activeElement)&&this.handlePaste(a)},this.handleComplete=a=>{let{failed:l}=a;this.opts.closeAfterFinish&&!(l!=null&&l.length)&&this.requestCloseModal()},this.handleCancelRestore=()=>{this.uppy.emit("restore-canceled")},Object.defineProperty(this,ii,{writable:!0,value:()=>{if(this.opts.disableThumbnailGenerator)return;let a=600,l=this.uppy.getFiles();if(l.length===1){let u=this.uppy.getPlugin(`${this.id}:ThumbnailGenerator`);u?.setOptions({thumbnailWidth:a});let c=M(v({},l[0]),{preview:void 0});u?.requestThumbnail(c).then(()=>{u?.setOptions({thumbnailWidth:this.opts.thumbnailWidth})})}}}),Object.defineProperty(this,so,{writable:!0,value:a=>{let l=a[0],{metaFields:u}=this.getPluginState(),c=u&&u.length>0,d=this.canEditFile(l);c&&this.opts.autoOpen==="metaEditor"?this.toggleFileCard(!0,l.id):d&&this.opts.autoOpen==="imageEditor"&&this.openFileEditor(l)}}),this.initEvents=()=>{if(this.opts.trigger&&!this.opts.inline){let a=Gc(this.opts.trigger);a?a.forEach(l=>l.addEventListener("click",this.openModal)):this.uppy.log("Dashboard modal trigger not found. Make sure `trigger` is set in Dashboard options, unless you are planning to call `dashboard.openModal()` method yourself","warning")}this.startListeningToResize(),document.addEventListener("paste",this.handlePasteOnBody),this.uppy.on("plugin-added",ee(this,sr)[sr]),this.uppy.on("plugin-remove",this.removeTarget),this.uppy.on("file-added",this.hideAllPanels),this.uppy.on("dashboard:modal-closed",this.hideAllPanels),this.uppy.on("complete",this.handleComplete),this.uppy.on("files-added",ee(this,ii)[ii]),this.uppy.on("file-removed",ee(this,ii)[ii]),document.addEventListener("focus",this.recordIfFocusedOnUppyRecently,!0),document.addEventListener("click",this.recordIfFocusedOnUppyRecently,!0),this.opts.inline&&this.el.addEventListener("keydown",this.handleKeyDownInInline),this.opts.autoOpen&&this.uppy.on("files-added",ee(this,so)[so])},this.removeEvents=()=>{let a=Gc(this.opts.trigger);!this.opts.inline&&a&&a.forEach(l=>l.removeEventListener("click",this.openModal)),this.stopListeningToResize(),document.removeEventListener("paste",this.handlePasteOnBody),window.removeEventListener("popstate",this.handlePopState,!1),this.uppy.off("plugin-added",ee(this,sr)[sr]),this.uppy.off("plugin-remove",this.removeTarget),this.uppy.off("file-added",this.hideAllPanels),this.uppy.off("dashboard:modal-closed",this.hideAllPanels),this.uppy.off("complete",this.handleComplete),this.uppy.off("files-added",ee(this,ii)[ii]),this.uppy.off("file-removed",ee(this,ii)[ii]),document.removeEventListener("focus",this.recordIfFocusedOnUppyRecently),document.removeEventListener("click",this.recordIfFocusedOnUppyRecently),this.opts.inline&&this.el.removeEventListener("keydown",this.handleKeyDownInInline),this.opts.autoOpen&&this.uppy.off("files-added",ee(this,so)[so])},this.superFocusOnEachUpdate=()=>{let a=this.el.contains(document.activeElement),l=document.activeElement===document.body||document.activeElement===null,u=this.uppy.getState().info.length===0,c=!this.opts.inline;u&&(c||a||l&&this.ifFocusedOnUppyRecently)?this.superFocus(this.el,this.getPluginState().activeOverlayType):this.superFocus.cancel()},this.afterUpdate=()=>{if(this.opts.disabled&&!this.dashboardIsDisabled){this.disableInteractiveElements(!0);return}!this.opts.disabled&&this.dashboardIsDisabled&&this.disableInteractiveElements(!1),this.superFocusOnEachUpdate()},this.saveFileCard=(a,l)=>{this.uppy.setFileMeta(l,a),this.toggleFileCard(!1,l)},Object.defineProperty(this,nr,{writable:!0,value:a=>{let l=this.uppy.getPlugin(a.id);return M(v({},a),{icon:l.icon||this.opts.defaultPickerIcon,render:l.render})}}),Object.defineProperty(this,Ad,{writable:!0,value:a=>{let l=this.uppy.getPlugin(a.id);return typeof l.isSupported!="function"?!0:l.isSupported()}}),Object.defineProperty(this,Rd,{writable:!0,value:Fd(a=>a.filter(l=>l.type==="acquirer"&&ee(this,Ad)[Ad](l)).map(ee(this,nr)[nr]))}),Object.defineProperty(this,Id,{writable:!0,value:Fd(a=>a.filter(l=>l.type==="progressindicator").map(ee(this,nr)[nr]))}),Object.defineProperty(this,ri,{writable:!0,value:Fd(a=>a.filter(l=>l.type==="editor").map(ee(this,nr)[nr]))}),this.render=a=>{let l=this.getPluginState(),{files:u,capabilities:c,allowNewUpload:d}=a,{newFiles:p,uploadStartedFiles:f,completeFiles:y,erroredFiles:S,inProgressFiles:k,inProgressNotPausedFiles:E,processingFiles:F,isUploadStarted:D,isAllComplete:T,isAllPaused:z}=this.uppy.getObjectOfFilesPerState(),N=ee(this,Rd)[Rd](l.targets),B=ee(this,Id)[Id](l.targets),$=ee(this,ri)[ri](l.targets),J;return this.opts.theme==="auto"?J=c.darkMode?"dark":"light":J=this.opts.theme,["files","folders","both"].indexOf(this.opts.fileManagerSelectionType)<0&&(this.opts.fileManagerSelectionType="files",console.warn(`Unsupported option for "fileManagerSelectionType". Using default of "${this.opts.fileManagerSelectionType}".`)),Od({state:a,isHidden:l.isHidden,files:u,newFiles:p,uploadStartedFiles:f,completeFiles:y,erroredFiles:S,inProgressFiles:k,inProgressNotPausedFiles:E,processingFiles:F,isUploadStarted:D,isAllComplete:T,isAllPaused:z,totalFileCount:Object.keys(u).length,totalProgress:a.totalProgress,allowNewUpload:d,acquirers:N,theme:J,disabled:this.opts.disabled,disableLocalFiles:this.opts.disableLocalFiles,direction:this.opts.direction,activePickerPanel:l.activePickerPanel,showFileEditor:l.showFileEditor,saveFileEditor:this.saveFileEditor,closeFileEditor:this.closeFileEditor,disableInteractiveElements:this.disableInteractiveElements,animateOpenClose:this.opts.animateOpenClose,isClosing:l.isClosing,progressindicators:B,editors:$,autoProceed:this.uppy.opts.autoProceed,id:this.id,closeModal:this.requestCloseModal,handleClickOutside:this.handleClickOutside,handleInputChange:this.handleInputChange,handlePaste:this.handlePaste,inline:this.opts.inline,showPanel:this.showPanel,hideAllPanels:this.hideAllPanels,i18n:this.i18n,i18nArray:this.i18nArray,uppy:this.uppy,note:this.opts.note,recoveredState:a.recoveredState,metaFields:l.metaFields,resumableUploads:c.resumableUploads||!1,individualCancellation:c.individualCancellation,isMobileDevice:c.isMobileDevice,fileCardFor:l.fileCardFor,toggleFileCard:this.toggleFileCard,toggleAddFilesPanel:this.toggleAddFilesPanel,showAddFilesPanel:l.showAddFilesPanel,saveFileCard:this.saveFileCard,openFileEditor:this.openFileEditor,canEditFile:this.canEditFile,width:this.opts.width,height:this.opts.height,showLinkToFileUploadResult:this.opts.showLinkToFileUploadResult,fileManagerSelectionType:this.opts.fileManagerSelectionType,proudlyDisplayPoweredByUppy:this.opts.proudlyDisplayPoweredByUppy,hideCancelButton:this.opts.hideCancelButton,hideRetryButton:this.opts.hideRetryButton,hidePauseResumeButton:this.opts.hidePauseResumeButton,showRemoveButtonAfterComplete:this.opts.showRemoveButtonAfterComplete,containerWidth:l.containerWidth,containerHeight:l.containerHeight,areInsidesReadyToBeVisible:l.areInsidesReadyToBeVisible,parentElement:this.el,allowedFileTypes:this.uppy.opts.restrictions.allowedFileTypes,maxNumberOfFiles:this.uppy.opts.restrictions.maxNumberOfFiles,requiredMetaFields:this.uppy.opts.restrictions.requiredMetaFields,showSelectedFiles:this.opts.showSelectedFiles,showNativePhotoCameraButton:this.opts.showNativePhotoCameraButton,showNativeVideoCameraButton:this.opts.showNativeVideoCameraButton,nativeCameraFacingMode:this.opts.nativeCameraFacingMode,singleFileFullScreen:this.opts.singleFileFullScreen,handleCancelRestore:this.handleCancelRestore,handleRequestThumbnail:this.handleRequestThumbnail,handleCancelThumbnail:this.handleCancelThumbnail,isDraggingOver:l.isDraggingOver,handleDragOver:this.handleDragOver,handleDragLeave:this.handleDragLeave,handleDrop:this.handleDrop})},Object.defineProperty(this,Dd,{writable:!0,value:()=>{let{plugins:a}=this.opts;a.forEach(l=>{let u=this.uppy.getPlugin(l);u?u.mount(this,u):this.uppy.log(`[Uppy] Dashboard could not find plugin '${l}', make sure to uppy.use() the plugins you are specifying`,"warning")})}}),Object.defineProperty(this,Ud,{writable:!0,value:()=>{this.uppy.iteratePlugins(ee(this,sr)[sr])}}),Object.defineProperty(this,sr,{writable:!0,value:a=>{var l;let u=["acquirer","editor"];a&&!((l=a.opts)!=null&&l.target)&&u.includes(a.type)&&(this.getPluginState().targets.some(d=>a.id===d.id)||a.mount(this,a))}}),this.install=()=>{this.setPluginState({isHidden:!0,fileCardFor:null,activeOverlayType:null,showAddFilesPanel:!1,activePickerPanel:void 0,showFileEditor:!1,metaFields:this.opts.metaFields,targets:[],areInsidesReadyToBeVisible:!1,isDraggingOver:!1});let{inline:a,closeAfterFinish:l}=this.opts;if(a&&l)throw new Error("[Dashboard] `closeAfterFinish: true` cannot be used on an inline Dashboard, because an inline Dashboard cannot be closed at all. Either set `inline: false`, or disable the `closeAfterFinish` option.");let{allowMultipleUploads:u,allowMultipleUploadBatches:c}=this.uppy.opts;(u||c)&&l&&this.uppy.log("[Dashboard] When using `closeAfterFinish`, we recommended setting the `allowMultipleUploadBatches` option to `false` in the Uppy constructor. See https://uppy.io/docs/uppy/#allowMultipleUploads-true","warning");let{target:d}=this.opts;d&&this.mount(d,this),this.opts.disableStatusBar||this.uppy.use(qr,v({id:ee(this,lo)[lo](),target:this},ee(this,oo)[oo]())),this.opts.disableInformer||this.uppy.use(Yi,v({id:ee(this,Nd)[Nd](),target:this},ee(this,Ld)[Ld]())),this.opts.disableThumbnailGenerator||this.uppy.use(pi,v({id:ee(this,uo)[uo]()},ee(this,ao)[ao]())),this.darkModeMediaQuery=typeof window<"u"&&window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)"):null;let p=this.darkModeMediaQuery?this.darkModeMediaQuery.matches:!1;if(this.uppy.log(`[Dashboard] Dark mode is ${p?"on":"off"}`),this.setDarkModeCapability(p),this.opts.theme==="auto"){var f;(f=this.darkModeMediaQuery)==null||f.addListener(this.handleSystemDarkModeChange)}ee(this,Dd)[Dd](),ee(this,Ud)[Ud](),this.initEvents()},this.uninstall=()=>{if(!this.opts.disableInformer){let u=this.uppy.getPlugin(`${this.id}:Informer`);u&&this.uppy.removePlugin(u)}if(!this.opts.disableStatusBar){let u=this.uppy.getPlugin(`${this.id}:StatusBar`);u&&this.uppy.removePlugin(u)}if(!this.opts.disableThumbnailGenerator){let u=this.uppy.getPlugin(`${this.id}:ThumbnailGenerator`);u&&this.uppy.removePlugin(u)}let{plugins:a}=this.opts;if(a.forEach(u=>{let c=this.uppy.getPlugin(u);c&&c.unmount()}),this.opts.theme==="auto"){var l;(l=this.darkModeMediaQuery)==null||l.removeListener(this.handleSystemDarkModeChange)}this.opts.disablePageScrollWhenModalOpen&&document.body.classList.remove("uppy-Dashboard-isFixed"),this.unmount(),this.removeEvents()},this.id=this.opts.id||"Dashboard",this.title="Dashboard",this.type="orchestrator",this.defaultLocale=g_,this.opts.doneButtonHandler===void 0&&(this.opts.doneButtonHandler=()=>{this.uppy.clear(),this.requestCloseModal()}),(s=(n=this.opts).onRequestCloseModal)!=null||(n.onRequestCloseModal=()=>this.closeModal()),this.i18nInit()}setOptions(e){var t,r;super.setOptions(e),(t=this.uppy.getPlugin(ee(this,lo)[lo]()))==null||t.setOptions(ee(this,oo)[oo]()),(r=this.uppy.getPlugin(ee(this,uo)[uo]()))==null||r.setOptions(ee(this,ao)[ao]())}};function XC(){let{hideUploadButton:i,hideRetryButton:e,hidePauseResumeButton:t,hideCancelButton:r,showProgressDetails:n,hideProgressAfterFinish:s,locale:o,doneButtonHandler:a}=this.opts;return{hideUploadButton:i,hideRetryButton:e,hidePauseResumeButton:t,hideCancelButton:r,showProgressDetails:n,hideAfterFinish:s,locale:o,doneButtonHandler:a}}function YC(){let{thumbnailWidth:i,thumbnailHeight:e,thumbnailType:t,waitForThumbnailsBeforeUpload:r}=this.opts;return{thumbnailWidth:i,thumbnailHeight:e,thumbnailType:t,waitForThumbnailsBeforeUpload:r,lazy:!r}}function JC(){return{}}function ZC(){return`${this.id}:StatusBar`}function QC(){return`${this.id}:ThumbnailGenerator`}function ex(){return`${this.id}:Informer`}nn.VERSION=WC.version;function co(i,e=0){return tx(i)?Number(i):arguments.length===2?e:0}function tx(i){return!isNaN(parseFloat(i))&&!isNaN(Number(i))}function sn(i){return i instanceof ot?i.nativeElement:i}var Md;try{Md=typeof Intl<"u"&&Intl.v8BreakIterator}catch{Md=!1}var Te=(()=>{class i{_platformId=P(Yh);isBrowser=this._platformId?hf(this._platformId):typeof document=="object"&&!!document;EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent);TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent);BLINK=this.isBrowser&&!!(window.chrome||Md)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT;WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT;IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window);FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent);ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT;SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT;constructor(){}static \u0275fac=function(r){return new(r||i)};static \u0275prov=Y({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var ix=new Ae("cdk-dir-doc",{providedIn:"root",factory:rx});function rx(){return P(ve)}var nx=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function sx(i){let e=i?.toLowerCase()||"";return e==="auto"&&typeof navigator<"u"&&navigator?.language?nx.test(navigator.language)?"rtl":"ltr":e==="rtl"?"rtl":"ltr"}var or=(()=>{class i{get value(){return this.valueSignal()}valueSignal=Ce("ltr");change=new si;constructor(){let t=P(ix,{optional:!0});if(t){let r=t.body?t.body.dir:null,n=t.documentElement?t.documentElement.dir:null;this.valueSignal.set(sx(r||n||"ltr"))}}ngOnDestroy(){this.change.complete()}static \u0275fac=function(r){return new(r||i)};static \u0275prov=Y({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var kt=function(i){return i[i.NORMAL=0]="NORMAL",i[i.NEGATED=1]="NEGATED",i[i.INVERTED=2]="INVERTED",i}(kt||{}),_l,ar;function bl(){if(ar==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return ar=!1,ar;if("scrollBehavior"in document.documentElement.style)ar=!0;else{let i=Element.prototype.scrollTo;i?ar=!/\{\s*\[native code\]\s*\}/.test(i.toString()):ar=!1}}return ar}function on(){if(typeof document!="object"||!document)return kt.NORMAL;if(_l==null){let i=document.createElement("div"),e=i.style;i.dir="rtl",e.width="1px",e.overflow="auto",e.visibility="hidden",e.pointerEvents="none",e.position="absolute";let t=document.createElement("div"),r=t.style;r.width="2px",r.height="1px",i.appendChild(t),document.body.appendChild(i),_l=kt.NORMAL,i.scrollLeft===0&&(i.scrollLeft=1,_l=i.scrollLeft===0?kt.NEGATED:kt.INVERTED),i.remove()}return _l}var ho=(()=>{class i{static \u0275fac=function(r){return new(r||i)};static \u0275mod=qe({type:i});static \u0275inj=Ve({})}return i})();var wl=class{};function __(i){return i&&typeof i.connect=="function"&&!(i instanceof Ih)}var Sl=class extends wl{_data;constructor(e){super(),this._data=e}connect(){return xo(this._data)?this._data:vi(this._data)}disconnect(){}},fo=function(i){return i[i.REPLACED=0]="REPLACED",i[i.INSERTED=1]="INSERTED",i[i.MOVED=2]="MOVED",i[i.REMOVED=3]="REMOVED",i}(fo||{}),Bd=new Ae("_ViewRepeater"),El=class{viewCacheSize=20;_viewCache=[];applyChanges(e,t,r,n,s){e.forEachOperation((o,a,l)=>{let u,c;if(o.previousIndex==null){let d=()=>r(o,a,l);u=this._insertView(d,l,t,n(o)),c=u?fo.INSERTED:fo.REPLACED}else l==null?(this._detachAndCacheView(a,t),c=fo.REMOVED):(u=this._moveView(a,l,t,n(o)),c=fo.MOVED);s&&s({context:u?.context,operation:c,record:o})})}detach(){for(let e of this._viewCache)e.destroy();this._viewCache=[]}_insertView(e,t,r,n){let s=this._insertViewFromCache(t,r);if(s){s.context.$implicit=n;return}let o=e();return r.createEmbeddedView(o.templateRef,o.context,o.index)}_detachAndCacheView(e,t){let r=t.detach(e);this._maybeCacheView(r,t)}_moveView(e,t,r,n){let s=r.get(e);return r.move(s,t),s.context.$implicit=n,s}_maybeCacheView(e,t){if(this._viewCache.length<this.viewCacheSize)this._viewCache.push(e);else{let r=t.indexOf(e);r===-1?e.destroy():t.remove(r)}}_insertViewFromCache(e,t){let r=this._viewCache.pop();return r&&t.insert(r,e),r||null}};var ox=["contentWrapper"],ax=["*"],E_=new Ae("VIRTUAL_SCROLL_STRATEGY"),jd=class{_scrolledIndexChange=new re;scrolledIndexChange=this._scrolledIndexChange.pipe(Po());_viewport=null;_itemSize;_minBufferPx;_maxBufferPx;constructor(e,t,r){this._itemSize=e,this._minBufferPx=t,this._maxBufferPx=r}attach(e){this._viewport=e,this._updateTotalContentSize(),this._updateRenderedRange()}detach(){this._scrolledIndexChange.complete(),this._viewport=null}updateItemAndBufferSize(e,t,r){r<t,this._itemSize=e,this._minBufferPx=t,this._maxBufferPx=r,this._updateTotalContentSize(),this._updateRenderedRange()}onContentScrolled(){this._updateRenderedRange()}onDataLengthChanged(){this._updateTotalContentSize(),this._updateRenderedRange()}onContentRendered(){}onRenderedOffsetChanged(){}scrollToIndex(e,t){this._viewport&&this._viewport.scrollToOffset(e*this._itemSize,t)}_updateTotalContentSize(){this._viewport&&this._viewport.setTotalContentSize(this._viewport.getDataLength()*this._itemSize)}_updateRenderedRange(){if(!this._viewport)return;let e=this._viewport.getRenderedRange(),t={start:e.start,end:e.end},r=this._viewport.getViewportSize(),n=this._viewport.getDataLength(),s=this._viewport.measureScrollOffset(),o=this._itemSize>0?s/this._itemSize:0;if(t.end>n){let l=Math.ceil(r/this._itemSize),u=Math.max(0,Math.min(o,n-l));o!=u&&(o=u,s=u*this._itemSize,t.start=Math.floor(o)),t.end=Math.max(0,Math.min(n,t.start+l))}let a=s-t.start*this._itemSize;if(a<this._minBufferPx&&t.start!=0){let l=Math.ceil((this._maxBufferPx-a)/this._itemSize);t.start=Math.max(0,t.start-l),t.end=Math.min(n,Math.ceil(o+(r+this._minBufferPx)/this._itemSize))}else{let l=t.end*this._itemSize-(s+r);if(l<this._minBufferPx&&t.end!=n){let u=Math.ceil((this._maxBufferPx-l)/this._itemSize);u>0&&(t.end=Math.min(n,t.end+u),t.start=Math.max(0,Math.floor(o-this._minBufferPx/this._itemSize)))}}this._viewport.setRenderedRange(t),this._viewport.setRenderedContentOffset(this._itemSize*t.start),this._scrolledIndexChange.next(Math.floor(o))}};function lx(i){return i._scrollStrategy}var C_=(()=>{class i{get itemSize(){return this._itemSize}set itemSize(t){this._itemSize=co(t)}_itemSize=20;get minBufferPx(){return this._minBufferPx}set minBufferPx(t){this._minBufferPx=co(t)}_minBufferPx=100;get maxBufferPx(){return this._maxBufferPx}set maxBufferPx(t){this._maxBufferPx=co(t)}_maxBufferPx=200;_scrollStrategy=new jd(this.itemSize,this.minBufferPx,this.maxBufferPx);ngOnChanges(){this._scrollStrategy.updateItemAndBufferSize(this.itemSize,this.minBufferPx,this.maxBufferPx)}static \u0275fac=function(r){return new(r||i)};static \u0275dir=pt({type:i,selectors:[["cdk-virtual-scroll-viewport","itemSize",""]],inputs:{itemSize:"itemSize",minBufferPx:"minBufferPx",maxBufferPx:"maxBufferPx"},features:[wr([{provide:E_,useFactory:lx,deps:[Wh(()=>i)]}]),Oo]})}return i})(),ux=20,Cl=(()=>{class i{_ngZone=P(_e);_platform=P(Te);_renderer=P(jt).createRenderer(null,null);_cleanupGlobalListener;constructor(){}_scrolled=new re;_scrolledCount=0;scrollContainers=new Map;register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){let r=this.scrollContainers.get(t);r&&(r.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=ux){return this._platform.isBrowser?new yi(r=>{this._cleanupGlobalListener||(this._cleanupGlobalListener=this._ngZone.runOutsideAngular(()=>this._renderer.listen("document","scroll",()=>this._scrolled.next())));let n=t>0?this._scrolled.pipe(ko(t)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{n.unsubscribe(),this._scrolledCount--,this._scrolledCount||(this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0)}}):vi()}ngOnDestroy(){this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0,this.scrollContainers.forEach((t,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(t,r){let n=this.getAncestorScrollContainers(t);return this.scrolled(r).pipe(_i(s=>!s||n.indexOf(s)>-1))}getAncestorScrollContainers(t){let r=[];return this.scrollContainers.forEach((n,s)=>{this._scrollableContainsElement(s,t)&&r.push(s)}),r}_scrollableContainsElement(t,r){let n=sn(r),s=t.getElementRef().nativeElement;do if(n==s)return!0;while(n=n.parentElement);return!1}static \u0275fac=function(r){return new(r||i)};static \u0275prov=Y({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),x_=(()=>{class i{elementRef=P(ot);scrollDispatcher=P(Cl);ngZone=P(_e);dir=P(or,{optional:!0});_scrollElement=this.elementRef.nativeElement;_destroyed=new re;_renderer=P(br);_cleanupScroll;_elementScrolled=new re;constructor(){}ngOnInit(){this._cleanupScroll=this.ngZone.runOutsideAngular(()=>this._renderer.listen(this._scrollElement,"scroll",t=>this._elementScrolled.next(t))),this.scrollDispatcher.register(this)}ngOnDestroy(){this._cleanupScroll?.(),this._elementScrolled.complete(),this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(t){let r=this.elementRef.nativeElement,n=this.dir&&this.dir.value=="rtl";t.left==null&&(t.left=n?t.end:t.start),t.right==null&&(t.right=n?t.start:t.end),t.bottom!=null&&(t.top=r.scrollHeight-r.clientHeight-t.bottom),n&&on()!=kt.NORMAL?(t.left!=null&&(t.right=r.scrollWidth-r.clientWidth-t.left),on()==kt.INVERTED?t.left=t.right:on()==kt.NEGATED&&(t.left=t.right?-t.right:t.right)):t.right!=null&&(t.left=r.scrollWidth-r.clientWidth-t.right),this._applyScrollToOptions(t)}_applyScrollToOptions(t){let r=this.elementRef.nativeElement;bl()?r.scrollTo(t):(t.top!=null&&(r.scrollTop=t.top),t.left!=null&&(r.scrollLeft=t.left))}measureScrollOffset(t){let r="left",n="right",s=this.elementRef.nativeElement;if(t=="top")return s.scrollTop;if(t=="bottom")return s.scrollHeight-s.clientHeight-s.scrollTop;let o=this.dir&&this.dir.value=="rtl";return t=="start"?t=o?n:r:t=="end"&&(t=o?r:n),o&&on()==kt.INVERTED?t==r?s.scrollWidth-s.clientWidth-s.scrollLeft:s.scrollLeft:o&&on()==kt.NEGATED?t==r?s.scrollLeft+s.scrollWidth-s.clientWidth:-s.scrollLeft:t==r?s.scrollLeft:s.scrollWidth-s.clientWidth-s.scrollLeft}static \u0275fac=function(r){return new(r||i)};static \u0275dir=pt({type:i,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]})}return i})(),cx=20,an=(()=>{class i{_platform=P(Te);_listeners;_viewportSize;_change=new re;_document=P(ve,{optional:!0});constructor(){let t=P(_e),r=P(jt).createRenderer(null,null);t.runOutsideAngular(()=>{if(this._platform.isBrowser){let n=s=>this._change.next(s);this._listeners=[r.listen("window","resize",n),r.listen("window","orientationchange",n)]}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){this._listeners?.forEach(t=>t()),this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){let t=this.getViewportScrollPosition(),{width:r,height:n}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+n,right:t.left+r,height:n,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let t=this._document,r=this._getWindow(),n=t.documentElement,s=n.getBoundingClientRect(),o=-s.top||t.body.scrollTop||r.scrollY||n.scrollTop||0,a=-s.left||t.body.scrollLeft||r.scrollX||n.scrollLeft||0;return{top:o,left:a}}change(t=cx){return t>0?this._change.pipe(ko(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}static \u0275fac=function(r){return new(r||i)};static \u0275prov=Y({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),b_=new Ae("VIRTUAL_SCROLLABLE"),dx=(()=>{class i extends x_{constructor(){super()}measureViewportSize(t){let r=this.elementRef.nativeElement;return t==="horizontal"?r.clientWidth:r.clientHeight}static \u0275fac=function(r){return new(r||i)};static \u0275dir=pt({type:i,features:[wi]})}return i})();function hx(i,e){return i.start==e.start&&i.end==e.end}var fx=typeof requestAnimationFrame<"u"?Nh:Lh,ln=(()=>{class i extends dx{elementRef=P(ot);_changeDetectorRef=P(No);_scrollStrategy=P(E_,{optional:!0});scrollable=P(b_,{optional:!0});_platform=P(Te);_detachedSubject=new re;_renderedRangeSubject=new re;get orientation(){return this._orientation}set orientation(t){this._orientation!==t&&(this._orientation=t,this._calculateSpacerSize())}_orientation="vertical";appendOnly=!1;scrolledIndexChange=new yi(t=>this._scrollStrategy.scrolledIndexChange.subscribe(r=>Promise.resolve().then(()=>this.ngZone.run(()=>t.next(r)))));_contentWrapper;renderedRangeStream=this._renderedRangeSubject;_totalContentSize=0;_totalContentWidth=Ce("");_totalContentHeight=Ce("");_renderedContentTransform;_renderedRange={start:0,end:0};_dataLength=0;_viewportSize=0;_forOf;_renderedContentOffset=0;_renderedContentOffsetNeedsRewrite=!1;_isChangeDetectionPending=!1;_runAfterChangeDetection=[];_viewportChanges=bn.EMPTY;_injector=P(he);_isDestroyed=!1;constructor(){super();let t=P(an);this._scrollStrategy,this._viewportChanges=t.change().subscribe(()=>{this.checkViewportSize()}),this.scrollable||(this.elementRef.nativeElement.classList.add("cdk-virtual-scrollable"),this.scrollable=this)}ngOnInit(){this._platform.isBrowser&&(this.scrollable===this&&super.ngOnInit(),this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._measureViewportSize(),this._scrollStrategy.attach(this),this.scrollable.elementScrolled().pipe(bi(null),ko(0,fx),Pt(this._destroyed)).subscribe(()=>this._scrollStrategy.onContentScrolled()),this._markChangeDetectionNeeded()})))}ngOnDestroy(){this.detach(),this._scrollStrategy.detach(),this._renderedRangeSubject.complete(),this._detachedSubject.complete(),this._viewportChanges.unsubscribe(),this._isDestroyed=!0,super.ngOnDestroy()}attach(t){this._forOf,this.ngZone.runOutsideAngular(()=>{this._forOf=t,this._forOf.dataStream.pipe(Pt(this._detachedSubject)).subscribe(r=>{let n=r.length;n!==this._dataLength&&(this._dataLength=n,this._scrollStrategy.onDataLengthChanged()),this._doChangeDetection()})})}detach(){this._forOf=null,this._detachedSubject.next()}getDataLength(){return this._dataLength}getViewportSize(){return this._viewportSize}getRenderedRange(){return this._renderedRange}measureBoundingClientRectWithScrollOffset(t){return this.getElementRef().nativeElement.getBoundingClientRect()[t]}setTotalContentSize(t){this._totalContentSize!==t&&(this._totalContentSize=t,this._calculateSpacerSize(),this._markChangeDetectionNeeded())}setRenderedRange(t){hx(this._renderedRange,t)||(this.appendOnly&&(t={start:0,end:Math.max(this._renderedRange.end,t.end)}),this._renderedRangeSubject.next(this._renderedRange=t),this._markChangeDetectionNeeded(()=>this._scrollStrategy.onContentRendered()))}getOffsetToRenderedContentStart(){return this._renderedContentOffsetNeedsRewrite?null:this._renderedContentOffset}setRenderedContentOffset(t,r="to-start"){t=this.appendOnly&&r==="to-start"?0:t;let n=this.dir&&this.dir.value=="rtl",s=this.orientation=="horizontal",o=s?"X":"Y",l=`translate${o}(${Number((s&&n?-1:1)*t)}px)`;this._renderedContentOffset=t,r==="to-end"&&(l+=` translate${o}(-100%)`,this._renderedContentOffsetNeedsRewrite=!0),this._renderedContentTransform!=l&&(this._renderedContentTransform=l,this._markChangeDetectionNeeded(()=>{this._renderedContentOffsetNeedsRewrite?(this._renderedContentOffset-=this.measureRenderedContentSize(),this._renderedContentOffsetNeedsRewrite=!1,this.setRenderedContentOffset(this._renderedContentOffset)):this._scrollStrategy.onRenderedOffsetChanged()}))}scrollToOffset(t,r="auto"){let n={behavior:r};this.orientation==="horizontal"?n.start=t:n.top=t,this.scrollable.scrollTo(n)}scrollToIndex(t,r="auto"){this._scrollStrategy.scrollToIndex(t,r)}measureScrollOffset(t){let r;return this.scrollable==this?r=n=>super.measureScrollOffset(n):r=n=>this.scrollable.measureScrollOffset(n),Math.max(0,r(t??(this.orientation==="horizontal"?"start":"top"))-this.measureViewportOffset())}measureViewportOffset(t){let r,n="left",s="right",o=this.dir?.value=="rtl";t=="start"?r=o?s:n:t=="end"?r=o?n:s:t?r=t:r=this.orientation==="horizontal"?"left":"top";let a=this.scrollable.measureBoundingClientRectWithScrollOffset(r);return this.elementRef.nativeElement.getBoundingClientRect()[r]-a}measureRenderedContentSize(){let t=this._contentWrapper.nativeElement;return this.orientation==="horizontal"?t.offsetWidth:t.offsetHeight}measureRangeSize(t){return this._forOf?this._forOf.measureRangeSize(t,this.orientation):0}checkViewportSize(){this._measureViewportSize(),this._scrollStrategy.onDataLengthChanged()}_measureViewportSize(){this._viewportSize=this.scrollable.measureViewportSize(this.orientation)}_markChangeDetectionNeeded(t){t&&this._runAfterChangeDetection.push(t),this._isChangeDetectionPending||(this._isChangeDetectionPending=!0,this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._doChangeDetection()})))}_doChangeDetection(){this._isDestroyed||this.ngZone.run(()=>{this._changeDetectorRef.markForCheck(),this._contentWrapper.nativeElement.style.transform=this._renderedContentTransform,zt(()=>{this._isChangeDetectionPending=!1;let t=this._runAfterChangeDetection;this._runAfterChangeDetection=[];for(let r of t)r()},{injector:this._injector})})}_calculateSpacerSize(){this._totalContentHeight.set(this.orientation==="horizontal"?"":`${this._totalContentSize}px`),this._totalContentWidth.set(this.orientation==="horizontal"?`${this._totalContentSize}px`:"")}static \u0275fac=function(r){return new(r||i)};static \u0275cmp=Ze({type:i,selectors:[["cdk-virtual-scroll-viewport"]],viewQuery:function(r,n){if(r&1&&Do(ox,7),r&2){let s;Uo(s=Lo())&&(n._contentWrapper=s.first)}},hostAttrs:[1,"cdk-virtual-scroll-viewport"],hostVars:4,hostBindings:function(r,n){r&2&&af("cdk-virtual-scroll-orientation-horizontal",n.orientation==="horizontal")("cdk-virtual-scroll-orientation-vertical",n.orientation!=="horizontal")},inputs:{orientation:"orientation",appendOnly:[2,"appendOnly","appendOnly",Mo]},outputs:{scrolledIndexChange:"scrolledIndexChange"},features:[wr([{provide:x_,useFactory:(t,r)=>t||r,deps:[[new Kh,new Gh(b_)],i]}]),wi],ngContentSelectors:ax,decls:4,vars:4,consts:[["contentWrapper",""],[1,"cdk-virtual-scroll-content-wrapper"],[1,"cdk-virtual-scroll-spacer"]],template:function(r,n){r&1&&(rf(),te(0,"div",1,0),nf(2),le(),xe(3,"div",2)),r&2&&(je(3),of("width",n._totalContentWidth())("height",n._totalContentHeight()))},styles:[`cdk-virtual-scroll-viewport{display:block;position:relative;transform:translateZ(0)}.cdk-virtual-scrollable{overflow:auto;will-change:scroll-position;contain:strict}.cdk-virtual-scroll-content-wrapper{position:absolute;top:0;left:0;contain:content}[dir=rtl] .cdk-virtual-scroll-content-wrapper{right:0;left:auto}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper{min-height:100%}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-left:0;padding-right:0;margin-left:0;margin-right:0;border-left-width:0;border-right-width:0;outline:none}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper{min-width:100%}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-top:0;padding-bottom:0;margin-top:0;margin-bottom:0;border-top-width:0;border-bottom-width:0;outline:none}.cdk-virtual-scroll-spacer{height:1px;transform-origin:0 0;flex:0 0 auto}[dir=rtl] .cdk-virtual-scroll-spacer{transform-origin:100% 0}
`],encapsulation:2,changeDetection:0})}return i})();function w_(i,e,t){let r=t;if(!r.getBoundingClientRect)return 0;let n=r.getBoundingClientRect();return i==="horizontal"?e==="start"?n.left:n.right:e==="start"?n.top:n.bottom}var k_=(()=>{class i{_viewContainerRef=P(En);_template=P(_r);_differs=P(cf);_viewRepeater=P(Bd);_viewport=P(ln,{skipSelf:!0});viewChange=new re;_dataSourceChanges=new re;get cdkVirtualForOf(){return this._cdkVirtualForOf}set cdkVirtualForOf(t){this._cdkVirtualForOf=t,__(t)?this._dataSourceChanges.next(t):this._dataSourceChanges.next(new Sl(xo(t)?t:Array.from(t||[])))}_cdkVirtualForOf;get cdkVirtualForTrackBy(){return this._cdkVirtualForTrackBy}set cdkVirtualForTrackBy(t){this._needsUpdate=!0,this._cdkVirtualForTrackBy=t?(r,n)=>t(r+(this._renderedRange?this._renderedRange.start:0),n):void 0}_cdkVirtualForTrackBy;set cdkVirtualForTemplate(t){t&&(this._needsUpdate=!0,this._template=t)}get cdkVirtualForTemplateCacheSize(){return this._viewRepeater.viewCacheSize}set cdkVirtualForTemplateCacheSize(t){this._viewRepeater.viewCacheSize=co(t)}dataStream=this._dataSourceChanges.pipe(bi(null),Hh(),qh(([t,r])=>this._changeDataSource(t,r)),Vh(1));_differ=null;_data;_renderedItems;_renderedRange;_needsUpdate=!1;_destroyed=new re;constructor(){let t=P(_e);this.dataStream.subscribe(r=>{this._data=r,this._onRenderedDataChange()}),this._viewport.renderedRangeStream.pipe(Pt(this._destroyed)).subscribe(r=>{this._renderedRange=r,this.viewChange.observers.length&&t.run(()=>this.viewChange.next(this._renderedRange)),this._onRenderedDataChange()}),this._viewport.attach(this)}measureRangeSize(t,r){if(t.start>=t.end)return 0;t.start<this._renderedRange.start||t.end>this._renderedRange.end;let n=t.start-this._renderedRange.start,s=t.end-t.start,o,a;for(let l=0;l<s;l++){let u=this._viewContainerRef.get(l+n);if(u&&u.rootNodes.length){o=a=u.rootNodes[0];break}}for(let l=s-1;l>-1;l--){let u=this._viewContainerRef.get(l+n);if(u&&u.rootNodes.length){a=u.rootNodes[u.rootNodes.length-1];break}}return o&&a?w_(r,"end",a)-w_(r,"start",o):0}ngDoCheck(){if(this._differ&&this._needsUpdate){let t=this._differ.diff(this._renderedItems);t?this._applyChanges(t):this._updateContext(),this._needsUpdate=!1}}ngOnDestroy(){this._viewport.detach(),this._dataSourceChanges.next(void 0),this._dataSourceChanges.complete(),this.viewChange.complete(),this._destroyed.next(),this._destroyed.complete(),this._viewRepeater.detach()}_onRenderedDataChange(){this._renderedRange&&(this._renderedItems=this._data.slice(this._renderedRange.start,this._renderedRange.end),this._differ||(this._differ=this._differs.find(this._renderedItems).create((t,r)=>this.cdkVirtualForTrackBy?this.cdkVirtualForTrackBy(t,r):r)),this._needsUpdate=!0)}_changeDataSource(t,r){return t&&t.disconnect(this),this._needsUpdate=!0,r?r.connect(this):vi()}_updateContext(){let t=this._data.length,r=this._viewContainerRef.length;for(;r--;){let n=this._viewContainerRef.get(r);n.context.index=this._renderedRange.start+r,n.context.count=t,this._updateComputedContextProperties(n.context),n.detectChanges()}}_applyChanges(t){this._viewRepeater.applyChanges(t,this._viewContainerRef,(s,o,a)=>this._getEmbeddedViewArgs(s,a),s=>s.item),t.forEachIdentityChange(s=>{let o=this._viewContainerRef.get(s.currentIndex);o.context.$implicit=s.item});let r=this._data.length,n=this._viewContainerRef.length;for(;n--;){let s=this._viewContainerRef.get(n);s.context.index=this._renderedRange.start+n,s.context.count=r,this._updateComputedContextProperties(s.context)}}_updateComputedContextProperties(t){t.first=t.index===0,t.last=t.index===t.count-1,t.even=t.index%2===0,t.odd=!t.even}_getEmbeddedViewArgs(t,r){return{templateRef:this._template,context:{$implicit:t.item,cdkVirtualForOf:this._cdkVirtualForOf,index:-1,count:-1,first:!1,last:!1,odd:!1,even:!1},index:r}}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||i)};static \u0275dir=pt({type:i,selectors:[["","cdkVirtualFor","","cdkVirtualForOf",""]],inputs:{cdkVirtualForOf:"cdkVirtualForOf",cdkVirtualForTrackBy:"cdkVirtualForTrackBy",cdkVirtualForTemplate:"cdkVirtualForTemplate",cdkVirtualForTemplateCacheSize:"cdkVirtualForTemplateCacheSize"},features:[wr([{provide:Bd,useClass:El}])]})}return i})();var S_=(()=>{class i{static \u0275fac=function(r){return new(r||i)};static \u0275mod=qe({type:i});static \u0275inj=Ve({})}return i})(),po=(()=>{class i{static \u0275fac=function(r){return new(r||i)};static \u0275mod=qe({type:i});static \u0275inj=Ve({imports:[ho,S_,ho,S_]})}return i})();var P_={strings:{},pluralize(i){return i===1?0:1}};P_.strings={addBulkFilesFailed:{0:"Das Hinzuf\xFCgen einer Datei ist aufgrund eines internen Fehlers fehlgeschlagen",1:"Das Hinzuf\xFCgen von %{smart_count} Dateien ist aufgrund eines internen Fehlers fehlgeschlagen"},addingMoreFiles:"Dateien hinzuf\xFCgen",addMore:"Mehr hinzuf\xFCgen",addMoreFiles:"Dateien hinzuf\xFCgen",allFilesFromFolderNamed:"Alle Dateien vom Ordner %{name}",allowAccessDescription:"Um Bilder oder Videos mit Ihrer Kamera aufzunehmen, erlauben Sie dieser Website bitte den Zugriff auf Ihre Kamera.",allowAccessTitle:"Bitte erlauben Sie Zugriff auf Ihre Kamera",aspectRatioLandscape:"Zuschneiden auf Querformat (16:9)",aspectRatioPortrait:"Zuschneiden auf Hochformat (9:16)",aspectRatioSquare:"Zuschneiden auf Quadrat",authenticateWith:"Mit %{pluginName} verbinden",authenticateWithTitle:"Bitte authentifizieren Sie sich mit %{pluginName}, um Dateien auszuw\xE4hlen",back:"Zur\xFCck",backToSearch:"Zur\xFCck zur Suche",browse:"durchsuchen",browseFiles:"Dateien durchsuchen",browseFolders:"Ordner durchsuchen",cancel:"Abbrechen",cancelUpload:"Hochladen abbrechen",chooseFiles:"Dateien ausw\xE4hlen",closeModal:"Fenster schlie\xDFen",companionError:"Verbindung zu Companion fehlgeschlagen",companionUnauthorizeHint:"Um die Autorisierung f\xFCr Ihr %{provider} Konto aufzuheben, gehen Sie bitte zu %{url}",complete:"Fertig",connectedToInternet:"Mit dem Internet verbunden",copyLink:"Link kopieren",copyLinkToClipboardFallback:"Untenstehende URL kopieren",copyLinkToClipboardSuccess:"Link in die Zwischenablage kopiert",creatingAssembly:"Das Hochladen wird vorbereiten...",creatingAssemblyFailed:"Transloadit: Assembly konnte nicht erstellt werden",dashboardTitle:"Hochladen von Dateien",dashboardWindowTitle:"Hochladen von Dateien (ESC dr\xFCcken zum Schlie\xDFen)",dataUploadedOfTotal:"%{complete} von %{total}",discardRecordedFile:"Aufgenommene Datei verwerfen",done:"Abgeschlossen",dropHereOr:"Dateien hier ablegen oder %{browse}",dropHint:"Dateien hier ablegen",dropPasteBoth:"Dateien hier ablegen/einf\xFCgen, %{browseFiles} oder %{browseFolders}",dropPasteFiles:"Dateien hier ablegen/einf\xFCgen oder %{browseFiles}",dropPasteFolders:"Dateien hier ablegen/einf\xFCgen oder %{browseFolders}",dropPasteImportBoth:"Dateien hier ablegen/einf\xFCgen, %{browse} oder von folgenden Quellen importieren:",dropPasteImportFiles:"Dateien hier ablegen/einf\xFCgen, %{browseFiles} oder von folgenden Quellen importieren:",dropPasteImportFolders:"Dateien hier ablegen/einf\xFCgen, %{browseFolders} oder von folgenden Quellen importieren:",editFile:"Datei bearbeiten",editImage:"Bild bearbeiten",editFileWithFilename:"Datei %{file} bearbeiten",editing:"%{file} bearbeiten",emptyFolderAdded:"Keine Dateien hinzugef\xFCgt, da der Ordner leer war",encoding:"Kodieren...",enterCorrectUrl:"Falsche URL: Bitte stellen Sie sicher, dass Sie einen direkten Link zu einer Datei eingeben",enterTextToSearch:"Text zum Suchen von Bildern eingeben",enterUrlToImport:"URL zum Importieren einer Datei eingeben",exceedsSize:"Datei %{file} ist gr\xF6\xDFer als die maximal erlaubte Dateigr\xF6\xDFe von %{size}",failedToFetch:"Companion konnte diese URL nicht verarbeiten - stellen Sie bitte sicher, dass sie korrekt ist",failedToUpload:"Fehler beim Hochladen der Datei %{file}",filesUploadedOfTotal:{0:"%{complete} von %{smart_count} Datei hochgeladen",1:"%{complete} von %{smart_count} Dateien hochgeladen"},filter:"Filter",finishEditingFile:"Bearbeitung beenden",flipHorizontal:"Horizontal spiegeln",folderAdded:{0:"Eine Datei von %{folder} hinzugef\xFCgt",1:"%{smart_count} Dateien von %{folder} hinzugef\xFCgt"},folderAlreadyAdded:'Der Ordner "%{folder}" wurde bereits hinzugef\xFCgt',generatingThumbnails:"Erstellen von Miniaturansichten...",import:"Importieren",importFiles:"Importiere Dateien von:",importFrom:"Importieren von %{name}",inferiorSize:"Diese Datei ist kleiner als die minimal erlaubte Dateigr\xF6\xDFe von %{size}",loading:"Laden...",logOut:"Abmelden",micDisabled:"Zugriff auf Mikrofon von Benutzer abgelehnt",missingRequiredMetaField:"Fehlende erforderliche Meta-Felder",missingRequiredMetaFieldOnFile:"Fehlende erforderliche Meta-Felder in %{fileName}",missingRequiredMetaFields:{0:"Fehlendes erforderliches Meta-Feld: %{fields}.",1:"Fehlende erforderliche Meta-Felder: %{fields}."},myDevice:"Mein Ger\xE4t",noCameraDescription:"Bitte Kamera anschlie\xDFen, um Bilder oder Videos aufzunehmen",noCameraTitle:"Kamera nicht verf\xFCgbar",noDuplicates:"Datei '%{fileName}' existiert bereits und kann nicht erneut hinzugef\xFCgt werden",noFilesFound:"Sie haben hier keine Dateien oder Ordner",noInternetConnection:"Keine Internetverbindung",noMoreFilesAllowed:"W\xE4hrend der Upload l\xE4uft, k\xF6nnen keine weiteren Dateien hinzugef\xFCgt werden",openFolderNamed:"Ordner %{name} \xF6ffnen",pause:"Pausieren",paused:"Pausiert",pauseUpload:"Hochladen pausieren",pluginNameBox:"Box",pluginNameCamera:"Kamera",pluginNameDropbox:"Dropbox",pluginNameFacebook:"Facebook",pluginNameGoogleDrive:"Google Drive",pluginNameInstagram:"Instagram",pluginNameOneDrive:"OneDrive",pluginNameZoom:"Zoom",poweredBy:"Powered by %{uppy}",processingXFiles:{0:"Eine Datei verarbeiten",1:"%{smart_count} Dateien verarbeiten"},recording:"Aufnahme",recordingLength:"Aufnahmedauer %{recording_length}",recordingStoppedMaxSize:"Die Aufnahme wurde gestoppt, weil die Dateigr\xF6\xDFe das Limit \xFCberschritten hat",recordVideoBtn:"Video aufnehmen",recoveredAllFiles:"Wir haben alle Dateien wiederhergestellt. Sie k\xF6nnen mit dem Hochladen fortfahren.",recoveredXFiles:{0:"Wir konnten eine Datei nicht vollst\xE4ndig wiederherstellen. Bitte w\xE4hlen Sie sie erneut aus und fahren Sie dann mit dem Hochladen fort.",1:"Wir konnten %{smart_count} Dateien nicht vollst\xE4ndig wiederherstellen. Bitte w\xE4hlen Sie sie erneut aus und fahren Sie dann mit dem Hochladen fort."},removeFile:"Datei entfernen",reSelect:"Erneut ausw\xE4hlen",resetFilter:"Filter zur\xFCcksetzen",resume:"Fortsetzen",resumeUpload:"Hochladen fortsetzen",retry:"Erneut versuchen",retryUpload:"Hochladen erneut versuchen",revert:"R\xFCckg\xE4ngig machen",rotate:"Drehen",save:"Speichern",saveChanges:"\xC4nderungen speichern",searchImages:"Suche nach Bildern",selectX:{0:"W\xE4hlen Sie %{smart_count}",1:"W\xE4hlen Sie %{smart_count}"},sessionRestored:"",smile:"Bitte l\xE4cheln!",startCapturing:"Bildschirmaufnahme starten",startRecording:"Videoaufnahme starten",stopCapturing:"Bildschirmaufnahme stoppen",stopRecording:"Videoaufnahme stoppen",streamActive:"Stream aktiv",streamPassive:"Stream passiv",submitRecordedFile:"Aufgezeichnete Datei verwenden",takePicture:"Ein Foto aufnehmen",takePictureBtn:"Foto aufnehmen",timedOut:"Upload f\xFCr %{seconds} Sekunden stehen geblieben, breche ab.",upload:"Hochladen",uploadComplete:"Hochladen abgeschlossen",uploadFailed:"Hochladen fehlgeschlagen",uploading:"Wird hochgeladen",uploadingXFiles:{0:"Eine Datei wird hochgeladen",1:"%{smart_count} Dateien werden hochgeladen"},uploadPaused:"Hochladen pausiert",uploadXFiles:{0:"Eine Datei hochladen",1:"%{smart_count} Dateien hochladen"},uploadXNewFiles:{0:"+%{smart_count} Datei hochladen",1:"+%{smart_count} Dateien hochladen"},xFilesSelected:{0:"Eine Datei ausgew\xE4hlt",1:"%{smart_count} Dateien ausgew\xE4hlt"},xMoreFilesAdded:{0:"Eine weitere Datei hinzugef\xFCgt",1:"%{smart_count} weitere Dateien hinzugef\xFCgt"},xTimeLeft:"%{time} verbleibend",youCanOnlyUploadFileTypes:"Sie k\xF6nnen nur folgende Dateitypen hochladen: %{types}",youCanOnlyUploadX:{0:"Sie k\xF6nnen nur eine Datei hochladen",1:"Sie k\xF6nnen nur %{smart_count} Dateien hochladen"},youHaveToAtLeastSelectX:{0:"Sie m\xFCssen mindestens eine Datei ausw\xE4hlen",1:"Sie m\xFCssen mindestens %{smart_count} Dateien ausw\xE4hlen"},zoomIn:"Vergr\xF6\xDFern",zoomOut:"Verkleinern"};var T_=P_;var Hd=se(ts(),1),R_=se(O_(),1);var F_={strings:{compressingImages:"Compressing images...",compressedX:"Saved %{size} by compressing images"}};function A_(i,e){if(!{}.hasOwnProperty.call(i,e))throw new TypeError("attempted to use private field on non-instance");return i}var mx=0;function gx(i){return"__private_"+mx+++"_"+i}var yx={quality:.6,limit:10},mo=gx("RateLimitedQueue"),xl=class extends Xt{constructor(e,t){super(e,v(v({},yx),t)),Object.defineProperty(this,mo,{writable:!0,value:void 0}),this.id=this.opts.id||"Compressor",this.type="modifier",this.defaultLocale=F_,A_(this,mo)[mo]=new Vr(this.opts.limit),this.i18nInit(),this.prepareUpload=this.prepareUpload.bind(this),this.compress=this.compress.bind(this)}compress(e){return new Promise((t,r)=>{new R_.default(e,M(v({},this.opts),{success:t,error:r}))})}prepareUpload(e){return m(this,null,function*(){let t=0,r=[],n=A_(this,mo)[mo].wrapPromiseFunction(o=>m(this,null,function*(){try{let a=yield this.compress(o.data),l=o.data.size-a.size;this.uppy.log(`[Image Compressor] Image ${o.id} compressed by ${(0,Hd.default)(l)}`),t+=l;let{name:u,type:c,size:d}=a,p=Dt(u),y=`${Dt(o.meta.name).name}.${p.extension}`;this.uppy.setFileState(o.id,M(v(v(v(v({},u&&{name:u}),p.extension&&{extension:p.extension}),c&&{type:c}),d&&{size:d}),{data:a,meta:M(v({},o.meta),{type:c,name:y})})),r.push(o)}catch(a){this.uppy.log(`[Image Compressor] Failed to compress ${o.id}:`,"warning"),this.uppy.log(a,"warning")}})),s=e.map(o=>{var a;let l=this.uppy.getFile(o);return this.uppy.emit("preprocess-progress",l,{mode:"indeterminate",message:this.i18n("compressingImages")}),l.isRemote||(l.data.type||(l.data=l.data.slice(0,l.data.size,l.type)),!((a=l.type)!=null&&a.startsWith("image/")))?Promise.resolve():n(l)});yield Promise.all(s),this.uppy.emit("compressor:complete",r),t>1024&&this.uppy.info(this.i18n("compressedX",{size:(0,Hd.default)(t)}),"info");for(let o of e){let a=this.uppy.getFile(o);this.uppy.emit("preprocess-complete",a)}})}install(){this.uppy.addPreProcessor(this.prepareUpload)}uninstall(){this.uppy.removePreProcessor(this.prepareUpload)}};var _x=i=>[i],kl=(()=>{class i{contentHeight=uf(!1);static \u0275fac=function(r){return new(r||i)};static \u0275cmp=Ze({type:i,selectors:[["lib-loading-indicator"]],inputs:{contentHeight:[1,"contentHeight"]},decls:5,vars:3,consts:[[1,"flex","items-center","justify-center","bg-ivory",3,"ngClass"],[1,"flex","flex-col","items-center","gap-4"],[1,"relative","w-20","h-20"],["xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 24 24",1,"absolute","w-14","h-14","text-sage-green","inset-1/2","-translate-x-1/2","-translate-y-1/2","animate-bounce"],["d",`M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 
             6.5 3.5 5 5.5 5c1.54 0 3.04.99 
             3.57 2.36h1.87C13.46 5.99 14.96 5 
             16.5 5 18.5 5 20 6.5 20 8.5c0 
             3.78-3.4 6.86-8.55 11.54L12 21.35z`]],template:function(r,n){r&1&&(te(0,"div",0)(1,"div",1)(2,"div",2),Tt(),te(3,"svg",3),xe(4,"path",4),le()()()()),r&2&&at("ngClass",Ci(1,_x,n.contentHeight()?"h-full":"min-h-dvh"))},dependencies:[Er,jo],styles:["[_nghost-%COMP%]{display:contents}"]})}return i})();var go=class{_attachedHost;attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;e!=null&&(this._attachedHost=null,e.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(e){this._attachedHost=e}},un=class extends go{component;viewContainerRef;injector;projectableNodes;constructor(e,t,r,n){super(),this.component=e,this.viewContainerRef=t,this.injector=r,this.projectableNodes=n}},cn=class extends go{templateRef;viewContainerRef;context;injector;constructor(e,t,r,n){super(),this.templateRef=e,this.viewContainerRef=t,this.context=r,this.injector=n}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}},Vd=class extends go{element;constructor(e){super(),this.element=e instanceof ot?e.nativeElement:e}},dn=class{_attachedPortal;_disposeFn;_isDisposed=!1;hasAttached(){return!!this._attachedPortal}attach(e){if(e instanceof un)return this._attachedPortal=e,this.attachComponentPortal(e);if(e instanceof cn)return this._attachedPortal=e,this.attachTemplatePortal(e);if(this.attachDomPortal&&e instanceof Vd)return this._attachedPortal=e,this.attachDomPortal(e)}attachDomPortal=null;detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}},Pl=class extends dn{outletElement;_appRef;_defaultInjector;constructor(e,t,r){super(),this.outletElement=e,this._appRef=t,this._defaultInjector=r}attachComponentPortal(e){let t;if(e.viewContainerRef){let r=e.injector||e.viewContainerRef.injector,n=r.get($l,null,{optional:!0})||void 0;t=e.viewContainerRef.createComponent(e.component,{index:e.viewContainerRef.length,injector:r,ngModuleRef:n,projectableNodes:e.projectableNodes||void 0}),this.setDisposeFn(()=>t.destroy())}else{let r=this._appRef,n=e.injector||this._defaultInjector||he.NULL,s=n.get(yr,r.injector);t=Bo(e.component,{elementInjector:n,environmentInjector:s,projectableNodes:e.projectableNodes||void 0}),r.attachView(t.hostView),this.setDisposeFn(()=>{r.viewCount>0&&r.detachView(t.hostView),t.destroy()})}return this.outletElement.appendChild(this._getComponentRootNode(t)),this._attachedPortal=e,t}attachTemplatePortal(e){let t=e.viewContainerRef,r=t.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return r.rootNodes.forEach(n=>this.outletElement.appendChild(n)),r.detectChanges(),this.setDisposeFn(()=>{let n=t.indexOf(r);n!==-1&&t.remove(n)}),this._attachedPortal=e,r}attachDomPortal=e=>{let t=e.element;t.parentNode;let r=this.outletElement.ownerDocument.createComment("dom-portal");t.parentNode.insertBefore(r,t),this.outletElement.appendChild(t),this._attachedPortal=e,super.setDisposeFn(()=>{r.parentNode&&r.parentNode.replaceChild(t,r)})};dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}};var qd=(()=>{class i extends dn{_moduleRef=P($l,{optional:!0});_document=P(ve);_viewContainerRef=P(En);_isInitialized=!1;_attachedRef;constructor(){super()}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}attached=new si;get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(t){t.setAttachedHost(this);let r=t.viewContainerRef!=null?t.viewContainerRef:this._viewContainerRef,n=r.createComponent(t.component,{index:r.length,injector:t.injector||r.injector,projectableNodes:t.projectableNodes||void 0,ngModuleRef:this._moduleRef||void 0});return r!==this._viewContainerRef&&this._getRootNode().appendChild(n.hostView.rootNodes[0]),super.setDisposeFn(()=>n.destroy()),this._attachedPortal=t,this._attachedRef=n,this.attached.emit(n),n}attachTemplatePortal(t){t.setAttachedHost(this);let r=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=r,this.attached.emit(r),r}attachDomPortal=t=>{let r=t.element;r.parentNode;let n=this._document.createComment("dom-portal");t.setAttachedHost(this),r.parentNode.insertBefore(n,r),this._getRootNode().appendChild(r),this._attachedPortal=t,super.setDisposeFn(()=>{n.parentNode&&n.parentNode.replaceChild(r,n)})};_getRootNode(){let t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}static \u0275fac=function(r){return new(r||i)};static \u0275dir=pt({type:i,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[0,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[wi]})}return i})();var yo=(()=>{class i{static \u0275fac=function(r){return new(r||i)};static \u0275mod=qe({type:i});static \u0275inj=Ve({})}return i})();function I_(i){return i.buttons===0||i.detail===0}function D_(i){let e=i.touches&&i.touches[0]||i.changedTouches&&i.changedTouches[0];return!!e&&e.identifier===-1&&(e.radiusX==null||e.radiusX===1)&&(e.radiusY==null||e.radiusY===1)}var Wd;function bx(){if(Wd==null){let i=typeof document<"u"?document.head:null;Wd=!!(i&&(i.createShadowRoot||i.attachShadow))}return Wd}function U_(i){if(bx()){let e=i.getRootNode?i.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function Tl(){let i=typeof document<"u"&&document?document.activeElement:null;for(;i&&i.shadowRoot;){let e=i.shadowRoot.activeElement;if(e===i)break;i=e}return i}function ni(i){return i.composedPath?i.composedPath()[0]:i.target}var vo;function wx(){if(vo==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>vo=!0}))}finally{vo=vo||!1}return vo}function L_(i){return wx()?i:!!i.capture}var Sx=new Ae("cdk-input-modality-detector-options"),Ex={ignoreKeys:[18,17,224,91,16]},N_=650,Gd={passive:!0,capture:!0},Cx=(()=>{class i{_platform=P(Te);_listenerCleanups;modalityDetected;modalityChanged;get mostRecentModality(){return this._modality.value}_mostRecentTarget=null;_modality=new Dh(null);_options;_lastTouchMs=0;_onKeydown=t=>{this._options?.ignoreKeys?.some(r=>r===t.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=ni(t))};_onMousedown=t=>{Date.now()-this._lastTouchMs<N_||(this._modality.next(I_(t)?"keyboard":"mouse"),this._mostRecentTarget=ni(t))};_onTouchstart=t=>{if(D_(t)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=ni(t)};constructor(){let t=P(_e),r=P(ve),n=P(Sx,{optional:!0});if(this._options=v(v({},Ex),n),this.modalityDetected=this._modality.pipe(To(1)),this.modalityChanged=this.modalityDetected.pipe(Po()),this._platform.isBrowser){let s=P(jt).createRenderer(null,null);this._listenerCleanups=t.runOutsideAngular(()=>[s.listen(r,"keydown",this._onKeydown,Gd),s.listen(r,"mousedown",this._onMousedown,Gd),s.listen(r,"touchstart",this._onTouchstart,Gd)])}}ngOnDestroy(){this._modality.complete(),this._listenerCleanups?.forEach(t=>t())}static \u0275fac=function(r){return new(r||i)};static \u0275prov=Y({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Fl=function(i){return i[i.IMMEDIATE=0]="IMMEDIATE",i[i.EVENTUAL=1]="EVENTUAL",i}(Fl||{}),xx=new Ae("cdk-focus-monitor-default-options"),Ol=L_({passive:!0,capture:!0}),M_=(()=>{class i{_ngZone=P(_e);_platform=P(Te);_inputModalityDetector=P(Cx);_origin=null;_lastFocusOrigin;_windowFocused=!1;_windowFocusTimeoutId;_originTimeoutId;_originFromTouchInteraction=!1;_elementInfo=new Map;_monitoredElementCount=0;_rootNodeFocusListenerCount=new Map;_detectionMode;_windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)};_document=P(ve,{optional:!0});_stopInputModalityDetector=new re;constructor(){let t=P(xx,{optional:!0});this._detectionMode=t?.detectionMode||Fl.IMMEDIATE}_rootNodeFocusAndBlurListener=t=>{let r=ni(t);for(let n=r;n;n=n.parentElement)t.type==="focus"?this._onFocus(t,n):this._onBlur(t,n)};monitor(t,r=!1){let n=sn(t);if(!this._platform.isBrowser||n.nodeType!==1)return vi();let s=U_(n)||this._getDocument(),o=this._elementInfo.get(n);if(o)return r&&(o.checkChildren=!0),o.subject;let a={checkChildren:r,subject:new re,rootNode:s};return this._elementInfo.set(n,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(t){let r=sn(t),n=this._elementInfo.get(r);n&&(n.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(n))}focusVia(t,r,n){let s=sn(t),o=this._getDocument().activeElement;s===o?this._getClosestElementsInfo(s).forEach(([a,l])=>this._originChanged(a,r,l)):(this._setOrigin(r),typeof s.focus=="function"&&s.focus(n))}ngOnDestroy(){this._elementInfo.forEach((t,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return this._detectionMode===Fl.EVENTUAL||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,r){t.classList.toggle("cdk-focused",!!r),t.classList.toggle("cdk-touch-focused",r==="touch"),t.classList.toggle("cdk-keyboard-focused",r==="keyboard"),t.classList.toggle("cdk-mouse-focused",r==="mouse"),t.classList.toggle("cdk-program-focused",r==="program")}_setOrigin(t,r=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=t,this._originFromTouchInteraction=t==="touch"&&r,this._detectionMode===Fl.IMMEDIATE){clearTimeout(this._originTimeoutId);let n=this._originFromTouchInteraction?N_:1;this._originTimeoutId=setTimeout(()=>this._origin=null,n)}})}_onFocus(t,r){let n=this._elementInfo.get(r),s=ni(t);!n||!n.checkChildren&&r!==s||this._originChanged(r,this._getFocusOrigin(s),n)}_onBlur(t,r){let n=this._elementInfo.get(r);!n||n.checkChildren&&t.relatedTarget instanceof Node&&r.contains(t.relatedTarget)||(this._setClasses(r),this._emitOrigin(n,null))}_emitOrigin(t,r){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(r))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;let r=t.rootNode,n=this._rootNodeFocusListenerCount.get(r)||0;n||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,Ol),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,Ol)}),this._rootNodeFocusListenerCount.set(r,n+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Pt(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(t){let r=t.rootNode;if(this._rootNodeFocusListenerCount.has(r)){let n=this._rootNodeFocusListenerCount.get(r);n>1?this._rootNodeFocusListenerCount.set(r,n-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Ol),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Ol),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,r,n){this._setClasses(t,r),this._emitOrigin(n,r),this._lastFocusOrigin=r}_getClosestElementsInfo(t){let r=[];return this._elementInfo.forEach((n,s)=>{(s===t||n.checkChildren&&s.contains(t))&&r.push([s,n])}),r}_isLastInteractionFromInputLabel(t){let{_mostRecentTarget:r,mostRecentModality:n}=this._inputModalityDetector;if(n!=="mouse"||!r||r===t||t.nodeName!=="INPUT"&&t.nodeName!=="TEXTAREA"||t.disabled)return!1;let s=t.labels;if(s){for(let o=0;o<s.length;o++)if(s[o].contains(r))return!0}return!1}static \u0275fac=function(r){return new(r||i)};static \u0275prov=Y({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var Al=new WeakMap,_o=(()=>{class i{_appRef;_injector=P(he);_environmentInjector=P(yr);load(t){let r=this._appRef=this._appRef||this._injector.get(Io),n=Al.get(r);n||(n={loaders:new Set,refs:[]},Al.set(r,n),r.onDestroy(()=>{Al.get(r)?.refs.forEach(s=>s.destroy()),Al.delete(r)})),n.loaders.has(t)||(n.loaders.add(t),n.refs.push(Bo(t,{environmentInjector:this._environmentInjector})))}static \u0275fac=function(r){return new(r||i)};static \u0275prov=Y({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var B_=(()=>{class i{static \u0275fac=function(r){return new(r||i)};static \u0275cmp=Ze({type:i,selectors:[["ng-component"]],exportAs:["cdkVisuallyHidden"],decls:0,vars:0,template:function(r,n){},styles:[`.cdk-visually-hidden{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px;white-space:nowrap;outline:0;-webkit-appearance:none;-moz-appearance:none;left:0}[dir=rtl] .cdk-visually-hidden{left:auto;right:0}
`],encapsulation:2,changeDetection:0})}return i})();function hn(i){return Array.isArray(i)?i:[i]}var j_=new Set,lr,kx=(()=>{class i{_platform=P(Te);_nonce=P(Zh,{optional:!0});_matchMedia;constructor(){this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Tx}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&Px(t,this._nonce),this._matchMedia(t)}static \u0275fac=function(r){return new(r||i)};static \u0275prov=Y({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function Px(i,e){if(!j_.has(i))try{lr||(lr=document.createElement("style"),e&&lr.setAttribute("nonce",e),lr.setAttribute("type","text/css"),document.head.appendChild(lr)),lr.sheet&&(lr.sheet.insertRule(`@media ${i} {body{ }}`,0),j_.add(i))}catch(t){console.error(t)}}function Tx(i){return{matches:i==="all"||i==="",media:i,addListener:()=>{},removeListener:()=>{}}}var $_=(()=>{class i{_mediaMatcher=P(kx);_zone=P(_e);_queries=new Map;_destroySubject=new re;constructor(){}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return z_(hn(t)).some(n=>this._registerQuery(n).mql.matches)}observe(t){let n=z_(hn(t)).map(o=>this._registerQuery(o).observable),s=Mh(n);return s=Bh(s.pipe($h(1)),s.pipe(To(1),zh(0))),s.pipe(jl(o=>{let a={matches:!1,breakpoints:{}};return o.forEach(({matches:l,query:u})=>{a.matches=a.matches||l,a.breakpoints[u]=l}),a}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);let r=this._mediaMatcher.matchMedia(t),s={observable:new yi(o=>{let a=l=>this._zone.run(()=>o.next(l));return r.addListener(a),()=>{r.removeListener(a)}}).pipe(bi(r),jl(({matches:o})=>({query:t,matches:o})),Pt(this._destroySubject)),mql:r};return this._queries.set(t,s),s}static \u0275fac=function(r){return new(r||i)};static \u0275prov=Y({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function z_(i){return i.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}var Ox=(()=>{class i{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}static \u0275fac=function(r){return new(r||i)};static \u0275prov=Y({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var H_=(()=>{class i{static \u0275fac=function(r){return new(r||i)};static \u0275mod=qe({type:i});static \u0275inj=Ve({providers:[Ox]})}return i})();var Yd=(()=>{class i{_platform=P(Te);constructor(){}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return Ax(t)&&getComputedStyle(t).visibility==="visible"}isTabbable(t){if(!this._platform.isBrowser)return!1;let r=Fx(Bx(t));if(r&&(V_(r)===-1||!this.isVisible(r)))return!1;let n=t.nodeName.toLowerCase(),s=V_(t);return t.hasAttribute("contenteditable")?s!==-1:n==="iframe"||n==="object"||this._platform.WEBKIT&&this._platform.IOS&&!Nx(t)?!1:n==="audio"?t.hasAttribute("controls")?s!==-1:!1:n==="video"?s===-1?!1:s!==null?!0:this._platform.FIREFOX||t.hasAttribute("controls"):t.tabIndex>=0}isFocusable(t,r){return Mx(t)&&!this.isDisabled(t)&&(r?.ignoreVisibility||this.isVisible(t))}static \u0275fac=function(r){return new(r||i)};static \u0275prov=Y({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function Fx(i){try{return i.frameElement}catch{return null}}function Ax(i){return!!(i.offsetWidth||i.offsetHeight||typeof i.getClientRects=="function"&&i.getClientRects().length)}function Rx(i){let e=i.nodeName.toLowerCase();return e==="input"||e==="select"||e==="button"||e==="textarea"}function Ix(i){return Ux(i)&&i.type=="hidden"}function Dx(i){return Lx(i)&&i.hasAttribute("href")}function Ux(i){return i.nodeName.toLowerCase()=="input"}function Lx(i){return i.nodeName.toLowerCase()=="a"}function G_(i){if(!i.hasAttribute("tabindex")||i.tabIndex===void 0)return!1;let e=i.getAttribute("tabindex");return!!(e&&!isNaN(parseInt(e,10)))}function V_(i){if(!G_(i))return null;let e=parseInt(i.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}function Nx(i){let e=i.nodeName.toLowerCase(),t=e==="input"&&i.type;return t==="text"||t==="password"||e==="select"||e==="textarea"}function Mx(i){return Ix(i)?!1:Rx(i)||Dx(i)||i.hasAttribute("contenteditable")||G_(i)}function Bx(i){return i.ownerDocument&&i.ownerDocument.defaultView||window}var Xd=class{_element;_checker;_ngZone;_document;_injector;_startAnchor;_endAnchor;_hasAttached=!1;startAnchorListener=()=>this.focusLastTabbableElement();endAnchorListener=()=>this.focusFirstTabbableElement();get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_enabled=!0;constructor(e,t,r,n,s=!1,o){this._element=e,this._checker=t,this._ngZone=r,this._document=n,this._injector=o,s||this.attachAnchors()}destroy(){let e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),t&&(t.removeEventListener("focus",this.endAnchorListener),t.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return this._hasAttached?!0:(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){let t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return e=="start"?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){let t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(!this._checker.isFocusable(t)){let r=this._getFirstTabbableElement(t);return r?.focus(e),!!r}return t.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){let t=this._getRegionBoundary("start");return t&&t.focus(e),!!t}focusLastTabbableElement(e){let t=this._getRegionBoundary("end");return t&&t.focus(e),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;let t=e.children;for(let r=0;r<t.length;r++){let n=t[r].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[r]):null;if(n)return n}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;let t=e.children;for(let r=t.length-1;r>=0;r--){let n=t[r].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[r]):null;if(n)return n}return null}_createAnchor(){let e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._injector?zt(e,{injector:this._injector}):setTimeout(e)}},K_=(()=>{class i{_checker=P(Yd);_ngZone=P(_e);_document=P(ve);_injector=P(he);constructor(){P(_o).load(B_)}create(t,r=!1){return new Xd(t,this._checker,this._ngZone,this._document,r,this._injector)}static \u0275fac=function(r){return new(r||i)};static \u0275prov=Y({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var ur=function(i){return i[i.NONE=0]="NONE",i[i.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",i[i.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",i}(ur||{}),q_="cdk-high-contrast-black-on-white",W_="cdk-high-contrast-white-on-black",Kd="cdk-high-contrast-active",jx=(()=>{class i{_platform=P(Te);_hasCheckedHighContrastMode;_document=P(ve);_breakpointSubscription;constructor(){this._breakpointSubscription=P($_).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return ur.NONE;let t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);let r=this._document.defaultView||window,n=r&&r.getComputedStyle?r.getComputedStyle(t):null,s=(n&&n.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return ur.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return ur.BLACK_ON_WHITE}return ur.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let t=this._document.body.classList;t.remove(Kd,q_,W_),this._hasCheckedHighContrastMode=!0;let r=this.getHighContrastMode();r===ur.BLACK_ON_WHITE?t.add(Kd,q_):r===ur.WHITE_ON_BLACK&&t.add(Kd,W_)}}static \u0275fac=function(r){return new(r||i)};static \u0275prov=Y({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),X_=(()=>{class i{constructor(){P(jx)._applyBodyHighContrastModeCssClasses()}static \u0275fac=function(r){return new(r||i)};static \u0275mod=qe({type:i});static \u0275inj=Ve({imports:[H_]})}return i})();function Y_(i,...e){return e.length?e.some(t=>i[t]):i.altKey||i.shiftKey||i.ctrlKey||i.metaKey}function Jd(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function ge(i){return i==null?"":typeof i=="string"?i:`${i}px`}var Zd={},Rl=(()=>{class i{_appId=P(Xh);getId(t){return this._appId!=="ng"&&(t+=this._appId),Zd.hasOwnProperty(t)||(Zd[t]=0),`${t}${Zd[t]++}`}static \u0275fac=function(r){return new(r||i)};static \u0275prov=Y({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var J_=bl();function ah(i){return new Qd(i.get(an),i.get(ve))}var Qd=class{_viewportRuler;_previousHTMLStyles={top:"",left:""};_previousScrollPosition;_isEnabled=!1;_document;constructor(e,t){this._viewportRuler=e,this._document=t}attach(){}enable(){if(this._canBeEnabled()){let e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=ge(-this._previousScrollPosition.left),e.style.top=ge(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let e=this._document.documentElement,t=this._document.body,r=e.style,n=t.style,s=r.scrollBehavior||"",o=n.scrollBehavior||"";this._isEnabled=!1,r.left=this._previousHTMLStyles.left,r.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),J_&&(r.scrollBehavior=n.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),J_&&(r.scrollBehavior=s,n.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let t=this._document.documentElement,r=this._viewportRuler.getViewportSize();return t.scrollHeight>r.height||t.scrollWidth>r.width}};function zx(i,e){return new eh(i.get(Cl),i.get(_e),i.get(an),e)}var eh=class{_scrollDispatcher;_ngZone;_viewportRuler;_config;_scrollSubscription=null;_overlayRef;_initialScrollPosition;constructor(e,t,r,n){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=r,this._config=n}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(this._scrollSubscription)return;let e=this._scrollDispatcher.scrolled(0).pipe(_i(t=>!t||!this._overlayRef.overlayElement.contains(t.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{let t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}_detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}};var Il=class{enable(){}disable(){}attach(){}};function th(i,e){return e.some(t=>{let r=i.bottom<t.top,n=i.top>t.bottom,s=i.right<t.left,o=i.left>t.right;return r||n||s||o})}function Z_(i,e){return e.some(t=>{let r=i.top<t.top,n=i.bottom>t.bottom,s=i.left<t.left,o=i.right>t.right;return r||n||s||o})}function lh(i,e){return new ih(i.get(Cl),i.get(an),i.get(_e),e)}var ih=class{_scrollDispatcher;_viewportRuler;_ngZone;_config;_scrollSubscription=null;_overlayRef;constructor(e,t,r,n){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=r,this._config=n}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(!this._scrollSubscription){let e=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(e).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:r,height:n}=this._viewportRuler.getViewportSize();th(t,[{width:r,height:n,bottom:n,right:r,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},$x=(()=>{class i{_injector=P(he);constructor(){}noop=()=>new Il;close=t=>zx(this._injector,t);block=()=>ah(this._injector);reposition=t=>lh(this._injector,t);static \u0275fac=function(r){return new(r||i)};static \u0275prov=Y({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),bo=class{positionStrategy;scrollStrategy=new Il;panelClass="";hasBackdrop=!1;backdropClass="cdk-overlay-dark-backdrop";disableAnimations;width;height;minWidth;minHeight;maxWidth;maxHeight;direction;disposeOnNavigation=!1;constructor(e){if(e){let t=Object.keys(e);for(let r of t)e[r]!==void 0&&(this[r]=e[r])}}};var rh=class{connectionPair;scrollableViewProperties;constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}};var nb=(()=>{class i{_attachedOverlays=[];_document=P(ve);_isAttached;constructor(){}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){let r=this._attachedOverlays.indexOf(t);r>-1&&this._attachedOverlays.splice(r,1),this._attachedOverlays.length===0&&this.detach()}static \u0275fac=function(r){return new(r||i)};static \u0275prov=Y({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Hx=(()=>{class i extends nb{_ngZone=P(_e);_renderer=P(jt).createRenderer(null,null);_cleanupKeydown;add(t){super.add(t),this._isAttached||(this._ngZone.runOutsideAngular(()=>{this._cleanupKeydown=this._renderer.listen("body","keydown",this._keydownListener)}),this._isAttached=!0)}detach(){this._isAttached&&(this._cleanupKeydown?.(),this._isAttached=!1)}_keydownListener=t=>{let r=this._attachedOverlays;for(let n=r.length-1;n>-1;n--)if(r[n]._keydownEvents.observers.length>0){this._ngZone.run(()=>r[n]._keydownEvents.next(t));break}};static \u0275fac=(()=>{let t;return function(n){return(t||(t=Fo(i)))(n||i)}})();static \u0275prov=Y({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Vx=(()=>{class i extends nb{_platform=P(Te);_ngZone=P(_e);_renderer=P(jt).createRenderer(null,null);_cursorOriginalValue;_cursorStyleIsSet=!1;_pointerDownEventTarget;_cleanups;add(t){if(super.add(t),!this._isAttached){let r=this._document.body,n={capture:!0},s=this._renderer;this._cleanups=this._ngZone.runOutsideAngular(()=>[s.listen(r,"pointerdown",this._pointerDownListener,n),s.listen(r,"click",this._clickListener,n),s.listen(r,"auxclick",this._clickListener,n),s.listen(r,"contextmenu",this._clickListener,n)]),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){this._isAttached&&(this._cleanups?.forEach(t=>t()),this._cleanups=void 0,this._platform.IOS&&this._cursorStyleIsSet&&(this._document.body.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1)}_pointerDownListener=t=>{this._pointerDownEventTarget=ni(t)};_clickListener=t=>{let r=ni(t),n=t.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:r;this._pointerDownEventTarget=null;let s=this._attachedOverlays.slice();for(let o=s.length-1;o>-1;o--){let a=s[o];if(a._outsidePointerEvents.observers.length<1||!a.hasAttached())continue;if(Q_(a.overlayElement,r)||Q_(a.overlayElement,n))break;let l=a._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>l.next(t)):l.next(t)}};static \u0275fac=(()=>{let t;return function(n){return(t||(t=Fo(i)))(n||i)}})();static \u0275prov=Y({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function Q_(i,e){let t=typeof ShadowRoot<"u"&&ShadowRoot,r=e;for(;r;){if(r===i)return!0;r=t&&r instanceof ShadowRoot?r.host:r.parentNode}return!1}var sb=(()=>{class i{static \u0275fac=function(r){return new(r||i)};static \u0275cmp=Ze({type:i,selectors:[["ng-component"]],hostAttrs:["cdk-overlay-style-loader",""],decls:0,vars:0,template:function(r,n){},styles:[`.cdk-overlay-container,.cdk-global-overlay-wrapper{pointer-events:none;top:0;left:0;height:100%;width:100%}.cdk-overlay-container{position:fixed}@layer cdk-overlay{.cdk-overlay-container{z-index:1000}}.cdk-overlay-container:empty{display:none}.cdk-global-overlay-wrapper{display:flex;position:absolute}@layer cdk-overlay{.cdk-global-overlay-wrapper{z-index:1000}}.cdk-overlay-pane{position:absolute;pointer-events:auto;box-sizing:border-box;display:flex;max-width:100%;max-height:100%}@layer cdk-overlay{.cdk-overlay-pane{z-index:1000}}.cdk-overlay-backdrop{position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:auto;-webkit-tap-highlight-color:rgba(0,0,0,0);opacity:0;touch-action:manipulation}@layer cdk-overlay{.cdk-overlay-backdrop{z-index:1000;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}}@media(prefers-reduced-motion){.cdk-overlay-backdrop{transition-duration:1ms}}.cdk-overlay-backdrop-showing{opacity:1}@media(forced-colors: active){.cdk-overlay-backdrop-showing{opacity:.6}}@layer cdk-overlay{.cdk-overlay-dark-backdrop{background:rgba(0,0,0,.32)}}.cdk-overlay-transparent-backdrop{transition:visibility 1ms linear,opacity 1ms linear;visibility:hidden;opacity:1}.cdk-overlay-transparent-backdrop.cdk-overlay-backdrop-showing,.cdk-high-contrast-active .cdk-overlay-transparent-backdrop{opacity:0;visibility:visible}.cdk-overlay-backdrop-noop-animation{transition:none}.cdk-overlay-connected-position-bounding-box{position:absolute;display:flex;flex-direction:column;min-width:1px;min-height:1px}@layer cdk-overlay{.cdk-overlay-connected-position-bounding-box{z-index:1000}}.cdk-global-scrollblock{position:fixed;width:100%;overflow-y:scroll}
`],encapsulation:2,changeDetection:0})}return i})(),Dl=(()=>{class i{_platform=P(Te);_containerElement;_document=P(ve);_styleLoader=P(_o);constructor(){}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._loadStyles(),this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let t="cdk-overlay-container";if(this._platform.isBrowser||Jd()){let n=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let s=0;s<n.length;s++)n[s].remove()}let r=this._document.createElement("div");r.classList.add(t),Jd()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}_loadStyles(){this._styleLoader.load(sb)}static \u0275fac=function(r){return new(r||i)};static \u0275prov=Y({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),nh=class{_renderer;_ngZone;element;_cleanupClick;_cleanupTransitionEnd;_fallbackTimeout;constructor(e,t,r,n){this._renderer=t,this._ngZone=r,this.element=e.createElement("div"),this.element.classList.add("cdk-overlay-backdrop"),this._cleanupClick=t.listen(this.element,"click",n)}detach(){this._ngZone.runOutsideAngular(()=>{let e=this.element;clearTimeout(this._fallbackTimeout),this._cleanupTransitionEnd?.(),this._cleanupTransitionEnd=this._renderer.listen(e,"transitionend",this.dispose),this._fallbackTimeout=setTimeout(this.dispose,500),e.style.pointerEvents="none",e.classList.remove("cdk-overlay-backdrop-showing")})}dispose=()=>{clearTimeout(this._fallbackTimeout),this._cleanupClick?.(),this._cleanupTransitionEnd?.(),this._cleanupClick=this._cleanupTransitionEnd=this._fallbackTimeout=void 0,this.element.remove()}},wo=class{_portalOutlet;_host;_pane;_config;_ngZone;_keyboardDispatcher;_document;_location;_outsideClickDispatcher;_animationsDisabled;_injector;_renderer;_backdropClick=new re;_attachments=new re;_detachments=new re;_positionStrategy;_scrollStrategy;_locationChanges=bn.EMPTY;_backdropRef=null;_detachContentMutationObserver;_detachContentAfterRenderRef;_previousHostParent;_keydownEvents=new re;_outsidePointerEvents=new re;_afterNextRenderRef;constructor(e,t,r,n,s,o,a,l,u,c=!1,d,p){this._portalOutlet=e,this._host=t,this._pane=r,this._config=n,this._ngZone=s,this._keyboardDispatcher=o,this._document=a,this._location=l,this._outsideClickDispatcher=u,this._animationsDisabled=c,this._injector=d,this._renderer=p,n.scrollStrategy&&(this._scrollStrategy=n.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=n.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropRef?.element||null}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._afterNextRenderRef?.destroy(),this._afterNextRenderRef=zt(()=>{this.hasAttached()&&this.updatePosition()},{injector:this._injector}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._completeDetachContent(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof t?.onDestroy=="function"&&t.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let e=this._portalOutlet.detach();return this._detachments.next(),this._completeDetachContent(),this._keyboardDispatcher.remove(this),this._detachContentWhenEmpty(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){let e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._backdropRef?.dispose(),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._afterNextRenderRef?.destroy(),this._previousHostParent=this._pane=this._host=this._backdropRef=null,e&&this._detachments.next(),this._detachments.complete(),this._completeDetachContent()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=v(v({},this._config),e),this._updateElementSize()}setDirection(e){this._config=M(v({},this._config),{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){let e=this._config.direction;return e?typeof e=="string"?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let e=this._pane.style;e.width=ge(this._config.width),e.height=ge(this._config.height),e.minWidth=ge(this._config.minWidth),e.minHeight=ge(this._config.minHeight),e.maxWidth=ge(this._config.maxWidth),e.maxHeight=ge(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){let e="cdk-overlay-backdrop-showing";this._backdropRef?.dispose(),this._backdropRef=new nh(this._document,this._renderer,this._ngZone,t=>{this._backdropClick.next(t)}),this._animationsDisabled&&this._backdropRef.element.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropRef.element,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropRef.element,this._host),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this._backdropRef?.element.classList.add(e))}):this._backdropRef.element.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){this._animationsDisabled?(this._backdropRef?.dispose(),this._backdropRef=null):this._backdropRef?.detach()}_toggleClasses(e,t,r){let n=hn(t||[]).filter(s=>!!s);n.length&&(r?e.classList.add(...n):e.classList.remove(...n))}_detachContentWhenEmpty(){let e=!1;try{this._detachContentAfterRenderRef=zt(()=>{e=!0,this._detachContent()},{injector:this._injector})}catch(t){if(e)throw t;this._detachContent()}globalThis.MutationObserver&&this._pane&&(this._detachContentMutationObserver||=new globalThis.MutationObserver(()=>{this._detachContent()}),this._detachContentMutationObserver.observe(this._pane,{childList:!0}))}_detachContent(){(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),this._completeDetachContent())}_completeDetachContent(){this._detachContentAfterRenderRef?.destroy(),this._detachContentAfterRenderRef=void 0,this._detachContentMutationObserver?.disconnect()}_disposeScrollStrategy(){let e=this._scrollStrategy;e?.disable(),e?.detach?.()}},eb="cdk-overlay-connected-position-bounding-box",qx=/([A-Za-z%]+)$/;function Wx(i,e){return new sh(e,i.get(an),i.get(ve),i.get(Te),i.get(Dl))}var sh=class{_viewportRuler;_document;_platform;_overlayContainer;_overlayRef;_isInitialRender;_lastBoundingBoxSize={width:0,height:0};_isPushed=!1;_canPush=!0;_growAfterOpen=!1;_hasFlexibleDimensions=!0;_positionLocked=!1;_originRect;_overlayRect;_viewportRect;_containerRect;_viewportMargin=0;_scrollables=[];_preferredPositions=[];_origin;_pane;_isDisposed;_boundingBox;_lastPosition;_lastScrollVisibility;_positionChanges=new re;_resizeSubscription=bn.EMPTY;_offsetX=0;_offsetY=0;_transformOriginSelector;_appliedPanelClasses=[];_previousPushAmount;positionChanges=this._positionChanges;get positions(){return this._preferredPositions}constructor(e,t,r,n,s){this._viewportRuler=t,this._document=r,this._platform=n,this._overlayContainer=s,this.setOrigin(e)}attach(e){this._overlayRef&&this._overlayRef,this._validatePositions(),e.hostElement.classList.add(eb),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let e=this._originRect,t=this._overlayRect,r=this._viewportRect,n=this._containerRect,s=[],o;for(let a of this._preferredPositions){let l=this._getOriginPoint(e,n,a),u=this._getOverlayPoint(l,t,a),c=this._getOverlayFit(u,t,r,a);if(c.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(a,l);return}if(this._canFitWithFlexibleDimensions(c,u,r)){s.push({position:a,origin:l,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(l,a)});continue}(!o||o.overlayFit.visibleArea<c.visibleArea)&&(o={overlayFit:c,overlayPoint:u,originPoint:l,position:a,overlayRect:t})}if(s.length){let a=null,l=-1;for(let u of s){let c=u.boundingBoxRect.width*u.boundingBoxRect.height*(u.position.weight||1);c>l&&(l=c,a=u)}this._isPushed=!1,this._applyPosition(a.position,a.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(o.position,o.originPoint);return}this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&cr(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(eb),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,e.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,r){let n;if(r.originX=="center")n=e.left+e.width/2;else{let o=this._isRtl()?e.right:e.left,a=this._isRtl()?e.left:e.right;n=r.originX=="start"?o:a}t.left<0&&(n-=t.left);let s;return r.originY=="center"?s=e.top+e.height/2:s=r.originY=="top"?e.top:e.bottom,t.top<0&&(s-=t.top),{x:n,y:s}}_getOverlayPoint(e,t,r){let n;r.overlayX=="center"?n=-t.width/2:r.overlayX==="start"?n=this._isRtl()?-t.width:0:n=this._isRtl()?0:-t.width;let s;return r.overlayY=="center"?s=-t.height/2:s=r.overlayY=="top"?0:-t.height,{x:e.x+n,y:e.y+s}}_getOverlayFit(e,t,r,n){let s=ib(t),{x:o,y:a}=e,l=this._getOffset(n,"x"),u=this._getOffset(n,"y");l&&(o+=l),u&&(a+=u);let c=0-o,d=o+s.width-r.width,p=0-a,f=a+s.height-r.height,y=this._subtractOverflows(s.width,c,d),S=this._subtractOverflows(s.height,p,f),k=y*S;return{visibleArea:k,isCompletelyWithinViewport:s.width*s.height===k,fitsInViewportVertically:S===s.height,fitsInViewportHorizontally:y==s.width}}_canFitWithFlexibleDimensions(e,t,r){if(this._hasFlexibleDimensions){let n=r.bottom-t.y,s=r.right-t.x,o=tb(this._overlayRef.getConfig().minHeight),a=tb(this._overlayRef.getConfig().minWidth),l=e.fitsInViewportVertically||o!=null&&o<=n,u=e.fitsInViewportHorizontally||a!=null&&a<=s;return l&&u}return!1}_pushOverlayOnScreen(e,t,r){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};let n=ib(t),s=this._viewportRect,o=Math.max(e.x+n.width-s.width,0),a=Math.max(e.y+n.height-s.height,0),l=Math.max(s.top-r.top-e.y,0),u=Math.max(s.left-r.left-e.x,0),c=0,d=0;return n.width<=s.width?c=u||-o:c=e.x<this._viewportMargin?s.left-r.left-e.x:0,n.height<=s.height?d=l||-a:d=e.y<this._viewportMargin?s.top-r.top-e.y:0,this._previousPushAmount={x:c,y:d},{x:e.x+c,y:e.y+d}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._positionChanges.observers.length){let r=this._getScrollVisibility();if(e!==this._lastPosition||!this._lastScrollVisibility||!Gx(this._lastScrollVisibility,r)){let n=new rh(e,r);this._positionChanges.next(n)}this._lastScrollVisibility=r}this._lastPosition=e,this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;let t=this._boundingBox.querySelectorAll(this._transformOriginSelector),r,n=e.overlayY;e.overlayX==="center"?r="center":this._isRtl()?r=e.overlayX==="start"?"right":"left":r=e.overlayX==="start"?"left":"right";for(let s=0;s<t.length;s++)t[s].style.transformOrigin=`${r} ${n}`}_calculateBoundingBoxRect(e,t){let r=this._viewportRect,n=this._isRtl(),s,o,a;if(t.overlayY==="top")o=e.y,s=r.height-o+this._viewportMargin;else if(t.overlayY==="bottom")a=r.height-e.y+this._viewportMargin*2,s=r.height-a+this._viewportMargin;else{let f=Math.min(r.bottom-e.y+r.top,e.y),y=this._lastBoundingBoxSize.height;s=f*2,o=e.y-f,s>y&&!this._isInitialRender&&!this._growAfterOpen&&(o=e.y-y/2)}let l=t.overlayX==="start"&&!n||t.overlayX==="end"&&n,u=t.overlayX==="end"&&!n||t.overlayX==="start"&&n,c,d,p;if(u)p=r.width-e.x+this._viewportMargin*2,c=e.x-this._viewportMargin;else if(l)d=e.x,c=r.right-e.x;else{let f=Math.min(r.right-e.x+r.left,e.x),y=this._lastBoundingBoxSize.width;c=f*2,d=e.x-f,c>y&&!this._isInitialRender&&!this._growAfterOpen&&(d=e.x-y/2)}return{top:o,left:d,bottom:a,right:p,width:c,height:s}}_setBoundingBoxStyles(e,t){let r=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(r.height=Math.min(r.height,this._lastBoundingBoxSize.height),r.width=Math.min(r.width,this._lastBoundingBoxSize.width));let n={};if(this._hasExactPosition())n.top=n.left="0",n.bottom=n.right=n.maxHeight=n.maxWidth="",n.width=n.height="100%";else{let s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;n.height=ge(r.height),n.top=ge(r.top),n.bottom=ge(r.bottom),n.width=ge(r.width),n.left=ge(r.left),n.right=ge(r.right),t.overlayX==="center"?n.alignItems="center":n.alignItems=t.overlayX==="end"?"flex-end":"flex-start",t.overlayY==="center"?n.justifyContent="center":n.justifyContent=t.overlayY==="bottom"?"flex-end":"flex-start",s&&(n.maxHeight=ge(s)),o&&(n.maxWidth=ge(o))}this._lastBoundingBoxSize=r,cr(this._boundingBox.style,n)}_resetBoundingBoxStyles(){cr(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){cr(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){let r={},n=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(n){let c=this._viewportRuler.getViewportScrollPosition();cr(r,this._getExactOverlayY(t,e,c)),cr(r,this._getExactOverlayX(t,e,c))}else r.position="static";let a="",l=this._getOffset(t,"x"),u=this._getOffset(t,"y");l&&(a+=`translateX(${l}px) `),u&&(a+=`translateY(${u}px)`),r.transform=a.trim(),o.maxHeight&&(n?r.maxHeight=ge(o.maxHeight):s&&(r.maxHeight="")),o.maxWidth&&(n?r.maxWidth=ge(o.maxWidth):s&&(r.maxWidth="")),cr(this._pane.style,r)}_getExactOverlayY(e,t,r){let n={top:"",bottom:""},s=this._getOverlayPoint(t,this._overlayRect,e);if(this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,r)),e.overlayY==="bottom"){let o=this._document.documentElement.clientHeight;n.bottom=`${o-(s.y+this._overlayRect.height)}px`}else n.top=ge(s.y);return n}_getExactOverlayX(e,t,r){let n={left:"",right:""},s=this._getOverlayPoint(t,this._overlayRect,e);this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,r));let o;if(this._isRtl()?o=e.overlayX==="end"?"left":"right":o=e.overlayX==="end"?"right":"left",o==="right"){let a=this._document.documentElement.clientWidth;n.right=`${a-(s.x+this._overlayRect.width)}px`}else n.left=ge(s.x);return n}_getScrollVisibility(){let e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),r=this._scrollables.map(n=>n.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:Z_(e,r),isOriginOutsideView:th(e,r),isOverlayClipped:Z_(t,r),isOverlayOutsideView:th(t,r)}}_subtractOverflows(e,...t){return t.reduce((r,n)=>r-Math.max(n,0),e)}_getNarrowedViewportRect(){let e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,r=this._viewportRuler.getViewportScrollPosition();return{top:r.top+this._viewportMargin,left:r.left+this._viewportMargin,right:r.left+e-this._viewportMargin,bottom:r.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return t==="x"?e.offsetX==null?this._offsetX:e.offsetX:e.offsetY==null?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&hn(e).forEach(t=>{t!==""&&this._appliedPanelClasses.indexOf(t)===-1&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){let e=this._origin;if(e instanceof ot)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();let t=e.width||0,r=e.height||0;return{top:e.y,bottom:e.y+r,left:e.x,right:e.x+t,height:r,width:t}}};function cr(i,e){for(let t in e)e.hasOwnProperty(t)&&(i[t]=e[t]);return i}function tb(i){if(typeof i!="number"&&i!=null){let[e,t]=i.split(qx);return!t||t==="px"?parseFloat(e):null}return i||null}function ib(i){return{top:Math.floor(i.top),right:Math.floor(i.right),bottom:Math.floor(i.bottom),left:Math.floor(i.left),width:Math.floor(i.width),height:Math.floor(i.height)}}function Gx(i,e){return i===e?!0:i.isOriginClipped===e.isOriginClipped&&i.isOriginOutsideView===e.isOriginOutsideView&&i.isOverlayClipped===e.isOverlayClipped&&i.isOverlayOutsideView===e.isOverlayOutsideView}var rb="cdk-global-overlay-wrapper";function uh(i){return new oh}var oh=class{_overlayRef;_cssPosition="static";_topOffset="";_bottomOffset="";_alignItems="";_xPosition="";_xOffset="";_width="";_height="";_isDisposed=!1;attach(e){let t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(rb),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,r=this._overlayRef.getConfig(),{width:n,height:s,maxWidth:o,maxHeight:a}=r,l=(n==="100%"||n==="100vw")&&(!o||o==="100%"||o==="100vw"),u=(s==="100%"||s==="100vh")&&(!a||a==="100%"||a==="100vh"),c=this._xPosition,d=this._xOffset,p=this._overlayRef.getConfig().direction==="rtl",f="",y="",S="";l?S="flex-start":c==="center"?(S="center",p?y=d:f=d):p?c==="left"||c==="end"?(S="flex-end",f=d):(c==="right"||c==="start")&&(S="flex-start",y=d):c==="left"||c==="start"?(S="flex-start",f=d):(c==="right"||c==="end")&&(S="flex-end",y=d),e.position=this._cssPosition,e.marginLeft=l?"0":f,e.marginTop=u?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=l?"0":y,t.justifyContent=S,t.alignItems=u?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,r=t.style;t.classList.remove(rb),r.justifyContent=r.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}},Kx=(()=>{class i{_injector=P(he);constructor(){}global(){return uh()}flexibleConnectedTo(t){return Wx(this._injector,t)}static \u0275fac=function(r){return new(r||i)};static \u0275prov=Y({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function ch(i,e){i.get(_o).load(sb);let t=i.get(Dl),r=i.get(ve),n=i.get(Rl),s=i.get(Io),o=i.get(or),a=r.createElement("div"),l=r.createElement("div");l.id=n.getId("cdk-overlay-"),l.classList.add("cdk-overlay-pane"),a.appendChild(l),t.getContainerElement().appendChild(a);let u=new Pl(l,s,i),c=new bo(e),d=i.get(br,null,{optional:!0})||i.get(jt).createRenderer(null,null);return c.direction=c.direction||o.value,new wo(u,a,l,c,i.get(_e),i.get(Hx),r,i.get(df),i.get(Vx),e?.disableAnimations??i.get(Jh,null,{optional:!0})==="NoopAnimations",i.get(yr),d)}var Xx=(()=>{class i{scrollStrategies=P($x);_positionBuilder=P(Kx);_injector=P(he);constructor(){}create(t){return ch(this._injector,t)}position(){return this._positionBuilder}static \u0275fac=function(r){return new(r||i)};static \u0275prov=Y({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var Yx=new Ae("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{let i=P(he);return()=>lh(i)}});function Jx(i){let e=P(he);return()=>lh(e)}var Zx={provide:Yx,useFactory:Jx},ob=(()=>{class i{static \u0275fac=function(r){return new(r||i)};static \u0275mod=qe({type:i});static \u0275inj=Ve({providers:[Xx,Zx],imports:[ho,yo,po,po]})}return i})();function Qx(i,e){}var fn=class{viewContainerRef;injector;id;role="dialog";panelClass="";hasBackdrop=!0;backdropClass="";disableClose=!1;closePredicate;width="";height="";minWidth;minHeight;maxWidth;maxHeight;positionStrategy;data=null;direction;ariaDescribedBy=null;ariaLabelledBy=null;ariaLabel=null;ariaModal=!1;autoFocus="first-tabbable";restoreFocus=!0;scrollStrategy;closeOnNavigation=!0;closeOnDestroy=!0;closeOnOverlayDetachments=!0;disableAnimations=!1;providers;container;templateContext};var ek=(()=>{class i extends dn{_elementRef=P(ot);_focusTrapFactory=P(K_);_config;_interactivityChecker=P(Yd);_ngZone=P(_e);_focusMonitor=P(M_);_renderer=P(br);_platform=P(Te);_document=P(ve,{optional:!0});_portalOutlet;_focusTrap=null;_elementFocusedBeforeDialogWasOpened=null;_closeInteractionType=null;_ariaLabelledByQueue=[];_changeDetectorRef=P(No);_injector=P(he);_isDestroyed=!1;constructor(){super(),this._config=P(fn,{optional:!0})||new fn,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_addAriaLabelledBy(t){this._ariaLabelledByQueue.push(t),this._changeDetectorRef.markForCheck()}_removeAriaLabelledBy(t){let r=this._ariaLabelledByQueue.indexOf(t);r>-1&&(this._ariaLabelledByQueue.splice(r,1),this._changeDetectorRef.markForCheck())}_contentAttached(){this._initializeFocusTrap(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._isDestroyed=!0,this._restoreFocus()}attachComponentPortal(t){this._portalOutlet.hasAttached();let r=this._portalOutlet.attachComponentPortal(t);return this._contentAttached(),r}attachTemplatePortal(t){this._portalOutlet.hasAttached();let r=this._portalOutlet.attachTemplatePortal(t);return this._contentAttached(),r}attachDomPortal=t=>{this._portalOutlet.hasAttached();let r=this._portalOutlet.attachDomPortal(t);return this._contentAttached(),r};_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(t,r){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{let n=()=>{s(),o(),t.removeAttribute("tabindex")},s=this._renderer.listen(t,"blur",n),o=this._renderer.listen(t,"mousedown",n)})),t.focus(r)}_focusByCssSelector(t,r){let n=this._elementRef.nativeElement.querySelector(t);n&&this._forceFocus(n,r)}_trapFocus(t){this._isDestroyed||zt(()=>{let r=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||r.focus(t);break;case!0:case"first-tabbable":this._focusTrap?.focusInitialElement(t)||this._focusDialogContainer(t);break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]',t);break;default:this._focusByCssSelector(this._config.autoFocus,t);break}},{injector:this._injector})}_restoreFocus(){let t=this._config.restoreFocus,r=null;if(typeof t=="string"?r=this._document.querySelector(t):typeof t=="boolean"?r=t?this._elementFocusedBeforeDialogWasOpened:null:t&&(r=t),this._config.restoreFocus&&r&&typeof r.focus=="function"){let n=Tl(),s=this._elementRef.nativeElement;(!n||n===this._document.body||n===s||s.contains(n))&&(this._focusMonitor?(this._focusMonitor.focusVia(r,this._closeInteractionType),this._closeInteractionType=null):r.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(t){this._elementRef.nativeElement.focus?.(t)}_containsFocus(){let t=this._elementRef.nativeElement,r=Tl();return t===r||t.contains(r)}_initializeFocusTrap(){this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=Tl()))}static \u0275fac=function(r){return new(r||i)};static \u0275cmp=Ze({type:i,selectors:[["cdk-dialog-container"]],viewQuery:function(r,n){if(r&1&&Do(qd,7),r&2){let s;Uo(s=Lo())&&(n._portalOutlet=s.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(r,n){r&2&&Hl("id",n._config.id||null)("role",n._config.role)("aria-modal",n._config.ariaModal)("aria-labelledby",n._config.ariaLabel?null:n._ariaLabelledByQueue[0])("aria-label",n._config.ariaLabel)("aria-describedby",n._config.ariaDescribedBy||null)},features:[wi],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(r,n){r&1&&Ro(0,Qx,0,0,"ng-template",0)},dependencies:[qd],styles:[`.cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}
`],encapsulation:2})}return i})(),dr=class{overlayRef;config;componentInstance;componentRef;containerInstance;disableClose;closed=new re;backdropClick;keydownEvents;outsidePointerEvents;id;_detachSubscription;constructor(e,t){this.overlayRef=e,this.config=t,this.disableClose=t.disableClose,this.backdropClick=e.backdropClick(),this.keydownEvents=e.keydownEvents(),this.outsidePointerEvents=e.outsidePointerEvents(),this.id=t.id,this.keydownEvents.subscribe(r=>{r.keyCode===27&&!this.disableClose&&!Y_(r)&&(r.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{!this.disableClose&&this._canClose()?this.close(void 0,{focusOrigin:"mouse"}):this.containerInstance._recaptureFocus?.()}),this._detachSubscription=e.detachments().subscribe(()=>{t.closeOnOverlayDetachments!==!1&&this.close()})}close(e,t){if(this._canClose(e)){let r=this.closed;this.containerInstance._closeInteractionType=t?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),r.next(e),r.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(e="",t=""){return this.overlayRef.updateSize({width:e,height:t}),this}addPanelClass(e){return this.overlayRef.addPanelClass(e),this}removePanelClass(e){return this.overlayRef.removePanelClass(e),this}_canClose(e){let t=this.config;return!!this.containerInstance&&(!t.closePredicate||t.closePredicate(e,t,this.componentInstance))}},tk=new Ae("DialogScrollStrategy",{providedIn:"root",factory:()=>{let i=P(he);return()=>ah(i)}}),hh=new Ae("DialogData"),ik=new Ae("DefaultDialogConfig");function rk(i){let e=Ce(i),t=new si;return{valueSignal:e,get value(){return e()},change:t,ngOnDestroy(){t.complete()}}}var fh=(()=>{class i{_injector=P(he);_defaultOptions=P(ik,{optional:!0});_parentDialog=P(i,{optional:!0,skipSelf:!0});_overlayContainer=P(Dl);_idGenerator=P(Rl);_openDialogsAtThisLevel=[];_afterAllClosedAtThisLevel=new re;_afterOpenedAtThisLevel=new re;_ariaHiddenElements=new Map;_scrollStrategy=P(tk);get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}afterAllClosed=jh(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(bi(void 0)));constructor(){}open(t,r){let n=this._defaultOptions||new fn;r=v(v({},n),r),r.id=r.id||this._idGenerator.getId("cdk-dialog-"),r.id&&this.getDialogById(r.id);let s=this._getOverlayConfig(r),o=ch(this._injector,s),a=new dr(o,r),l=this._attachContainer(o,a,r);return a.containerInstance=l,this._attachDialogContent(t,a,l,r),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(a),a.closed.subscribe(()=>this._removeOpenDialog(a,!0)),this.afterOpened.next(a),a}closeAll(){dh(this.openDialogs,t=>t.close())}getDialogById(t){return this.openDialogs.find(r=>r.id===t)}ngOnDestroy(){dh(this._openDialogsAtThisLevel,t=>{t.config.closeOnDestroy===!1&&this._removeOpenDialog(t,!1)}),dh(this._openDialogsAtThisLevel,t=>t.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(t){let r=new bo({positionStrategy:t.positionStrategy||uh().centerHorizontally().centerVertically(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,width:t.width,height:t.height,disposeOnNavigation:t.closeOnNavigation,disableAnimations:t.disableAnimations});return t.backdropClass&&(r.backdropClass=t.backdropClass),r}_attachContainer(t,r,n){let s=n.injector||n.viewContainerRef?.injector,o=[{provide:fn,useValue:n},{provide:dr,useValue:r},{provide:wo,useValue:t}],a;n.container?typeof n.container=="function"?a=n.container:(a=n.container.type,o.push(...n.container.providers(n))):a=ek;let l=new un(a,n.viewContainerRef,he.create({parent:s||this._injector,providers:o}));return t.attach(l).instance}_attachDialogContent(t,r,n,s){if(t instanceof _r){let o=this._createInjector(s,r,n,void 0),a={$implicit:s.data,dialogRef:r};s.templateContext&&(a=v(v({},a),typeof s.templateContext=="function"?s.templateContext():s.templateContext)),n.attachTemplatePortal(new cn(t,null,a,o))}else{let o=this._createInjector(s,r,n,this._injector),a=n.attachComponentPortal(new un(t,s.viewContainerRef,o));r.componentRef=a,r.componentInstance=a.instance}}_createInjector(t,r,n,s){let o=t.injector||t.viewContainerRef?.injector,a=[{provide:hh,useValue:t.data},{provide:dr,useValue:r}];return t.providers&&(typeof t.providers=="function"?a.push(...t.providers(r,t,n)):a.push(...t.providers)),t.direction&&(!o||!o.get(or,null,{optional:!0}))&&a.push({provide:or,useValue:rk(t.direction)}),he.create({parent:o||s,providers:a})}_removeOpenDialog(t,r){let n=this.openDialogs.indexOf(t);n>-1&&(this.openDialogs.splice(n,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((s,o)=>{s?o.setAttribute("aria-hidden",s):o.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),r&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){let t=this._overlayContainer.getContainerElement();if(t.parentElement){let r=t.parentElement.children;for(let n=r.length-1;n>-1;n--){let s=r[n];s!==t&&s.nodeName!=="SCRIPT"&&s.nodeName!=="STYLE"&&!s.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){let t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}static \u0275fac=function(r){return new(r||i)};static \u0275prov=Y({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function dh(i,e){let t=i.length;for(;t--;)e(i[t])}var ab=(()=>{class i{static \u0275fac=function(r){return new(r||i)};static \u0275mod=qe({type:i});static \u0275inj=Ve({providers:[fh],imports:[ob,yo,X_,yo]})}return i})();function nk(i,e){i&1&&(te(0,"div",7),xe(1,"lib-loading-indicator",14),le()),i&2&&(je(),at("contentHeight",!0))}function sk(i,e){if(i&1&&xe(0,"img",8),i&2){let t=wt();at("src",t.imgMeta.value(),Ao)}}var lb=(()=>{class i{_data;dialogRef=P(dr);supabaseService=P(ma);idx=Ce(void 0);data=Sr(()=>{let t=this.idx();if(t===void 0)return;let r=this.supabaseService.imageMeta.value();if(r!==void 0)return r[t]});maxIdx=Sr(()=>{let t=this.supabaseService.imageMeta.value()?.length;if(t!==void 0)return t-1});minIdx=0;imgMeta=xi({params:()=>this.data(),loader:t=>m(this,null,function*(){let r=t.params.fullResPath,n=this.supabaseService.imageCacheService.readCachedFullResSignedUrl(r);if(n)return n;let s=this.supabaseService.partyHash();if(!s)return;let{data:o,error:a}=yield this.supabaseService.supabase.storage.from(s).createSignedUrl(r,43200);if(!o||a)throw new Error(a?.message||"data null");return this.supabaseService.imageCacheService.saveFullResSignedUrl(r,o.signedUrl,432e5),o.signedUrl})});constructor(t){this._data=t,this.idx.set(t.idx)}next(){this.idx.update(t=>{let r=t===void 0?void 0:t+1;return console.log(this.maxIdx()),(r??0)>(this.maxIdx()??0)?this.minIdx:r})}previous(){this.idx.update(t=>{let r=t===void 0?void 0:t-1;return(r??0)<this.minIdx?this.maxIdx():r})}download(){}static \u0275fac=function(r){return new(r||i)(Qh(hh))};static \u0275cmp=Ze({type:i,selectors:[["lib-image-viewer"]],decls:19,vars:1,consts:[[1,"w-[95dvw]","mx-auto","p-2"],[1,"bg-ivory","rounded-2xl","shadow-lg","overflow-hidden","border","border-primary-border"],[1,"flex","justify-end","p-2"],["type","button",1,"text-lg","text-nowrap","font-semibold","rounded-md","bg-ivory","px-3","py-2","shadow-xs","ring-1","ring-gold","ring-inset","text-gold",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","currentColor","stroke","currentColor","viewBox","0 0 320 512",1,"size-5","text-gold"],["d","M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"],[1,"w-full","h-[70vh]","flex","items-center","justify-center"],[1,"h-full","w-full"],["loading","lazy",1,"max-h-full","max-w-full","object-contain",3,"src"],[1,"text-center","p-3","w-full","flex","justify-between"],["d","M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l192 192c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256 246.6 86.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-192 192z"],["xmlns","http://www.w3.org/2000/svg","fill","currentColor","stroke","currentColor","viewBox","0 0 512 512",1,"size-5","text-gold"],["d","M288 32c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 242.7-73.4-73.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l128 128c12.5 12.5 32.8 12.5 45.3 0l128-128c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L288 274.7 288 32zM64 352c-35.3 0-64 28.7-64 64l0 32c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-32c0-35.3-28.7-64-64-64l-101.5 0-45.3 45.3c-25 25-65.5 25-90.5 0L165.5 352 64 352zm368 56a24 24 0 1 1 0 48 24 24 0 1 1 0-48z"],["d","M310.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-192 192c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L242.7 256 73.4 86.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l192 192z"],[3,"contentHeight"]],template:function(r,n){r&1&&(te(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),Ot("click",function(){return n.dialogRef.close()}),Tt(),te(4,"svg",4),xe(5,"path",5),le()()(),vr(),te(6,"div",6),Si(7,nk,2,1,"div",7)(8,sk,1,1,"img",8),le(),te(9,"div",9)(10,"button",3),Ot("click",function(){return n.previous()}),Tt(),te(11,"svg",4),xe(12,"path",10),le()(),vr(),te(13,"button",3),Ot("click",function(){return n.download()}),Tt(),te(14,"svg",11),xe(15,"path",12),le()(),vr(),te(16,"button",3),Ot("click",function(){return n.next()}),Tt(),te(17,"svg",4),xe(18,"path",13),le()()()()()),r&2&&(je(7),Ei(n.imgMeta.isLoading()?7:8))},dependencies:[Er,kl],styles:["[_nghost-%COMP%]{display:contents}"]})}return i})();var ok=["uppyContainer"],ph=i=>[i],ak=i=>({"animate-spin":i}),lk=(i,e)=>e.id;function uk(i,e){i&1&&xe(0,"lib-loading-indicator")}function ck(i,e){if(i&1){let t=Cn();te(0,"div",7)(1,"button",14),Ot("click",function(){wn(t);let n=wt(2);return Sn(n.triggerUppySelector())}),xn(2," Fotos ausw\xE4hlen "),le()()}}function dk(i,e){i&1&&(te(0,"div",9)(1,"div",15),Tt(),te(2,"svg",16),xe(3,"circle",17)(4,"path",18),le(),vr(),te(5,"span"),xn(6,"Galerie wird geladen..."),le()()())}function hk(i,e){if(i&1){let t=Cn();te(0,"div")(1,"div",20),Ot("click",function(){let n=wn(t).$implicit,s=wt(3);return Sn(s.openDialog(n))}),xe(2,"img",21),le()()}if(i&2){let t=e.$implicit;je(2),at("src",t.thumbnailSignedUrl,Ao)}}function fk(i,e){if(i&1&&(te(0,"cdk-virtual-scroll-viewport",10,1),Ro(2,hk,3,1,"div",19),le()),i&2){let t=wt(2);at("itemSize",t.imgHeight()),je(2),at("cdkVirtualForOf",t.supabaseService.imageMeta.value())("cdkVirtualForTrackBy",t.trackByFn)}}function pk(i,e){if(i&1){let t=Cn();Tt(),te(0,"svg",26),Ot("click",function(){wn(t);let n=wt(3);return Sn(n.supabaseService.imageMeta.reload())}),xe(1,"path",27),le()}if(i&2){let t=wt(3);at("ngClass",Ci(1,ak,t.supabaseService.imageMeta.isLoading()))}}function mk(i,e){i&1&&xe(0,"div",23)}function gk(i,e){if(i&1){let t=Cn();te(0,"button",22),Ot("click",function(){let n=wn(t).$implicit,s=wt(2);return Sn(s.activeTab.set(n))}),xe(1,"div",23),te(2,"span",24),xn(3),le(),Si(4,pk,2,3,":svg:svg",25)(5,mk,1,0,"div",23),le()}if(i&2){let t=e.$implicit,r=wt(2);at("ngClass",Ci(3,ph,r.activeTab().id===t.id?"border-gold":"border-transparent")),je(3),ql(t.name),je(),Ei(t.hideIcon?5:4)}}function yk(i,e){if(i&1&&(te(0,"div",2)(1,"div",3)(2,"h1",4),xn(3),le()(),te(4,"div",5)(5,"div",6,0),Si(7,ck,3,0,"div",7),le(),te(8,"div",8),Si(9,dk,7,0,"div",9)(10,fk,3,3,"cdk-virtual-scroll-viewport",10),le()(),te(11,"div",11)(12,"div",12),ef(13,gk,6,5,"button",13,lk),le()()()),i&2){let t,r=wt();je(3),ql((t=r.supabaseService.mandatoryMeta.value())==null?null:t.header_name),je(2),at("ngClass",Ci(5,ph,r.activeTab().id==="upload"?"flex":"hidden")),je(2),Ei(r.showFileButton()?7:-1),je(),at("ngClass",Ci(7,ph,r.activeTab().id==="gallery"?"z-10":"-z-50")),je(),Ei(r.supabaseService.imageMeta.isLoading()||!r.supabaseService.imageMeta.hasValue()?9:10),je(4),tf(r.tabs())}}var ub=(()=>{class i{dialog=P(fh);route=P(pf);supabaseService=P(ma);tabs=Ce([{id:"upload",name:"Hochladen",hideIcon:!0},{id:"gallery",name:"Galerie",hideIcon:!1}]);activeTab=Ce(this.tabs()[0]);activeTab$=Mi(this.activeTab);galleryContainer=Gl(ln);galleryContainer$=Mi(this.galleryContainer);uppyContainer=Gl("uppyContainer");uppyContainer$=Mi(this.uppyContainer);uppyReadyToLoad=Sr(()=>{let t=this.uppyContainer(),r=this.supabaseService.anonUser.value();return t?.nativeElement!==void 0&&r?.session?.access_token!==void 0});uppyReadyToLoad$=Mi(this.uppyReadyToLoad);uppy=Ce(void 0);imgHeight=Ce(200);showFileButton=Ce(!0);trackByFn(t,r){return r.id}triggerUppySelector(){document.querySelector("[data-uppy-super-focusable]").click()}observer;constructor(){this.uppyReadyToLoad$.pipe(Rr(),_i(t=>t===!0)).subscribe(()=>this.initUppy()),this.uppyContainer$.pipe(Rr(),_i(t=>!!t)).subscribe(t=>{this.observer?.disconnect(),this.observer=new MutationObserver(()=>{let r=document.querySelector(".uppy-Dashboard-AddFiles-title");this.showFileButton.set(r!==null)}),this.observer.observe(t?.nativeElement,{childList:!0,subtree:!0})}),this.galleryContainer$.pipe(Rr()).subscribe(t=>{let r=t?.elementRef.nativeElement;if(!r)return;let n=(r.clientWidth-16-32)*.7/4;this.imgHeight.set(n)}),this.activeTab$.pipe(Rr()).subscribe(t=>{if(t.id!=="upload")switch(this.supabaseService.imageMeta.status()){case"idle":this.supabaseService.imageMetaActive.set(!0);break}}),this.route.queryParams.pipe(Rr()).subscribe(t=>{let r=t[pa];this.supabaseService.partyHash.set(r)})}initUppy(){document.querySelector(".uppy-Root")===null&&this.uppy.set(new Ca({debug:!1,autoProceed:!1,locale:T_}).use(nn,{inline:!0,showProgressDetails:!0,disableThumbnailGenerator:!1,height:"100%",target:"[uppy-container]"}).use(pi,{thumbnailHeight:300}).use(xl,{quality:.8}).use(Us,{endpoint:this.supabaseService.supabaseStorageURL,headers:{authorization:`Bearer ${this.supabaseService.anonUser.value()?.session?.access_token}`,apikey:this.supabaseService.supabaseToken.supabaseKey},uploadDataDuringCreation:!0,chunkSize:6*1024*1024,allowedMetaFields:["bucketName","objectName","contentType","cacheControl"],onError:function(r){console.log("Failed because: "+r)}}).on("file-added",r=>{let n=this.supabaseService.partyHash(),s={bucketName:n,objectName:`${n}/${r.name}`,contentType:r.type};console.log(s),r.meta=v(v({},r.meta),s)}).on("complete",r=>{this.supabaseService.imageMetaActive.set(void 0),console.log("Upload complete! We\u2019ve uploaded these files:",r.successful)}).on("upload-success",r=>m(this,null,function*(){if(console.log("upload-success",r),!r?.name||!r?.preview)return;let n=this.supabaseService.partyHash(),s=`${fa}${r.name}`,o=`${n}/${ha}/${s}`,l=yield(yield fetch(r.preview)).blob(),u=new File([l],s,{type:r.type});yield this.supabaseService.supabase.storage.from(n).upload(o,u)})))}ngOnDestroy(){this.observer?.disconnect()}openDialog(t){this.dialog.open(lb,{data:{idx:t.idx}})}static \u0275fac=function(r){return new(r||i)};static \u0275cmp=Ze({type:i,selectors:[["lib-gallery-page"]],viewQuery:function(r,n){r&1&&(Vl(n.galleryContainer,ln,5),Vl(n.uppyContainer,ok,5)),r&2&&sf(2)},decls:2,vars:1,consts:[["uppyContainer",""],["galleryContainer",""],[1,"h-dvh","w-dvw","flex","flex-col","overflow-hidden"],[1,"flex","items-center","justify-center","p-4","flex-initial","text-gold","bg-ivory"],[1,"text-3xl","font-semibold"],[1,"flex-1","flex","justify-center","items-center","flex-col","relative","overflow-hidden"],["uppy-container","",1,"max-w-full","flex-col","flex-auto","gap-2","relative","h-full","overflow-hidden",3,"ngClass"],[1,"absolute","inset-0","flex","justify-center","items-center"],[1,"flex-auto","w-full","flex","flex-col","absolute","inset-0",3,"ngClass"],[1,"flex-auto","w-full","flex","justify-center","items-center","bg-ivory"],["appendOnly","",1,"p-4","flex-auto","w-full","bg-ivory",3,"itemSize"],[1,"border-t","border-primary-border","flex-initial","bg-ivory"],[1,"-mb-px","flex"],[1,"flex-1","border-t-2","px-1","py-4","text-center","text-lg","font-semibold","text-gold","flex","gap-2","items-center",3,"ngClass"],["type","button",1,"z-[2000]","text-lg","text-nowrap","font-semibold","rounded-md","bg-ivory","px-3","py-2","shadow-xs","ring-1","ring-gold","ring-inset","text-gold",3,"click"],[1,"flex","gap-2","items-center"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"size-5","animate-spin","text-gold"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],[4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy"],[1,"group","overflow-hidden","rounded-lg","bg-gray-100","focus-within:ring-2","focus-within:ring-indigo-500","focus-within:ring-offset-2","focus-within:ring-offset-gray-100",3,"click"],[1,"pointer-events-none","aspect-10/7","object-cover","group-hover:opacity-75",3,"src"],[1,"flex-1","border-t-2","px-1","py-4","text-center","text-lg","font-semibold","text-gold","flex","gap-2","items-center",3,"click","ngClass"],[1,"flex-1"],[1,"flex-2"],["xmlns","http://www.w3.org/2000/svg","height","20","width","20","viewBox","0 0 512 512",1,"flex-1","size-5","text-gold","fill-gold",3,"ngClass"],["xmlns","http://www.w3.org/2000/svg","height","20","width","20","viewBox","0 0 512 512",1,"flex-1","size-5","text-gold","fill-gold",3,"click","ngClass"],["fill","currentColor","d","M105.1 202.6c7.7-21.8 20.2-42.3 37.8-59.8c62.5-62.5 163.8-62.5 226.3 0L386.3 160 352 160c-17.7 0-32 14.3-32 32s14.3 32 32 32l111.5 0c0 0 0 0 0 0l.4 0c17.7 0 32-14.3 32-32l0-112c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 35.2L414.4 97.6c-87.5-87.5-229.3-87.5-316.8 0C73.2 122 55.6 150.7 44.8 181.4c-5.9 16.7 2.9 34.9 19.5 40.8s34.9-2.9 40.8-19.5zM39 289.3c-5 1.5-9.8 4.2-13.7 8.2c-4 4-6.7 8.8-8.1 14c-.3 1.2-.6 2.5-.8 3.8c-.3 1.7-.4 3.4-.4 5.1L16 432c0 17.7 14.3 32 32 32s32-14.3 32-32l0-35.1 17.6 17.5c0 0 0 0 0 0c87.5 87.4 229.3 87.4 316.7 0c24.4-24.4 42.1-53.1 52.9-83.8c5.9-16.7-2.9-34.9-19.5-40.8s-34.9 2.9-40.8 19.5c-7.7 21.8-20.2 42.3-37.8 59.8c-62.5 62.5-163.8 62.5-226.3 0l-.1-.1L125.6 352l34.4 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L48.4 288c-1.6 0-3.2 .1-4.8 .3s-3.1 .5-4.6 1z"]],template:function(r,n){r&1&&Si(0,uk,1,0,"lib-loading-indicator")(1,yk,15,9,"div",2),r&2&&Ei(n.supabaseService.mandatoryMeta.status()!=="resolved"?0:1)},dependencies:[Er,jo,po,C_,k_,ln,kl,ab],styles:["[_nghost-%COMP%]{display:contents}"]})}return i})();var DM=[{path:"",component:ub}];export{ub as GalleryPageComponent,DM as imageUploaderRoutes};
